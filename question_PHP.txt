php初心者です。 タイトルの通り、異なるクライアント間で同じ変数を参照したいのですが、SESSION変数やSERVER変数ではできないようなので質問させていただきました。 具体的には、チャットシステムを組んでいます。 チャット内容など詳細なデータはデータベースに記録しているのですが、更新確認のたびにデータベースを呼び出していては遅くなるのではないかと考え、更新があったかどうか（最終更新日時とか）を複数のクライアントが参照できる変数に格納したいのです。 なお、チャットの実装方法としては、クライアント側から定期的（数秒ごと）に更新確認をさせています。ソケット通信というものも試したいのですが、現在の環境ではできないため見送りました。 異なるクライアント間で参照できる変数はありますか？または定義できますか？ それともデータベースを毎回呼び出していても速度的には問題ないでしょうか？
シンプルな掲示板（管理者がユーザーの投稿内容を認証して掲示）を サーバに搭載しようと思っています。 掲示板ということは、内容を保存しないといけないのですが、 メンテナンス・サーバ移行を簡単にしたいとなると、 DB（MYSQL？）とファイルをDirに保存するのと、 どちらがいいのでしょうか？ できるだけ知識のない人がメンテナンスできるようにしたいです。
php初心者です。 同じような処理をまとめて、関数にしました。 debug中なので、function()ひとつに　ひとつのphpファイル名をつけています。 あとで合体するつもりで。 当然、requireの数が複数になっていますが、requireの行（冒頭）でエラーになってしまいました。 echoで1行ずつ表示して確認しました。原因がわからず順番を変えたりpath指定を変更したりしたのですが、読み込んでくれません。 なので、処理直前で必要な関数を読み込むようにしたりもしたのですが 冒頭で require (dirname(__FILE__)."/include/******.inc"); require (dirname(__FILE__)."/include/******chk.php"); require (dirname(__FILE__)."/../include/******m.inc"); require (dirname(__FILE__)."/m******.php"); require (dirname(__FILE__)."/m******andom.php"); require (dirname(__FILE__)."/m******time_client.php"); require (dirname(__FILE__)."/error_******.php"); require (dirname(__FILE__)."/log******.php"); まではクリアできました。 （path指定が混ざってますがいろいろ試したので。。。） で、ある関数を呼ぶ直前に require (dirname(__FILE__)."/lfunc*****.php"); としたのですが /lfunc*****.php　に飛ばないんです。 （echoが出ない） こういうのはどのような原因があるのでしょうか？ ちょっと思ったのですが、何か重複してるのでしょうか？ 似たような変数名が多くなってますが、requireした中のfunctionの中なら 別の変数として扱われますよね？ 一応構文チェックなどはちゃんと　no シンタックスエラーを確認しています。 ログにもかかれないし。 すみません、php初心者にアドバイスお願いします。
超初心者です。プロ向けのカテゴリからで恐縮ですが、教えてください。 いろいろ調べてapacheが起動できないのは、「システムと圧縮」というやつが通信窓口？を使っているらしいというところまで突き止めました。しかし、「システムと圧縮」をどう無効化するか調べると 「SuperFetch」を無効にするというのしか出てきません。 「SuperFetch」というのを無効かしても大丈夫なのかというのを調べたところ、そんなことする奴はバカだ(;^_^Aというようなことが書いてあり、そもそもＰＩＤ４を使っている「システムと圧縮」自体を無効かしないと意味ないんじゃないかなとも思います。 最初xammpをダウンロードしたときはapacheもmysqlも起動できていて、mysqlのadminボタンを押してもブラウザ表示でき無かったので、いろいろと調べてるうちにいつの間にかapacheが起動できなくなってました。設定などは全く把握してないので一切いじってません。 「システムと圧縮」を無効かするには「SuperFetch」を無効かする以外に手だてはあるでしょうか？ご教示ください。
phpでwebアプリを作成しています。 例えば、windowsでいうiniファイルに似たようなファイルを作成し、 そのファイルにdbopen情報を持たせてopenしたいのです。 global変数を使うということで、試しているのですが、うまくいきません。 　※postgresqlを使っています。 ・sysparm.inc <?php $inf1="1111"; $inf2="user"; $inf3="pass"; $inf4="name"; ?> ・dbaccess.php <?php include ("./include/sysparm.inc"); $dbinfo = "port=".$inf1 . " user=".$inf2." password=".$inf3." dbname=".$inf4; 　　・ 　　・ 　　・ この$dbinfo 情報でopenしたいのですが、$inf1～$inf4まで何もはいってきません。 こういう場合、dbaccess.phpの　$inf1～$inf4 まで”global" をつけるんでしょうか？ つけて試したのですが、入ってきませんでした。 この方法は、windows版で言う GetPrivateProfileString・・・の用なことをしたくてたどり着きました。 最初はファイルを読んで、dbアクセス情報を取得していたのですが。。。 結局includeされていないのでしょうか？ includeのパスの指定も　dirname(__FILE__)."/include/sysparm.inc" のようにしてみてもだめでした。 どんな書き方、使い方が正解なのか、教えていただけないでしょうか？ すみません、よろしくお願いいたします。
よろしくお願いします。現在ZIPにしたものをheaderで出力したいのですが、 その場で解凍した際にフォルダを開くことができません無効ですと表示されます。 原因がわからず困っています。ヒントでも頂ければ助かります。 if(isset($_POST["upload"])){ $dir = file_zone; // Zipファイルの保存先 $file = "./Zipfile/" . date("his") .'.zip'; $root = ""; zipDirectory($dir, $file,$root); } function zipDirectory($dir, $file, $root){ $zip = new ZipArchive(); $res = $zip->open($file, ZipArchive::CREATE); if($res){ // $rootが指定されていればその名前のフォルダにファイルをまとめる if($root != "") { $zip->addEmptyDir($root); $root .= DIRECTORY_SEPARATOR; } $baseLen = mb_strlen($dir); $iterator = new RecursiveIteratorIterator( new RecursiveDirectoryIterator( $dir, FilesystemIterator::SKIP_DOTS |FilesystemIterator::KEY_AS_PATHNAME |FilesystemIterator::CURRENT_AS_FILEINFO ), RecursiveIteratorIterator::SELF_FIRST ); $list = array(); foreach($iterator as $pathname => $info){ $localpath = $root . mb_substr($pathname, $baseLen); if( $info->isFile() ){ $zip->addFile($pathname, $localpath); } else { $res = $zip->addEmptyDir($localpath); } } $zip->close(); } else { return false; } header('Content-Type: application/octet-stream'); header(sprintf('Content-Disposition: attachment; filename="%s"',basename($file))); header(sprintf('Content-Length: %d', filesize($file)) ); readfile($file); }
失礼します、現在指定したディレクトリにzipファイルを作成しているのですが、Zip名の頭に日付を付けたいです。 dateを使用しているのですが上手くいきませんストリームに出力する際のファイル名にdateはうまくいきましたが指定したディレクトリに保存した際のファイル名がうまくいきません。 自身でZipファイルの保存先にdateを使用してみましたがエラーが出てしまいます。 よろしくお願いします。 if(isset($_POST["upload"])){ $dir = file_zone; // Zipファイルの保存先 $file = './Zipfile/test.zip'; $root = ""; zipDirectory($dir, $file,$root); } function zipDirectory($dir, $file, $root){ $zip = new ZipArchive(); $res = $zip->open($file, ZipArchive::CREATE); if($res){ // $rootが指定されていればその名前のフォルダにファイルをまとめる if($root != "") { $zip->addEmptyDir($root); $root .= DIRECTORY_SEPARATOR; } $baseLen = mb_strlen($dir); $iterator = new RecursiveIteratorIterator( new RecursiveDirectoryIterator( $dir, FilesystemIterator::SKIP_DOTS |FilesystemIterator::KEY_AS_PATHNAME |FilesystemIterator::CURRENT_AS_FILEINFO ), RecursiveIteratorIterator::SELF_FIRST ); $list = array(); foreach($iterator as $pathname => $info){ $localpath = $root . mb_substr($pathname, $baseLen); if( $info->isFile() ){ $zip->addFile($pathname, $localpath); } else { $res = $zip->addEmptyDir($localpath); } } $zip->close(); } else { return false; } header('Content-Type: application/octet-stream'); header(sprintf('Content-Disposition: attachment; filename="%s"', date(ymdhis).basename($file))); header(sprintf('Content-Length: %d', filesize($file)) ); readfile($file); }
お世話になります。 どうやってもうまくいかないので、質問させていただきます。 phpでログファイルを書き込むようにしたいのですが、 ファイルが作成されません。 根本的なところができていないのだと思いますが、教えてください。 やりたいことは、指定のパス（docomwnt_root配下の/logまたは　include/log） にyyyymmdd.logで、テキストを書き込みたいのです。 いろいろ調べて、ディレクトリの場合は 0777、ファイルは0666にchmodすればよいとのことで 変更したのに、ファイルがないといわれてしまいます。 ソースコードは以下になります。 すみません、試行錯誤の名残とdebug行が入っています。 <?php //function logout($content){ $content="test"; error_log($content,0); //ログファイル設定 //$logpath = '/log'; //if( !is_dir($logpath) ){ //die("ディレクトリが存在しません -->". $logpath); //} //日時取得 $dateobj = new DateTime(); //アクセスタイム取得 $accessTime=$dateobj->format('Y-m-d H:i:s'); //書き込む内容 $log = $accessTime . " " . $content . "\n"; // ファイル名 $date = $dateobj->format('Ymd'); //$filename = realpath( $logpath ) . '/'.$date . '.log'; //$filename = dirname(__FILE__) . '/log/'. $date . '.log'; $filename = $date . '.log'; echo $filename; $directory_path = "./log"; if( mkdir( $directory_path, 0777) ){ echo "ok<br>"; chmod( $directory_path, 0777); } else{ echo "ng<ng>"; } if( !$fp = fopen($filename, 'ab') ){ echo "cannot open file($filename)<br>"; return -1; } if( !$fp = flock($fp, FILE_APPEND | LOCK_EX) ){ echo "cannot open file($filename)"; return -1; } if( fwrite($fp, $content) === FALSE){ echo "cannot write file($filename)<br>"; return -1; } if( !fclose($fp) ){ echo "cannot close file($filename)"; return -1; } //return 0; //} ?> この場合だと　cannot open file になってしまいます。 windowsばかりやってきていたのでlinuxは、、、わかりません。 いろいろ、サンプルを試しているのですが、うまくいかなくて。。。 すみません、ご指導よろしくお願いいたします。
現在指定したディレクトリを中にあるサブディレクトリやファイルを丸ごと階層構造を維持したまま圧縮したいのですが、うまくいきません下記のサイトを参考にしましたがエラーが出てしまいます。例外処理らしいのですが、ドキュメントを読んでもエラーの内容がうまく理解ができません よろしくお願いします。 http://php-archive.net/php/zip-directory/ エラー文 Fatal error: Uncaught Error: Call to undefined function zipDirectory() in C:\MAMP\htdocs\upload\upload-file.php:134 Stack trace: #0 {main} thrown in C:\MAMP\htdocs\upload\upload-file.php on line 134 コード define("file_zone","C:/MAMP/htdocs/upload/test/"); if(isset($_POST["download"])){ // 圧縮するディレクトリー $dir = dirname(__FILE__) . '/test/'; // Zipファイルの保存先 $file = dirname(__FILE__); zipDirectory($dir, $file); // ディレクトリを圧縮する function zipDirectory($dir, $file, $root=""){ $zip = new ZipArchive(); $res = $zip->open($file, ZipArchive::CREATE); if($res){ // $rootが指定されていればその名前のフォルダにファイルをまとめる if($root != "") { $zip->addEmptyDir($root); $root .= DIRECTORY_SEPARATOR; } $baseLen = mb_strlen($dir); $iterator = new RecursiveIteratorIterator( new RecursiveDirectoryIterator( $dir, FilesystemIterator::SKIP_DOTS |FilesystemIterator::KEY_AS_PATHNAME |FilesystemIterator::CURRENT_AS_FILEINFO ), RecursiveIteratorIterator::SELF_FIRST ); $list = array(); foreach($iterator as $pathname => $info){ $localpath = $root . mb_substr($pathname, $baseLen); if( $info->isFile() ){ $zip->addFile($pathname, $localpath); } else { $res = $zip->addEmptyDir($localpath); } } $zip->close(); } else { return false; } } }
クッキーを用いて、本人確認メールの利用期限を管理したいと思っています。 どのようなスクリプトを書いていいのか思いつきません。 どなたかご教授お願いできますでしょうか？ ちなみに本人確認メールでは何をしているかと言うと、 仮登録会員がその中にあるアンカーを押すことで、正規会員にしたいのですが その際にクッキーを利用しようと考えているのです。 例）setcookie("pre_member_regist", $email, time()+3600＊24); // 24時間分の仮登録クッキー発行 ～ if(!$_COOKIE["pre_member_regist"]){ // 24時間制限の仮登録クッキーが消滅していれば $sql = "DELETE FROM member_profile WHERE member_kakutei=2 AND email='$email';"; mysql_query($sql) or die(mysql_error()); } このスクリプトに拘ることなく、スクリプト例をお教えいただければ幸いです。
現在サブディレクトリの中のファイルも含めZipファイルを作成していのですがうまくいきません 説明がうまくできませんが下記のサブディレクトリのtestだけが表示されファイルが取得できません。できればpath_uploadの中を階層を変えずzipで圧縮して取得したいです。 なにとぞよろしくお願いします。 path_upload----test-----test.txt |--test2.txt |--test3.txt コード define("file_zone","C:/MAMP/htdocs/upload/path_upload"); if(isset($_POST["download"])){ $path = file_zone; $files = scandir($path); $zip = new ZipArchive($files); // Zipファイル名 $zipFileName = date("Ymd") .'.zip'; // Zipファイル一時保存ディレクトリ $zipTmpDir = file_zone; // Zipファイルオープン $result = $zip->open($zipTmpDir.$zipFileName, ZIPARCHIVE::CREATE | ZIPARCHIVE::OVERWRITE); if ($result !== true) { // 失敗した時の処理 } // 処理制限時間を外す set_time_limit(0); foreach ($files as $filepath) { $filename = basename($filepath); // 取得ファイルをZipに追加していく $zip->addFromString($filename,file_get_contents($filepath)); } $zip->close(); // ストリームに出力 if(ini_get('zlib.output_compression')) ini_set('zlib.output_compression', 'Off'); header('Content-Type: application/zip; name="' . $zipFileName . '"'); header('Content-Disposition: attachment; filename="' . $zipFileName . '"'); header('Content-Length: '.filesize($zipTmpDir.$zipFileName)); echo file_get_contents($zipTmpDir.$zipFileName); // 一時ファイルを削除しておく // unlink($zipTmpDir.$zipFileName); }
PHPで作成したZipファイルが展開できません ダブルクリックで展開すると無効ですと表示されます。 よろしくお願いします。 define("file_zone","C:/MAMP/htdocs/upload/test/"); if(isset($_POST["download"])){ $path = file_zone; $files = scandir($path); $zip = new ZipArchive($files); // Zipファイル名 $zipFileName = "file_" . date("Ymds") .'.zip'; // Zipファイル一時保存ディレクトリ $zipTmpDir = file_zone; // Zipファイルオープン $result = $zip->open($zipTmpDir.$zipFileName, ZIPARCHIVE::CREATE | ZIPARCHIVE::OVERWRITE); if ($result !== true) { // 失敗した時の処理 } // 処理制限時間を外す set_time_limit(0); foreach ($files as $filepath) { $filename = basename($filepath); // 取得ファイルをZipに追加していく $zip->addFromString($filename,file_get_contents($filepath)); } $zip->close(); // ストリームに出力 header('Content-Type: application/zip; name="' . $zipFileName . '"'); header('Content-Disposition: attachment; filename="' . $zipFileName . '"'); header('Content-Length: '.filesize($zipTmpDir.$zipFileName)); echo file_get_contents($zipTmpDir.$zipFileName); // 一時ファイルを削除しておく // unlink($zipTmpDir.$zipFileName); }
失礼します。echo の中の変数をaタグで囲いたいのですがやり方がわかりません。 よろしくお願いします。 foreach($files as $file_path => $file_info) { if (!$file_info->isFile()) { continue; } echo 'file path : ' .$file_path ."</br>"; echo 'file size : '. $file_info->getSize() ."</br>"; echo 'contents : '. file_get_contents($file_path) ."</br>"; }
初めてphpを触っています。 いくつかの処理を外部ファイルにしたいのですが パスの指定が悪いのか、同じ階層に置いたり、いろいろ試してもfatal error ばかりです。 どこが悪いのか、教えていただけないでしょうか？ サンプルとして、moto.phpのなかのincludeフォルダー内の外部ファイル：func.phpを実行することとします。 moto.php ＜?php require "./include/func.php"); $a = 2; $b = 1; $c = $a - $b * $a; echo return_word($a); echo "<br>"; //改行 echo return_word($b); echo "<br>"; //改行 echo return_word($c); ?＞ func.php ＜? php function return_word ( $data ){ if ( $a==1){ return "a"; }else if ($a==2){ return "b"; }else{ return "c"; } } ?＞ コマンドラインから　php moto.php　を実行すると <? php function return_word ( $data ){ if ( $a==1){ return "a"; }else if ($a==2){ return "b"; }else{ return "c"; } } ?> Fatal error: Call to undefined function return_word() in C:\xxxxxx\php\moto.php on line 9 となってしまいます。 外部ファイルは見えているようなのに、どうして関数がundefined になってしまうのでしょうか？ phpの基本的なことなのかもしれませんが よろしくアドバイスお願いできればと思います。
formに入力されたファイルサイズが一致しているか確認したいです。 よろしくお願いします。 php $filesize = ''; $filesize = filesize($_FILES['upfile']['tmp_name'] ); if ($filesize !== ($_POST["size_name"])){ echo "ファイルサイズの値が一致しません"; exit; }
こんにちは。 PHPで下記のことを実装しようとしていますが、なかなかうまく行きません。 http://example.com/aaa というURLにアクセスがあった場合、「aaa」だけを抜き出して処理する、 ということを実装したいのですが、上記アドレスにアクセスするとNotFoundになってしまいます。 上記の場合、「aaaというファイルを探しにいく」という処理がされているためNotFoundになることは分かるのですが、どのようにすればindex.phpでaaaをパラメータとして受け取れるのでしょうか？ ※システムの都合上、http://example.com/?id=aaaという風には出来ません。 大変恐縮ですがご教授いただけるとありがたいです。
PHP初心者です。HTMLとPHPを使って、アンケートフォームを作っています。 ネットで色々と調べていたのですが、基本の構成がわからないので教えてください。 HTMLとPHPの別々のファイルで構成されているフォームと、HTMLにPHPを書き込みをしてHTMLの１つのファイルで構成しているものなどがありました。どの方法でやるとよいのでしょうか？ また、同じ内容でもPHPの書き方が違うような感じがするのですが、PHPには同じ動作でも沢山の書き方があるのでしょうか？ウェブサイトによって書き方が違うので少し混乱しています。 [アンケートフォーム内容] テキスト・複数行のテキスト・メール・ラジオボックス・チェックボックス・添付ファイル（添付ファイルは難しいのであれば、無しにします）のフォームの部品をいれたいです。 [動作] １、顧客がアンケートフォームの入力 ２、入力内容を私のメールに転送する のシンプルな動作です。 また、ラジオボタンやチェックボックスをつけると、PHPの構文が難しくなるのでしょうか？ 宜しくお願いします。
3枚のファイルの最初のファイル 「qz_add.php」 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01Transitional//EN"> <html> <head> <META http-equiv="Content-Type" content="text/html; charset=utf-8"> <META http-equiv="Content-Style-Type" content="text/css"> <link rel="stylesheet" href="mystyle2.css" type="text/css" /> <title>東小掲示板参加メニュウ</title> </head> <body> 東小掲示板会員参加メニュウ<br /><br /> <form method="post"action="qz_add_check.php"> ニックネームを入力してください。<br> <input type="text"name="id"style=width:200px"><br /> パスワードを入力してください。<br> <input type="password"name="pas"style=width:100px"><br /> パスワードをもう一度入力してください。<br> <input type="password"name="pas2"style=width:100px"><br /> 名前を入力してください。<br> <input type="text"name="nam"style=width:200px"><br /> <input type="button"onclick="history.back()"value="戻る"> <input type="submit" value="OK"></p </form> </body> </html> 3枚のファイルの2枚目のファイル 「qz_add_check.php」 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01Transitional//EN"> <html> <head> <META http-equiv="Content-Type" content="text/html; charset=UTF-8"> <META http-equiv="Content-Style-Type" content="text/css"> <link rel="stylesheet" href="mystyle2.css" type="text/css" /> <title>入力チック</title> </head> <body> <?php $id=$_POST['id']; $pas=$_POST['pas']; $pas2=$_POST['pas2']; $nam=$_POST['nam']; $id=htmlspecialchars($id); $pas=htmlspecialchars($pas); $pas2=htmlspecialchars($pas2); $nam=htmlspecialchars($nam); if($id=='') { print 'ニックネームが入力されていません。<br />'; } else { print'ニックネーム名:'; print $id; print'<br />'; } If($pas=='') { print'パスワードが入力されていません。<br />'; } if($pas!=$pas2) { print 'パスワードが一致しません。<br />'; } if($nam=='') { print 'お名前が入力されていません。<br />'; } else { print'お名前:'; print $nam; print'<br />'; } if($id==''||$pas==''||$pas=$pas2==''||$nam=='') //if($staff_name==''||$staff_pass==''||$staff_pass!=$staff_pass2) { print'<form>'; print'<input type="button"onclick="history.back()"value="戻る">'; print'</form>'; } else { $pas=md5($pas); print'<form method="post"action="qz_add_done.php">'; print'<input type="hidden"name="id"value="'.$id.'">'; print'<input type="hidden"name="pas"value="'.$pas.'">'; print'<input type="hidden"name="nam"value="'.$nam.'">'; print'<br/>'; print'<input type="button"onclick="history.back()"value="戻る">'; print'<input type="submit" value="OK">'; print'</form>'; } ?> </body> </html> 3枚のファイルの最後のファイル　ＤＢ接続 「qz_add_done.php」 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01Transitional//EN"> <html> <head> <META http-equiv="Content-Type" content="text/html; charset=UTF-8"> <META http-equiv="Content-Style-Type" content="text/css"> <link rel="stylesheet" href="mystyle2.css" type="text/css" /> <title>DBに追加</title> </head> <body> <?php try { $id=$_POST['id']; $pas=$_POST['pas']; $nam=$_POST['nam']; $id=htmlspecialchars($id); $pas=htmlspecialchars($pas); $nam=htmlspecialchars($nam); $dsn = 'mysql:dbname=db;host=localhost'; $user = 'root'; $password = '0200abcd'; $dbh = new PDO($dsn, $user, $password); $dbh->query('SET NAMES utf8'); $sql ='INSERT INTO table2 (id,pas,nam) VALUES (?,?,?)'; //$sql ='INSERT INTO table2 (id,md5(pass),nam) VALUES (?,?,?)'; $stmt = $dbh->prepare($sql); $data[] = $id; $data[] = $pas; $data[] = $nam; $stmt->execute($data); $dbh = null; print $id; print'さんを追加しました。<br />'; } catch(Exception $e) { print'只今障害により大変ご迷惑をおかけしています。'; exit(); } ?> <a href="gz_logon.php">戻る</a> </body> </html> mysqlのパスワードの値が32の文字列が表示されます。d41d8cd98f00b204e9800998ecf8427e ID番号と名前を変えても上記のパスワードが表示されます。どこにミスがあるか、教えて頂ければ幸いです。
販売サイトや、SNSでよくある本人確認メール（呼び方は知りません）の書き方について ご質問です。 ちなみに、自分で勝手な想像で作成したスクリプトを書いておきます。 どこが間違っているのかご指摘お願い致します。 -------------------------------------------------------------------------------------------------- //////////////////////// // 本人確認メール送信 // //////////////////////// $mail = $_SESSION['mail']; $con = mysql_connect("～", "～", "～"); mysql_select_db("～-～"); mysql_set_charset('utf8'); $sql = "SET NAMES utf-8"; mysql_query($sql); $sql = "SELECT * FROM member_profile WHERE email='$mail';"; $result = mysql_query($sql) or die; $row = mysql_fetch_row($result); $name = $row[2]; mysql_close($con); $header = "From:raindrop.jp-5247423＠～.jp Content-Type:text/html; charset=ISO-2022-JP Content-Transfer-Encoding:8bit "; $top = $name.' 様<br><br>'; $aisatsu .= "～への会員登録のお申し込みありがとうございます。<br> まだ登録は完了しておりません。下記URLから登録を完了してください。<br><br>"; $html_header = '<doctype html><html><head><meta charset="ISO-2022-JP"></head><body bgcolor="#FFFFCC">'; $html_footer = '</body></html>'; $uniqid = uniqid(); $anchor = '<a href="http://～/php/membership_kakutei.php?from=1">http://sirius5.link/register/confirm/'.$uniqid.'</a>'; $contents="<br><br> ==================================================<br> このメッセージは～より自動的に送信しております。<br> このメールにお心当たりのない場合は、このメールを破棄してください。<br> ==================================================<br> <br> <br> <br> -----------------------------------------------------------<br> ～<br> http://daiko-king.com <br> -----------------------------------------------------------<br> "; ////////////////////////// // 新規登録者宛にメール // ////////////////////////// $message = $html_header.$top.$aisatsu.$anchor.$contents.$html_footer; $to = $mail; $subject = "【～】 仮登録完了"; // 題名 $to = mb_convert_encoding($to, "UTF-8", "auto"); // $toは、自動的にエンコードされない。 $subject = mb_convert_encoding($subject, "UTF-8", "auto"); $message = mb_convert_encoding($message, "UTF-8", "auto"); $header = mb_convert_encoding($header, "UTF-8", "auto"); mb_send_mail($to, $subject, $message, $header); // メール送信 ---------------------------------------------------------------------------------------------------- <a>あいうえお</a>　の、あいうえお　の部分が実際には存在しないディレクトリに してるのですが、（上記の場合だと、/register/confirmの部分です）それではだめ なのでしょうか。 実際にあるディレクトリだとしたら、たとえば、 https://aaa.com/register/confirm/ASkuCxyxsKxJ08kojrn770Js_jNOCXoD6ZXE0fgKQyI の、A以下の正規表現的な文字列つけることで何がしたいのかわかりません。 説明していただきたいです。正しい方法とスクリプトの書き方をよろしくお願いします。
オブジェクト指向がわからなくてもPHPは学習できますか? 理解できますか?
WordPressでサイトを作っている時、画面幅を取得してhtmlを出しわけたい部分がありました。 そこで、JQueryで画面幅を取得してその変数をPHP分で条件分岐したいと思ったのですが、 うまくいかず、クッキーや「wp_is_mobile()」関数で今のところ実現しています。 JavaScriptの変数をPHP側で直接使えないことはわかったのですが、その理由が詳しく知りたいです。 phpファイルに ------------------------------------------------ <script>var w = 600; </script> <?php if (w <= 600): ?> 600以上だった時の処理 <?php endif; ?> ------------------------------------------------- みたいな感じで使えたらいいのにとよく思うのですが、 PHPはサーバーサイドスクリプト言語だから、PHPであらかじめ処理されたものがクライアントに送られてきて、その時にJSが読みこまれるから順番的に使えない・・・・ということでいいんでしょうか。 調べようと思っても微妙にずばっとした回答のものがなく、質問しました。 解説サイトのURLとかでもよいので、よろしくお願いいたします。 プログラミングは初心者です。
XAMPPをインストールすれば http://www.php.net/downloads.php からPHPのインストールは不要ですか?
次のような入力フォームから、SQLのテーブルに登録します。 <?php function connect() { return new PDO("mysql:dbname=★★★;host=★★★","★★★","★★★", array( PDO::MYSQL_ATTR_INIT_COMMAND => "SET CHARACTER SET `utf8`")); } $pdo = connect(); if (@$_POST['submit']) { $hoge = $_POST['hoge']; if (!$error) { $pdo->query("INSERT INTO ★(hoge) VALUES('$hoge')"); header('Location: example.php'); exit(); } } ?> <form action="insert.php" method="post"> <input type="checkbox" name="hoge[]" value="りんご"/>りんご<br> <input type="checkbox" name="hoge[]" value="みかん" />みかん<br> <input type="checkbox" name="hoge[]" value="いちご" />いちご <input class="submit" type="submit" name="submit" value="登録"> </form> これで、例えば「りんご」と「みかん」をチェックして登録ボタンを押すと 受け取りのexample.phpにはArrayと表示され、SQLに反映されません。 よい方法があったら教えてください。
WordPressをサーバにインストールするには、現在インストールされている PHP5.16 を PHP5.6.18 にアップグレードを行って下さいとの事で、マニュアル通り行い成功し正常に動いています。 ふと以前設置したアップローダを確認すると文字化けしており使い物になりません。 PHP5.6.18 にアップグレードした事による不具合ですが、 これは何が原因でしょうか？
PHPを学習してオブジェクト指向も身につきますか？
PHPの方が処理能力が早いのですか？ であればPHP学んだ方がいいのでしょうか？ やりたいことは、ｗｅｂでデータベースを操作したいです。
現在HTMLとcssの知識しかありません。 PHPという言葉をよく見かけますが これを理解すると何が出来ますか？ web+データベースの操作のみでしょうか？
古いサーバーから新しいサーバーに入れ替え、 PHPが5.1から5.6に変わったため、PHPのファイルを修正しています。 だいたい修正ができたのですが、どうしても「mysql_insert_id」が修正できません。 修正したソースは以下になります。 ******************************** $sql = "INSERT INTO img_k (img_name,img_caption,up_datetime) VALUES('".$in_img."','".$in_img_text."',now())"; mysqli_query(connect(), $sql) or die(mysql_error()."<br>$sql"); $id = mysqli_insert_id(connect()); ********************************* ＄idにINSERTした最新のIDを取得したいのですが、結果は「0」になります。 IDはmysqlでauto_incrementに設定してます。 connect()は別ファイルでデータベースの接続してます。 これでIDが取得できず先に進めない状態です。 あと「オブジェクト指向型」ではなく「手続き型」でお願いします。 どうかよろしくお願いします。
phpを使うためにxamppをインストールしたら、 iniファイルを書き換えないと使いづらいと聞いたのですが どのファイルでしょうか？ http://www.adminweb.jp/xampp/php/index2.html のように、php.iniでしょうか？ http://www.adminweb.jp/xampp/mysql/index4.html のように、my.iniでしょうか？ それとも http://qiita.com/guzuri/items/643c1311224e8d482278 のように、どちらもでしょうか？
参考アドレス http://api.ce.nicovideo.jp/liveapi/v1/video.info?__format=json&v=lv262629172 http://api.ce.nicovideo.jp/liveapi/v1/video.info?__format=json&v=lv262502077 http://api.ce.nicovideo.jp/liveapi/v1/video.info?__format=json&v=lv260993313 スクレイピングでタグを取得するときに category は必須で、locked と free が両方あったり、片方無かったり、両方無かったりする場合にすべてのタグをうまく取得するにはどのようなコードを書けばよいですか。
ワードプレスをインストールし、ドメイン名をブログURLにする為にサーバーを設定する時にindex.phpを変更しアップしました。 <?php /** * Front to the WordPress application. This file doesn't do anything, but loads * wp-blog-header.php which does and tells WordPress to load the theme. * * @package WordPress */ /** * Tells WordPress to load the WordPress theme and output it. * * @var bool */ define('WP_USE_THEMES', true); /** Loads the WordPress Environment and Template */ require( dirname( __FILE__ ) . ‘/wp/wp-blog-header.php' ); 開くと画面にエラー表示が出てきます。 Parse error: syntax error, unexpected '' );' (T_ENCAPSED_AND_WHITESPACE) in /home/○○○/○○○.com/public_html/index.php on line 17 一番下の行に「/wp」を付け加えただけで後は何も触っていません。スペースなども入れていません。 いろいろ試しましたがエラーが出てきます。どこを訂正すればいいかわかりません。教えてください。 よろしくお願いします。
WebSocket connection to 'wss://public-api.wordpress.com/pinghub/wpcom/me/newest-note-data' failed: Error during WebSocket handshake: Unexpected response code: 403 というのがブラウザでホームページを開いて　右クリックした 一番下の　検証というところで　発見されたのですが どういう　意味かわからず・・何かのエラーだとおもうのですが どうしたらいいのでしょうかm(__)m
ワードプレスで、テーマを買ってサイトを作成している者です。ほとんど素人です。 WP-config.php は、勝手に作られると思うのですが、あるサイトによると、WP-config-sample.php をファイル名を変えて保存したりして、WP-config.php を作る、とあります。 そういった作業をする意義は何なのでしょうか？ 不具合があって、テーマのチェックなどするのに、デバッグモードなるものを使う必要があり、WP-config.phpを開いて探したのですが、そういった項目が私のWP-config.phpには存在しません。初期段階の、WP-config-sample.phpには、その項目があると思います。あるのを確認しました。最初に、WP-config-sample.phpから、WP-config.php　を作っておかなかったから、面倒なことになっているのかな？　とか思いました。何かアドバイスいただけませんでしょうか？
Cloud9があればxamp環境は削除してしまって何の問題もないでしょうか？ アパッチのセキュリティーホールが埋められずできれば削除したいと思っています？ PHP、サーバサイドのJS、DB関連の学習が問題なくできれば削除しようと思っています。
linux上でphp Ver5.5.28を使っています。 まず、index.phpは <!DOCTYPE html> <html lang="ja"> <head> <meta charset="UTF-8"> <title>テスト・タイトル</title> </head> <body> <h1>require_onceのテストを行います。</h1> <p><?php require_once("test.php"); ?></p> </body> </html> と記入しています。 test.phpは <?php $aaa = "変数に文字を設定します。"; print $aaa; ?> と記入しています。 実行した結果のHTMLを見ると添付ファイルのとおり不明なコードが追加されています。 また、test.phpを <?php ?> のみでやっても不明なコードが作成されてしまいます。 どなたか、原因が分かる方がいらっしゃれば教えていただけないでしょうか。 よろしくお願いします。 その結果のHTMLを見ると、添付画像のとおりゴミが出力されています。
こんにちは。 以下を実行すると、ブラウザに結果x, 結果x, 結果x・・・と表示されます。 xの部分を1, 2, 3・・・とさせたいのですが、うまくできません。 ご教示頂けませんか？ 宜しくお願い致します。 <?php //データベース接続 $server = "127.0.0.1"; $userName = "root"; $password = "password"; $dbName = "tweet01"; $mysqli = new mysqli($server, $userName, $password,$dbName); if ($mysqli->connect_error){ echo $mysqli->connect_error; exit(); }else{ $mysqli->set_charset("utf-8"); } $sql = "SELECT * FROM tweet_tbl"; $result = $mysqli -> query($sql); //クエリー失敗 if(!$result) { echo $mysqli->error; exit(); } //レコード件数 $row_count = $result->num_rows; //連想配列で取得 while($row = $result->fetch_array(MYSQLI_ASSOC)){ $rows[] = $row; } //結果セットを解放 $result->free(); // データベース切断 $mysqli->close(); ?> <!DOCTYPE html> <html> <body> <table border='1'> <tr><td>結果</td></tr> <?php foreach($rows as $row){ ?> <tr> <td><a href='wxyz.php?id=$row['id']; ?'>結果x</a></td> </tr> <?php } ?> </table> </body> </html>
こんにちは。 以下のようにMariaDBのコマンドで「sysdate()」を使用して日時を入力しているのですが、PHPで同様のことができずに困っています。 ご教示頂けませんか。 宜しくお願い致します。 【MariaDB】 MariaDB [tweet01]> insert tweet_tbl(account, contents, input_datetime) values('account01', 'contents01', sysdate()); MariaDB [tweet01]> select * from tweet_tbl; +----+-----------+------------+---------------------+ | id | account | contents | input_datetime | +----+-----------+------------+---------------------+ | 6 | account01 | contents01 | 2016-04-19 00:24:36 | +----+-----------+------------+---------------------+ 【PHP】 $account = $_REQUEST['account']; $contents = $_REQUEST['contents']; $input_datetime = "echo date( "Y-m-d H:i:s" )"; $result = mysqli_query($con, "insert into tweet_tbl(`account`, `contents`, `input_datetime`) values('$account', '$contents', '$input_datetime')"); 以下の行をうまく修正できれば解決しそうな気がしているのですが… $input_datetime = "echo date( "Y-m-d H:i:s" )";
http://www.standpower.com/ このサイトは古いですか？ PHPを学習しようと思い見たサイトなのですが Apacheのインストール方法についての記載は有りますが XAMPPについての説明はありません。
Webサーバーを使うかどうかですか？
wordpressで検索フォームと検索結果を作成しています。 検索フォームは <form action="<?php echo home_url(); ?>" method="get"> <dl> <dt> お部屋のタイプ</dt> <dd> <?php wp_dropdown_categories(array( 'show_option_all' => '全てのタイプ' )); ?></dd> <dt> こだわり検索</dt> <dd> <?php $terms = get_terms('good'); foreach ($terms as $term): ?> <label> <input type="radio" name="good" value="<?php echo esc_attr($term->slug); ?>"> <?php echo esc_html($term->name); ?></label> <?php endforeach; ?> </select> </dd> <dt> キーワード</dt> <dd> <input type="text" value="" name="s" /> </dd> </dl> <input type="submit" value="この内容で検索！" /> </form> としています。 検索結果は「search.php」を作り <div id="wrapper"> <h4 class="h4_search">★検索結果</h4> <div id="content"> <section> <?php if (is_search()) : ?> <?php endif; ?> <?php if (have_posts()) :?> <div class="postWrap"> <?php while (have_posts()) : the_post(); ?> <article id="post-<?php the_ID(); ?>"> <div class="search"> <header> <h5><a href="<?php the_permalink(); ?>" rel="bookmark" title="Permanent Link to <?php the_title_attribute(); ?>"><span><?php the_title(); ?></span></a></h5> <a href="<?php the_permalink(); ?>"> <?php the_post_thumbnail(); ?></a> <?php echo mb_substr(get_the_excerpt(),0, 50);?> <a href="<?php the_permalink();?>">&emsp;…&nbsp;続きを読む</a> </header> </div> <?php endwhile; ?> </div> <?php endif; ?> としています。 このままでは、検索フォームのあるページから別のページ（search.php）に飛んで検索結果が出ます。 ここで、検索結果を検索フォームのあるページ内で表示したいと思っております。 検索フォームに入力し、submitボタンを押すと、そのすぐ下に検索結果がずらりと表示できるようにしたいです。 このようなことは可能でしょうか？ できればプラグインを使わずに実現したいので、コードを教えていただければ有難いです。 何卒よろしくお願いします。
jQueryを使用したノンリロードのメールフォームを作成しているのですが、 メールの受信でチェックボックスで選択した項目が「Ａｒｒａｙ」と表示されてしまい正しく表示できません。 どうすればいいのでしょうか。 ご教示お願いいたしあｍす。 独学で作成しており、jQueryのコード自体は下記のサイトを参考にし、その他のＨＴＭＬとＰＨＰは自分で作成しました。 参考にしたサイト http://studio-key.com/tips/jquery-mailform-01 【ＴＨＭＬのコード】 <dt>お問い合わせ項目<span class="ind">※必須</span><br>（複数選択可）</dt> <dd> <ul> <li><input type="checkbox" name="tec[]" id="check1" value="Aについて" class="validate[minCheckbox[1]]"> <label for="check1"> Aについて </label></li> <li><input type="checkbox" name="tec[]" id="check2" value="Bについて" class="validate[minCheckbox[1]]"> <label for="check2"> Bについて</label></li> <li><input type="checkbox" name="tec[]" id="check3" value="Cについて" class="validate[minCheckbox[1]]"> <label for="check3"> Cについて</label></li> <li><input type="checkbox" name="tec[]" id="check4" value="Dについて" class="validate[minCheckbox[1]]"> <label for="check4"> Dについて </label></li> </ul> </dd> 【ＰＨＰのコード】 <?php if (empty($_POST)) { echo ""; exit; } ?> <?php // フォームデータが空の場合は処理終了 if (empty($_POST)) { echo ""; exit; } // セッションの開始 session_start(); ?> <?php // 入力値の取得・加工 $name = htmlspecialchars($_POST['name'], ENT_QUOTES, "UTF-8"); $email = htmlspecialchars($_POST['email'], ENT_QUOTES, "UTF-8"); $tel = htmlspecialchars($_POST['tel'], ENT_QUOTES, "UTF-8"); $list=$_POST['list']; $tec=$_POST['tec']; $comment= htmlspecialchars($_POST['comment'], ENT_QUOTES, "UTF-8"); // メール本文の組み立て $to = "123456789@gmail.com"; $title = "【お問い合わせフォームより】"; $ext_header = "From:{$email}"; $body = <<<EOM -------------------------------------------------- 【お問い合わせフォームからのメール】 お名前：{$name} メールアドレス：{$email} 電話番号：{$tel} 都道府県：{$list} お問い合わせ内容：{$tec} 本文：{$comment} -------------------------------------------------- EOM; //文字コードの設定 mb_language("Japanese"); mb_internal_encoding("UTF-8"); // メール送信の実行 $rc = mb_send_mail($to, $title, $body); if (!$rc) { exit; } else { $_SESSION = NULL; } ?>
こんにちは。前回以下の質問をした者です。 http://okwave.jp/qa/q9155517.html 上記ファイルの修正は成功し、無事に登録処理がされていたのですが、先ほど再実行したところ、登録はされずに、phpファイルの内容がそのままブラウザに表示されるようになりました。 原因がわからずに困っています。 対処方法がわかる方、教えて頂けませんか。 宜しくお願い致します。
初めまして。今日からPHPの勉強を開始したのですが、以下のエラーメッセージが対処できずに困っています。 どなたか原因をご教授頂けませんか。 宜しくお願い致します。 Fatal error: Call to undefined function mysql_connect() in C:\touroku.php on line 6 【MariaDBの作業】 \mysql -u root -p Enter password: ******** MariaDB [(none)]> create database touroku; MariaDB [(none)]> show databases; +--------------------+ | Database | +--------------------+ | touroku | +--------------------+ MariaDB [(none)]> use touroku; Database changed MariaDB [touroku]> create table touroku_tbl( -> id int not null auto_increment, -> name varchar(20) not null, -> email varchar(20) not null, -> primary key(id) -> ); Query OK, 0 rows affected (0.31 sec) MariaDB [touroku]> show tables; +-------------------+ | Tables_in_touroku | +-------------------+ | touroku_tbl | +-------------------+ 1 row in set (0.00 sec) MariaDB [touroku]> insert into touroku_tbl(name, email) values('test', 'test@local'); Query OK, 1 row affected (0.12 sec) MariaDB [touroku]> select * from touroku_tbl; +----+------+------------+ | id | name | email | +----+------+------------+ | 1 | test | test@local | +----+------+------------+ 1 row in set (0.00 sec) MariaDB [touroku]> 【touroku.html】 <html> <body> <form action = "touroku.php" method="post"> 名前：<input type="text" name="nm"> E-mail：<input type="text" name="email"> <input type="submit" name="exec" value="登録"> </form> </body> </html> 【touroku.php】 <html> <body> <?php //データベースに接続 $con = mysql_connect('127.0.0.1', 'root', 'password'); if (!$con) { exit('データベースに接続できませんでした。'); } //データベースを選択 $result = mysql_select_db('touroku', $con); if (!$result) { exit('データベースを選択できませんでした。'); } $result = mysql_query('SET NAMES utf8', $con); if (!$result) { exit('文字コードを指定できませんでした。'); } $nm = $_REQUEST['nm']; $email =$_REQUEST['email']; //フォームで送られてきたデータでINSSERT文を作成 $result = mysql_query("insert into touroku_tbl(name, email) values('$nm', $email)" , $con); if (!$result) { exit('データを登録できませんでした。'); } //SQLを実行 //if (!$res = mysql_query($sql)) { //echo "SQL実行時エラー" ; //exit ; //} //データベースから切断 $con = mysql_close($con); if (!$con) { exit('データベースとの接続を閉じられませんでした。'); } ?> <p>登録が完了しました。<br /><a href="index.html">戻る</a></p> </body> </html>
某フリーサイトからいただいた日記プログラムなのですが 改行が反映されずに困ってます。 以下の部分が読込んでいる箇所っぽいのですがどこをどうすれば 改行が反映されるのでしょうか？ <?php if($commentDsp == 1) echo str2Format($data['comment'],$commentNum,$config['encodingType']);//?> 何卒よろしくお願いいたします。
お世話になっております。 PHPは全くの初心者ですが、jqueryのajaxでGETした内容を PHPでも使用したく、ご教示願いたいのですが、 以下のajaxの「info.a」の値をphpで使用するには どうすればよいでしょうか。 $.ajax({ type: 'GET', scriptCharset:'utf-8', url: '/hoge.jsp', dataType: 'text', cache : false, }) .success(function(data){ var data = data.split(','); info = { a :data[0], b :data[1], }; }) .error(function(XMLHttpRequest, textStatus, errorThrown) { return false; }); <?php $a = $_GET['info.a']; ?> 何卒よろしくお願いいたします。
<?php $name=$_POST['name']; echo'名前'; echo'<input type="text" name="name" value="$name">'; text内の値が $nameとそのままでます。 ご教授お願いいたします。
phpで配列をCSV にしてボタンを押すとブラウザからダウンロードさせたいのですが、 htmlタグで表示した後に、ボタンを押すとブラウザからダウンロードさせるには、以下の ヘッダーをhtmlタグより下につけると、機能しなくなってダウンロードできなくなって しまっています。 どうしたらいいのでしょうか。 header('Content-Type:application/octet-stream'); header('Content-Disposition:attachment;filename=data.csv');
PHPの知識が全く無く、教えて頂きたいのですが、 今PHPファイルでJSPファイルを以下のようにincludeしようとしています。 ※以下のURLは例です。 <?php require_once ("http://www.test.jp/hoge/test.jsp"); ?> このtest.jspにはログイン情報が記載されており、 このURLを開くと、サイトをログインしていなければ、'ログイン前'、 ログインしていれば'ログイン後'と出るようになっています。 このtest.jspを取得して、ログイン前と後で要素の出し分けをしようと しているのですが、ログインしていても'ログイン前'と出てしまっていて どう対応すれば良いかわからず、ご教示願えたらと思います。 PHPは全くの初心者で知識が無いので、 お手数ですが、お力を貸してください。 よろしくお願いいたします。
flockでfopenされたファイルをロックすることができると教えていただきましたが、ロックされた状態で、ちゃんとはじかれるのかとか挙動を確認したいです。 flockされた状態を作ることは可能でしょうか？
ザンプというソフトウェアは、インストールすれば アパッチやMYSQLもついでにインストールされるのか、 それともザンプというソフトウェアには アパッチやMYSQLの機能も含まれているのでしょうか？
Wordpressでホームページを作り始めました。購入したテーマがありまして、子テーマも別についています。子テーマを編集していきましたが、ちょっとうまくいかない部分があり、それはそれでちょっとおいておいて、別に子テーマを最初から編集して作りたいと思っています。そういうのは可能なのでしょうか？　ちょっと新しい子テーマについて、名前を少し変えるとかして。あと別の質問になるかもしれませんが、WPで、データ（データベース）の方を読み込んだら、それは、どのテーマに変えようが、その入れているデータが使われることになるのでしょうか。ブログのデータだったり、固定ページでのカテゴリーの設定のデータだったり、で、また変わってくるのかもしれませんが。まとまりのない質問ですみません。よろしくお願いいたします。
無料で、phpでコードがかけて、 SQLをつかえるＨＰサーバーは有りますか？
PHPをやってみようと思い http://www.atmarkit.co.jp/ait/articles/1403/07/news028.html を読んだのですが ＞まずはWindows環境ですが、別途配布されているバイナリを使います。 配布サイトは「PHP For Windows: Binaries and sources Releases」です。 '64bit環境なら「x64 Non Thread Safe」を、 '32bit環境なら「x86 Non Thread Safe」の欄にある 「zip」をダウンロードします。 ダウンロードしたzipファイルは、 「C:\PHP55\」などのフォルダーに展開してください。 フォルダー内の「php.exe」が実行ファイルです。 と書いてあるのですが Xampp は必要ないのでしょうか？ win8.1です。
phpを学習したいのですが XAMPPのインストールは終わったのですが http://www.standpower.com/php_environment2.html のようにphp自体のインストールも必要なのでしょうか？ XAMPPの中にphpは含まれてませんか？
PHPでPostgreSQLを使って苦戦しています。 PHPでファイルを読み込み、PHPの配列 tsv にデータが格納されています。 1レコード30件ほどのデータで件数が数百件あります。 この配列tsvのデータをデータベース database　にある既存テーブル 累積　に 追加したいのですが、どうにもうまくいかず困っています。 $result = pg_insert($database,"累積",$tsv); if (!$result) { rollback_tran(); print('pg_insertが失敗しました。'.pg_last_error()); $err_flg = 1; goto ENDCLR; } 色々な方法を試しすぎて、頭を冷やさないと、と思ってこちらにも 書かせていただきました。 ヒント等、いただけますと助かります。 よろしくお願いいたします。
Warning: include_once(Net/SMTP.php): failed to open stream: No such file or directory in ○○○/PEAR/Mail/smtp.php on line 348 Warning: include_once(): Failed opening 'Net/SMTP.php' for inclusion (include_path='.:/usr/local/php/5.5/lib/php') in ○○○/PEAR/Mail/smtp.php on line 348 Fatal error: Class 'Net_SMTP' not found in ○○○/PEAR/Mail/smtp.php on line 349 メールフォームを作って使っていたのですが、昨日の夕方頃から上記のようなエラーメッセージが出て利用できなくなりました。 どうやらNetディレクトリ内のSMTP.phpというファイルが見つからないという内容のように見えますが、ちゃんと該当のディレクトリもファイルも存在しています。 ただ、include_onceで指定しているパスが"Net/SMTP.php"となっているので、これだとMailディレクトリのsmtp.phpで呼び出している以上、Mailディレクトリの中にあるNetディレクトリのSMTP.phpでないといけないような気がするんですが、NetディレクトリはMailディレクトリが置かれているディレクトリにあります。 これが原因？ でも、今までこの状態で使ってきたはずだし、昨日の昼頃まで普通に使えていました。 それがファイルを書き換えるどころか、サーバーにアクセスしてすらいないのに、なぜ突然このような状態になってしまったのかがわかりません。 単純にNetディレクトリをMailディレクトリの中に移し替えれば良いのでしょうか？ ただ、PEARはインストールツールみたいなものでインストールしたので、手動で勝手にディレクトリの位置を変えて良いのか分からず、怖くてできません。 最初からPEARをインストールし直した方が良いのでしょうか？ 何かお分かりになる方がいらっしゃいましたら、よろしくお願いいたします。
PHPでカウンターを作ってみたんですが、たまに数字が勝手にリセットされて困っています。 $aa = file_get_contents("aa.txt"); $aa = $aa + 1; $aaTX = fopen("aa.txt", "w+"); fwrite($aaTX , $aa); fclose($aaTX ); という形にしてるんですが、おそらく複数の閲覧者が同時にアクセスしたときに、fopen("aa.txt", "w+")で真っ白になってるものをfile_get_contentsで読み込んでしまい、リセットされた形になってしまうのかなと。 これ、fopenを使わず、aa.txt内の数字に直接加算させる方法とかないのでしょうか？ fopenはすでに記されているものの前後に文字列を加えるというようなことはできるようですが、書かれている数字に加算したり減算したりはできませんよね？ 他に直接計算することができるような命令とかありますか？ せめて、このリセットが防げるような方法だけでもあれば助かるのですが…。
Webアプリケーション（PHPなど）で、時間がきたら自動的にアクションを起こすことは可能でしょうか？ アプリケーションだとタイマーなどを使って、キックできますが、 Webアプリはリクエストがあって初めて動作します。 定期的に動作する方法はあるのでしょうか？ リモートから定期的にリクエストしないといけないのでしょうか？
http://okwave.jp/qa/q9137548.html に質問したものですが 再度 https://www.apachefriends.org/jp/index.html からXAMPPをダウンロードしようとしたのですが 名前を付けて保存をしようとしても 拡張子がexeになりません。 ファイル名は、xampp-win32-5.6.19-0-VC11-installer[1]になってしまいます。 新しいフォルダに入れようとしても[1]が付きます。 どうしてでしょうか？ win8.1です。
PCでデータベースを蓄積し、その結果をスマホで閲覧したいのですが サイトを立ち上げて、SQLiteを言うのを学べば可能ですか？ サイトの作成はＰＣから行います。
https://www.apachefriends.org/jp/index.html から Windows向けXAMPPをダウンロードしたのですが xampp-win32-5.6.15-2-VC11-installer[1] と言うファイルがダウンロードされて http://techacademy.jp/magazine/1722 のような.exe形式でないため開けません。 ダブルクリックすると 「ストアアプリで探す」が出てきてしまいます。 ダウンロードの仕方が悪いのでしょうか？ xampp-win32-5.6.15-2-VC11-installer[1] は捨てたほうが良いですか？
$list["住所1"]="東京"; $list["住所2"]="東京"; $list["住所3"]="大阪"; $list["住所4"]="大阪"; $list["住所5"]="北海道"; と合った場合に、重複排除にarray_uniqueを使うと思いますが、 重複排除ではなく、重複しているKeyを列挙したい場合はどうすればシンプルでしょうか？ 今回の例で言えば、値 東京で重複しているのが住所１、住所２で 大阪で重複しているのが 住所3,住所４であるということを表示したいと思っています。 得た値のフォーマットとしては例えば $dup["東京"] = array("住所1","住所2"); $dup["大阪"] = array("住所3","住所4"); のようにできたら便利です。
xamppを導入し C:\xampp\htdocs内にPHPファイルを置けば動作するところまで分かりました 例えばc:\abcとフォルダを作って中にphpファイルを置いた場合 動作させるには何をすればよいでしょうか？
デバッグ窓のタブを誤って消してしまいましたが、復元方法 がわかりません。 場所は添付画像の通りですが、右端にブラウザタブを表示 させたいと思います。 この設定はどこで行えばいいのでしょうか？ よろしくお願いいたします。
PHPでDropbox APIを使用しまして、画像のアップロードを行える処理を実装しております。 画像は同時に3枚までアップできる仕様にしております。 開発サーバはLAMP環境となりまして、PHPのバージョンは5.3.29となります。 Dropbox APIは、Dropbox公式で提供されているAPIとなりまして、composerを使用して導入しました。 以下、composer.jsonの記述です。 { "require": { "dropbox/dropbox-sdk": "1.1.*" } } Dropboxへ画像のアップロードができる部分まで実装は完了しておりますが、 3枚同時だと処理に時間が掛かってしまうため、以下の記述を並列処理できればと思っております。 $dbxClient = new Dropbox\Client(ACCESS_TOKEN, DROPBOX_APP_NAME); $fp = fopen(TARGET_IMG_PATH . $file_infos[1], 'rb'); $res = $dbxClient->uploadFile(IMG_UPLOAD_PATH . $_SESSION["image_name"] ."/" . $file_name[1], \Dropbox\WriteMode::add(), $fp); fclose($fp); $fp = fopen(TARGET_IMG_PATH . $file_infos[2], 'rb'); $res = $dbxClient->uploadFile(IMG_UPLOAD_PATH . $_SESSION["image_name"] ."/" . $file_name[2], \Dropbox\WriteMode::add(), $fp); fclose($fp); $fp = fopen(TARGET_IMG_PATH . $file_infos[3], 'rb'); $res = $dbxClient->uploadFile(IMG_UPLOAD_PATH . $_SESSION["image_name"] ."/" . $file_name[3], \Dropbox\WriteMode::add(), $fp); fclose($fp); 並列で3枚同時にアップ処理できればと思っておりますが、記述につきましてお分かりいただける方いらっしゃいましたら、ご教授いただけますと幸いです。 よろしくお願い致します。
PHPを自宅で使う場合 「php」と言うソフトウェアをインストールするわけではないですよね？ アパッチやらザンプをインストールし ＰＨＰでの開発を行なうのですよね？
PHPを学ぼうと思うのですが 先ず、HTMLの知識がないとダメでしょうか？ PHPはｗｅｂプログラミングなのですよね？ ｗｅｂサイトを作るには HTMLの知識がないとダメですか？
************************************************************ MySQLで文字コードをUTF-8で適切に使うための設定が必要です。 XAMPPをインストールしたフォルダ （デフォルトではc:\xampp）の「mysql\bin\my.ini」ファイルをテキストエディ [mysqld]セクションの下に以下の1行を追加して保存してください。 character-set-server=utf8 ************************************************************ と説明には書いてあるのですが、 この設定をしなかった場合のデフォルトの文字コードは何になるのでしょうか？
ｐｈｐ　ページャー機能がうまくいきません。 ご教授お願いいたします。 ページリンク２、３と押しても ページが移動しません。 ずっと一ページ目のままです。 解決方法よろしくお願いいたします。 index.php peger.php 書きソースはpeger.phpです。 index.htmlとのソースの違いは if(preg_match('/^[1-9][0-9]*$/', $_GET['page']) ){ $page = (int)$_GET['page']; }else{ $page = 1; } のプログラムががindex.phpにはないだけです。 <!DOCTYPE html> <head> <meta charset="UTF-8"> <title>検索</title> </head> <body> <?php if(preg_match('/^[1-9][0-9]*$/', $_GET['page']) ){ $page = (int)$_GET['page']; }else{ $page = 1; } $page = 1; $limit = 2; $offset = $limit * ($page - 1); $dsn='mysql:dbname=＊＊＊＊;host=＊＊＊＊'; $user='*****'; $password='*****'; $dbh=new PDO($dsn,$user,$password); $dbh->query('SET NAMES utf8'); $sql='SELECT count(*) FROM `mst_product`'; $stmt=$dbh->prepare($sql); $stmt->execute(); $db=null; $total=$stmt->fetchColumn(); $lastpage= ceil($total/$limit); $sql = 'SELECT * FROM mst_product ORDER BY code DESC LIMIT '.$limit.' OFFSET '.$offset.' ' ; $stmt = $dbh->prepare($sql); $stmt->execute(); $db = null; while($row = $stmt->fetch(PDO::FETCH_ASSOC)){ echo $row['name']; echo'</br>'; echo $row['price']; } echo '<ul class="pager">'; ?> <?php if($page > 1){?> <li><a href="pager.php?page=<?php echo $page-1; ?>"> << </a></li> <?php } for($i = $page; $page-2 < $i && $i <= $page+4 && $i <= $lastpage; $i++){ ?> <?php if($i == $page){ ?> <li><a href="kensaku_pager.php?page=<?php echo $i; ?>"><?php echo '<font color="#FF4DC4">'.$i.'</font></a></li>'; }else{?> <li><a href="pager.php?page=<?php echo $i; ?>"><?php echo $i.'</a>'; ?> <?php echo '</li>'; } } if($page < $lastpage){ ?> <li><a href="pager.php?page=<?php echo $page+1; ?>"> >> </a></li> <?php } ?> </ul> </body> </html>
PHPでSQLサーバーへの接続ではなく、 マイクロソフトアクセスへ接続し、テーブルのデータ使う事は可能でしょうか？
PHPでウェブアプリを作成しています。 PHPでのリダイレクト方法として、 header("Location: xxxxx.php"); を使うことが多いのですが、HTML出力のあとで使おうとすると、 「Warning: Cannot modify header information - headers already sent by (～」というPHPエラーが発生します。 HTML出力前にリダイレクトができればいいのですが、 HTMLをかいたあとに、PHP処理をさせている処理構造上、header関数以外でリダイレクトする方法はあるのでしょうか？
アパッチの開発はプログラミングの知識があれば、誰でも参加できるのでしょうか？ 「世界中のボランティアのプログラマたちの手によって長年に渡って開発が続けられている」 と書いてあります。
PHPでcsvファイルに書き込む形の掲示板を作っています。 最後のfputについては、下記で、1301-T.dat　に書き込む形としました。 $fp = fopen('../../data/1301-T.dat', 'w'); foreach($lines as $line) fputs($fp, $line); fclose($fp); 【やりたいこと】 この掲示板の、1301-T.datを変数としたいと考えています。変数は<?php echo $row_id['uni_id']; ?>という形でSQLファイルから取得可能です。 【問題点】 下記のようにするとエラーとなります。 $uni_id　の部分の書き方について教えていただきたくお願いいたします。 $uni_id = "../../data/"$row_id['uni_id']".dat"; $fp = fopen($uni_id, 'w'); foreach($lines as $line) fputs($fp, $line); fclose($fp);
$firstquarter = array(1 => 'January', 'February', 'March'); というようにすれば１から始まるのは知ってるんですが、 $firstquarter[] = 'January'; $firstquarter[] = 'February'; $firstquarter[] = 'March'; というように一個ずつ追加していきたい場合や、「explode」で分割して一気に入れた場合に、１から始める方法が分かりません。 何かやり方はあるのでしょうか？
ＰＨＰでアンケートフォームを作り、入力されたデータを記録する際、1件のデータを以下のように半角カンマで区切って1行で ファイル「enq.dat」に追記していくとします。 「氏名,性別,Email,色,コメント」 好きな色は多肢選択になっているので複数の回答があり得ます。そのため、このデータファイルをエクセルなどで読み込んで集計するとき、行によって色の列数が異なるなどして、集計がしづらくなってしまいます。 また、複数行からなるコメントは改行を含むので、そのまま記録すると、１件のデータが複数行になってしまいます。 こうした問題を解決して1件のデータを1行で記録できるようにするには どうすればいいでしょうか？
PHPはマイクロソフトのSQLサーバーでは対応できないのでしょうか？ MYSQLでないとダメなのでしょうか？
PHPでもvb.netのようにフォームを作ることは出来るのですか？ フォームと言う概念があるようなので 不思議に思いました。
MySQL初級です。 PHP＋MySQLで、検索ページを作成しています。 SELECT部を簡略して書くと・・ （ページ番号$get_pageNoをGETで渡して、10件ずつ検索結果を表示したい。） $sql = "SELECT Id FROM houjin WHERE (word LIKE '%${ワード}%')"; $sqlLimit .= "ORDER BY Id ASC limit " . ($get_pageNo*10) . ", 10"; 表示まではできていて、前へ、次へ、のリンクで、10件ずつ抽出できるところまでは、 できました。 さらに、抽出されたレコードに、チェックボックスをつけて、 ユーザーに選択させて、処理（削除など）を行いたいわけです。 表示されたあるレコードにチェックをつけて、 次のページのレコードにもチェックをつけて、 一括処理（削除など）ができる方法を探しています。 ページ番号をGETで渡してリロードさせているので、 チェックされたレコード番号もGETで渡す、しか方法はないでしょうか？ Limitにこだわってはいません。 よい方法、アイデアがあれば教えてください。
自分のサーバー(myserver.com)上で「他サイトにある画像をダウンロードできるPHP」=【download.php】を組みました。 <?php $url = 'http://yoso.jp/qt6w8d.jpg'; $data = file_get_contents($url); file_put_contents('./image/photo_1.jpg',$data); ?> 上記では、http://yoso.jp/にある1つの画像をphoto_1.jpgとリネームして、myserver.com/image/　ディレクトリに画像ファイルとして収納できます。 **************************************************************** 次に、 1001.csv 1002.csv 1003.csv　など複数のCSVファイルを作り、自分のサーバーのmyserver.com/csv_file/ ディレクトリに保管しました。 それぞれのCSVファイルの中には、yoso.jpにある画像のURLが、カンマ区切りで複数書かれています。 例【1001.csv】 中身　(yoso.jp にある 複数(今回3つ)の画像のURLが記載) http://yoso.jp/qt6w8d.jpg,http://yoso.jp/dve4k.jpg,http://yoso.jp/4m2fl3.jpg, 尚、このCSVファイルもスクレイピンクで自作しているため必要であれば ""で囲むように改良することも可能です。 "http://yoso.jp/qt6w8d.jpg","http://yoso.jp/dve4k.jpg","http://yoso.jp/4m2fl3.jpg", 上記のcsvファイルを用意した後、下記のような【get.php】を組みました。 <?php $id=$_SERVER['QUERY_STRING']; $csv_url = "http://myserver.com/csv_file/"; $csv_url .= $id ; $csv_url .= ".csv"; $file_jpg = file_get_contents( $csv_url ); echo $file_jpg; ?> この【get.php】は、http://myserver.com/get.php?id=1001　とクエリーでcsv名を指定すると、1001.csvにある画像URL(1001.csvの場合3つ)をPHP上に表示(echo)できます。 ************************************************************** やりたいこと 【download.php】と【get.php】に記載したソースと組み合わせて、csvファイルに書いてある複数の画像をすべてサーバーに取り込みたいです。 可能であればそれぞれの画像名をphoto_1.jpg　photo_2.jpg photo_3.jpg のような形でリネームし保存できればと考えていますが、file_put_contentsにて、複数ファイル指定で動作させる方法がわかりません。 どのようにすればいいかご教示戴きたくお願いいたします。
環境はWindows 8.1＋PHP 7.0.1です。 php.iniのmbstring.internal_encodingがPHP5.6で非推奨になったので、 default_charsetで文字コードを設定しています。 ところが、default_charsetの値を変えても、以下の結果が変わりません。 echo mb_internal_encoding(); mbstring.internal_encodingを変更すると、確かに反映されるのですが、 default_charsetの値はmb_internal_encoding()には反映されないのでしょうか。 もともとは、mb_check_encodingで判定に利用する文字コードを、php.iniで設定したかったのですが、現在はこれを利用するにはやはりmbstring.internal_encodingから指定しなければならないのでしょうか（現在は常にUTF-8でチェックしているようです）。
PHPで直接Cookieを削除するには、setcookieで期限を過去にすれば良いわけですよね？ だとしてら「time()-1」で充分だと思うんですが、「-1」ではなく「-1800」とか「-42000」とか、かなり大きな数字を引いてる例が多いです。 「-1」ではダメなんですか？ これら大きめに取った数字の根拠は何なのでしょうか？
現在PHPを学び中の初級者です。 最近になりcakePHPというフレームワークがあることを知りました。 そこで質問なのですが (1)これからphpを学習していくにあたって、cakePHPを学習していくか、フレームワークなどを頼らずゼロから学習するのどちらがいいのでしょうか？ ちなみに一応基本的なことは一通り学習しました。 (2)実際に開発をされている方にお聞きしたいのですが、 ・cakePHPなどのフレームワークを主に活用している。 ・ゼロからの手打ちでしている。だと開発する際はどちらが多いでしょうか？ よろしくお願いします。
phpファイルでログインして、ブラウザにログイン出来たの表示が出るようにしています。ここ から、目的のページに行けるようにリンクを貼っています。 しかし、ログインしたけど、直ぐにログアウトしたい場合、ブラウザからリンクで再びログイン 画面に戻るには、この同じphpファイルにどのようなプログラムを書けば良いか教えて下さい。
タイトルのとおりなのですが、 a.phpからb.phpにpostで飛ばすと、表示されるのはb.phpになります。 でもしたいことは、b.phpにpostしたいけど、 最終表示させたいのはc.phpです。 ただし、b.phpにはc.phpに遷移する記述はできず、 a.phpからpostだけして、c.phpに移行することは可能でしょうか？
phpファイル内にhtmlファイルのリンクを貼って、ブラウザに表示されたリンクをクリックし て、htmlファイルに移動する方法をご教示お願いします。 （phpファイル内リンク設定→phpファイル起動→ブラウザ内リンククリック→htmlファイル起 動）要するに、phpファイルからhtmlファイルに、リンククリックで移動したいと言う事です。
下記のPHPスクリプトで、自分が先にチャットのページを開いていたとして、 相手がチャットのページを開いたら（入場したら）チャイムを鳴動させたいのですが、 相手が入場したときに、相手側にしか音が鳴りません。こちらは、相手がいつ入場したのか わかるために、チャイムを鳴動させたいのですが、どこがどう間違っているのでしょうか。 ご指導よろしくお願い致します --------------------------------------------------------------------------------------------------- /////////////////////////////////////////////////// // IPアドレスをファイルに保存 // /////////////////////////////////////////////////// function reserveIpAdress(){ $filename="ip_log.txt"; if(!filesize($filename)){ // ファイルが空だったら $fp = fopen($filename, 'w'); // 追加書き込み用に、IPログファイルをオープン $buf = $_SERVER['REMOTE_ADDR']."\n"; fwrite($fp, $buf); // IPアドレスを追加書き込み fclose($fp); echo '<audio src="http://5247423.raindrop.jp/chat/music/schjoin.hso" autoplay></audio>'; $_SESSION['ip_write_cnt']++; }else{ $fp = fopen($filename, 'r'); //while(($buf=fgets($fp))===false){ $buf = fgets($fp); // 1行目 //$buf1 = rtrim($buf1); //$buf2 = fgets($fp); // 2行目 fclose($fp); if(rtrim($buf)!==$_SERVER['REMOTE_ADDR']){ // 相手の方が先にチャットにアクセスした時 $fp = fopen($filename, 'a'); $buf2 = $_SERVER['REMOTE_ADDR']."\n"; // 自分のIPアドレスをファイルにライト fwrite($fp, $buf2); fclose($fp); echo '<audio src="http://5247423.raindrop.jp/chat/music/schjoin.hso" autoplay></audio>' }else{ } $_SESSION['ip_write_cnt']++; } } /////////////////////////////// // メインルーチン // /////////////////////////////// session_start(); // セッション開始 if(is_null($_SESSION['ip_write_cnt'])) $_SESSION['ip_write_cnt'] = 0; if($_SESSION['ip_write_cnt']<2){ // 2人でチャットする場合 reserveIpAdress(); // このページにアクセスしたデバイスのIPアドレスをファイルにライト } 以下略
PHPでHTMLを生成して表示させるとします。 例えばですが、PHPファイル自体が100KBあったとしても、閲覧者がダウンロードするデータ量は生成されたHTML分だけという認識だったんですがあってるでしょうか？ 生成されたHTMLを普通にHTMLファイルとして手書きしても1KBぐらいにしかならないものとします。 元のPHPファイルが何GBとかあったとしても、閲覧者が受け取るデータ量は1KBですよね？ 僕は小分けにすると分からなくなるので一つのPHPファイルにまとめて書いてるんですが、PHPファイル自体のデータ量を見て自分の認識に不安を感じ始めました。 PHPはサーバー側で処理する言語ですから、閲覧者に一度PHPファイルを全て渡して処理を始めるなんてことはないですよね？ 大きなPHPファイルになったとしても処理が重くなるだけで、閲覧者が受け取る時のデータ量が大きくなることはないですよね？ スマホ向けサイトを作っているもので、もしこの辺の認識が間違ってると、閲覧者にとんでもないパケット料を支払わせてしまいそうで恐いです。 あくまで生成されたHTML分のパケット代しかかかりませんよね？
比較しながら順位を付けていくためには、最初に「1」いれといて、「<=」大きければ順位をかえる・・・ ここまで書いて誤っていたことに気がつきました。改めて、最高得点をしる方法と比較して順位をだす関数ありますでしょうか? #.1f(初歩的すぎてすみません)下は頭の中です、合計点の出し方は積み重なっていくというところまでわかっています。順位の出し方も比較しながら数字を入れ替えればいいのかなと思っています。 <?php // 氏名をキーとする。 $tests = array( //点数 "鈴木" => array(92,1), "佐藤" => array(74,1), "中村" => array(42,1), "三浦" => array(65,1) ); $kamokusu = count($tests["鈴木"]); // 科目数 ?> <table border="2"> <tr> <th>名前</th> <th>点数</th> <th>順位</th> </tr> <?php // 個人の得点、合計点、平均点の行を表示 foreach ( $tests as $name => $test ) { echo "<tr>"; echo "<td>" . $name . "</td>"; // 個人名の表示 $total = 0; // 合計点初期化 // 個人の教科別の得点表示と合計点集計を行う foreach ( $test as $tensu ) { echo "<td>" . $tensu . "</td>"; // 得点表示 $total += $tensu; // 合計点集計 } } ?> </table>
printf("<td>%.1f</td>", $total / $kamokusu); <td></td>で囲まれ%.1fの意味をしりたいのですが、どのように検索すると、ググれるのかも合わせておしえていただきたいです。試しにググったキーワードは「print_f　"%.1f"」「php　"%.1f"」です。
PHP&MySQL初心者です。 同窓会の申し込みフォーム作成していますが、日時表示について質問です。 参加希望日時をカレンダー入力させて、データベースに登録しています。 日時はカラムを分けずにまとめてdatetime型にしています。 ■第一希望 [カレンダー入力]（年月日時分をまとめて） ■第二希望 [カレンダー入力]（年月日時分をまとめて） →データベース（mySQL）には、 datetime型「2016-01-05 02:50:00」形式で登録。 カレンダー入力せずにINSERTされたとき、datetime型だと、 「0000-00-00 00:00:00」で登録されますが、 この値を、date('Y年n月j日 g時i分', strtotime(カラム値)); で読み出すと、「1970 年 1 月 1 日 00:00:00」と表示されます。 このままではまずいので、単純に空欄としたいのです。 カレンダー入力されなかったとき、つまり、「0000-00-00 00:00:00」で登録されているとき、 日時表示を空欄にするスマートな方法はありますか？
色々と勉強中の初心者ですがよろしくお願いします。 windows8.1の64bitのPCに wordpressのテスト環境をつくるため apache24をインストールした後 XAMMPをインストールしました。 XAMMPをインストールすれば apache24をインストール必要がないことを後で知り apache24を削除しようとしているのですが 削除出来ない現状です。 対処方を教えていただけないでしょうか？ 以下、XAMMPのエラー内容です。 ご参考までに・・・ 18:34:05 [main] Initializing Control Panel 18:34:05 [main] Windows Version: Windows 8.1 64-bit 18:34:05 [main] XAMPP Version: 5.6.15 18:34:05 [main] Control Panel Version: 3.2.2 [ Compiled: Nov 12th 2015 ] 18:34:05 [main] Running with Administrator rights - good! 18:34:05 [main] XAMPP Installation Directory: "c:\xampp\" 18:34:05 [main] Checking for prerequisites 18:34:54 [main] All prerequisites found 18:34:54 [main] Initializing Modules 18:34:55 [Apache] Apache Service detected with wrong path 18:34:55 [Apache] Change XAMPP Apache and Control Panel settings or 18:34:55 [Apache] Uninstall/disable the other service manually first 18:34:55 [Apache] Found Path: "C:\Apache24\bin\httpd.exe" -k runservice 18:34:55 [Apache] Expected Path: "c:\xampp\apache\bin\httpd.exe" -k runservice 18:34:55 [Apache] Problem detected! 18:34:55 [Apache] Port 80 in use by ""C:\Apache24\bin\httpd.exe" -k runservice" with PID 1468! 18:34:55 [Apache] Apache WILL NOT start without the configured ports free! 18:34:55 [Apache] You need to uninstall/disable/reconfigure the blocking application 18:34:55 [Apache] or reconfigure Apache and the Control Panel to listen on a different port 18:34:55 [main] The FileZilla module is disabled 18:34:55 [main] The Mercury module is disabled 18:34:55 [main] The Tomcat module is disabled 18:34:55 [main] Starting Check-Timer 18:34:55 [main] Control Panel Ready 以上です。 みなさま、何卒よろしくお願いいたします。
サイトに表示させる画像は、サムネイル用の小さな画像と大元の大きな画像に分けていますよね。 CSSなどで大きさだけ変えることができますが、これだと元のデータ量のまま閲覧者がダウンロードすることになりますから、データ量が大きいと表示が遅かったり、スマホなど使ってる人は余計な料金がかかってしまいます。 だからサムネイル用の小さな画像を用意するわけですが、サムネイル用と大元の画像二つ用意する分、容量がもったいないなと。 できれば画像データは大元の大きい物だけにして、PHPで表示するときだけサイズやデータ容量を小さくして閲覧者の負担も下げられないかと考えています。 確かPHPには画像加工の命令があったかと思いますが、これで小さく加工した後、サーバーに残さずただ表示させるだけで、閲覧者がページを閉じたら削除みたいにできないかなと思っていたのですが、いまいちやり方がわかりません。 この方法も含めて他に良い方法はないでしょうか？ ブログの記事には小さな画像をサムネイルとして表示し、クリックしたら大きな元の画像に辿り着くというような作りにしたいです。
php？でスマートフォン用のCSSへ切り替える記述について質問です。 HTML/CSSの知識はあるのですがPHPについてはさっぱりで… お力を頂ければと思います。 今度CSSの切り替えでスマートフォン用のサイトを表示することになったのですが、 一部システムが絡んでいるため切り替え方が分かりません。 拡張子は.ctpです。 HTML/CSSで下記の記述にしています。 <link rel="stylesheet" type="text/css" href="../_common/css/import.css" media="all and (min-width : 706px),print" /> <link rel="stylesheet" type="text/css" href="../_common/css/_phone/import.css" media="only screen and (max-width : 705px)" /> PHP？でCSSを読み込む部分は <?php echo $this->Html->meta('icon'); echo $this->Html->css('/_common/css/import.css'); echo $scripts_for_layout; ?> と記述されています。 上記にどういった記述を加えればHTML/CSSのような切り替えが可能でしょうか？ もしくは、全く別の部分をいじらなければならないのでしょうか？ よろしくお願い致します。
簡単すぎて、すみませんが、割り算はどうしたらできますか。 #わたしの頭の中で ##このような割り算(平均)関数ありますか、ググってもカスしかでてきません。 <?php $b = array("鈴木" => 92 , "佐藤" => 74 , "中村" => 42, "三浦" => 65); foreach( $b as $key => $value ){ echo "氏名：".$key."点数：".$value."<br>"; } echo "合計点：" . array_sum($b) . "\n"; #$b($b/$key); #echo "平均点".$b."\n"; ##echo "product(a) = " . array_product($b) . "\n"; ?>
PHPでCSVファイルを呼び出すことを考えています。 下記のようなデータがあり、5000番以上の4銘柄を抽出したいと考えています。 4996クミアイ化学工業 345 4997日本農薬 456 4998フマキラー 1215 4999セメダイン 456 5002昭和シェル石油 1025 5007コスモ石油 2451 5008東亜石油 1265 5009富士興産 998 5010日本精蝋 562 5011 ニチレキ 412 下記のようにしたのですが表示されません。 && ($data3 < $number)を外すと、下から4つ(4996-4999)が表示されます。 (5000番以上という選択ができません) どこが間違っているかご教示戴けますでしょうか? よろしくお願いいたします。 <?php $fp3 = fopen("kabu.csv", "r"); $repeat = 4; //表示する件数 $count = 1; $number = 5000; while (($data3 =fgetcsv($fp3, 10000)) && ($data3 >$number)) { if ($count > $repeat) { break; } print($data3[1]); print($data3[0]); print($data3[2]); $count = $count + 1; } fclose ($fp3) ?>
家のサーバーでヤフーのテレビ番組情報を利用してゴルフ番組放送予定を取得したいと思っています。 下のＵＲＬのhtmlを取得したいのですが、なぜかyahooのトップページのhtmlが取得されてしまいます。 "http://tv.yahoo.co.jp/search/?q=&t=1%25203&g=0103&oa=1&a=24" 上のページのhtmlを取得する方法はありますでしょうか。
下記のスクリプトにおいて、$message　のHTML文を 送信先のメーラーに送信すると、HTML文がそのまま書かれている状態で、 メーラーの受信メールのなかで、コンテンツが表示されません。 どうすれば、メーラーの中で、HTMLのコンテンツそのものを 表示できるのでしょうか。 ご指導よろしくお願い致します。 「html_mail_test.php」 <?php // 新規ユーザーにメール送信 $to = "～@nifty.com"; // 送信先メールアドレス（新規ユーザー宛て） $subject = "HTMLメールテスト"; // 題名 $from = "～@co.jp"; $password = rand(1, 99999999); // 本文（個人情報＋アンケート内容） $message = " <!doctype html> <head> <meta http-equiv=\"Content-Type\" content=\"text/html; charset=iso-2022-jp\"> <style type=\"text/css\"> .tg {border-collapse:collapse;border-spacing:0;} .tg td{font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;} .tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;} .tg .tg-yw4l{vertical-align:top} </style> </head> <body> <table class=\"tg\"> <tr> <th class=\"tg-yw4l\"></th> </tr> <tr><td><img src=\"http://5247423.raindrop.jp/html_mail/image/.png\"></td></tr> </table> </body> </html> "; $to = mb_convert_encoding($to, "UTF-8", "auto"); // $toは、自動的にエンコードされない。 $subject = mb_convert_encoding($subject, "UTF-8", "auto"); $message = mb_convert_encoding($message, "UTF-8", "auto"); // EUCにエンコード mb_send_mail($to, $subject, $message, $from); // メール送信 ?>
下記のようなページがあります。 【kabu.php】 <html> I101,日経平均,19000<BR> I102,TOPIX,1561<BR> I104,東証2部指数,4653<BR> </html> 上記をCSVファイルに吐き出そうと思い、下記のようなPHPを組みました。 欲しい結果=下記のような3行3列カラムとして書き込み(A1からC3) 「I101」「日経平均」「19000」 「I102」「TOPIX」「1561」 「I104」「東証2部指数」「4653」 【kabu_put.php】 <?PHP $list = file_get_html( 'http://hoge.jp/kabu.php' ); $fp = fopen('kabu.csv', 'w'); foreach ($list as $fields) { fputcsv($fp, $fields); } fclose($fp); ?> 実際の結果 カラムが下記のように横一列に書き込まれる(A1からF1)。カンマ切りは認識しないかつ改行できない 「I101,日経平均,19000」「<BR>」「I102,TOPIX,1561」「<BR>」「I104,東証2部指数,4653」「BR」 次に、kabu.phpの改行部分を<BR>ではなく、\n または　\r\n としてみました。 http://hoge.jp/kabu.php <html> I101,日経平均,19000\r\n I102,TOPIX,1561\r\n I104,東証2部指数,4653\r\n </html> 【kabu_put.php】は変わらずです。 <?PHP $list = file_get_html( 'http://hoge.jp/kabu.php' ); $fp = fopen('kabu.csv', 'w'); foreach ($list as $fields) { fputcsv($fp, $fields); } fclose($fp); ?> 結果 下記のように1つめのカラム(A1)に全てが書き込まれる。(\nも\r\nも同様) (改行コードは1スペース化されてしまった。カンマ区切りも認識できない) 「I101,日経平均,19000 I102,TOPIX,1561 I104,東証2部指数,4653 」 【質問】 下記のような3行3列カラムとして書き込みとするためには、どうすればいいでしょうか? 「I101」「日経平均」「19000」 「I102」「TOPIX」「1561」 「I104」「東証2部指数」「4653」 尚、kabu.phpは下記のようなスクレイピングで作っています。 kabu_base.php というリンクサイトがあって、そこでは「URLに株ID」が、「テキスト文字に株名と現在価格がカンマ区切りで記載」されています。 このリンクURLを「URL部分(株価ID)」と「文字部分(株名),株価(数値)」に分解して作成し、株価IDと株名の間にカンマを挿入したのが下記のkabu.phpです。 【質問への補足(依頼)】 kabu.phpの中に直接下記のプログラムを記載することで解決できるのであれば、それでも構いません。 $fp = fopen('kabu.csv', 'w'); foreach ($list as $fields) { fputcsv($fp, $fields); } 【kabu.php】 <?php require_once('simplehtmldom/simple_html_dom.php'); $html2 = file_get_html( 'kabu_base.php' ); foreach($html2->find('a') as $element2){ echo $element2->href; echo ","; echo $element2->innertext; echo "\r\n"; } ?> よろしくお願いいたします。
php ページング php勉強中のものですが ページングについて調べてはいるものの 中々ピンとこず 何か簡単なサンプルコードを教えていただけないでしょうか。 データ表示は10件ほどで データの量は 決まっていないです。 よろしくお願いします。
同じ変数に対する条件式ってまとめて書けないのでしょうか？ if($hensu!=1 && $hensu!=20 && $hensu!=30){ ～～～～～ } みたいな条件が書きたい時に $hensu!=1 && 20 && 30 みたいな書き方はできないのでしょうか？上記の書き方ではダメですが。 なにか上の書き方よりスマートに書ける方法があれば教えて頂けないでしょうか。
ＰＨＰ＆正規表現初心者です。 ヤフーファイナンスランキングから順位ごとに株価データを取得したいの ですが、正規表現の書き方がわからず意図したデータが取得できません。 ご教授ください。 ソース ************************************************ ～ <tbody> <tr class="rankingTabledata yjM"> <td class="txtcenter">1</td><td class="txtcenter"> <a href="http://stocks.finance.yahoo.co.jp/stocks/detail/?code=0002.t">0002</a></td> <td class="txtcenter yjSt">東証JQS</td> <td class="normal yjSt">(株)シxダー</td> <td class="txtcenter grey yjSt">12/18</td> <td class="txtright bold">313</td> <td class="txtright bgyellow02"><span class="greenFin">+23.72</span>%</td> <td class="txtright bgyellow03"><span class="greenFin">+60</span></td> <td class="txtright">5,917,300</td> <td class="txtcenter yjSt"> <a href="http://textream.yahoo.co.jp/rd/finance/0002">掲示板</a></td></tr> <tr class="rankingTabledata yjM"> <td class="txtcenter">2</td><td class="txtcenter"> <a href="http://stocks.finance.yahoo.co.jp/stocks/detail/?code=0003.t">0003</a></td> <td class="txtcenter yjSt">マザーズ</td> <td class="normal yjSt">(株)リxアワールド</td> <td class="txtcenter grey yjSt">12/18</td> <td class="txtright bold">2,125</td> <td class="txtright bgyellow02"><span class="greenFin">+23.19</span>%</td> <td class="txtright bgyellow03"><span class="greenFin">+400</span></td> <td class="txtright">6,800</td> <td class="txtcenter yjSt"> <a href="http://textream.yahoo.co.jp/rd/finance/0003">掲示板</a></td></tr> <tr class="rankingTabledata yjM"> <td class="txtcenter">3</td> ～ *********************************************** ソースはこんな感です。 ↓私のクソ文章 $n = preg_match_all("{<tr class=\"rankingTabledata yjM\"><td class=\"txtcenter\">(.*)</td><td class=\"txtcenter\"><a href=.*>(.*)</a>}", $feed, $cell, PREG_PATTERN_ORDER); preg_match_allで配列に格納して表示させたいのですが、 うまくいきません。 echo "１位 　" . $cell[1][0] . " " . $cell[1][1] . " " . $cell[1][2] .....??"\n"; echo "２位 　" . $cell[1][1] . "\n" ?????; ～ ？？？３次配列ですか？？ 混乱します。 ☆☆☆理想☆☆☆☆ 1位 2435 東証JQS (株)シダー 12/18 313 +23.72 % +60 5,917,300 2 位 3691 マザーズ (株)リアルワールド 12/18 2,125 +23.19% +400 6,800 ～ ☆☆☆☆☆☆☆☆☆ 取得した株価コードから別サイトを検索したいので 各項目ごとに別要素で表示させたいです。 ダメダメなので よろしくおねがいします。
表題ですが、 mysqliを使ってバルクインサートを行いたいのですが、 データ量が可変の場合のやり方がわからず、ご助言頂ければと存じます。 現在のコード。 $stmt = $mysqli->prepare("INSERT INTO mail_result.mails (NO,sessionID,Subject,ToAdd,FromAdd,Cc,Bcc,Date,AttachedFile,flag,RegistDate) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, 0, NOW())"); $bind_param = $stmt->bind_param('dsssssssi', $a, $b, $c, $d, $e, $f, $g, $h, $j); for ($i = 2; $i < count($obj[0]) + 2; $i++) { $a = $obj[0][$i][0]; $b = $sessionID; $c = $obj[0][$i][1]; $d = $obj[0][$i][2]; $e = $obj[0][$i][3]; $f = $obj[0][$i][4]; $g = $obj[0][$i][5]; $h = $date = date('Y-m-d H:i:s', $obj[0][$i][6]); $j = $obj[0][$i][7]; $stmt->execute(); } これだと1件ずつのインサートなので、 prepareで(?, ?, ?, ?, ?, ?, ?, ?, ?, 0, NOW())をcount($obj[0])分、入れたいのですが、 可変時の変数の指定方法がわからず、ご助言頂ければ幸いです。
PHPで、フォームのプルダウンを選んだ時、たとえば、「1月」を選んだ時に処理を開始し、選択されている1月のデータだけをデータベースからとってきて表示したいです。 <input type="submit"　～> の送信ボタンで送信するわけではなく、プルダウンを選んだ瞬間に処理開始したいので、$_POST[]では取得できませんでした。 PHPでプルダウンを選んだ瞬間にプルダウンのデータを送信する方法があれば教えてください。 PHPは現在勉強中の超初心者、javascriptはjQueryなら少々書ける程度です。 よろしくお願いいたします。
php初心者のものです。 print'<input type="submit" name="id" value="'.$rec['id'] .'">'; このvalueに「送信」など名前を付けたい場合どのような書き方をすればいいのでしょうか？
php初心者のものですがよろしくお願いいたします。 たとえばですが データベースに商品のデーターが3つ入ってたとします。 ＤＢからその3つのデータを取り出し ＰＨＰのprint または echoで取り出した商品を並べ それをクリックし商品詳細画面に行きたいのです。 [例] みかん りんご バナナ この　みかんやりんごバナナをクリックできるようにしたい。 なにか参考になるソースコードなど教えていただければ幸いです。
現在独学でＰＨＰを勉強しています。 目標は大掛かりな物ではなく、webサイトに使用する程度のものが自作できればいいと思っています。 現在手元に「スラスラわかるＰＨＰ」、「気づけばプロ並みPHP　ショッピングカート作りにチャレンジ」の２冊参考書があります。 スラスラわかるPHPは１回読み終わり、基礎的なことは少しですが理解はできました。 そこで次にもう一周スラスラわかるPHPをやってからショッピングカート作りを学ぶか、少しでもわかったからもうショッピングカート作りを学ぶかどうしようか迷っており、相談しました。 実際プログラミング言語を学習する時は、基礎を完璧に固めてから何かを作るにチャレンジするがいいか、それともうっすらでもいいから基礎がわかったら作ってみたい物に挑戦し壁にあたったら学習という風のどちらがいいのでしょうか？ それともこれらを学ぶより先に、優先すべきことがあるのでしょうか？ また、どの段階になったら次のステップに挑戦などの境界線みたいなものがありましたら教えてもらえると助かります。 ちなみに学校で学ぶという選択肢はないので、限界があるかもしれませんがあくまで独学という事でよろしくお願いします。
php ログインについて phpでログイン画面を作っているのですがログインできません。エラー等々もでず、「スタッフコードかパスワードが違います」になります。ちなみにＤＢにはスタッフのデータはしっかり存在します。 コードとパスワードを正しく入力しているにもかかわらずログインできません。 ソースはこちらです [staff_login.php] <!DOCTYPE html> <head> <meta charset="UTF-8"> <title>ログイン</title> </head> <body> スタッフログイン<br/> <br/> <form method="post" action="staff_login_check.php"> スタッフコード<br/> <input type="text" name="code"><br/> パスワード<br/> <input type="password" name="pass"><br/> <br/> <input type="submit" value="ログイン"> </form> </body> </html> [staff_login_check.php] <?php try { $staff_code=$_POST['code']; $staff_pass=$_POST['pass']; $staff_code=htmlspecialchars($staff_code); $staff_pass=htmlspecialchars($staff_pass); $staff_pass=md5($staff_pass); $dsn='mysql:dbname=*****;host=********'; $user='*********'; $password='********'; $dbh=new PDO($dsn,$user,$password); $dbh->query('SET NAMES utf8'); $sql='SELECT name FROM mst_staff WHERE code=? AND password=?'; $stmt=$dbh->prepare($sql); $data[]=$staff_code; $data[]=$staff_pass; $stmt->execute($data); $dbh = null; $rec=$stmt->fetch(PDO::FETCH_ASSOC); if($rec==false) { print'スタッフコードかパスワードが違います<br/>'; print'<a href="staff_login.html">戻る</a>'; } else { header('Location: staff_top.php'); } } catch(Exception $e) { print'エラーが発生しました'; exit(); } ?> 解決方法、ご指摘ございましたら教えていただきたいです。
私はPHPを勉強しており、まずはお問い合わせ機能・会員登録機能・ショッピングカート機能を目標に勉強しています。 参考書の知識ではあるのですが簡単な掲示板・画像のアップロード・画像一覧表示・データベースに手打ちで登録したユーザーIDとパスワードを使用しログイン画面を作るなどは作成できるようになりました。 (1)このような機能ができればもう目標の３つは作成できるのでしょうか？ またあるPHPの学習サイトでクラスの抽象など、クラス関係のことを目にしました。 (2)クラス関係などのものはWordPressみたいな複雑なプログラムに使用されるのが多いのでしょうか？ すみませんがよろしくお願いします。
mySQL＋PHP初心者です。 $stringNumに格納した値をWhere条件として、 testTable テーブルに格納したレコードから、名前を取得したいのですが、 "0000123"と"123"が同じ結果となってしまいます。 　　$stringNum = "0000123"; $sql = "SELECT name FROM testTable WHERE (Id = " . $stringNum . " )"; 　　→「鈴木太郎」が抽出 *********************** 　　$stringNum = "123"; $sql = "SELECT name FROM testTable WHERE (Id = " . $stringNum . " )"; 　　→「鈴木太郎」が抽出 *********************** testTableテーブル 　　Id　　　　name 　　0000123　鈴木太郎 　　0000124　佐々木学 文字列型として、"0000123"と、"123"は、別の値として区別したいのです。 上記のSELECT文だと、"0000123"と、"123"の場合で、 結果が同じ「鈴木太郎」が抽出されてしまいます。 型をしらべると、$stringNumの値は文字列型となっているので、 "0000123"と、"123"は別の値にはるはずですが、 なぜ同じになるのでしょうか？ "0000123"と、"123"を別の値として判別させるにはどうすればいいのでしょうか？
よく、SNS内部でのメール（例：ハンゲームのミニメール等）が使われてますが、 ミニメールの送り先アドレスや、ミニメールの送り主のミニメールアドレスは 、（プロバイダー経由の直アドじゃないものになってると思うのですが）実際には 誰が決めたアドレスで、どういうアドレスにすれば、SNS内部でのやりとりが できるのか教えていただけますでしょうか。自分としては、ユーザーIDなどの ユニークな文字列（例：uid68468043）などを＠の前につけたいと考えてます。
現在ある書籍でログイン機能の基礎を学んでいるのですが、エラーが出て困っています。 書籍内のコードや付属のサンプルファイルの物をいれたり確認したりするのですがエラーがでます。 エラー Fatal error: Call to a member function bindParam() on a non-object in C:\xampp\htdocs\tennis\login.php on line 15 (この15行目は〇の部分です) コード <?php session_start(); //セッション開始 if(isset($_SESSION['id'])){ //セッションにユーザーIDがある(ログインしている) header('Location:index.php'); }else if(isset($_POST['name']) && isset($_POST['password'])){ $dsn = 'mysql:host=localhost; dbname=tennis; charset=utf8'; $user ='tennisuser'; $password = 'password'; try{ $db = new PDO($dsn, $user, $password); $db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false); $stmt = $db->prepare("SELECT * FROM users WHERE name=:name AND password=:pass"); ○$stmt->bindParam(':name', $_POST['name'], PDO::PARAM_STR); $stmt->bindParam(':pass', sha1($_POST['password']), PDO::PARAM_STR); //クエリ実行 $stmt->execute(); if($row = $stmt->fetch()){ //ユーザーが存在していたので、セッションにユーザーIDをセット $_SESSION['id'] = $row['id']; header('Location:index.php'); exit(); }else{ //1レコードも取得できなかった場合 //ユーザー名・パスワードは間違っている可能性があるのでもう一度ログインフォームを表示 header('Location:login.php'); exit(); } }catch(PDOException $e){ die('エラー:'.$e->getMessage()); } }else{ //ログインしていない場合はログインフォームを表示 ?> <html> ～省略～
マイクロソフトASPだとWebなのですが、 デバッグ時にステップ実行ができて、かなり開発がしやすいのです。 PHPを開発するうえで、エクリプスなどがあげられますが、 大半は使ってないと聞きます。 コードにlogなどを記述して拾い上げて開発するのが早いのでしょうか？
PHP&MySQLで、日付時間入力のフォームを作成しています。 日付時間表示は、「2015年11時4分 7:00」という表示フォーマットにしたいのです。 日付時間入力フォームは、 https://www.softel.co.jp/blogs/tech/archives/4294 こちらを参考にして、datetimepickerのカレンダー入力に、時間入力を組み合わせたデモサンプルを利用しています。 年日時間を個別にデータベース管理する必要はなく、日時分まで管理したいことから、データベースのほうはひとつのカラムにdatetime型で定義しました。 datetimeなので、「2015-11-04 07:00:00」で格納されます。 そこからこの値をとりだして、画面表示させたいのですが、 「2015年11時4分 7:00」で表示させるために、秒を切り捨てたいのですが、 この場合どうすればいいのでしょうか？ ************************** mySql：ver5.6 PHP：ver5.4 phpMyAdmin 3.4.9 型：datetime
ＰＨＰ勉強中の初心者です。会員登録画面を作り動作確認しているのですが ログインするときに下記のエラーが出ます。 Warning: mysql_real_escape_string() [function.mysql-real-escape-string]: Access denied for user 'nakahiro7'@'localhost' (using password: NO) in /home/nakahiro7/nakahiro7.webcrow.jp/public_html/public_html/login.php on line 15 Warning: mysql_real_escape_string() [function.mysql-real-escape-string]: A link to the server could not be established in /home/nakahiro7/nakahiro7.webcrow.jp/public_html/public_html/login.php on line 15 Warning: mysql_real_escape_string() [function.mysql-real-escape-string]: Access denied for user 'nakahiro7'@'localhost' (using password: NO) in /home/nakahiro7/nakahiro7.webcrow.jp/public_html/public_html/login.php on line 16 Warning: mysql_real_escape_string() [function.mysql-real-escape-string]: A link to the server could not be established in /home/nakahiro7/nakahiro7.webcrow.jp/public_html/public_html/login.php on line 16 Warning: mysql_query() [function.mysql-query]: Access denied for user 'nakahiro7'@'localhost' (using password: NO) in /home/nakahiro7/nakahiro7.webcrow.jp/public_html/public_html/login.php on line 18 Warning: mysql_query() [function.mysql-query]: A link to the server could not be established in /home/nakahiro7/nakahiro7.webcrow.jp/public_html/public_html/login.php on line 18 Access denied for user 'nakahiro7'@'localhost' (using password: NO) login.phpのソースは下記です <?php require('dbconnect.php'); session_start(); if ($_COOKIE['email'] != ''){ $_POST['email'] = $_COOKIE['email']; $_POST['password'] = $_COOKIE['password']; $_POST['save'] = 'on'; } if(!empty($_POST)) //ログインの処理 if ($_POST['email'] != '' && $_POST['password'] != ''){ $sql = sprintf('SELECT * FROM member WHERE email="%s" AND password="&s"', mysql_real_escape_string($_POST['email']), mysql_real_escape_string(sha1($_POST ['password']))); $record = mysql_query($sql) or die(mysql_error()); if ($table = mysql_fetch_assoc($record)) { //ログイン成功 $_SESSION['id'] = $table['id']; $_SESSION['time'] = time(); //ログイン情報を記録する if ($_POST['save'] == 'on') { setcookie('email',$_POST['email'],time()+60*60*24*14); setcookie('password',$_POST['password'], time()+60*60*24*14); } header('Location: index.php'); exit();}else{ $error['login'] = 'failed'; }}else{ $error['login'] = 'blank'; } ?> <div id="lead"> <p>アドレスとパスワードを入力しログインしてください</p> <p>メンバーズ登録がまだの方はこちら</p> <p>&raquo;<a href="join/">メンバーズ登録をする</a></p> </div> <form action="" method="post"> <d1> <dt>アドレス</dt> <dd> <input type="text" name="email" size="35" maxlength="255" value="<?php echo htmlspecialchars($_POST['email']); ?>" /> <?php if($error['login'] == 'blank'): ?> <p class="error">*アドレスとパスワードを記入ください</p> <?php endif; ?> <?php if ($eoor['login'] == 'failed'): ?> <p class="error">*ログインに失敗しました。正しく入力してください。</p> <?php endif; ?> </dd> <dt>pasword</dt> <dd> <input type="password" name="password" size="35" maxlength="255" value="<?php echo htmlspecialchars($_POST['password']); ?>" /> </dd> <dt></dt> <dd><input id="save" type="checkbox" name="save" value="on"> <label for="save">次回から自動的にログイン</label> </dd> </d1> <div> <input type="submit" value="Log in"/></div> </form> ググりまくりましたが解決できませんでした。 エラーの解決方法　その他ご指摘ありましたらお願いいたします。
初心者の質問で申し訳ないのですが、現在phpを独学で勉強しようと思っています。 参考書を買えば初心者レベルにはなれると思うのですが中級者・上級者へステップアップするにはどういうことを学んだらいいかわからない状況です。 もしよろしければどういうことを学べばいいか教えてもらえると助かります。 また、どういうことができて中級者・上級者なのかも教えてもらえるとうれしいです。 あととりあえずショッピングカート機能・会員登録・メールフォームなどが作れるようになりたいと思っています。
php初心者のものです。調べたりしたのですがなかなからちが明かず質問させていただきます。 現在会員登録機能をphpで動作確認しています。流れといたしましては index.php(登録作業)→check/php(入力された内容の確認、よければ登録)→thanks.php(会員登録完了) という流れなのですが check.phpで「登録」を押してもthanks.phpに飛びません。 MYSQLのmemberテーブルには[id].[nama].[email].[password].[created].[men].[redy]とフィールドを入れています。データベースにはうまく接続されているみたいなのでcheck.phpがおかしいのでしょうか？　ソースはこちらです <?php session_start(); require('../dbconnect.php'); if(!isset($_SESSION['join'])){ header('Location: index.php'); exit(); } if(!empty($_POST)){ //登録処理をする $sql = sprintf ('INSERT INTO member SET nama="%s", email="%s", password="%s",created="%s"', mysqli_real_escape_string($db, $_SESSION['join']['nama']), mysqli_real_escape_string($db, $_SESSION['join']['email']), mysqli_real_escape_string($db, sha1($_SESSION['join']['password'])) ); mysqli_query($db, $sql) or die(mysqli_error($db)); unset($_SESSION['join']); header('Location: thanks.php'); exit();} ?> <html> <head> <meta charset="UTF-8" /> <title>新規会員登録</title> </head> <body> <form action="" method="post"> <dl> <dt>ユーザー名</dt> <dd> <?php echo htmlspecialchars($_SESSION['join']['nama'], ENT_QUOTES, 'UTF-8'); ?> </dd> <dt>メールアドレス</dt> <dd> <?php echo htmlspecialchars($_SESSION['join']['email'], ENT_QUOTES, 'UTF-8'); ?> </dd> <dt>パスワード</dt> <dd> 【表示されません】 </dd> </dl> <div><a href="index.php?action=rewrite">&laquo;&nbsp;書き直す</a> <input type="submit" value="登録する"></div> </form> </body> </html> その他なにか解決方法があればご指摘いただければ幸いです。 どうかよろしくお願いいたします。
いつもお世話になっています。 今回phpとdbで実験的にサイトを作りました。会員制のサイトです。 実験的に作ったものでどこかで公開することはないのでセキュリティなどはガバガバです。 これからしっかり勉強していこうと思いますが、会員制のサイトをログインするにあたりメールアドレスとパスワードでログインしてもらうというようにしました。 パスワードを自分で決めてその内容を登録してログインすることはできたのですが、たまに見かける最初に仮パスワードを発行しその後でパスワード変更ページで変更してもらうというようなページを作りたいです。 このようなページは一体どのように作ればよろしいのでしょうか。 最初に発行した仮パスワードはsha1ファンクションを使って暗号化しています。 最初にdbないのパスワードを参照しその後に変更するようなソースをかけばよろしいのでしょうか とても初歩的な質問ですがお時間があればアドバイスお願いします。
慣れてなくきょうしゅくなのですが、 mysqliで接続して、 selectして、 insertして、 selectして 切断みたいな事をユーザがリクエストしたタイミングで行うのですが、 こういった場合、接続と切断は、 どのタイミングで行うのでしょうか? ユーザが途中で止めた場合、切断出来ない?? 皆様、ユーザーが検索する様なwebシステムの時、 mysqliでどの様に、接続と切断を書いておりますでしょうか。
PHP初心者です。 https://github.com/sizaki30/TwitterAppOAuth を使って https://syncer.jp/twitter-api-matome/get/statuses/user_timeline のようなものを作ることは可能でしょうか？ 回答よろしくお願いします。
お世話になります。 現在php初心者で勉強中のものです。 現在「ひとこと掲示板を作る」というのをやっています。 ちなみに書籍はたにぐちまことの　よくわかるPHPの教科書です。 １ ログイン画面で　ハンドルネーム　アドレス　写真を入れる項目があるのですが、画像を入れても　check.phpで　画像が×になります。　解決方法が知りたいです。 ２ 登録と押しても登録できません　エラーは出ませんがMyAdominに会員登録情報のデータも送信されていませんでした。 ソース index.php <?php require('../dbconnect.php'); session_start(); if (!empty($_POST)){ //エラーの確認 if ($_POST['name'] == ''){ $error['name'] ='blank';} if ($_POST['email'] == ''){ $error['email'] = 'blank';} if (strlen($_POST['password']) < 4) { $error['password'] = 'length';} if($_POST['password'] == ''){ $error['password'] = 'blank';} $fileName = $_FILES['image']['name']; if (!empty($fileName)) { $ext = substr($fileName, -3); if ($ext !='jpg' && $ext !='gif'){ $error['image'] = 'type'; } } //重複アカウントのチェック if(empty($error)){ $sql = sprintf('SELECT COUNT(*) AS cnt FROM members WHERE email="%s"', mysql_real_escape_string($_POST['email'])); $record = mysql_query($sql) or die(mysql_error()); $table = mysql_fetch_assoc($record); if($table['cnt'] > 0){ $error['email'] = 'duplicate'; } } if(empty($error)){ //画像をアップロードする $image = date('YmdHis') . $_FILES['image']['name']; move_uploaded_file($_FILES['imge']['tmp_name'], '../member_picture/'. $image); $_SESSION['join']=$_POST; $_SESSION['join']['image'] = $image; header('Location: check.php'); exit(); }} //書き直し機能 if ($_REQUEST['action'] == 'rewrite') { $_POST = $_SESSION['join']; $error['rewrite'] = true;}?> <p>会員登録画面に必要事項を記入ください</p> <form action="" method="post" enctype="multipart/form-data"> <dl> <dt>ハンドルネーム<span class="required">必須</span></dt> <dd> <input type="text" name="name" size="35" maxlegth="255" value="<?php echo htmlspecialchars($_POST['name'], ENT_QUOTES,'UTF-8'); ?>" /> <?php if($error['name'] == 'blank'):?> <p clas="error">*ハンドルネームを入力してください</p> <?php endif; ?> </dd> <dt>メールアドレス<span class="required">必須</span></dt> <dd><input type="text" name="email" size="35" maxlegth="225" value="<?php echo htmlspecialchars($_POST['email'],ENT_QUOTES,'UTF-8');?>" /> <?php if($error['email'] == 'blank'): ?> <p class="error">*メールアドレスを入力してください</p> <?php endif; ?> <?php if($error['email'] =='duplicate'): ?> <p class="error">*指定されたメールアドレスは既に登録されています</p> <?php endif; ?> </dd> <dt>パスワード<span class="required">必須</span></dt> <dd><input type="password" name="password" size="10" maxlength="20" value="<?php echo htmlspecialchars($_POST['password'], ENT_QUOTES,'UTF-8'); ?>" /> <?php if($error['password'] == 'blank'): ?> <p class="error">*パスワードを入力してください</p> <?php endif; ?> <?php if($error['password'] == 'length'): ?> <p class="error">*パスワードは4文字以上で入力してください</p> <?php endif; ?></dd> <dt>写真など</dt> <dd><input type="file" name="image" size="35"/> <?php if ($error ['image'] == 'type'): ?> <p class="error">写真などは[.gif]または[.jpg]の画像を指定してください</p> <?php endif; ?> <?php if (!empty($error)): ?> <p class="error">恐れ入りますが画像を改めて指定してください</p> <?php endif; ?> </dd> <div><input type="submit" value="入力内容を確認する"/></div></form> check.php <?php session_start(); require('../dbconnect.php'); if(!isset($_SESSION['join'])) { header('Location: index.php'); exit();} if(!empty($_POST)) { //登録処理をする $sql = sprintf('INSERT INTO members SET name="%s", email="%s", password="%s",picture="%s",created="%s"', mysql_real_escape_string($_SESSION['join']['name']), mysql_real_escape_string($_SESSION['join']['email']), mysql_real_escape_string(shal($_SESSION['join']['password'])), mysql_real_escape_string($_SESSION['join']['image']), date('Y-m-d H:i:s')); mysql_query($sql) or die(mysql_error()); unset($_SESSION['join']); header('Location: thanks.php'); exit(); }?> <form action="" method="post" <input type="hidden" name="action" value="submit"/> <dl> <dr>ハンドルネーム</dr> <dd> <?php echo htmlspecialchars($_SESSION['join']['name'],ENT_QUOTES, 'UTF-8'); ?></dd> <dt>メールアドレス</dt> <dd> <?php echo htmlspecialchars($_SESSION['join']['email'],ENT_QUOTES, 'UTF-8'); ?></dd> <dt>パスワード</dt> <dd>[表示されません]</dd> 文字制限でここまでです　すみません。　お願いいたします。
PHP初心者です。　現在PHPの入門書で勉強中なのですが　その中の「一言掲示板を作ってみよう」という内容を今やっていますがエラーが出てしまいます。ググってもググってもよくわからず質問させていただきます。 dbconnect.php ソース <?php mysql_connect('mysql.hostinger.jp','u666462996_*****','******') or die(mysql_error()); mysql_select_db('u666462996_*****'); mysql_query('SET NAMES UTF8'); ?> サーバーのパス　ユーザー名は****とさせていただきます。 check.php ソース <?php session_start(); require('../dbconnect.php'); if(!isset($_SESSION['join'])) { header('Location: index.php'); exit();} if(!empty($_POST)) { //登録処理をする $sql = sprintf('INSERT INTO members SET name="%s", email="%s", password="%s",picture="%s",created="%s"', mysql_real_escape_string($_SESSION['join']['name']), mysql_real_escape_string($_SESSION['join']['email']), mysql_real_escape_string(shal($_SESSION['join']['password'])), mysql_real_escape_string($_SESSION['join']['image']), date('Y-m-d H:i:s')); mysql_query($sql) or die(mysql_error()); unset($_SESSION['join']); header('Location: thanks.php'); exit(); }?> <form action="" method="post" <input type="hidden" name="action" value="submit"/> <dl> <dr>ハンドルネーム</dr> <dd> <?php echo htmlspecialchars($_SESSION['join']['name'],ENT_QUOTES, 'UTF-8'); ?></dd> <dt>メールアドレス</dt> <dd> <?php echo htmlspecialchars($_SESSION['join']['email'],ENT_QUOTES, 'UTF-8'); ?></dd> <dt>パスワード</dt> <dd>[表示されません]</dd> <dt>写真など</dt><dd> <img src="../member_picture/<?php echo $_SESSION['join'] ['image']; ?>" with="100" height="100" alt="" /> </dd> </dl> <div><a href="index.php?action=rewrite">&laquo;&ndsp;入力しなおす</a> | <input type="submit" value="登録する"/></div></form> check.phpを開いたらエラーが出ます。 エラー Warning: require(../dbconnect.php) [function.require]: failed to open stream: No such file or directory in /home/u666462996/public_html/check.php on line 2 Fatal error: require() [function.require]: Failed opening required '../dbconnect.php' (include_path='.:/opt/php-5.2/pear') in /home/u666462996/public_html/check.php on line 2 エラー内容 解決方法をお願いいたします。 dbconnect.phpもエラーが出てましたが phpを5.5から5.2に設定しなおすとエラーはなくなりました。 これもどういうことでしょうか。 ひとつお力を貸してくださいませ。
お知恵をお貸しください。 現在、ネットで公開されている以下のサーバー監視PHPスクリプトをCRONで1時間毎に動かしているのですが、監視対象サーバートラブルも解消したので、「障害時のみ」下記のスクリプトからメールを送信するようにしたいと思っております。 当方、お恥ずかしいのですがほぼ素人なもので、、、 大変申し訳ないのですが、どのように記述すれば良いか教えていただけませんでしょうか。 ＜実現したいメール送信条件＞ 以下のスクリプトにおいて「pingチェック」がNG、または「webアクセスチェック」がNG、またはその両方がNGの場合にメールを送信。 宜しくお願い致します。 <?php //PING応答対象のサーバーIPアドレス $SERVER_IP = 'ｘｘｘ.ｘｘｘ.ｘｘｘ.ｘｘｘ'; //HTTPステータスを取得する対象のURL $URL = 'http://www.sample.com'; //メールの送信先（管理者メール） $MAIL_TO = 'ｘｘｘ@ｘｘｘ.com'; //メールの送信元に表示するアドレス $MAIL_FROM = 'aaa@aaa.jp'; //pingチェック $ping_command_str = "ping -c 3 -w 5 $SERVER_IP"; if (!strstr(`$ping_command_str`, '100% packet loss')) { $result = "$SERVER_IP ping ok\n"; } else { $result = "$SERVER_IP ping ng\n"; } //webアクセスチェック if ($res = file_get_contents($URL)) { $result .= "{$URL} access ok\n"; } else { $result .= "{$URL} access ng\n"; } //結果をメール送信 $mail_header = "From: $MAIL_FROM"; mail($MAIL_TO, 'check result', $result, $mail_header); ?>
PHPを独学で勉強中で、気になったことがあるので質問させていただきます。 最初に買った書籍とその次に買った書籍で書き方が違うところがあるので、普通はどちらでやるのか、また、使い分けがあるのかが知りたいです。 たとえば、データベースを1行ずつ取り出す処理で、1冊目では $pdo = new PDO($dnsinfo,$USER,$PW); $sql = "SELECT * FROM ○○"; $stmt = $pdo->prepare($sql); $stmt->execute(null); $res = ""; while($row = $stmt->fetch(PDO::FETCH_ASSOC)){ $res .= $row['△△'] ."," .$row['□□'] ."<br>\n"; } ・・・というコードがあったのですが、2冊目には同じような処理が mysqli_fetch_assoc()を使って書かれていたり、 接続の仕方も1冊目では「new PDO($dnsinfo,$USER,$PW);」を使って書かれているのが、2冊目では「mysqli_connect()」になっていたり、 他にも同じような処理がよく似たコードで書かれています。 調べてみると、PHP5.5から1冊目のやり方になった・・・ような記事を見つけたのですが、どちらの本もPHP5.5と書いてあり、いまいちよくわかりません。 詳しい方いらっしゃいましたらご教示お願いいたします。
お世話になります。ご助力頂ければ幸いで御座います。 ---------------------------- PHP Version 5.6.14 cakephp 2.5系 mariadb-10.0.21-with-mroonga-5.08-winx64 ---------------------------- cakephpで以下の事がやりたいです。 (1)select文を使用してデータの抽出 (2)(1)を利用してテンポラリテーブルを作成。 (3)web上で検索結果を表示。 ※ページングを行いたのでcakePHPでページネーションを使用したいです。 (4)次ページやソート変更の際にはテンポラリテーブルからselect。 cakephpでテンポラリテーブルを作成、使用する場合のやり方がわからず、 頓挫しております。 お手数をお掛け致しますが、 何かご指摘点でも構いませんので、ご回答頂ければ幸いで御座います。
PHP初心者です。 データベースの検索処理を実装しようとしています。 一般の検索エンジンのように、半角スペース、全角スペース、どちらも区切り文字として認識させて、スペースで区切った複数ワードによる検索抽出ができるようにしたいのです。 データベース例） 青山病院 伊藤病院 井上病院 青山歯科 鈴木歯科 「青山　井上」（全角スペース）と検索しても、「青山 井上」（半角スペース）と検索しても、 青山病院 井上病院 青山歯科 という検索結果にしたい。 実際にコードをかいてみたのが以下です。 $searchwords = "青山　井上";　//全角スペース $array_searchwords = mb_split("[　 ]", $searchwords);　////[　 ]には全角スペース $sql = "SELECT hospitalname FROM hospital"; foreach( $es_array_searchword as $k => $v ) { # １ワード毎のカッコ区切り（開始） 　if( $k == 0 ) { 　　$sql .= " WHERE ("; 　} else { 　　$sql .= " OR ("; 　} 　$sql .= " hospitalname LIKE '%${v}%'"; 　$sql .= " ) "; 　echo $sql; } このようにかくと、$sqlは、 「SELECT hospitalname FROM hospital WHERE ( hospitalname LIKE '%青山%' ) OR ( hospitalname LIKE '%%' ) OR ( hospitalname LIKE '%井上%' )」 と出力されます。 要するに、$searchwords = "青山　井上";、の「全角スペース」が文字として認識されてしまいます。 これを、 「SELECT hospitalname FROM hospital WHERE ( hospitalname LIKE '%青山%' ) OR ( hospitalname LIKE '%井上%' )」 というsql文で実行できるようにしたいのです。 $array_searchwords = mb_split("[　 ]", $searchwords); の[　 ]の書き方が問題になるのかなと思いますが、全角スペース区切りを生かすには、どうかけばよろしいでしょうか？
php5で、外部からファイルをダウンロードするモノを作っています。 htmlでフォームからPOSTでコードを送り、それをもとにダウンロードしています。 フォームからコードを送信すると、サーバー側でのダウンロード処理が終わるまでの時間、フォームの画面のまま読み込み中になってしまいます。 そこで、ダウンロード処理が始まる前に待機するように促すメッセージを出そうと、ダウンロード処理をしているphpの最初にechoでメッセージを出そうと試みたのですが、画面が切り替わるのはすべての処理が終わってからのようで、変わらずでした。 理想は、フォームから送信すると待機ページに切り替わり、ダウンロード中と書かれた部分がダウンロード終了と同時にダウンロードボタンになる、といった動作をさせたいです。 不可能であれば、ダウンロード処理を開始する前に時間がかかることを知らせるメッセージを出すだけでも構いません。 お力を貸していただけると幸いです。長文失礼しました。
正規表現を用いて文字列の後ろから最初にマッチングした特定の文字より前にある最初の数字をとってくる方法がわからず、質問させて頂きました。 合計金額という文字の前にある数字をとってきたいのですが、何かいい方法はないでしょうか？ 例）ああ22 合計金額5000円 あああああああｗでふぁわｗ 数量2 合計金額10000円 ↑の場合ですと2がとってきたいということになります。 例）いいいい1 合計金額5000円 いどぁ 数量15 合計金額10000円 ↑の場合でいくと15がとってきたいということになります。 数量のところは1桁とは限りません。 又数量という文字かどうかも限りません。 台数の場合や枚数の場合や色々なパターンがあります。 何かいい方法がありましたらご回答よろしくお願いいたします。
PHPのforeach文を使いMysqlにデータをINSERTしたいです。 配列$resultは以下のような連想配列になっています。 Array ( [0] => Array ( [A] => 1 [B] => 2 [C] => 3 [D] => 4 [E] => 5 ) [1] => Array ( [A] => 2 [B] => 4 [C] => 6 [D] => 8 [E] => 10 ) ) 上記の連想配列をforeach()文で以下の処理をします。 foreach ($result as $key => $value) { /** * データベースへの追加（新規追加時だけ実行。コメント忘れずに） */ $sql = $pdo->prepare('INSERT INTO sample(a, b, c, d, e) VALUES(:a, :b, :c, :d, :e)'); $sql->execute(array(':a' => $value[A], ':b' => $value[B], ':c' => $value[C], ':d' => $value[D], ':e' => $value[E])); } その後データベースでselect * from test;とすると1行目のデータしか格納されていません。原因が不明です。 print すると期待する配列要素が表示されますので配列のデータ配置不備ではありません。 アドバイス頂きたくお願い申し上げます。
ウェブマスターツールにてワードプレスタグの URL削除を考えております。 そこで、 http://www.example.com/blog/tag/ 上記URLの/tag/以降のURLアドレスを一括で削除する場合、 どのような正規表現になりますでしょうか？ よろしくお願いいたします。
こんにちは。 先日よりPHPにて文字列を分割し配列する事に悩んでいます。 質問内容としましては、 $str = "文字","1,2,3","テキスト" を Array ( [0] => 文字" [1] => "1,2,3" [2] => "テキスト" ) の様に配列にしたいと思っています。 今までは、sprit(",", $str) で分割していましたが、PHP 5.3.0 で 非推奨となったことで explode(",", $str) に変更。 その後今回の様なデータは無く問題ありませんでしたが、新しくデータを読み込みした時、ダブルクォートの中にコンマがあり、 Array ( [0] => 文字" [1] => "1 [2] => 2 [3] => 3" [4] => "テキスト") と分割され、エラーとなりました。 色々、「Sprit」「PHP 分割 ダブルクォーテーション」等で検索しているにも関わらず、希望の情報がヒットしませんでした。 改善方法若しくは情報の記載されておりますサイトがあればご誘導いただければ幸いです。 初歩的な質問かと思いますが、お願い致します。 サーバの種類： MySQL サーバのバージョン： 5.5.42 - Source distribution PHP/5.6.10
PHPのファイル操作についてご教授ください 同じサーバー内に置いている同じ環境の別ドメインに設置した 同じPHPの挙動が異なる為、その原因を教えて頂きたいです。 ファイルへ保存した場合の改行の有無についてです。 以下一部を抜粋しています。 初期状態（abc.txtの中身） -----ここから----- すもも<>あんず<>すいか<> -----ここまで----- ▼以下を実行 [入力内容] data01:すもも data02:あんず data03すいか $log_file = 'abc.txt'; $lines = ""; $fp = fopen($log_file, "rb+"); set_file_buffer($fp, 0); flock($fp, LOCK_EX); $freadsize = @fread($fp,filesize($log_file)); $freadsize = chop($freadsize); $lines = explode("\n",$freadsize); $lnum = count($lines); for($i=0;$i<$lnum;$i++){ $lines[$i] = "$lines[$i]\n"; } array_unshift ($lines, "$data01<>$data02<>$data03<>$blank"); rewind($fp); $lnum = count($lines); for($i=0;$i<$lnum;$i++){ if(preg_match("/^[0-9]{10}<>+/",$lines[$i])){$check = 1;}else{$check = 0;} if($check == 1){ fputs($fp,$lines[$i]); } } ftruncate($fp, ftell($fp)); flock($fp, LOCK_UN); fclose ($fp); ▼実行後（abc.txtの中身） りんご<>ばなな<>ぶどう<> すもも<>あんず<>すいか<> 別のドメイン下では、改行されません。 りんご<>ばなな<>ぶどう<>すもも<>あんず<>すいか<> この同じPHPを同じサーバー内の別ドメインで 実行した場合、改行される場合と改行されない場合があるのです。 ドメインが異なる以外は同じ環境のはずなのですが、挙動が異なります。 改行をして保存したいのですが、改行されないドメイン下のPHPは array_unshift ($lines, "$data01<>$data02<>$data03<>$blank"); ↓ array_unshift ($lines, "$data01<>$data02<>$data03<>$blank\n"); としています。 何故挙動が異なるのでしょうか？ 文字コード、改行コードは同じです。
phpでIDとパスワードを入力してもらいそれをチェックしてログインするシステムを作っています。 普通にログインはできるのですがIDがsから始まりその後に数字が7桁来れば会員専用のメイン画面に移行し、それ以外のIDであれば普通のメイン画面に移行するプログラムを書きたいです。 例）IDがs1234567であれば会員用の画面、それ以外s1234,1234567,d1234567などのIDであれば違う画面に移行したいです。 自分が書いたコードはこのようになっておりこちらをどのように改良していけばこのようなプログラムが書けるか知りたいです。 どなたかご教授お願いします。 <?php require('dbconnect.php'); session_start(); if (!empty($_POST)) { // ログインの処理 if ($_POST['name'] != '' && $_POST['password'] != '') { $sql = sprintf('SELECT * FROM members WHERE name="%s" AND password="%s"', mysql_real_escape_string($_POST['name']), sha1(mysql_real_escape_string($_POST['password'])) ); $record = mysql_query($sql) or die(mysql_error()); if ($table = mysql_fetch_assoc($record)) { // ログイン成功 $_SESSION['id'] = $table['id']; $_SESSION['time'] = time(); header('Location: group.php'); exit(); } else { $error['login'] = 'failed'; } } else { $error['login'] = 'blank'; } } ?>
こんばんは。phpを勉強し始めたばかりの者です。宜しくお願いします。 会員制サイトを作っています。 そこで、 ページにログインなしで来ると、ログインページにリダイレクト、ログインすると、元いた場所にリダイレクトされるようにしたいです。 以下のような方法はセキュリティ的に問題ありますでしょうか？ セッションに戻るページを覚えさせて、 if (!isset($_SESSION["name"])) { $_SESSION['return'] = $_SERVER["REQUEST_URI"]; header("Location: login.php"); exit; } ログイン処理を終えた後、 if(!empty($_SESSION['return'])){ $url = $_SESSION['return']; header("Location: $url"); exit; } else { header("Location: top.php");// 戻るページがない場合、トップページへ exit; } のようにして、戻ります。 が、期待した通りの動きはできたのですが、セキュリティ的に問題がないかどうか不安です。 もし、やめた方が良いのでしたら、どのような方法が考えられますでしょうか。 ご指導ください。宜しくお願いします。
他人が作成したフラッシュゲームを、そのサイトに飛ばずに、自分のサイトにプレイ画面を埋め込んでプレイできるようにしたいです。調べてもよくわからなかったので、やり方を知っている方がいれば、ご教授お願いします。
PHP勉強中の初心者です。 bbs.phpに投稿フォームと投稿内容を表示するページ、bbs2.phpにはエラー処理＆投稿完了メッセージと、別々に作る方法は下記で一応出来たのですが、これらを一つの.phpに纏めるにはどうすればいいのでしょうか？ bbs2.phpの方に逐一入っている、 exit('名前・コメントが両方未入力です。<p><a href="javascript:history.back();">掲示板ヘ戻る</a></p>'); とかのエラーメッセージの表示は、全てformタグの前後辺りに移して、です。 試行錯誤してみましたが、変なエラーばっかり出てしまいます。 うまい方法がありましたら、変数・関数の追加や削除は自由です。 どうかご教授の方、よろしくお願いします。 【bbs.txt（例）】 <strong>名前：</strong>テスト2&thinsp;<font size="2">さん</font>&emsp;<strong>コメント：</strong>こんばんは&emsp;<strong>時間：</strong>09月19日 20時02分 <strong>名前：</strong>テスト1&thinsp;<font size="2">さん</font>&emsp;<strong>コメント：</strong>こんにちは&emsp;<strong>時間：</strong>09月19日 13時48分 【bbs.php】 <html> <head> <meta http-equiv="Content-Type" content="text/html" charset="utf-8" /> <title>一言</title> </head> <body> <form action="bbs2.php" method="post"> 名前：<input size="15" type="text" name="name" value="">&emsp;コメント：<input size="30" type="text" name="comment">&emsp;<input type="submit" value="送信">&nbsp;<input type="reset"> </form> <hr> <?php $lines = file('bbs.txt'); foreach ($lines as $l) { print "</p>" . $l . "</p>\n"; } ?> <hr> 【bbs2.php】 <?php if (mb_strlen($_POST['name']) === 0 && mb_strlen($_POST['comment']) === 0) { exit('名前・コメントが両方未入力です。<p><a href="javascript:history.back();">掲示板ヘ戻る</a></p>'); } else if (isset($_POST['name']) !== TRUE || mb_strlen($_POST['name']) === 0) { exit('名前を入力してください。<p><a href="javascript:history.back();">掲示板ヘ戻る</a></p>'); } else if (isset($_POST['comment']) !== TRUE || mb_strlen($_POST['comment']) === 0) { exit('コメントを入力してください。<p><a href="javascript:history.back();">掲示板ヘ戻る</a></p>'); } else if (mb_strlen($_POST['name']) > 20 && mb_strlen($_POST['comment']) > 100) { exit('名前（20文字以内）とコメント（100文字以内）が両方文字数制限を超えています。<p><a href="javascript:history.back();">掲示板ヘ戻る</a></p>'); } else if (mb_strlen($_POST['name']) > 20) { exit('名前は20文字以内で入力してください。<p><a href="javascript:history.back();">掲示板ヘ戻る</a></p>'); } else if (mb_strlen($_POST['comment']) > 100) { exit('コメントは100文字以内で入力してください。<p><a href="javascript:history.back();">掲示板ヘ戻る</a></p>'); } else if (preg_match('/http/', $_POST['comment']) > '0' ) { exit('スパム対策により、URL付きのコメントは投稿できません。<p><a href="javascript:history.back();">掲示板ヘ戻る</a></p>'); } $name = htmlspecialchars($_POST['name']).'&thinsp;<font size="2">さん</font>'; $comment = htmlspecialchars($_POST['comment']); $now = date('m月d日 H時i分'); $post_data = "<strong>名前：</strong>$name&emsp;<strong>コメント：</strong>$comment&emsp;<strong>時間：</strong>$now\n"; $read_data = file_get_contents('bbs.txt'); file_put_contents('bbs.txt',$post_data . $read_data); ?> <html> <head> <meta http-equiv="Content-Type" content="text/html" charset="utf-8" /> <title>一言</title> </head> <body> <p>コメントを投稿しました。</p> <p><a href="bbs.php">一覧へ戻る</a></p> </body> </html>
http://detail.chiebukuro.yahoo.co.jp/qa/question_detail/q1134440526 の回答者の方のコードを参考にしたのですが、下記の通りにすると Parse error: syntax error, unexpected '{' in C:\Program Files\Apache\Apache24\htdocs\sample\kensaku20.php on line 19 と出ます、カッコの数がおかしいのでしょうか？ 19行目前後を見てもおかしな所はないと思われるのです(秀丸を使っていてカーソルを合わせると色が変わる部分を見ました) やりたいこととしてはid名か商品名のどちらか・或いは両方とも入力したらDBより検索、表示させる事です。 HTML部 <form action ="http://localhost/sample/kensaku20.php" method="post"> id名：<input type="text" name="id"> 商品名：<input type="text" name="name"> <input type="submit" name="exec" value="検索"> </form> php部 中略 $ary_whr = array(); $ary_dat = array(); if (!empty($_POST['exec'])) __{ $ary_whr[] = 'name LIKE ? '; $ary_dat[] = '%'.$_POST['exec'].'%';} if (!empty($_POST['id'])) __{ $ary_whr[] = 'id LIKE ? '; $ary_dat[] = '%'.$_POST['id'].'%';} if (!empty($_POST['name'])) __{ $ary_whr[] = 'name LIKE ? '; $ary_dat[] = '%'.$_POST['name'].'%';} $where = ' WHERE ' . implode(' AND ', $ary_whr); 中略
1. $html = preg_replace( '/ class=[\'"]([^\'"]+)[\'"]/i', '', $html ); return $html; と return preg_replace( '/(height|width)="\d*"\s/', "", $html ); の '/ class=[\'"]([^\'"]+)[\'"]/i' と '/(height|width)="\d*"\s/' の結果はどっちも中身を空欄にするのですが、なぜ=の右の表現方法が違いますか？ 意味はどう違いますか？ 2. それから、 $html = preg_replace( '/ class=[\'"]([^\'"]+)[\'"]/i', '', $html ); は return preg_replace( '/ class=[\'"]([^\'"]+)[\'"]/i', '', $html ); でも意味は同じですか？　return $html;を使ったほうがいいですか？ 3. それから '', $html と "", $html の意味は同じですか？
Twistoauthを使って見たのですが、テストツイートがうまく行きません Error! Couldn't resolve host 'api.twitter.com' コード ↓ <?php //import require_once "TwistOAuth.phar"; //OAuth TwistOAuth //boot tweet try{ $tweet=$tfa->post("statuses/update",array("status"=>filter_input(INPUT_POST,"test"))); }catch(TwistException $te){ echo "Error! ".$te->getMessage(); } ?> なにが原因なのでしょうか
phpでログイン処理のif文を書いています。 nameとpasswordのフィールドが記入されているのかをチェックするif文を書いたのですが、機能してくれません。何かが間違っているのでしょうか。 何も入力しないor間違った情報を入力する　ということをしてもログインが出来てしまいます。 どなたかテェックお願い致します。 <?php require('dbconnect.php'); session_start(); if ($_COOKIE['name'] != '') { $_POST['name'] = $_COOKIE['name']; $_POST['password'] = $_COOKIE['password']; $_POST['save'] = 'on'; } if (!empty($_POST)) { // ログインの処理 if ($_POST['name'] != '' && $_POST['password'] != '') { $sql = sprintf('SELECT * FROM members WHERE name="%s" AND password="%s"', mysql_real_escape_string($_POST['name']), sha1(mysql_real_escape_string($_POST['password'])) ); $record = mysql_query($sql) or die(mysql_error()); if ($table = mysql_fetch_assoc($record)) { // ログイン成功 $_SESSION['id'] = $table['id']; $_SESSION['time'] = time(); // ログイン情報を記録する if ($_POST['save'] == 'on') { setcookie('name', $_POST['name'], time()+60*60*24*14); setcookie('password', $_POST['password'], time()+60*60*24*14); } header('Location: index.php'); exit(); } else { $error['login'] = 'failed'; } } else { $error['login'] = 'blank'; } } ?>
よくわかるphpの教科書という参考書を読んで掲示板やログイン方法などを学んでいるのですが、sampleというフォルダの中にindex.phpとlogin.phpがあります。 普通でしたらindex.phpが先に開かれると思いますがここではなぜかsampleというフォルダを開くとlogin.phpにアクセスし、そのページでログイン処理をするとindex.phpにページが変わります。 これはいったいどのようにやるのでしょうか。 かなり初歩的な質問だと思いますがお時間のあるときに回答していただけると幸いです。
PHPを利用して、phpMyAdminのテーブル名home_centerに、6行目・7行目・8行目…と新しい商品データの追加が行えるプログラムを作成するにはどうすればいいでしょうか。 priceカラムのデータ型はINTのため、価格に英語など数値以外を入力した場合、追加失敗しますので、追加をした際は成功したか失敗したか簡易的なメッセージの表示もしたいです。 html・cssはともかく、PHPは勉強中の初心者なもので、データベースを表示するだけなら下記ソースの通り何とかなりますが、データを追加する方法はエラーばっかり出て、いまいち見当がつきません。 勉強しますので、どうか御教授の方お願い致します。 home_centerのデータ例（2列×5行） ―――――――――― 商品名　　　　価格 木工用ボンド　170 のこぎり　　 1280 安全靴　　　 3980 作業着　　　 5500 ―――――――――― 以下、PHPソース。 <?php $host = '省略'; // データベースのホスト名又はIPアドレス $username = '省略'; // MySQLのユーザ名 $passwd = '省略'; // MySQLのパスワード $dbname = '省略'; // データベース名 $link = mysqli_connect($host, $username, $passwd, $dbname); // 接続成功した場合 if ($link) { // 文字化け防止 mysqli_set_charset($link, 'utf8'); $query = 'SELECT goods_name, price FROM home_center ORDER BY price ASC'; // クエリを実行します $result = mysqli_query($link, $query); // 1行ずつ結果を配列で取得します while ($row = mysqli_fetch_array($result)) { $goods_data[] = $row; } // 結果セットを開放します mysqli_free_result($result); // 接続を閉じます mysqli_close($link); // 接続失敗した場合 } else { print 'DB接続失敗'; } ?> <!DOCTYPE html> <html lang="ja"> <head> <meta charset="UTF-8"> <style type="text/css"> table, td, th { border: solid black 1px; line-height: 1.5; } table { width: 250px; } </style> </head> <body> <h1>ホームセンター商品一覧</h1> <form> <p> 商品名：<input type="text" name="goods_name" size="20">&emsp;価格：<input type="text" name="price" size="10"> 円<br><input type="submit" value="送信"><input type="reset" value="リセット"></p> </form> <table> <tr> <th>商品名</th> <th>価格</th> </tr> <?php foreach ($goods_data as $value) { ?> <tr> <td><?php print htmlspecialchars($value['goods_name'], ENT_QUOTES, 'UTF-8'); ?></td> <td align=right><?php print htmlspecialchars($value['price'], ENT_QUOTES, 'UTF-8'); ?></td> </tr> <?php } ?> </table> </body> </html>
不思議なことが起こります。 password_hash()で生成したパスワードをデータベースに保存しています。 それを取り出し、password_verifyでマッチするか否かを調べているのですが、 データベースから取り出したものだとマッチせず、 それをprintで出したものをコピー＆ペーストで変数にいれたものはマッチします。 うまく説明できず、申し訳ないのですが…… $id = 66; require_once 'dbmanager.php'; $pdo = getDb(); $sql = "select password from members where id = $id"; $stmt = $pdo->prepare($sql); $stmt->execute(); $row = $stmt->fetch(PDO::FETCH_ASSOC); $hash = $row['password']; //　print $hash;　すると、「$2y$09$poBgU6PYziypG6dBtvDiYuG.9kPdTHVkTymLxo2RiCnC3NG.67ZhC」と表示されます。 そして、 $hash = $row['password']; とすると、マッチせず、 $hash = '$2y$09$poBgU6PYziypG6dBtvDiYuG.9kPdTHVkTymLxo2RiCnC3NG.67ZhC'; とすると、マッチします。 if (password_verify('****', $hash)){ echo 'あっている'; } else { echo '間違っている'; } どうしたら、データベースから取り出した値で直にマッチさせることができるのでしょうか。 もの凄く基礎的なところで間違っているのでしょうか。 宜しくお願いします。
お世話になります。 現在ECサイトを構築中で、URLが特定条件のもとif分などで分岐して、 相応するテキストや画像などを表示させたいと考えています。 URLだけの条件分岐なら方法は分かるのですが、あまりにもページ数が多すぎるため ある程度URLに類似性がある場合に同じ処理をしたいです。 条件としては下記のようなパターンがあります。 -------------------------------------------------------------------------------------- パターン1 -------------------------------------------------------------------------------------- http://example.com/△△△△△△/?t_area%5B%5D=▲&t_recruit_type%5B%5D=b http://example.com/○○○○○○○○○○○/?t_area%5B%5D=●&t_recruit_type%5B%5D=a 最後尾が「a」の場合は「a」の商品を表示 最後尾が「b」の場合は「b」の商品を表示 （※階層や途中の▲や●などでは条件分岐しない。最後尾だけで分岐） -------------------------------------------------------------------------------------- パターン2 -------------------------------------------------------------------------------------- http://example.com/△△△△△△/?t_area%5B%5D=☆&t_recruit_type%5B%5D=▲ http://example.com/○○○○○○○○○○○/?t_area%5B%5D=★&t_recruit_type%5B%5D=● URLの特定箇所が☆の場合は「c」の商品を表示 URLの特定箇所が★の場合は「d」の商品を表示 （※階層や最後尾では条件分岐しない。途中の☆か★で条件分岐） -------------------------------------------------------------------------------------- といった具合です。 大変申し訳ありませんが、どうかご協力いただけないでしょうか？
こんんばんは。この度もよろしくお願いします。 phpを勉強中の者です。 GDを使って画像をリサイズし、ブラウザに表示したり、データベースに保存したりしたいです。そこで、質問なのですが、バッファリングで出力した文字列をセッションで使うことはできないのでしょうか？ 以下のようにしてみましたが、別ページで引き継ぎできません。 セッションで使うためにはどうすれば良いのでしょうか。 そもそもセッションでは使うことができない……まるっきり私の理解が間違っているのでしょうか。 よろしくお願いします。 $filename = 'test.jpg'; $percent = 0.5; list($width, $height) = getimagesize($filename); $new_width = $width * $percent; $new_height = $height * $percent; $image_p = imagecreatetruecolor($new_width, $new_height); $image = imagecreatefromjpeg($filename); imagecopyresampled($image_p, $image, 0, 0, 0, 0, $new_width, $new_height, $width, $height); ob_start(); imagejpeg ($image_p); $img = ob_get_contents(); ob_end_clean(); $_SESSION['img'] = $img;　←できません！
こんにちは TCP/IPというものは、サーバですか？言語ですか？もしくは、それ以外ですか？ PHPとは何がちがうのでしょうか？ この物体は何なのでしょうか…
こんにちは。いつもお世話になっております。 PHPを勉強し始めたばかりのものです。 登録フォームから送った画像を、確認ページでプレビュー表示させたいです。 http://detail.chiebukuro.yahoo.co.jp/qa/question_detail/q12141865207 の質問に辿り着きましたが、実装できませんでした。 ３点質問があります。 １、sessionを使わず、$_FILESで実装することが可能なのでしょうか？ ２、$_FILESから画像を表示させようとして失敗しています。一時保存場所に画像があると思うのですが、 $photo = $_FILES['UseImg']['tmp_name'] <img src ="<?php echo $photo; ?>"> これでは画像表示ができませんでした。$_FILESに関して根本的な考え違いをしているのだと思うのですが、これはどうしてなのでしょうか？ 3、img要素にPHPを挿入することは可能なのでしょうか？　可能だとしたら、何故、以下の方法で動かないのでしょうか。 file.php <form enctype="multipart/form-data" action = "file2.php" method = "post" > <input type="file" name="UseImg"> <input type="submit" name="FILE送信" value="FILE送信"> </form> file2.php <?php session_start(); $_SESSION['UseImg']['type'] = exif_imagetype($_FILES['UseImg']['tmp_name']); $_SESSION['UseImg']['data'] = file_get_contents($_FILES['UseImg']['tmp_name']); echo '<img src="UseImg.php" />'; UseImg.php <?php session_start(); if (!isset($_SESSION['UseImg'])) { die('abort'); } switch ($_SESSION['UseImg']['type']) { case IMAGETYPE_JPEG: header('content-type: image/jpeg'); break case IMAGETYPE_PNG: header('content-type: image/png'); break case IMAGETYPE_GIF: header('content-type: image/gif'); break } echo $_SESSION['UseImg']['data'] 持っているPHPの本では確認画面を通さずに画像をアップロードしており、プレビューに関しては見当たりません。 いつも質問ばかりで申し訳ありませんが、この度も、宜しくお願いします。
こんにちは。いつもお世話になっております。 会員サイトページを作る練習をしています。 phpassと言うとても便利そうなライブラリに辿り着いたのですが、使い方が分かりません。 やりたい事は基本的なことで、 「会員ごとにIDとパスワードをmysqlに保存する。 パスワードの保存時に、phpassを利用する。（ストレッチとソルトでパスワードを保存する）」 なのですが、詳しい説明のあるサイトに出会えません。書籍も見つけられませんでした。 http://gihyo.jp/dev/serial/01/php-security/0040の記事は拝見したのですが、 分かりませんでした…… 詳しく実装方法に近い説明をしているサイトをご存じありませんでしょうか。書籍でも構いません。 もし、そのようなサイトがないのでしたら、 何を勉強をすれば上記のサイトを理解できますでしょうか。 宜しくお願いします。
mail.fla　と　flash_mail.php に下記のように記述してます。 flash_mail.php で、var_dump() したら、すべてNULL になります。 .fla ファイルのシンタックスは通ってるのですが、 Action Scriptのどこかが間違っていると思います。 どこが間違っているのかお教え願いますでしょうか。 【mail.fla】 1フレーム目（キーフレーム）に書きを記述 LV1 = new LoadVars(); LV1.shimei = shimei; LV1.email = email; LV1.subject = subject; LV1.honbun = honbun; LV1.sendAndLoad("flash_mail.php", LV1, "POST"); submit_btn.onRelease = function(){ getURL("flash_mail.php"); } --------------------------------------------------------------------------- 【flash_mail.php】 <?php $shimei = $_POST['shimei']; $email = $_POST['email']; $subject = $_POST['subject']; $honbun = $_POST['honbun']; var_dump($shimei); var_dump($email); var_dump($subject); // 送信者へメール $to = $email; $from = "~"; $subject = mb_convert_encoding($subject, "utf-8", "auto"); // utf-8にエンコード $honbun = mb_convert_encoding($honbun, "utf-8", "auto"); mb_internal_encoding("UTF-8"); mb_send_mail($to, $subject, $honbun, $from); echo 'test complete!'; ?>
こんにちは、お世話になります。初学者です。 ドットインストールさんのページ送りで勉強しながら、and検索の結果をページ送りしようとしています。が、リンク設定でつまずいてしまいました。 GETで取得したキーワードを次のページに持ち越しできません。 結果ページの総数までは作れたのですが…… どのようなところを勉強すればいいのかすら分かりません。 また、Notice: Undefined variable: pageのエラーも直したいです。 （if(isset($_POST['page']))で囲ってもエラーになるだけでした……） なにとぞよろしくお願いします。 <?php const PER_PAGE = 3;// １ページに表示するレコード数 // 現在のページを取得 if (preg_match('/^[1-9][0-9]*$/', $_GET['page'])){ $page = (int)$_GET['page']; } else { $page = 1; } // オフセット設定 $offset = PER_PAGE * ($page - 1); // and検索設定 $q = ""; if($_GET){ $q = $_GET['q']; } require_once 'dbmanager.php'; $pdo = getDb(); $q = filter_input(INPUT_GET, 'q'); ?> <form action="sample3.php" method="GET"> <input type="text" name="q" size="20" value="<?php echo htmlspecialchars($q); ?>"> <input type="submit" value="search"> </form> <?php if (isset($q)) { $words = explode(" ", str_replace("　", " ", trim($q))); } else { $words = array(); } // 解析 $tmp = array(); $arr = array(); foreach($words as $key=>$word) { if ($word === '') { continue; } $tmp[$key] = sprintf('(keyword like :word%d)', $key); $arr[$key] = '%' . addcslashes($word, '\_%') . '%'; } if (count($tmp) > 0) { $sql = "select * from ttables where " . implode('and', $tmp) . " order by id desc LIMIT ".$offset.",".PER_PAGE; $stmt = $pdo->prepare($sql); foreach ($arr as $key => $word) { $stmt->bindParam(sprintf(':word%d', $key), $arr[$key], PDO::PARAM_STR); } $stmt->execute(); while($row = $stmt->fetch(PDO::FETCH_ASSOC)) { printf('<li>%s&nbsp;%s</li>', htmlspecialchars($row['keyword'],ENT_QUOTES,'UTF-8'), htmlspecialchars($row['word'],ENT_QUOTES,'UTF-8')); } // ページネーション設定　totalレコード数取得 try { $ppp = getDb(); $sss = "select * from ttables where " . implode('and', $tmp) . " order by id"; $sth = $ppp->prepare($sss); foreach ($arr as $key => $word) { $sth->bindParam(sprintf(':word%d', $key), $arr[$key], PDO::PARAM_STR); } $sth->execute(); } catch (PDOException $e){ die($e->getMessage()); } $resultSet = $sth->fetchAll(); $total = count($resultSet); $totalPages = ceil($total / PER_PAGE); // } else { $stmt = $pdo->query('select * from ttables order by id desc'); } ?> <?php for ($i = 1; $i <= $totalPages; $i++) : ?> 此処の設定が分かりません。 【<a href="?q=<?php echo $q."?=page=".$i; ?>"><?php echo $i; ?></a>】 <?php endfor; ?> ------- dbmanager.php <?php function getDb(){ $dsn = 'mysql:dbname=w_collection; host=localhost; charset=utf8'; $usr = 'user'; $psw = 'pass'; try { $db = new PDO($dsn, $usr, $psw); } catch (PDOException $e) { exit('データベース接続失敗。'.$e->getMessage()); } return $db; } ?>
phpでstaticな変数について教えてください。 ユーザの情報をstaticな変数に格納した際に、誰からでも参照できてしまうのでしょうか？ 例えば今ログイン情報を格納するstatic変数があり、ログイン情報を取得してそのstatic変数に値を格納するstaticなメソッドがあるとします。このメソッドは、その変数にまだ値がない場合に、ログイン情報取得してそのあとその変数へ格納し、その変数にすでに値があった場合に、その変数の中身を返す仕様だとします。最初のユーザAがアクセスしてきてその変数にAの情報を格納します。ほぼどうじにユーザBがアクセスしてきた場合は、そのメソッドを呼んだ際に直前に格納されたAの情報が取れてしまうのでしょうか？それともそのstaticな変数にはまだ何もないのでしょうか？よく分かりません。私は間違って理解してしまってるのでしょうか？宜しくお願いします。
いつもお世話になっております。（知識がなく「カテゴリ」をPHPにしております。） 早速ではございますが，Googleフォームを使って申し込みサイトを設置しようかと思っております。申し込み頂いた方へは，その内容を保存しておいて頂くためのメールを自動的に送るようにしたいと考え，「Googleフォーム」「sendmail」で検索したところ，以下のサイトがヒットいたしました。 http://creazy.net/2011/03/google_form_mailsend.html これとまったく同じにGoogleフォームを作成し，スクリプトを設置したところ，私が考えているものが送られてきました。しかし，このスクリプトは，「お名前」「メールアドレス」「件名」となっており，私が実際に作成しているGoogleフォームの項目とは異なります。 私の作成している項目は以下の通りです（Googleフォーム上の質問項目と全く同じ）。 お名前 メールアドレス アドレスの再入力 所属（リストから選択）＊６項目（リスト）ございます。 〇〇の会員ですか？（リストからの選択）＊都合により〇〇と表示 これら以降もう少しございますが，省略いたします（テキスト入力あるいはリストからの選択のみです）。 返信用メール本文には，既存のスクリプトは最大限活用して，つぎのように示したいです。 ************************* ▲▲ 様 申し込みありがとうございます。（→これは該当の日本語を書き換えれば良いのかなと考えます） ------------------------------------------------------------ 【タイムスタンプ】 Tue Sep 01 2015 14:43:09 GMT+0900 (JST) 【お名前】 ▲▲ 【メールアドレス】 ××××@gmail.com 【アドレスの再入力】 ××××@gmail.com 【所属】 〇〇（リストの中から１つ表示される） 【〇〇の会員ですか？】 ◆◆（リストの中から１つ表示される） ------------------------------------------------------------ 後ほど担当者よりご連絡させていただきます。 ************************* 上記のサイトには以下のようなスクリプトが提示されておりますが，なにせ，私には全く知識がなく，下記をどのように修正すれば私のGoogleフォームで機能するのか皆目見当が付きません。 専門家の皆様，この内容の知識をお持ちの皆様，以下のスクリプトを私のフォームで動くように加筆修正頂けますでしょうか。ご多忙のところ申し訳ございませんが，ぜひお願いいたします。 function sendMailFromForm() { Logger.log('sendMailFromForm() debug start'); //------------------------------------------------------------ // 設定エリアここから //------------------------------------------------------------ // 件名、本文、フッター var subject = "[お問い合わせ]"; var body = "お問い合わせありがとうございます。\n\n" + "------------------------------------------------------------\n"; var footer = "------------------------------------------------------------\n\n" + "後ほど担当者よりご連絡させていただきます。"; // 入力カラム名の指定 var NAME_COL_NAME = 'お名前'; var MAIL_COL_NAME = 'メールアドレス'; var SUBJ_COL_NAME = '件名'; // メール送信先 var admin = "admin@example.com"; // 管理者（必須） var cc = ""; // Cc: var bcc = admin; // Bcc: var reply = admin; // Reply-To: var to = ""; // To: （入力者のアドレスが自動で入ります） //------------------------------------------------------------ // 設定エリアここまで //------------------------------------------------------------ try{ // スプレッドシートの操作 var sh = SpreadsheetApp.getActiveSheet(); var rows = sh.getLastRow(); var cols = sh.getLastColumn(); var rg = sh.getDataRange(); Logger.log("rows="+rows+" cols="+cols); // メール件名・本文作成と送信先メールアドレス取得 for (var j = 1; j <= cols; j++ ) { var col_name = rg.getCell(1, j).getValue(); // カラム名 var col_value = rg.getCell(rows, j).getValue(); // 入力値 body += "【"+col_name+"】\n"; body += col_value + "\n\n"; if ( col_name === NAME_COL_NAME ) { body = col_value+" 様\n\n"+body; } if ( col_name === MAIL_COL_NAME ) { to = col_value; } if ( col_name === SUBJ_COL_NAME ) { subject += col_value; } } body += footer; // 送信先オプション var options = {}; if ( cc ) options.cc = cc; if ( bcc ) options.bcc = bcc; if ( reply ) options.replyTo = reply; // メール送信 if ( to ) { MailApp.sendEmail(to, subject, body, options); }else{ MailApp.sendEmail(admin, "【失敗】Googleフォームにメールアドレスが指定されていません", body); } }catch(e){ MailApp.sendEmail(admin, "【失敗】Googleフォームからメール送信中にエラーが発生", e.message); } }
PHP、ＭＹＳＱＬの勉強を始めたばかりの者です。 AND検索をしたいのですが…… きちんと検索できません。 データの中身 データタイトル｜キーワード Ａ｜テスト Ｂ｜サンプル 以下のようにすると、「テ」「ス」でＡのデータは出てくるのですが、 「テ」「サ」で検索すると、 一つもでてこないはずなのに、Ｂのデータが出てきます。 「サ」「テ」ですとＡのデータがでてきてしまいます。 何故でしょうか。 自分なりに考えてはみたのですが、お手上げ状態です。 何卒、宜しくお願いします。 <form method="ＧＥＴ" action="sample.php"> <input type="text" name="q" size="20"> <input type="submit" value="search"> </form> <?php require_once 'dbmanager.php'; $pdo = getDb(); // クエリ設定 if (isset($_GET['q'])) { $q = htmlspecialchars($_GET['q']); //クエリを入力 $q = str_replace("　", " ", trim($q)); $words = explode(" ",$q); } // 解析 $tmp = []; $wd = []; $i = 0; foreach($words as $word) { if(!empty($word)) { $tmp[] = " keyword LIKE :word".$i." "; $wd[] = '%'.$word.'%'; $i++; } } // SQL if(count($tmp) > 0){ $sql = "SELECT * FROM ttables WHERE (".implode("AND",$tmp).") ORDER BY id DESC"; $search_sql = $pdo->prepare($sql); foreach($wd as $key => $word){ $search_sql->bindParam(':word'.$key, $word); } $search_sql->execute(); // while while($row = $search_sql->fetch(PDO::FETCH_ASSOC)) { print"<li>{$row['keyword']}{$row['title']}</li>"; } }
ページオープン制御方法（PHP） お世話になっております。 PHPでエントリーフォームを作成しております。（初心者に毛が生えた程度の知識力です） 同時に複数のエントリーを阻止したいのが狙いです。 【質問】 Ａページを閲覧（開いている状態）している時に、別タブでＢページを閲覧した場合に、 Ｂページにコメント出す。逆も同様。 Ａページを開いたときに$_SESSION["PAGE_OPEN"] = "PAGE"のように値を代入して、 Ｂページに$_SESSION["PAGE_OPEN"] == "PAGE"だったらコメント出すという方法などを試しているのですが、 うまくいったり、unset($_SESSION["PAGE_OPEN"] )しても値が残っていたり、調整がうまくいきません。 心掛けなければいけない点や不備・成功例など諸々とご指導頂ければ幸いです。 何卒宜しくお願い申し上げます。
教えてください。 スクレイピングのために、よく分からないままに、 PHPでHTMLをXMLに変換して、Xpathで参照しようとしています。 が。 その前段で、「HTML内に存在する内容が、XMLに変換した際に 消えてしまう」という現象に悩まされております。 例を挙げますと、 --------------------------------------- <html> <body> <table> <tr> <td><b>foo</b> bar<br> </td> </tr> </table> </body> </html> --------------------------------------- みたいなページを、 --------------------------------------- <?php $html = file_get_contents('http://xxxxxxxxxxxxxxxxx.com/foobar.html'); $dom = new DOMDocument(); @$dom->loadHTML($html); $xml = simplexml_import_dom($dom); print_r($xml); ?> --------------------------------------- のように処理すると、 --------------------------------------- SimpleXMLElement Object ( [body] => SimpleXMLElement Object ( [table] => SimpleXMLElement Object ( [tr] => SimpleXMLElement Object ( [td] => SimpleXMLElement Object ( [b] => foo [br] => SimpleXMLElement Object ( ) ) ) ) ) ) --------------------------------------- のような結果になって、「あれ？fooはいるけど、barは何処いった？」となります。 分かっている方には、「そりゃ、おまえ、あたりまえだよｗｗｗ」 「つーか、なにやっとんのｗｗｗ」って感じなのかもしれませんが、 さっぱり分かりません。 元のHTMLの書きぶりがダメだからということでしょうか。 お手数をお掛けしますが、どうぞ、ご教授ください。 よろしくお願いいたします。
Wordpressでコメントフォームを設置していないにもかかわらず コメント機能を有効にしているだけで入ってくる迷惑コメントがあります 彼らはいかにしてコメントを投稿しているのでしょうか？ Wordpressのフォームには通常nonceが付けられていて Wordpressが生成したフォームからしか投稿ができないはずです コメントはnonceなしで投稿できるようになっているのでしょうか？ それとも同サイトの適当なフォームのnonceを拾って使っているのでしょうか？ あるいはWordpressが生成するnonceを予測しているのでしょうか？
wordpressにて会員サイトを作りたいのですが、 MP-MemberやMembers-onlyなど色々プラグインを見てはいますが、 以下の様な事をするには、どんなプラグインを使ったら良いですか？ ・会員のみ閲覧できるコンテンツを作る ・新規登録ページ、マイページの設置 ・マイページにて自分がコメントした記事とコメントを一覧で表示（←これが一番の目的 会員のみ記事にコメントというはディスカッションで出来ると思いますが、 マイページにて自分がコメントした記事とコメントをタイムラインで見れるようにしたいと思っています。 ご教授の程宜しくお願い致します。
プログラミング初心者です。 ただいまPHPの勉強をしているのですが、今参考にしている本（パーフェクトPHP）が、現在は推奨されていなかったり、廃止されている関数がちらほら出てきます。 自分は基礎からしっかり学びたいのですが新しめな本を参考にした方がいいのでしょうか？ 古い記述を知った上で新しい物に取り掛かったほうが良いのでしょうか？ ご回答お待ちしています。 あとおすすめの本があれば参考にしたいです。
環境はWin 8.1, Apache 24, PHP 5.5.6, MySQL 5.5です。 My SQLとの連携で、以下のエラーが出てしまいました。 ---------------------------------------------エラー文ここから Warning: mysqli_select_db() expects parameter 1 to be mysqli, string given in C:\Program Files\Apache\Apache24\htdocs\sample\省略.php on line 11 データベースの選択に失敗しました。 ---------------------------------------------エラー文ここまで ---------------------------------------------コードここから <?php $url = "省略"; $user = "省略"; $pass = "省略"; $db = "省略"; // mysqliへ接続 $link = mysqli_connect($url,$user,$pass) or die("mysqliへの接続に失敗しました。"); // データベースを選択する $sdb = mysqli_select_db($link, $db) or die("データベースの選択に失敗しました。"); // クエリを送信する $sql = "SELECT * FROM省略"; $result = mysqli_query($sql, $link) or die("クエリの送信に失敗しました。<br />SQL:".$sql); //結果セットの行数を取得する $rows = mysqli_num_rows($result); //結果保持用メモリを開放する mysqli_free_result($result); // mysqliへの接続を閉じる mysqli_close($link) or die("mysqli切断に失敗しました。"); ?> <html> <head> <meta http-equiv="Content-Type" content="text/html; charset=SHIFT-JIS"> <title>全件表示</title> </head> <body> 接続ID:<?= $link ?><br /> 選択の成否:<?= $sdb ?><br /> 結果ID:<?= $result ?><br /> 行数:<?= $rows ?><br /> </body> </html> ---------------------------------------------コードここまで 11行目はコメント文「データベースを選択する」です。 ただ、実際の間違いはその下ですよね？ ネットで検索してみたつもりですが、良い情報はありませんでした。 直訳を考えると、mysqli_select_db($link の部分がmysqliであるべきなんですか？ 少なくともmy SQLへの接続には成功していると取っていいのでしょうか？
以下を実現させようとしてfunctionに記入したものの、7個以上の条件などは正常に動いているようにみえるのですが、1個購入の時と2個購入になると送料が0円になってしまいます。どこがおかしいのでしょうか？ 【実現したい内容】 ・郵送用の箱(一箱に商品6個まで)を使用。 ・購入商品が6個以下は、送料1箱分の送料 ・購入商品が7個以上12個以下は送料2箱分の送料 と6個毎に1箱分の送料を加算するフックを教えてください。 【現状】 【functions.php末尾に】 function usces_get_item_count() { global $usces; $cart = $usces->cart->get_cart(); $itemconut = 0; for($i=0; $i<count($cart); $i++) { $cart_row = $cart[$i]; $itemconut += esc_attr($cart_row['quantity']); } return $itemconut; } add_filter('usces_filter_set_cart_fees_shipping_charge', 'my_func', 10,3); function my_func($shipping_charge,$carts,$entries) { //本数を$totalNumとする //何個口か計算 $deliveryNum = round(usces_get_item_count() / 6); switch ($entries['delivery']['pref']){ case '北海道': $shipping_charge = 1350 * $deliveryNum; break; case '青森県': $shipping_charge = 1250 * $deliveryNum; break; /*繰り返しが長いので省略します*/ default: break; } //最期に値を返してあげる return $shipping_charge; } ?> 【wc_item_single.php末尾に】 </div><!-- end of content --> <?php echo usces_get_item_count(); ?> <?php get_sidebar(); ?> <?php get_footer(); ?> と書いてます。 オープンを控え急いでいるのですが http://www.welcart.com/community/forums がお休みのようなのでこちらでお伺いしました。 どなたかご教授頂けると幸いです。 環境は以下です。 WordPress のバージョン：バージョン 4.2.4 Welcart のバージョン：バージョン 1.4.20 サーバー（会社名、サービス名）：xserver
　例えばmb_convert_encoding()で変換するとき、元の文字コードは何に依存されるのでしょうか？ 　フォームで送る場合は、フォームページのHTMLのでmetaタグに指定されている文字コードになるんでしょうか？ 　charset=utf-8とmetaタグで指定されている場合、PHPのmb_convert_encoding()で受け取るときの変換前の文字コードはutf-8？ 　データをutf-8で扱いたいとき、フォームページをcharset=utf-8で作っておけば、mb_convert_encoding()でわざわざutf-8に変換するようにしておかなくても大丈夫ですか？
PHPプラグラムから、ftp_putを使って、バックグランドで特定のファイルを別サーバに転送をするプログラムを作成しております。 容量が8GBあるものに対して、転送されたファイルは2GB程しかありません。 PHPプログラムから実行ができるもので、2GB以上（容量を無制限）で転送する方法はありますでしょうか。 PHPからコマンドを実行する方法というのを下記のサイトで見たので、 http://piyopiyocs.blog115.fc2.com/blog-entry-760.html ftp.shで保存しておき、実行用のPHPに下記を記述し、 「<?php exec("/bin/sh ftp.sh"); ?>」のみを記述 ブラウザから、実行用のPHPファイルを呼び出してみたものの、容量が軽いものでも転送されませんでした。 実行PHPへの記述が悪いのでしょうか。 ご教授のほど、よろしくお願いいたします。
phpを勉強し始め、ログインページを作っているのですが、うまく動いてくれません。 空で送っても、エラーが表示されず……先に進めません。 一体、何が間違えているのでしょうか？ requireで呼んでいるデータベースはきちんと読み込めています。 どなたか、ご助力を宜しくお願いします。 <?php require('../dbconnect.php'); session_start(); if(!empty($_POST)){ //ログインの処理 if ($_POST['id_name'] != '' && $_POST['password'] != '') { $sql = sprintf('SELECT * FROM members WHERE id_name="%s" AND password="%s"', mysqli_real_escape_string($db, $_POST['id_name']), mysqli_real_escape_string($db, sha1($_POST['password'])) ); $record = mysqli_query($db, $sql) or die(mysqli_error($db)); if($table = mysqli_fetch_assoc($record)) { //ログイン成功 $_SESSION['id'] = $table['id']; $_SESSION['time'] = time(); header('Location: index.php'); exit(); } else { $error['login'] = 'failed'; } } else { $error ['login'] = 'blank'; } } ?> <div id="lead"> <p>IDとパスワードを記入してログインしてください</p> <p>ユーザー登録がまだの方はコチラからどうぞ</p> <p><a href="join/">ユーザー登録をする</a></p> </div> <form action="" method"post"> <dl> <dt>ログインＩＤ</dt> <dd> <input type="text" name="id_name" size="35" maxlength="255" value="<?php echo htmlspecialchars($_POST['id_name']); ?>" /> <?php if ($error['login'] == 'blank'): ?> <p class="error">ログインＩＤとパスワードを記入してください</p> <?php endif; ?> <?php if ($error['login'] == 'failed'): ?> <p class="error">ログインに失敗しました。正しく記入してください</p> <?php endif; ?> </dd> <dt>パスワード</dt> <dd> <input type="password" name="password" size="35" maxlength="255" value="<?php echo htmlspecialchars($_POST['password']); ?>" > </dd> <dt>ログイン情報の記録</dt> <dd><input id="name" type="checkbox" name="save" value="on"> <label for="save">次回からは自動的にログインする</label></dd> </dl> <div><input type="submit" value="ログインする"></div>
xoops+phpで以下の記述をしているが、ボタンを押しても、http://test2/xoops/modules/profile/List.phpの先頭にmodeの値が渡らない。（getもpostもだめ） 記述方法が違うのでしょうか。 <input type='button' value='タ' onclick="location.href = 'http://test2/xoops/modules/profile/List.php';mode.value='Edit';createYearSelected.value='2015';employeeCode.value='999000001';" >
下記のコードで子ページ一覧を取得していたのですが、子ページ一覧ではなく孫ページ一覧を取得する必要が出てきました。 <?php $parentId = get_the_ID(); $args = 'posts_per_page=-1&post_type=page&orderby=menu_order&post_parent='.$parentId; query_posts($args); if (have_posts()) : while (have_posts()) : the_post(); ?> <div class="child-box"> <a href="<?php the_permalink(); ?>"><img src="<?php echo wp_get_attachment_url( get_post_thumbnail_id() ); ?>" width="190" alt=""></a> <p class="title"><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></p> <p>価格:<span class="price"><?php $selling_price = get_field('selling_price'); echo $selling_price."円"; ?></span></p> </div> <?php endwhile;?> <?php wp_reset_query(); ?> <?php else:?> <?php endif;?> 上記のような形で孫ページ一覧を取得する方法をご存知のかた、是非ご教授ください。
　PHPでメールフォームを作って使ってもらってます。 　メールフォームページのHTMLでの文字コートの指定はUTF-8ですが、(1)とかの一部の文字化けを防ぐ為に「ISO-2022-JP-MS」に変換する方が良いと聞いたもので、この文字コードに変換して送られるようにしています。 　ところが一部の環境の人には、文字のいくつかではなく、文章全体が文字化けした状態で届くという話が挙がっています。 　考えられる原因は何があるでしょうか？ 　メーラーの設定を変更することで読めるようになる場合もあるようですが、それはそれでメーラーが間違った文字コードを指定してしまう原因が分かりません。 　考えられる原因と解決方法があれば、よろしくお願いいたします。 　ちなみに最近、ご利用の方で文字化けした人は@outlook.jpのドメインのメールアドレスで受けたようです。 　ネットで検索すると、Outlookのバージョンによっては文字化けするという話もあるようですが、その人の環境はiPhoneのようなのでOutlookメーラーは使ってないと思います。 　これらも何か関係があるのでしょうか？
状況は非常に切迫しています。phpはほぼ分かりません。 簡単なhtmlが解る程度で本当にすみませんが、どうか、 何卒よろしくお願い申し上げます。 検索結果に応じてサーバーに置いたテキストファイルを読み込ませて そこに書かれている内容を表示させたい、という内容です。 例えば、果物販売のサイトで、バナナと検索されました。 バナナはあってもなくても構いませんので、 その検索結果一覧のページの下部にバナナの説明が 入る、という風になります。 リンゴではリンゴの説明 さくらんぼではさくらんぼの説明 データベースではなく、ディレクトリでやりたいのですが、 何卒ご教示いただけませんでしょうか。 よろしくお願い申し上げます。
PHP5.3の環境のレンタルサーバを利用しております。 もうすぐ、レンタルサーバ側にてPHP5.5へアップデートが行われます。 メンテナンス通知がきました。 同じサーバ内には、Wordpress,EC-CUBE,独自で構築された システムがそれぞれ独立して入っております。 独自で開発されたシステムに関しましては、 PHP5.5にて対応していれば、問題ないかと考えておりますが、 WordpressやEC-CUBEの場合は、どうなのかと気になっております。 WordpressやEC-CUBEの場合は、 PHP5.5に対応しているバージョンをインストールしていれば、 特に問題はないのでしょうか。 PHPバージョンアップの際に確認しておくポイントまたは対策を 教えてください。
おはようございます。お世話になります。 以前、作成したPHPファイルを実行するといくつかエラーが表示されるため、 XAMPPごとアンインストールして最新版をインストールしました。 そこで、質問をさせて下さい。 1)最新のXAMPPのコントロールパネルのverはV3.2.1で合ってますでしょうか？ 2)XAMPPをWindowsのCドライブ以外のドライブにインストールして無事に動いていますが、Cドライブでなくてよかったでしょうか？ 3)その他何か新しくなったことがありましたら、是非教えて下さい。 宜しくお願い致します。
PHPでCSVファイルを読み込ませるにあたり、「クエリで指定した特定の1行だけ」を取りだしたいと考えています。 下記だと、1行目からクエリで指定した特定行までの抽出が可能です。 hoge.php?repert=5　　→　1から5行目までが表示される。 従い、下記から特定行より上の行を削除すれば、当方が考えている「クエリで指定した特定の1行だけ」を取りだすことになりますが、その方法がわかりません。 ご教示いただきたくお願いいたします。 <?php $repeat = $_GET['repert']; $fp = fopen("file2.csv", "r"); $count = 1; while ($data = fgetcsv($fp, 10000)) { if ($count > $repeat) { break; } print <<<EOD $data[0]・$data[1]・$data[2]<br> EOD; $count++; } fclose ($fp) ?>
DOMを使ってテーブルのスクレイピングをしたいと考えています。 【sample.html】 <table id="rates"> <tr> <th>施設名</th> <th>所在地</th> </tr><tr> <td>大谷地</td> <td>東3丁目3-20</td> </tr><tr> <td>札幌</td> <td>東1丁目1-20</td> </tr></table> 【scre.php】 <?php $entries = []; $dom = new DOMDocument; @$dom->loadHTMLFile('sample.html'); $xpath = new DOMXpath($dom); foreach ($xpath->query('//tr') as $i => $node) { if (!$i) { continue; } $entries[] = [ $xpath->evaluate('string(td[0])', $node), $xpath->evaluate('string(td[1])', $node), ]; } echo "<pre>"; print_r($entries); echo "</pre>"; ?> *************** 結果(出力値) *************** Array ( [0] => Array ( [0] => 大谷地 [1] => 東3丁目3-20 ) [1] => Array ( [0] => 札幌 [1] => 東1丁目1-20 ) 【やりたいこと】 この結果をカンマ区切りとして抽出したいと考えています。 ***************** 希望結果(希望出力値) ***************** 大谷地,東3丁目3-20 札幌,東1丁目1-20 また、このテーブルは別途CSVファイルに落とす予定のため、 echo $data; という形で出力可能なようにしたいと考えています。 初心者的質問で大変恐縮ですが、どうすればいいかご教授いただけましたら幸いです。 よろしくお願いいたします。
みなさん。こんにちは。 - $month=date("Y-m"); $SQL001="insert into table_name set month='$month-01'" - date関数を用いるなどして月日を得るのは簡単なので、 そこから得た日付データをSQLに与えたりはできているのですが、 この日付を会計年度にしたいと思っています。 - 会計年度が「4月始まりで3月終わりの場合」 $SQL002="insert into table_name set start_date='2014-04-01', end_date='2015-03-31',FY='FY14'" - 具体的には上記SQL002のようなSQLを自動で作りたい場合を想定していて、 2015/3/31時点でこのPHPを動かした場合は 「set start_date='2014-04-01', end_date='2015-03-31',FY='FY14'」となるのを 2015/4/1時点でこのPHPを動かした場合は 「set start_date='2015-04-01', end_date='2016-03-31',FY='FY15'」となるようにしたいですが、どうもやり方が分からないで困りました。 「2015-04-01」、 「2016-03-31」、 「FY15」 の部分をPHPを動作させるタイミング(日付)で動的に得る方法が分からないでいます。 アドバイスいただけますと大変ありがたいです。 どうぞ宜しくお願い致します。
WordPressでタグの一覧ページtag.phpを作成してループを読み込ませたのですが、10記事しか表示されません。ループ部分のコードは以下のとおりです。 <?php if (have_posts()) : while (have_posts()) : the_post(); ?> <div> <a href="<?php the_permalink();?>" title="<?php the_title_attribute(); ?>"><img src="<?php echo wp_get_attachment_url( get_post_thumbnail_id() ); ?>" alt=""></a> <p><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></p> </div><!-- /.child-box --> <?php endwhile;?> <?php else:?> <?php endif;?> 該当する記事は40ほどあるのですが、違うタグで試してもやはり10記事しか表示されません。 色々と試したのですが原因がわかりません。ご教授いただけませんでしょうか。
添付画像のような、医院名のクッキーを、ドメイン内で発行しているのですが、 このようなクッキーの値そのものがクッキー名である場合、下記のようなスクリプトでは 当然同じクッキーの内容の値が表示されます。 （かと言って、$_COOKIE["hospital[i]"] のような書き方だとうまく動作しません） 添付画像のような別々のクッキーを、連続して画面に表示してやるにはどうすればいいのでしょうか？どういうスクリプトを書けばいいのか、教えていただけますでしょうか。 ------------------------------------------------------------------------------------------------- for($m=0; $m<$_SESSION['cnt']; $m++){ if(isset($_COOKIE["$hospital"])){ echo '<tr><td cellpadding="3"><div class="moji1">&nbsp;&nbsp;&nbsp;<a href="detail.php?tab=1&sid='.$sid.'&iinmei='.$iinmei.'&from=0&chuumoku_flag=1">'.$_COOKIE["$hospital"].'</a></div><div class="moji2">&nbsp;&nbsp;&nbsp;<img src="../image/tokei.png">'.$date.'</div></td></tr>'; } }
いつもお世話になっております。 Mac osx 10.9.2 に Homebrew をインストールした後、httpd.conf と php.ini ファイルを書き換えました。 Apache を再起動したあと構文チェックをしましたら下記のようなエラーが出力されました。 もし、同じような事象が発生したことがあれば対処方法を教えてください。 よろしくお願いします。
PHPにて、ユーザの入力情報を保管し、サイト内で表示利用するシステムの入力に対する文字列の無害化に関しまして、 今まではユーザの入力→htmlspecialchars→データベース取込 という流れで行っておりました。 最近、他のことを調べていると、 ユーザの入力→データベース取込→表示の際にhtmlspecialcharsする という記事を見かけました。 どちらの方がより、無害化の効果がありますでしょうか。 後キュよろしくお願いいたします。
お世話になっております。 以下の「!= 1」の意味を教えてくださいますか？ 宜しくお願いします。 <?php while (rand(1, 10) != 1) { echo "■"; } ?>
お世話になっております。 標題の通り、mb_send_mail でメールを送信したいのですが、iPhonoの純正メーラーで差出人名が文字化けしてしまいます。 thunderbirdやブラウザのＷｅｂメール・Androidのメーラーでは問題なく日本語で表示されています。 PHPファイルは、UTF-8です。 ざっくりですが、以下のソースで実装しています。 $mail = "hogehoge@gmail.com"; $sub = "日本語のタイトル"; $body = "日本語の本文"; $head = "From:日本語の差出人名 <info@hoge.hoge>\n"; mb_language("Japanese"); mb_internal_encoding("UTF-8"); mb_send_mail($mail, $sub, $body,$head); iPhoneでも、差出人名以外の、タイトルや本文は文字化けしていません。 ネットで調べ、症状は少し違うのですが、mb_encode_mimeheader関数を使ってみたりしたのですが、症状は変わりませんでした。 iPhone側の設定の問題なのか、php側の問題なのか良く分かりませんでした。 どうぞ、よろしくお願い致します。
よくわかるphpの教科書という本でphpを勉強中なのですがcssがうまく反映されません。 CSSのコードはマイナビのサイトからダウンロードしたCSSです。 マイナビのサイトからダウンロードしたサンプルプログラムを開くとうまく反映されるのですが、それをまるまるコピーして開いてもCSSがうまく反映されません。 どうすれば良いのでしょうか。 画像を載せておきます。 宜しくお願いします。
以下のようなメールフォームを作ったのですが何故か値の受け渡しが上手くいきません。 以前どこかのサイトを参考にして作ったもので別で自分の作ったサイトでは問題なく受け渡しができたのですが、なぜか今回はできません。 自分が作って成功したサイトをそのままサーバーにアップロードしても出来ないのがよくわからないのです。 どうすれば受け渡しがうまくいくのでしょうか？ どなたか知恵を分けていただきたいです。何卒よろしくお願いいたします。 ▼ここからinquiry.html▼ <div id="main_inquiry"> <div id="box_inquiry"> <h1>お問い合わせ</h1> <div id="form"> <form method="POST" action="inquiry_check.php"> <p class="form">お名前</p> <p class="text"><input type="text" name="name" size="50"><br></p> <p class="form">電話番号</p> <p class="text"><input type="text" name="tel" size="50"><br></p> <p class="form">Eメール</p> <p class="text"><input type="text" name="email" size="50"></p><br> <p class="form">備考</p> <p class="text"><textarea name="bikou" cols="50" rows="10"></textarea></p> </div> <!---------form-END------------------------------> <div id="submit"> <input type="submit" value="確認" class="submit"> <input type="reset" value="リセット" class="reset"> </div> <form method="POST" action="inquiry_check.php"> </div> ▲inquiry.html終了▲ ▼ここからinquiry_check.php▼ <div id="box_check"> <h1 class="headding11">問い合わせチェック</h1> <?php $name=htmlspecialchars($_POST["name"]);// if ($name == ""){ $show_name = "<font color='#000'><strong>名前が入力されていません</font></strong>"; $err_flg = 1; } else { $show_name = $name; } $tel=htmlspecialchars($_POST["tel"]);// if ($tel == ""){ $show_tel = "<font color='#000'><strong>電話番号が入力されていません</font></strong>"; $err_flg = 1; } else { $show_tel = $tel; } $email=htmlspecialchars($_POST["email"]);// if ($email == ""){ $show_email = "<font color='#000'><strong>e-mailが入力されていません</font></strong>"; $err_flg = 1; } else { $show_email = $email; } $bikou=htmlspecialchars($_POST["bikou"]);// if ($bikou == ""){ $show_bikou = "<font color='#000'><strong>備考が入力されていません</font></strong>"; $err_flg = 1; } else { $show_bikou = $bikou; } if ($err_flg == 1){ $show_form = ""; } else { $show_form = " <input name='name' type='hidden' value='". $name ."'> <input name='tel' type='hidden' value='". $tel ."'> <input name='email' type='hidden' value='". $email ."'> <input name='bikou' type='hidden' value='". $bikou ."'> <input name='submit' type='submit' value='送信' class='soushin'> "; } ?> <form name="mailform" method="post" action="inquiry_finish.php"> <P align="center"><b class="kakunin">お客様情報確認</b></P> <table class="check" width="685px" border="0" cellspacing="1" cellpadding="5"> <tr> <td bgcolor="#EBEBEB" width="200"> 氏名</td> <td width="540"><? echo $show_name ?></td> </tr> <tr> <td bgcolor="#EBEBEB"> 電話番号<font color="#FFFFFF">　 </font></td> <td><? echo $show_tel ?></td> </tr> <tr> <td bgcolor="#EBEBEB"> 電子メール</td> <td ><? echo $show_email ?></td> </tr> 　<tr> <td bgcolor="#EBEBEB"> お問い合わせ内容</td> <td ><? echo $show_bikou ?></td> </tr> </table> <div align=""> <? echo $show_form ?> <input name="submit" type="button" value="戻る" class="mouse" onClick="history.back()"> </div> </div> <div id="side_menu_check"> </div> </div> <div id="footer"> </div> ▲inquiry_check.php終了▲
すみません、質問させてください。 カスタム投稿タイプのタグやカテゴリーの順番を並び替えられるプラグインを探しています。 検索すると出てきた中で二つのプラグイン「Custom Taxonomy Order NE」「Category Order and Taxonomy Terms Order」どちらも使ってみました。 要望としてはクライアントが使用するため直感的に操作できるプラグインがイイですが、「Custom Taxonomy Order NE」こちらはサイドメニューの中にタクソノミーの機能を付けているカスタム投稿タイプのメニューを一箇所に集めているためあまり直感的とは言えません。 それで「Category Order and Taxonomy Terms Order」を試したのですが「投稿」にしかタグの並び替えを行う機能がありません。 カスタム投稿タイプには反映されないのでしょうか？ 調べるとカスタム投稿タイプでも使えるようなのですがどうやったらカスタム投稿タイプのメニューに並び替え機能が付くのか分かりません。 自動で付くものなのでしょうか？ もし別に便利なプラグインがあれば教えていただきたいのと、「Category Order and Taxonomy Terms Order」をカスタム投稿タイプでも使える方法をご存知の方がいらっしゃいましたら是非教えていただきたいです。 なにとぞよろしくお願い致します。
以下のような2つのPHPを作成しました。 PHPにおいて、検索ボタンが押されると、 SQLで記述したデータベースから値を持ってきてtable表示させているのですが、 その際に取得した値にリンクを付けて、再検索をする方法がわかりません。 POST変数で渡してやれば、というところはなんとなくわかるのですが、 具体的な方法をご教示いただきたいです。 どうかよろしくお願いいたします。 ------------------------------------------------------------------------ HTML側(データを検索・表示させるため)のtable.php <?php $nengetu = isset($_POST['nengetu']) ? $_POST['nengetu'] : ""; ?> HTML表示箇所 <?php <form method="post" action="tables.php"> <button type="submit" name="search">検索</button>←ボタンを押されたら表示 <thead> 　<tr> 　　<th>年月</th> 　　<th>名前</th> 　　<th>金額</th> 　</tr> </thead> <tbody> if(isset($_POST['search'])) $query.= "SELECT * FROM AAA"; if (!empty($nengetu)) { $query.=" WHERE nengetu = '$nengetu"; $dataview($query); ?> ------------------------------------------------------------------------ ------------------------------------------------------------------------ PDOで取得したテーブル内容を表示 class.table.php public function dataview($query) { クエリーを実行 ループ <tr> <td><?php print($row['name']); ?></td>←リンク付きで表示、table.phpで検索 <td><?php print($row['kingaku']); ?></td> <td><?php print($row['nengetu']); ?></td> </tr> } ------------------------------------------------------------------------
PHPのcURLによるログインについての質問をさせて頂きます。 会員サイトでIDとPASSの入力を行い、ログインをしてページの移行していくPHPの コードを書いておりますが、途中ページで検索BOXのフォームにキーワードを入れて 次のページに移行する必要があるのですが、ページ移行ができない状況であります。 質問をさせて頂きたい内容ですが、フォームへの入力が必要となるため、 下記のコードの入力項目である【$params01】又は他の部分に どのような記述をすればよいかをご教授いただければと思います。 サンプルコードなどを掲載しているサイトなどで調べていましたが、 【$params01】の配列のkeyの部分がname属性としているようなのですが、 今回ログインをするページの検索BOXのフォームにはname属性は付けられていないようです。 よろしくお願いいたします。 【$params01】 $params01 = array( "dscrCdNm" => '7893', "marketCd" => '検索' ); $address01 = 'https://xxxxxxxxxx.co.jp/xxxxxxxxxx'; $ch = curl_init(); curl_setopt($ch, CURLOPT_URL, $address01); curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true); curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie_file_path); curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie_file_path); curl_setopt($ch, CURLOPT_POST, TRUE); curl_setopt($ch, CURLOPT_POSTFIELDS, $params01); $inputcode = curl_exec($ch) or die('error ' . curl_error($ch)); mb_language("Japanese"); $order_adress = mb_convert_encoding($inputcode, "UTF-8", "auto"); print($order_adress); 【検索BOXのフォームのHTML部分】 <div class="box-search-stock-01 mb00" > <fieldset> <legend>検索</legend> <p class="search"> <label for="ss-02">名前・コード</label>： <input type="text" name="dscrCdNm" value="" id="ss-02"> <input type="hidden" name="marketCd" value=""> <input type="hidden" name="industryCd" value=""> <input type="image" src="/member/images/btn-search-02.gif" class="roll img-ipad" value="検索" title="検索" /> <span style="padding: 0 0 0 20px;"><a href="javascript:void(0);" onclick="modalOpenAction();return false;">→詳細検索はこちら</a></span> </p> </fieldset> </div> <input type="hidden" name="offsetRow" value=""> <input type="hidden" name="trdKbn" value="10"> <input type="hidden" name="pageNo" value="1">
$sql = "select item from items"; $pdo->prepare($sql); とした後に $sql に where 句を後付でつけることなど出来ますか？
http://localhost/wordpress/とアドレスを入れると過去に自分で作ったthemeフォルダが呼び出されるのですが、やはり元に戻して別のテーマファイル(twentytwelveとか)を呼び出したいのですが、仕組みを忘れてしまいました。 http://localhost/wordpress/を入れたら、なぜデフォルトのテーマファイルが呼び出されず、ある特定のテーマファイルが呼び出されるのか仕組みを教えてください。 wordpress直下にPHPファイルがあるのですが(画像参照)、そのどれかが自分で作ったthemeフォルダを呼び出しているのでしょうか？
写メールBBSというPHPがあります。 http://php.s3.to/bbs/bbs7.php これは、特定のメールアドレスに届いたメールについて、「PHP上のボータンをクリックすると、メールサーバーからメールをダウンロードし、data.cgiに書き込む」というものです。このPHPでは、不正メールや広告メールを書き込まないように、拒否アドレスを設定できるようになっています。 ****************************************** 【config.php】 //拒否アドレス $deny_from = array('yahoo.co.jp'); 【pop.php】 // 送信者アドレスの抽出 if (preg_match("/\nFrom:[ \t]*([^\r\n]+)/i", $head, $freg)) { $from = addr_search($freg[1]); } elseif (preg_match("/\nReply-To:[ \t]*([^\r\n]+)/i", $head, $freg)) { $from = addr_search($freg[1]); } elseif (preg_match("/\nReturn-Path:[ \t]*([^\r\n]+)/i", $head, $freg)) { $from = addr_search($freg[1]); } // 拒否アドレス foreach ($deny_from as $dfrom) { if (stristr($from, $dfrom)) $write = false; } ****************************************** やりたいこと。 拒否アドレスを設定するのではなく、許可アドレス型とし、特定メールアドレス以外は全て書き込まないようにしたいと考えています。 そこで下記のように修正しましたが、全てのメールで書き込めてしまいます。 ご指導いただけましたら幸いです。 よろしくお願いいたします。 ****************************************** 【config.php】 //許可アドレス $allow_from = array('hoge.co.jp'); 【pop.php】 // 送信者アドレスの抽出 if (preg_match("/\nFrom:[ \t]*([^\r\n]+)/i", $head, $freg)) { $from = addr_search($freg[1]); } elseif (preg_match("/\nReply-To:[ \t]*([^\r\n]+)/i", $head, $freg)) { $from = addr_search($freg[1]); } elseif (preg_match("/\nReturn-Path:[ \t]*([^\r\n]+)/i", $head, $freg)) { $from = addr_search($freg[1]); } // 許可アドレス foreach ($allow_from as $afrom) { if (stristr($from, $afrom)) { $write = true; } else { $write = false; } } 結果、許可アドレス以外の書き込みが出来てしまう。
$sql = "select count(*) as ..........."; $PDOStatement = $pdo->prepare($sql); $PDOStatement ->bindValue(':id', $dat, PDO::PARAM_INT); $PDOStatement -> execute(); のような場合に、実際に問い合わせが行われたSQLはどうやって取得できますか？
PHPのメールメソッドで日本語を件名に入れると、件名の先頭に＊が付いて送信されてくるのですが、この原因と、付かなくなるようにする方法を教えてください。 メソッドは、以下のようなものです。 よろしくお願いいたします。 mail("xxx@xxx.xxx", "日本語(件名)", "内容", "From: yyy@yyy.yyy")) ;
すみません。PHPからMSSQLサーバーに接続できずに困っています。 ブラウザを経由するとCentos上のPHPからWindowsのSQLサーバーに接続できない状態です。 コマンドラインからPHPを実行した場合は接続できるのですが、 同じPHPファイルにブラウザからアクセスした場合はなぜか接続エラーになってしまいます。 なぜブラウザからだと接続エラーになってしまうのか原因が分かる方はいらっしゃいますでしょうか？ または同じ症状になったことがある方はいらっしゃいますか？ PHPとfreeTDSは以下の様な記述になっています。 ■PHPの記述 $link = mssql_connect('MSSQL', 'ユーザー名', 'パスワード'); ■freeTDSの記述 [MSSQL] host = 192.168.0.1 port = 1433 tds version = 8.0 charset = UTF-8 client charset = UTF-8 language = japanese ■phpinfoのmssqlの情報 mssql MSSQL Supportenabled Active Persistent Links0 Active Links0 Library versionFreeTDS DirectiveLocal ValueMaster Value mssql.allow_persistentOnOn mssql.batchsize00 mssql.charsetno valueno value mssql.compatability_modeOffOff mssql.connect_timeout55 mssql.datetimeconvertOnOn mssql.max_linksUnlimitedUnlimited mssql.max_persistentUnlimitedUnlimited mssql.max_procsUnlimitedUnlimited mssql.min_error_severity1010 mssql.min_message_severity1010 mssql.secure_connectionOffOff mssql.textlimitServer defaultServer default mssql.textsizeServer defaultServer default mssql.timeout6060 よろしくお願いいたします。
PHP 5.3.3 php.iniでは display_errors = Off ですが、php内で　ini_set( 'display_errors', "On" ); 　するも 標準出力にエラーが表示されません。 設定の上書き禁止設定とかありましたっけ・・・
現在htmlでホームページを作っていますが phpの勉強をしてphpでサイトを作ると どういう事が可能になるのでしょうか？ ｐｈｐで何ができるのかわかりません。 動きを付けたいときはJavaScriptを使っていますが、 JavaScripttophpは似たようなものと思っていますが 実際は違うのでしょうか？
https://xxx.com/index.phpというサイト上に、iframeでhttps://yyy.com/●●●.phpのサイトを表示しています。 「https://xxx.com/index.php?‥‥‥‥」というxxx.comドメインのリンクで、 iframeの中身を、https://yyy.com/★★★.phpに指定して表示させる、 phpコード付きのリンクの書き方をご教示いただけますでしょうか。 よろしくお願いいたします。
$hoge = file_get_contents($file); で読み込むファイルが画像だったり、実行ファイルだったり、テキストだったりの場合、$hogeに現在入っているのがテキストかバイナリか区別する方法はどうしたらよいでしょう？
function hoge(){ if(条件){ return false; } 処理A; return true;　 } 上記のような場合if文内通ると、return falseするのでその後の処理Aは走らないですよね？ 頭がこんがらがってきました・・・
PHPにて通常のfileにてセッションを利用するとき セッションファイルはセッションを使用するページが終了するまで ロックされていたりしますか？ ページ　A セッション開始　→ 20秒かかる重い処理　→　このあと$_SESSION["hoge"] = 1; ページB セッション開始　→ すぐに$_SESSION["hoge"] = 2; ページAを読み込み始めて10秒後にページBを読み込み開始した場合 $_SESSION["hoge"] は　１になりますか２になりますか？
　MySQLのテーブルの一つにブラックリスト的なものを作って、そこにあるメールアドレスなどヒットした場合、値を返すようにPHPで掲示板を作っています。 　ローカルでもサーバー上でもちゃんとヒットして値を返してくることを確認していたんですが、最近あるユーザーの書き込みだけ、該当のメールアドレスを打ち込んでるにも関わらず、ヒットしないのかスルーされて書き込まれています。 　最初、文字コードを疑いましたが、メールアドレスや他の情報も文字化けせずに、ちゃんと登録されております。 　全角半角は問題ありませんし、まったく同じメールアドレスで、スルーされてるようにしか見えない状態で記録されています。 　再現しようにも、自分でやった場合はちゃんとヒットしてはじかれるので、原因が全く分かりません。 　何か考えられる原因はあるでしょうか？ 　どうやら、そのユーザーはiPhoneを使っているようですが、関係あるでしょうか？ 　データベースもページもUTF8だし、iPhoneもデフォルトでUTF8だそうですから、文字コードは問題なさそうですよね…
お世話になります。 $input=trim(fgets(STDIN)); while($input){ $array[]=$input; $input=trim(fgets(STDIN)); } 上記の意味を教えてください。 while (条件式) 実行する処理; 例 $num = 0; while (num < 2){ print "num=".$num; } 今まではこういった式を学んでいました。 while($input)の$inputという条件式？？ $input=trim(fgets(STDIN));の意味も飲み込めないです。 解説を宜しくお願いします。
AWS EC2を使ってウェブサーバを構築し、CakePHPをインストールしてウェブサイトを実装しております。 すでにドメインを2つ取得しており、それぞれのドメインでアクセスした際に、同じディレクトリにある2つのコントローラをそれぞれ実行させてページを表示させたいと思っております。 ドメイン（例） hoge.com fuga.com コントローラ（例） /lib/app/controllers/hoge_controller.php /lib/app/controllers/fuga_controller.php hoge.comに対しては、 routes.phpで Router::connect('/', array('controller' => 'hoge', 'action' => 'index')); と設定して hoge.comでアクセスした際にhogeコントローラのindexアクションが実行されるようにできましたが、この状態を維持しつつfuga.comでアクセスした際にfugaコントローラのindexアクションが実行されるようにできればと思っております。 cakephpやサーバの設定等は自由に行える環境ですので、cakephpのrouterやサーバのバーチャルホストの設定等で実現できますでしょうか。 お分かりいただける方いらっしゃいましたら、ご教授いただけますと幸いです。 以上、よろしくお願い致します。
お世話になります。 入力される値 3 $input=fgets(STDIN); $i=1; while ($i<=$input){ echo $i."\n"; $i++; } 出力値 1 2 3 それを 出力値 おはよう おはよう おはよう と表示するにはどうすれば良いのでしょうか？ よろしくお願いします。
xamppのPHP5.6.3で、register_globalsを有効にする方法がありましたらご教授ください。 なぜ、有効にする必要があるかと言いますと 参考にしている書籍(少々古いのですが)の環境はPHP4.3.11で、register_globalsを有効にしたサンプルがあるためです。 下記のような有効/無効にした例があります。 現在の私の環境では、2は表示されますが1はエラーとなります。 <? // login.php ?> <html> <body> 1:<?= $login ?><br> 2:<?= $_GET['login'] ?><br> <form action="login.php" method="get"> <input type"hidden" name="login" value="ログインします"> <input type="submit"> </form> </body> </html> 色々と調べてはみたのですが・・・ htdocs内に.htaccessで php_flag register_globals on にする方法を試してみましが、1はエラーで表示されます。 やり方が悪いのか、根本的に別の問題かわからず困っております。 xamppの古いバージョンを入れ直さずに動作確認できる方法がありましたら、よろしくご教授のほど、お願いします。
お世話になります。 PHPの勉強を始めたばかりの初心者です。 入力される値 2 8 出力値 2 3 4 5 6 7 8 と表示するように以下のプログラムを作成しました。 <?php $input=fgets(STDIN); $input2=fgets(STDIN); $i = $input; $a = $input2; while ($i<=$a){ echo $i."\n"; $i++; } ?> 結果「Runtime error(Exit status:null)」とエラーメッセージが出ます。 $i = $input; $a = $input2; を $i = 2; $a = 8; にするとうまく表示できます。 変数に代入する変数はこれで合ってますでしょうか？ どこか、間違っているか、教えてくださいますか？ よろしくお願いします。
<form action="" method="post"> <textarea name="img" cols=40 rows=4 readonly> <?php echo"<?php echo"masao"; ?>"; ?> </textarea></form> このプログラムの結果 <?php echo"masao"; ?> と表示したかったのですが案の定できませんでした。 どのようにしたら表示させることができるでしょうか？
cakephp2.6.4、サーバはamazon aws ec2（linux）を使用しております。 /home/test/lib/test1/controllers/test_controller.php のindexアクションに対して、取得したドメインでアクセスしたいと思っております。 現在、サーバのバーチャルホストの設定で、 ドキュメントルートにコントローラのパスを指定しておりますが、 Internal Server Errorと表示されてしまいます。 以下、設定内容です。 ※取得したドメインは、仮にhogehoge.comとさせていただきます。 <VirtualHost *:80> DocumentRoot /home/test/lib/test1/controllers/test_controller.php ServerName hogehoge.com </VirtualHost> 今回のような場合、どのようにしたらよいかお分かりの方いらっしゃいましたら、 ご教授のほどよろしくお願い致します。
echo ord("ア"); とした場合、期待する結果は177なのですが 実際は239が返ってきます。 echo ord("A"); などの英数字は期待通り（上記ですと65）が返ってきます。 何か設定が必要なのでしょうか？ それとも別の関数があるのでしょうか？
　プログラミング初心者です。 　掲示板サイトの作り方ならドットインストールにあります。 　しかし、OKWaveやYahoo!知恵袋のようなQ&Aコミュニティの作り方がわかるサイトや本、雑誌をご存知の方はおられないでしょうか？ 　これから作るサイトにQ&Aサイトの要素を入れたいのですが、参考になるものを探しています。
ｐｈｐ言語のＡｐａｃｈｅの設定の為にhttpd.confを秀丸で編集するにはどうやって編集すればいいのでしょうか？ XAMPP内にはhttpd.confは有りますが、秀丸でＸＡＭＰＰ内を見てもhttpd.confは表示されません。 解る方教えてもらえないでしょうか？
HTMLとCSSは適度に理解していますが、WordpressもPHPも初心者です。 ECサイトを作るにあたって、ショップの商品を使った作品をユーザーにフォームで投稿してもらい、 1）メイン画像と、作品説明と、サムネイルが２～４点 　　というレイアウトのページが自動作成され（１ページに１投稿を掲載） 2）そのページ内に第三者からのコメントを受け付けるフォームを設け 　　コメントがつけば、そのページの投稿者と、管理者にメールで通知 3）そのメイン画像は、サイトのギャラリーページに並び 　（複数ユーザーの作品一覧のページ）から各作品のページへリンク という構成のサイトを作りたいと希望しています。 当初、CGIの掲示板に画像や説明テキストを投稿してもらい そのデータをテンプレートに当てはめて、手動でHTMLページを作り 同じくHTMLのギャラリーに、メイン画像を並べてリンクして更新する・・ という、手作業でHTMLの静的ページで対応しようかと思っていましたが、 Wordpressを利用すれば、自動化できるのではないか？と思いついて 本やネットで情報を集め始めました。 不安材料としてWordpressの脆弱性や頻繁なアップデート、その折にバックアップを 取って対応しないとトラブルのもとに・・などの情報を目にしたもので心配も感じ もしかしたらPHPでオリジナルで作成すべき？？など　知識不足なまま悩んでいます。 業者さんに制作委託するか自力でチャレンジするか未定ですが、制作してもらったとしても、あとの維持管理やデザイン変更のためにプログラムのことは勉強しないといけないと思っています。 1,2,3）を備えたユーザー参加型サイトを作るには　どういった方法があるか Wordpressで用意するとしたら　どんなプラグインや利用できるものがあるか 後あとのメンテナンスの大変な要素や、トラブルを避けるには何に気を付けるか どのプログラムを習得すべきで、それに役立つサイトの情報 安心してお任せできる業者さんや企業サイト その他お気づきの点などありましたら、何でも情報をいただけると助かります。 ぜひお知恵を貸してください。よろしくお願いいたします。
下記のPHPスクリプトにおいて、テーブルの内容を<a＞タグで 挟み、データベースの内容を表示しているのですが、 先頭レコードのアンカーだけが表示されず、ただのテキストになってしまいます。 二番目以降のレコードはテーブルの内容がアンカー付きで表示されるのですが、 先頭レコードにアンカーをつけるには、どこがまちがっているのか ご指導お願いいたします。 mysql_set_charset("utf-8"); //$sql = "SELECT * FROM hospytal;"; //$result = mysql_query($sql, $con) or die(mysql_error()); if($_POST['radio_btn']==="1"){ $sql = "SELECT * FROM hospytal order by manzokudo desc;"; // 満足度の降順 $result = mysql_query($sql, $con) or die(mysql_error()); }else{ $sql = "SELECT * FROM hospytal order by kuchikomi desc;"; // 口コミ数の降順 $result = mysql_query($sql, $con) or die(mysql_error()); } $rowco = mysql_num_rows($result); // テーブルの行数 for($i=0; $i<$rowco; $i++){ $row = mysql_fetch_row($result); // 取得された行に対応する配列を返し、内部のデータポインタを前に進める echo '<a href="'.$i.'.php?sid='.$row[0].'">'; echo '<table width="500" height="120" border="1">'; echo '<tr>'; echo '<td width="500" height="30">'.$row[1].'</td>'; echo '</tr><tr>'; echo '<td width="500" height="30">'.$row[4].'&nbsp;&nbsp;&nbsp;'.$row[5].'件</td>'; echo '</tr><tr>'; echo '<td width="500" height="30">'.$row[7].'</td>'; echo '</tr><tr>'; echo '<td width="500" height="30">'.$row[9].'</td>'; echo '</tr>'; echo '</table>'; echo '</a>'; } mysql_close($con); // データベースとの接続を解除する
http://www.programming-magic.com/20070724175511/ こちらのコードを実行すると、test.txtが実行したphpと同階層に生成されると思います。 これを別の階層に生成するには、どんな記述をすれば良いのでしょうか。 試しに /aaaa/test.txt とか ../../test.txt としてもうまくいきませんでした。
json_decodeで戻り値がnullになり、どうも先に進めませんので、どちら様か叱咤・ご教示ください。 google maps api を利用して、住所(本来は日本語文字列住所)からジオコーディングして座標を取得し、google-map 上にプロットするようなロジックを考えておりましたが、住所からの座標変換が出来ずに困っております。 Aの部分はたぶん問題なさそうです。 理由としては、そこにあるURL文字列を直打ちした際にできる jsonファイルを保存し、その中身をみると、希望通りの座標データを含む住所データが格納されていました。 Bの部分でそれを取り出したいのですが、文字化けや妙なエラーになるのならまだしも、何もエラーにならず、しかしながら戻り値が何も入っていないように見受けられます。 このような現象をググったところ、よくありがちな現象ではあるそうですが、UTF8に気をつけなさいとか、UTF8にエンコーディングしなさいとか、DOMがどうだとか、いろいろ試行錯誤しましたが、いずれもNULLで返ってきます。 サーバは外部のレンタルサーバ（firstserver） PHP Version 5.3.19 DSO版 Apache2.2系 と記載がありましたので、その通りだと思われます。 何か根本的に間違っているのでしょうか。 その根本が分かっていないのは自他ともに認めるところではありますが、どちら様か、何かご存知でしたら、是非ご教示くださいませ。 ------ 問題のソース ----- <?php //header("Content-type: text/html; charset=utf-8"); $address = 'tokyo'; //A $geocode=file_get_contents('http://maps.google.com/maps/api/geocode/json?address='.urlencode($address).'&sensor=false'); //B $output= json_decode($geocode); //ここでjson_last_error()を確認したが、ここではエラーは一切出ない if($output==NULL){ print("null<br>"); exit; } $lat = $output->results[0]->geometry->location->lat; $lng = $output->results[0]->geometry->location->lng; echo $lat.','.$lng; ?> ------------ 表示結果 output:[] null 上記URLを直打ちした際に出来たjsonファイル（参考） *********************** { "results" : [ { "address_components" : [ { "long_name" : "東京駅", "short_name" : "東京駅", "types" : [ "train_station", "transit_station", "establishment" ] }, { "long_name" : "東京都", "short_name" : "東京都", "types" : [ "administrative_area_level_1", "political" ] }, { "long_name" : "日本", "short_name" : "JP", "types" : [ "country", "political" ] } ], "formatted_address" : "日本, 東京駅（東京）", "geometry" : { "location" : { "lat" : 35.681382, "lng" : 139.766084 }, "location_type" : "APPROXIMATE", "viewport" : { "northeast" : { "lat" : 35.6827309802915, "lng" : 139.7674329802915 }, "southwest" : { "lat" : 35.6800330197085, "lng" : 139.7647350197085 } } }, "place_id" : "ChIJC3Cf2PuLGGARxuYMi4MlMEQ", "types" : [ "train_station", "transit_station", "establishment" ] } ], "status" : "OK" } ***********************
素人ながら、ウェブサイトを作成中です。 ヘッターやフッターを共有にしたくて、HTMLにPHP の inlude のコード（<?php include('./header.html'); ?>）を記載しました。 サーバーにアップすれば、問題なく、ヘッターが表示されました。 しかし、xampp上では、ヘッターが表示されません。 xamppでどのような設定をすれば、確認することが出来るのでしょうか。ご教示お願い致します。 因みに、ネットで検索して、xamppの下記のコードを変更してみたのですが、インクルードにしているヘッター部分は表示されませんでした。 【変更してみたxamppの「php.ini」のコード】 ■変更前のコード ; Windows: "\path1;\path2" ;include_path = ".;c:\php\includes" ■変更後のコード ; Windows: "\path1;\path2" include_path = ".;c:\php\includes;c:\php\pear";
IXR_Library.phpというファイルの文字コードを テラパッドを使いutf-8N、改行コードLFで保存しているのですが、 上書き保存、別名保存しても新規作成しコピペしても shift-jisに変更されてしまいます。これはプログラム内に そういった指定があるのでしょうか。 どうすればutf-8Nで保存できるのでしょうか。
素人ながら、PHPを利用し、なんとかPCサイトとスマートフォンサイトで問い合わせフォームを作成しました。 (1)入力画面 (2)確認画面　※必須項目が未記入なら「戻る」。※必須項目が記入済みなら、「戻る」または「送信」となっております。 (3)送信完了画面 しかし、問題がありまして、上記(1)の問い合わせフォームを入力し、(2)の確認画面のページになってから戻るを押すと、iPhoneのChromeのみ入力したデータが消えてしまいます。 ※ちなみに、端末はiPhone5cになります。 iPhone5のサファリ、アンドロイドのChromeなどでは、戻るをしても入力したデータは残っておりました。 iPhoneのChromeで戻っても、データを残すには、何か特別なコードなどを入力する必要があるのでしょうか？ どのような回答でもかまいませんので、何卒アドバイスを頂ければと思います。
添付した画像のように、PHPで書いたテキストエリアの 反転させた部分を取得して、削除ボタンで削除する方法は あるでしょうか。ちなみに、テキストエリアの内容は、 CSVファイルをそのまま出力（若干の修正）しているだけです。
TCPDFからのPDFのファイル名に日付の表記を付加（作成されるPDFの名前をすべて異なる名前）したいのですが、 以下のとおり「$the_time() 」を追加した場合だとエラーになってしまいました。 $pdf->Output($the_time() .'/home/～～/tcpdf/test/newpdf.pdf', 'f'); どのようにすればよいでしょうか？ よろしくお願いいたします。
お世話になります。 現在、TCPDFでPDF書き出しのテストを行っています。 下記のコードを入れてブラウザでの表示は出来ましたが、 $pdf->Output("test.pdf", "I"); サーバー内に保存するにはどうすれば良いでしょうか？ よろしくお願いいたします。
こんにちは。 php初心者です。 ホームページのphpかをやろうと思ったんですが、関数ファイルを実行するためにincludeしたいんですが、フルパスでは出来ないんですか？ しようとするとエラーになります。
http://phpspot.net/php/man/php/function.array-combine.html こちらを参考に配列のまとめ方と取り出し方を模索中です。 $a = array('green', 'red', 'yellow'); $b = array('avocado', 'apple', 'banana'); $c = array_combine($a, $b); ↑こちらは、 foreach($c as $key => $value){ ～ } ↑このような感じでそれぞれ取り出せると思います。 ここまではいけました。 この状態で対象が3つ以上になった場合は、どういう対応方法があるのでしょうか。 $a = array('green', 'red', 'yellow'); $b = array('avocado', 'apple', 'banana'); $hoge = array('100', '150', '80'); array_combine()でできるのでしょうか。 他の関数を使うのでしょうか。 不慣れですみません。 アドバイスいただけますとうれしいです。 よろしくお願いいたします。
https://www.softel.co.jp/blogs/tech/archives/1401 こちらを参考にいろいろ日付を取得する方法を学んでいます。 先月の初日と先月の末日を取得する方法を知りたいのですが、 上記URLに掲載されているような簡単な方法はさすがにないと思われるのですが、 何か良い方法がありましたら、ご教示いただけますとありがたいです。 よろしくお願いいたします。
ｐｈｐで問合せフォームを作成中なのですが、分からない点が3点あります。 ご教示お願い致します。 (1)問合フォームの入力項目の最後の送信ボタンに下記のコードで「submit」を入れると、入力項目である郵便番号を入れると自動で住所表示（Ａｊａｘｚｉｐ2を使用）する機能が作動しなくなります。「submit」を入力しないと自動表示されますが、データーは送信されません。 どうしたらよいのでしょうか。 【問合せフォームの入力画面のコード/ＨＴＭＬ】 <form method="POST" action="visit Application.php" > <h3 class="taitoru11">問合せ</h3> <label for="name">お名前を入力して下さい</label> <input type="text" name="name" id="name" placeholder="例）山田value=""> <label for="number">電話番号</label> <input type="tel" name="tel" id="tel" placeholder="例）0123" value=""> 　　<label for="mail">メールアドレス</label> <input type="text" name="mail" id="mail" placeholder="例）" value=""> 　　 <label for="zip">郵便番号&nbsp;&nbsp;※必須</label> <input type="text" name="zip" id="zip" value="" placeholder="xxx-xxxx"maxength="8" /> 　　　 <label for="addr">住所</label> <input type="text" name="addr" id="addr" /> <label for="addr2">マンション・部屋番号</label> <input type="text" name="addr2" id="addr2" /> <label for="comment">その他コメント</label> <textarea id="comment" name="comment" placeholder="問合せ内容をご記入ください" value="" wrap="hard" ></textarea> <input type="submit" value="入力内容を確認する" data-inline="true"/> </form> (2)上記のコードにある<input type="submit" value="入力内容を確認する" data-inline="true"/> を入力すると、ボタンを押さなくても、入力項目でエンターを2回押すと、送信先に勝手に送信されてしまいます。 どうしてでしょうか？ また、ボタンを押さないと送信されない様にするにはどうすればいいのでしょうか。 (3)(1)のデーターの送信先で、上記の「その他コメント」欄については改行表示をさせたく、下記の様に「nl2br」を使ってみましたが、改行されませんでした。どうしたらよいのでしょうか。 【問合せフォームの送信先のコード/ＰＨＰ】 <dl> <dt>お名前</dt> <dd><?php print(e($_POST['name'])); ?></dd> <dt>電話番号</dt> <dd><?php print(e($_POST['tel'])); ?></dd> <dt>メールアドレス</dt> <dd><?php print(e($_POST['mail'])); ?></dd> <dt>郵便番号</dt> <dd><?php print(e($_POST['zip'])); ?></dd> <dt>住所</dt> <dd><?php print(e($_POST['addr'])); ?></dd> <dt>マンション・部屋番号</dt> <dd><?php print(e($_POST['addr2'])); ?></dd> <dt>その他コメント</dt> <dd><?php print(nl2br(e($_POST['comment']))); ?></dd> </dl> 何卒よろしくお願い致します。
すみません、質問させてください。 phpでは。。 $_SESSION['test']["comment_".$i] = $_SESSION['test']["comment_1] みたいな数値が入るとして、smartyでこれを実現するにはどうしたらイイでしょうか？ $smarty.session.test.comment_[$i] イメージ的にはこんな感じなんですが動きません。。 よろしくお願いいたします。
PHPを使ってガラケー向けページを作っています。 xmlとして書いてるんですが、ドコモに合わせてShift-JISで表示しようと考えています。 PHPファイルはUTF8で書いた方が良いと言うことでそうしてるんですが、PHPファイル自体はUTF8で書かれていても、 <?xml version="1.0" encoding="Shift_JIS"?> というように、ｘｍｌの中でShift-JISを指定してやれば文字化けせずにちゃんと表示されるんでしょうか？ それともPHPファイル自体もShift-JISで書かないとダメですか？ 一応、手持ちのガラケーでは大丈夫なようですけど、機種やキャリアによって変わってくるかもしれないと不安になって質問させていただきました。 よろしくお願いいたします。
filemtimeで更新日を取得できますが、これはタイムスタンプですよね。 2038年問題を考えると、タイムスタンプを使うものは極力避けたいと思っております。 DateTimeみたいに、タイムスタンプ以外のもので、ファイルの更新日を取得できるものはありませんか？
MYSQLのデータをPHPでアクセスのたびに増やすプログラムを書いているのですが上手くいきません。 require("dbinfo.php"); try{ $dbh = new PDO($dsn, $username, $password); }catch (PDOException $e) { exit('データベースに接続できませんでした。e1' . $e->getMessage()); } $sql = "SELECT * FROM wp_usermeta WHERE umeta_id = '150'"; $stmt = $dbh->query($sql); $result = $stmt->fetch(PDO::FETCH_ASSOC); $stmt -> execute(); print $a = $result[meta_value]; // 0が表示されています $a = $a +1; print $sqll = "UPDATE wp_usermeta SET meta_value = '$a' WHERE umeta_id = '150'"; $stmtl = $dbh->prepare($sqll); $stmtl -> execute(); デフォルト値を0に設定してアクセスし、一度アクセスするごとに1ずつ増えていくことを予想していたのですが、1度目のアクセスで3になり、その後は1づつ増えていきます。 アクセス毎に増えていくプログラムをつくる場合はUPDATEよりも他の書き方の方が良いのでしょうか。 宜しくお願いします。
ヤフーショッピング在庫更新APIでも認可コードを取得して、アクセストークンを取得してやらないといけないのでしょうか？
さくらのレンタルサーバにWordPressをインストールしてサイトを作ったのですが、そのサイトのディレクトリとは何処にあるのでしょうか？また、どうすればディレクトリにアクセスできるのでしょうか？
楽天　web api https://webservice.rakuten.co.jp/api/ichibaitemsearch/ にて商品を検索させた時に新商品だけの情報を並べたいのですが パラメーター「sort」の「updateTimestamp」では、新着と更新情報が入り混じってしまいます。 楽天の通常の検索 「標準、価格が安い、高い、新着順、レビューが多い」という並び替えができます。 またにぎわいツールなどでは、新着順に並び替えるものもあります。 新着順に並び替えるために どのパラメーターを送っているのでしょうか？
PHPでCSVファイルを読み込み、MySQLにデータを追加する方法を教えてください。 その際に、新規の行はIDを指定せず、auto_incrementでidを設定するようにして、IDを指定した場合は、既存の行を変更するようにしたいです。 また、prepareメソッドを用いたいです。 よろしくお願いします。
1つのサイトの中に2つの異なるワードプレスのサイトがあります。 /hoge/はAという管理人のみが更新するワードプレスです。 /piyo/はBという人が更新するワードプレスになります。 これらは同じドメイン http://fuga.co.jpの中に入っています。 /hoge/の最新情報と/pjyo/の最新情報をfuga.co.jp/index.phpの中に同時で取得したいです。 「wp-load.php」を読み込み、get_postsで取得したのですが、これではwp-load.phpが1つしか読み込むことができません。 2つの最新情報をfuga.co.jpに表示させる方法が知りたいです。 ※RSSで取得する方法以外でお願いいたします。 -> RSSは全く無知なので教えていただいても取得できない可能性があります
Laravel5でlaravel-debuggerをインストールしたのですが、Debugbar::info($object);が出来なくて困っています。デバッグバー自体は表示されて、正常に動いているようなのですが、info()をすると、Call to undefined method DebugBar\DebugBar::info()または、Call to undefined method Barryvdh\Debugbar\Middleware\Debugbar::info()のエラーが出てしまいます。 composer.jsonでの記述 "require": { "laravel/framework": "5.0.*", "barryvdh/laravel-debugbar": "~2.0" }, config/appでの記述 'providers' => [ /* * Laravel Framework Service Providers... */ 'Illuminate\Foundation\Providers\ArtisanServiceProvider', 'Illuminate\Auth\AuthServiceProvider', 'Illuminate\Bus\BusServiceProvider', 'Illuminate\Cache\CacheServiceProvider', 'Illuminate\Foundation\Providers\ConsoleSupportServiceProvider', 'Illuminate\Routing\ControllerServiceProvider', 'Illuminate\Cookie\CookieServiceProvider', 'Illuminate\Database\DatabaseServiceProvider', 'Illuminate\Encryption\EncryptionServiceProvider', 'Illuminate\Filesystem\FilesystemServiceProvider', 'Illuminate\Foundation\Providers\FoundationServiceProvider', 'Illuminate\Hashing\HashServiceProvider', 'Illuminate\Mail\MailServiceProvider', 'Illuminate\Pagination\PaginationServiceProvider', 'Illuminate\Pipeline\PipelineServiceProvider', 'Illuminate\Queue\QueueServiceProvider', 'Illuminate\Redis\RedisServiceProvider', 'Illuminate\Auth\Passwords\PasswordResetServiceProvider', 'Illuminate\Session\SessionServiceProvider', 'Illuminate\Translation\TranslationServiceProvider', 'Illuminate\Validation\ValidationServiceProvider', 'Illuminate\View\ViewServiceProvider', /* * Application Service Providers... */ 'App\Providers\AppServiceProvider', 'App\Providers\BusServiceProvider', 'App\Providers\ConfigServiceProvider', 'App\Providers\EventServiceProvider', 'App\Providers\RouteServiceProvider', 'Barryvdh\Debugbar\ServiceProvider', ], 'aliases' => [ 'App' => 'Illuminate\Support\Facades\App', 'Artisan' => 'Illuminate\Support\Facades\Artisan', 'Auth' => 'Illuminate\Support\Facades\Auth', 'Blade' => 'Illuminate\Support\Facades\Blade', 'Bus' => 'Illuminate\Support\Facades\Bus', 'Cache' => 'Illuminate\Support\Facades\Cache', 'Config' => 'Illuminate\Support\Facades\Config', 'Cookie' => 'Illuminate\Support\Facades\Cookie', 'Crypt' => 'Illuminate\Support\Facades\Crypt', 'DB' => 'Illuminate\Support\Facades\DB', 'Eloquent' => 'Illuminate\Database\Eloquent\Model', 'Event' => 'Illuminate\Support\Facades\Event', 'File' => 'Illuminate\Support\Facades\File', 'Hash' => 'Illuminate\Support\Facades\Hash', 'Input' => 'Illuminate\Support\Facades\Input', 'Inspiring' => 'Illuminate\Foundation\Inspiring', 'Lang' => 'Illuminate\Support\Facades\Lang', 'Log' => 'Illuminate\Support\Facades\Log', 'Mail' => 'Illuminate\Support\Facades\Mail', 'Password' => 'Illuminate\Support\Facades\Password', 'Queue' => 'Illuminate\Support\Facades\Queue', 'Redirect' => 'Illuminate\Support\Facades\Redirect', 'Redis' => 'Illuminate\Support\Facades\Redis', 'Request' => 'Illuminate\Support\Facades\Request', 'Response' => 'Illuminate\Support\Facades\Response', 'Route' => 'Illuminate\Support\Facades\Route', 'Schema' => 'Illuminate\Support\Facades\Schema', 'Session' => 'Illuminate\Support\Facades\Session', 'Storage' => 'Illuminate\Support\Facades\Storage', 'URL' => 'Illuminate\Support\Facades\URL', 'Validator' => 'Illuminate\Support\Facades\Validator', 'View' => 'Illuminate\Support\Facades\View', 'Debugbar' => 'Barryvdh\Debugbar\Facade', ], もし、分かる方がいらっしゃいましたら、ご教授いただけないでしょうか？よろしくお願いします。
データの多次元配列があって、値に応じて動的に関数を選択し 中身の値を引数で渡すみたいな感じの処理をしています ほとんどの処理は中身の値だけあれば事足りるのですが 稀にキー値を使いたい処理がでてきます 本当に稀なので引数にキー値も渡すようにするのは 無駄が多くなるように思うので避けたく できれば参照変数で渡される値から 親配列でのキー値を取得したいと思っています $arr2A=array('a'=>array('fnc'=>'A','あ','い','う'),'b'=>array('fnc'=>'B','か','き','く'),'c'=>array('fnc'=>'C','さ','し','す')); $arr2B=array('a'=>array('fnc'=>'A','あ','い','う'),'b'=>array('fnc'=>'B','か','き','く'),'c'=>array('fnc'=>'C','さ','し','す')); $arr2C=array('a'=>array('fnc'=>'A','あ','い','う'),'b'=>array('fnc'=>'B','か','き','く'),'c'=>array('fnc'=>'C','さ','し','す')); foreach($arr2A as $key=>$val){ $fncs[$val['fnc']]($val); } foreach($arr2B as $key=>$val){ $fncs[$val['fnc']]($val); } foreach($arr2C as $key=>$val){ $fncs[$val['fnc']]($val); } $fncs=array( A=>function(&$arr){ }, B=>function(&$arr){ }, C=>function(&$arr){ //ここで稀にキー値も使いたい }); 実際のコードはかなり長いので載せられませんが 要約すると上記のような感じの処理です まずどのデータ配列の集合から渡されたのかが明確ではありませんので indexOfなどでキー値を得るのというのが難しいです 現在は、その処理が必要なデータ行について処理前に 中身にキー値をあらかじめ入れてしまう というように対応しているので、一応解決はしているのですが もし参照変数から親配列を得る方法が あればと思い質問させていただきました ”そんなものはない”という回答も あきらめつくのでお願いします
いつもお世話になっております。 正規表現に関して細かい質問をさせて下さい。 例えば、G-01,T-02,F-05とあったときに、 これを、01,02,05としたいとき、 正規表現の置換で「[A-Z]-[0-9][0-9]」→「[0-9][0-9]」とすると、 "[0-9][0-9]"という文字列だけ残ってしまいます。 既存の文字列をそのまま残すにはどのようにしたらよいでしょうか？ ※テキストエディタでの置換に関してです。 宜しくお願い致します。
今までphp5.1だったサーバーから5.3のサーバーに移設しました。 この際いくつかプログラムが動かなくなったので修正しました。 ・$_SERVER['DOCUMENT_ROOT'].'hoge/hoge/～～～'→$_SERVER['DOCUMENT_ROOT'].'/hoge/hoge/～～～'　に直さないと動かなかった。 ・htmlもphpもUTF-8。今までは正常に表示されてたのに日本語が???に化けた。 ・htaccess内で変えた記述は「AddHandler php5.3-script .htm .html」くらい。 ・サーバー：ロリポップ、FTP時はコード無変換。 上記条件ですが、以下が質問です。 ・$_SERVER['DOCUMENT_ROOT']で得られるルートの値末尾が5.1では”/”だったものが無しに変わったのか？置いているサーバーで働きが異なるのか。それとも文字化けと何か関係している可能性があるのか。 ・文字化けについて考えられる原因。 助言頂けると大変幸いです。
トップページの投稿一覧（index.php）で、日付が「17 3月, 2015」のように表示されるのですが、これを「2015年3月17日」のような形式に直したいです。 どこをどう変えればいいのでしょうか？
php.iniのinclude_pathのデフォルト値にたいして質問です。 現在PHP 5.6.6 をremi-56のリポジトリから、centos6にインストールしました。 そして、phpinfoを確認すると、 「include_path」の欄に「.:/usr/share/pear:/usr/share/php」とありました。 しかし、「php.ini」の中を検索しても、include_pathは、「;include_path = ".:/php/includes"」などのようにすべてコメントアウトされていました。 phpインフォをみたとき、include_pathに「「.:/usr/share/pear:/usr/share/php」が設定されているのは、デフォルトで決まった値なのでしょうか？ どこか、設定ファイルにその値がかかれたりしているのでしょうか？ httpd.confを検索しても、phpのパスを設定している様子もなく、.htaccessなども設置してないので、一体このデフォルト値はどこから来てるのか不思議です。 分かる方いましたら教えてもらえないでしょうか？
私は、PHPを使ってWEBのシステム構築に携わっております。 いままではフォームの組み込み等の簡単なものだったため、 PHPを記述して対応しておりましたが、大きいシステムのお話などが 出てきだしており、システムの作成をもっと効率化できないかなど 自分のステップアップを考えております。 ある程度の規模に対応でき、システム開発が柔軟に行えるようなPHP フレームワークはございますでしょうか。 Cake PHPやFuelPHP等が出てきますが、多数の種類があるため、 利用者様や学習者様のお声をお聞きしたく、質問をさせていただきました。 DBを利用することも多々ありますので、DBとの連携も容易なものがありがたいです。
htmlでユーザーがテキストを入力するフィールドと同様に、自由に画像を貼り付けられるフィールドを定義することができるか。 できるとしたら、どういうhtmlを書けばいいか。 またその貼り付けた画像をMySQLのmediumblobフィールドに保存する場合、どういうphpコードを書けばいいか、を教えてほしい。
条件は、 1.データベースを使用しない 2.スレッドごとの表示も可能 3.投稿者自身と管理人がレス削除できる 4.記事にレス可能 で、 できれば下記の条件も合えば助かります。 文字コードUTF-8 よろしくお願いします。
stinger3を利用してタイトルをテキストから画像に変更しました。 その後にタイトル画像を中央に寄せる方法はありますか？ ワードプレス初心者です お手柔らかにお願いします。
PHP 5.6.3 SQLServer 2014 IIS 8.5 Web上からPHPへPOSTし、SQLServerへODBC関数（http://php.net/manual/ja/ref.uodbc.php）を使用して接続しています。 その際「odbc_autocommit」を使用しトランザクションをかけているのですが、 同時にDBへ登録（Insert、Delete)をしたときに競合してしまいました。 そもそも「odbc_autocommit」の挙動として、 (1)A端末からDBへ接続 (2)A端末から「odbc_autocommit」を使用しトランザクション (3)B端末からDBへ接続 (4)B端末から「odbc_autocommit」を使用しトランザクション (5)A端末からTEST_TABLEへInsert (6)B端末からTEST_TABLEへInsert 上記手順の(4)の動作の際に、A端末の操作が終わるまでBは待たされるorエラーでかえると想定していたのですが・・・ ----------------------------------------------------------- $serverCon = odbc_connect($serverName,$userName,$password); if($serverCon === false){ $strMsg = ERRMSG_DBCONNECT; writeLog($strMsg, DEBUG_LOG); jumpSystemErrPage(); exit(); } $boCon = true; // 自動コミットをさせないようにする $a = odbc_autocommit($serverCon,false); if($a === false){ $strMsg = ERRMSG_DBCONNECT; writeLog($strMsg, DEBUG_LOG); $aaaa = odbc_errormsg($serverCon); writeLog($aaaa, DEBUG_LOG); jumpSystemErrPage(); exit(); } ----------------------------------------------------------- 確認方法として A端末にてデバッグ状態から上記ソース上の if($a === false){　の行でブレイクしてる最中に B端末から普通に実行した際に $aがfalseのルートに通らずそのまま次の処理へ行ってしまいました。 PHPのODBC接続で更新中にトランザクション（ロック）をかけるのはできないのでしょうか？ それとも自分のやり方が間違っているのでしょうか？ よろしくお願いします。
下記のスクリプトにおいて、画像イメージ全体をひとつのボタンと扱い、その中の長方形の部分をクリックした際に、result.phpにジャンプするアンカーを表示しようとしているのですが、画像の長方形部分をクリックしても、アンカーが表示されません。どこが間違っているのか、おしえていただきたいです。 [reserve.php] 前略 <?php if($_POST['cmd_x']>$start && $_POST['cmd_x']<$end && $_POST['cmd_y']>120 && $_POST['cmd_y']<160){ // 予約時間表示バーの長方形の内部をマウスクリックした場合 echo '<a href="result.php">予約結果</a>'; } 中略 echo '<form name="form2" method="post" action="reserve.php">'; echo '<input type="image" name="cmd" src="show_schedule.php">'; echo '</form>'; ?>
外部のホームページのソースを拾いRSS化するPHPを作成しました。 ***************************************** 外部ホームページ http://hoge.com/index.html ***************************************** <html> <table class="Table100"> <tr> <th class="Name"><h1>えんどう豆</h1></th> <td class="Price">254</td> <td class="maker"> <span class="a1">メーカー</span> <span class="a2">遠藤農園</span> </td> </tr> </table> </html> ***************************************** スクレイピングPHP　http://hagedebu.jp/index.php　 ***************************************** <?php class SimpleXMLExtended extends SimpleXMLElement { public function addCData($data) { $dom = dom_import_simplexml($this); $dom->appendChild($dom->ownerDocument->createCDATASection($data)); } } $xml = new SimpleXMLExtended('<rss version="2.0"></rss>'); $channel = $xml->addChild('channel'); $channel->addChild('title', 'TEST RSS'); $dom = new DOMDocument; @$dom->loadHTMLFile('http://hoge.com/index.html'); $xpath = new DOMXPath($dom); foreach ($xpath->query('//*[@class="Table100"]') as $node) { $item = $channel->addChild('item'); $item->addChild('description')->addCData(implode('<br>', [ $xpath->evaluate('string(.//*[@class="Name"]/h1)', $node), $xpath->evaluate('string(.//*[@class="Price"])', $node), $xpath->evaluate('string(.//*[@class="maker"]/span)', $node), ])); } header('Content-Type: application/xml; charset=utf-8'); $xml->asXML('php://output'); ************************************************ 問題点 このPHPでは、 えんどう豆 254 メーカー と表示されてしまいます。 <td class="maker"> <span class="a1">メーカー</span> <span class="a2">遠藤農園</span> </td> class="makerに複数のspanが入っているため、2つめのspanを認識しません。 当方が表示させたいのは下記のようにspanを両方とも表示させたいです。 またはひとつしか表示させることができない場合は、「メーカー」ではなく「遠藤農園」を優先表示させたいです。 このように表示させるためにはどうすればよいでしょうか? 希望表示 えんどう豆 254 メーカー 遠藤農園 または えんどう豆 254 遠藤農園 よろしくお願いいたします。
phpで誰でも投稿できる記事サイトの制作を勉強中です。 pdoでmysqlデータベースに接続しています。 記事を表示するページの仕組みとして、 URLパラメータに各記事のコードを含ませ、 データベースからコードで照合したレコードのデータを取得し、 取得したデータ（タイトル・内容・作成者の名前）を表示する という形でページを作成しています。 アクセスランキングの作成の為に、各記事ごとにアクセス数を集計したく、 データベースにアクセスカウント用のカラムを作成し、 ページに人が訪問したらカウンタをUPDATEで1増やすという形で試しに実装してみました。 今のところ、問題なく動いてはいるのですが、 全ての記事ページで上記の動作をするとしたら データベースに負荷がかからないか心配です。 また、アクセス総数は取得できますが、 日別のアクセス数もカウントしたいので、 毎日、日ごとのアクセスカウント用のカラムを1つずつ増やすのは 少し手間がかかる気がします。 ネットで調べたところ、 テキストファイルでカウントする仕組みを見かけたのですが、 1つのテキストファイルに複数ページのカウントを書き込むことは可能なのでしょうか？ もしも、1つのテキストファイルにつき、1つのページのカウントを書き込む場合は、 URLパラメータでページ分岐しているので、 新規記事作成の際、データベースにレコードを追加するのと一緒に touch()関数などでアクセスログ用のファイルを作成した方が良いでしょうか？ GETでページ分けされている場合のアクセスカウンタの処理方法をネットで探しても 見つからなかった（探し方が悪いかもしれませんが・・・）ため質問させて頂きました。 当方、データベースでの処理ばかり使用していて、 phpでファイル関数は使用したことがありません。 （プログラミングのスクールに通っていた頃、perlで使用したことはあります。） 参考になるURL等もありましたら教えていただけると有難いです。 ご回答、よろしくお願いします。
在庫更新などのAPIなどはどのタイミングで在庫が更新されるのでしょうか？ 例えば、楽天商品データをホームページに表示させたい場合は、リクエストを送って、それに対するレスポンスをひもづけて、表示させると思うのですが（合ってなかったら私の勉強不足です）、在庫更新などの場合は情報をリクエストで送ることで、在庫が更新される？のでしょうか？ 在庫が更新されるのはどうやってされているのかが知りたいです。 回答よろしくお願いします！
PHPのセッションを別ドメイン名で利用する事は可能でしょうか？ 同一ドメイン名でのサブドメインでの利用は、可能だと理解しています。
MDB2のプリぺアドステートメントを使用してテーブルデータを取得する際に、 下記のように、$types で型指定をするのが一般的のようですが、 この型指定をせずにデータを取得する事は可能なのでしょうか？ （公式マニュアルでは指定したものしか見当たらなかったもので…） ------------------------------------------- $sql = "select * from table where id = ? and name = ?"; $types = array('integer', 'text'); $sth = $mdb2->prepare($sql, $types, MDB2_PREPARE_RESULT); $data = array(1, 'hoge'); $res = $sth->execute($data); ------------------------------------------- また、指定せずに取得出来るのであれば、 指定した場合と指定しなかった場合で何が違うのかも教えて頂けると幸いです。 以上、よろしくお願い致します。
APIのコードを書くとき最初にたくさんいろんなコードをそれぞれAPIによって書いてると思うのですが、 ebayだったらこんな感じ↓ // Turn on all errors, warnings and notices for easier PHP debugging error_reporting(E_ALL); // Define global variables $s_endpoint = "http://open.api.ebay.com/shopping?"; // Shopping URL $m_endpoint = 'http://svcs.ebay.com/MerchandisingService?'; // Merchandising URL $appid = 'hogehoge'; //AppID $responseEncoding = 'XML'; // Type of response we want back function getMostWatchedItemsResults ($selectedItemID = '', $cellColor = '') { global $m_endpoint; global $appid; global $responseEncoding; $apicalla = "$m_endpoint"; $apicalla .= "OPERATION-NAME=getMostWatchedItems"; $apicalla .= "&SERVICE-VERSION=1.5.0"; $apicalla .= "&CONSUMER-ID=$appid"; $apicalla .= "&RESPONSE-DATA-FORMAT=$responseEncoding"; $apicalla .= "&maxResults=3"; $apicalla .= "&categoryId=xxx"; // Load the call and capture the document returned by eBay API $resp = simplexml_load_file($apicalla); このコードはググってたらebayの練習用のコードが出てきたので、それの最初の方にあったやつを抜粋しました。 アプリIDをいれるような基本形というか、上記のようなコードはどうやって探してくるのでしょうか？ 質問内容を簡潔にまとめると、APIを使うときに、こつみたいなのっていうのはあるのですか？ 調べていると、「なれてきたらAPI簡単だった」みたいなコメントもあったりするので、こつとかあるのかなっと思いました！ そういうのがあれば教えていただけたらうれしいです。 よろしくおねがいします！
function sanitize(&$arg){ if (is_array($arg)){ array_walk_recursive($arg,function(&$val,$key){if(is_string($val))$val=str_replace("\0", "", $val);}); }else{ if(is_string($arg))$arg=str_replace("\0", "", $arg); } return $arg; }
RSSのデータを取得する、という処理を行いたいのですが、 文字コードの件でひっかかってしまっているようで なかなか前に進むことができません。 ＊＊＊＊＊＊＊＊＊＊＊＊ // RSSの内容を取得する $rss_text = file_get_contents(※RSSのフィードURL); // RSSの文字エンコーディングを変換→再変換 $rss_text = mb_convert_encoding($rss_text, 'SJIS', 'UTF-8'); $rss_text = mb_convert_encoding($rss_text, 'UTF-8', 'SJIS'); $rss_text = preg_replace('/[\x00-\x1f]/', '', $rss_text); // RSSをパースする $rss_xml = new SimpleXMLElement($rss_text); if ($rss_xml) { // XML解析に成功した場合 // SimpleXMLElementオブジェクトからデータを取得 $items = $rss_xml->item; foreach($items as $item) { echo 'ID：'. $item->guid. '<br />'; echo 'リンク：'. $item->link. '<br />'; echo '日付：'. $item->pubDate. '<br />'; echo 'タイトル：'. $item->title. '<br />'; echo '本文：'. $item->description. '<br />'; } } ＊＊＊＊＊＊＊＊＊＊＊＊ こういったコードを組んでいるのですが、現状では Warning: simplexml_load_string() [function.simplexml-load-string]: Entity: line 1: parser error : attributes construct error in... Warning: simplexml_load_string() [function.simplexml-load-string]: ^ in... Warning: simplexml_load_string() [function.simplexml-load-string]: Entity: line 1: parser error : Couldn't find end of Start Tag rss line 1 in... Warning: simplexml_load_string() [function.simplexml-load-string]: ^ in... Warning: simplexml_load_string() [function.simplexml-load-string]: Entity: line 1: parser error : Extra content at the end of the document in... Warning: simplexml_load_string() [function.simplexml-load-string]: ^ in... このようなエラーが表示されてしまいます。 自分なりに文字コードを処理しているつもりではあるのですが、 他にも何かしなければならないことがあるのでしょうか？ どうぞ知恵を貸していただければと思います。 よろしくお願いいたします。
度々似たようなタイトルでの質問ですみません。 ここで質問させていただき、アドバイスをいただいた結果、 保持したい情報のある全てのページを1ページで収め、擬似的にJavaScriptでページを切り替える方法にしました。 それにより、この１ページ内で選択した情報（画像やテキストなど）を記憶したまま表示することが可能になりました。 ですが、１点だけ、動作が不安定なものがありまして、 上記ページから、最終の確認画面にsubmitで送信した後、 確認画面で確認してから、「もう一度、変更したい画像が発生した」なんてとき 「前画面へ戻る」（<button type="button" onclick="javascript:history.back();" target="_self" class="button_re-selection">前画面へ</button>）このコードで戻ると、選択していた画像がブラウザやOSによって表示されなくなってしまいます。 現時点では、macだとsafari、firefoxのみOKで、operaはダメ（テキストはOK）でした。 windowsだと、ie、firefox、chromで画像もテキストもダメでした。 つくりとしては、 サムネイルの画像（小サイズ）が横並びで並んでいて、それをクリックするとその下に、拡大画像（中サイズ）が表示します。 拡大画像（中サイズ）の表示場所はiframeで囲んでおり、どの画像を選んでも同じ場所に表示する仕組みです。 表示された拡大画像（中サイズ）をクリックするとさらに拡大してlightboxで大サイズを表示するようにしています。 iframe内に表示している拡大画像（中サイズ）は、PHP内に貼りこんで表示しています。 「on load」を上記のPHP内に入れれば、出来そうですが、現在検証中です。 もしかすると、iframeを使用していることに原因があるのかもしれませんが、出来ればこの形を使いたいです。 内容は上記のとおりですが、なんとなくイメージが伝わりますでしょうか？ どなたかご教授をお願いします。
とても稚拙な質問なら大変申し訳ないのですが、検索しても出てこなかったために質問させていただきます。 現在Wodpressのテンプレートをカスタマイズしてマルチサイトのホームページを制作しているのですが、URLによって処理を変えたい部分があります。 1つのPHPファイルに各URL（数千ページ相当）の処理内容をif文の条件分岐で何百何千行と記述した場合でも、ブラウザ上のソースでは、その該当するページは2行程度しか表示されません。 ただ、これはソース上2行程度なだけで、ファイルやページの重さ、実際に体感するユーザーや検索エンジンにとってどうなのか、下記のことを知りたいです。 主に知りたいことは、 ■ユーザーがそのページを見る際、体感速度で大きな違いはあるのか。 ■googleなどの検索エンジンより、このサイト（ページ）は重いページと判断されるのか。 です。 処理後のソースが2行程度ならば重いサイト（ページ）にはならないだろうと安易な考えなのですが、実際にどうか分からず教えてほしいです。 すみませんが、ご教授いただければ幸いです。
《環境》 Windows 7 SP1 XAMPP 5.6.3.0 Apache 2.4.10 MySQL 5.6.2 PHP 5.6.3 phpAdmin 4.2.11 稼働環境がWindowsかどうかを確認するために if (preg_match("/Windows/", $_ENV["OS"])) というif文を入れると、実行時に Notice: Undefined index: OS in C:\localhost\form.php on line nn という警告が出ます。処理は実行しているようですが気になります。 何が悪いのでしょうか? 環境でメッセージの表示をOFFにしてしまえば消えるとは思いますが、警告を残しておくのは気色悪いので消したいと思います。 よろしくお願いします
今、PHPの初心者で勉強中です。 フレーム内のページを単独で表示できないようにする方法を知りたいです。 a.phpからb.php（b.phpでは左半分にc.php、右半分にd.phpを表示）にリンクしています。 ここでc.phpやd.phpをブラウザの「別タブ（ウィンドウ）で開く」で単独で開く事ができないようにしたいのですが、 Javascript以外の方法で何か無いでしょうか？ こういった形でのフレームの使用がよくない、と言うのは承知ですが、どうぞよろしくお願いします。
PHPを使用して、他のサイトからRSS情報を取得し、 DBにデータを格納する、というような処理をするバッチを作成しています。 SimplePieという無料のライブラリを使用し、 下記のようなファンクションを作成しました。 /* ================= * * RSS情報を最大５件取得 * =================*/ function get_rss_info($feed_url) { // 戻り値 $rss_list = array(); // RSSデータを取得 $feed = new SimplePie(); $feed -> enable_cache(false); $feed -> set_feed_url($feed_url); $feed -> init(); $feed->handle_content_type(); // 過去記事を最大５記事まで取得 $feedItems = $feed -> get_items(0, 5); foreach($feedItems as $item) { // ※自作クラスです $rss = new RSS(); $rss->rss_id = $item -> get_id(); $rss->rss_title = $item -> get_title(); $rss->published_date = $item -> get_date('Y/m/d H:i:s'); $rss->rss_url = $item -> get_permalink(); $rss->rss_text = $item -> get_description(); array_push($rss_list, $rss); } return $rss_list; } 上記のファンクションで、アメブロなどのRSS情報は取得できますし、 一部WordPressサイトのRSS情報も問題なく取得することが出来ました。 しかし、一部のWordPressサイトでは、上記のファンクションを通しても 1つもRSS情報を取得することが出来ず、 配列も空のままで返却されてしまっております。 Feedlyなどの外部サービスで情報が取得できているので、 私のプログラムが悪いのだとは思っているのですが・・・ 自分なりに調査をしてみたのですが、 全く糸口を掴むことができませんでした。 お知恵を貸していただければと思います。 どうぞよろしくお願いいたします。
お世話になります。 現在、PHPでカートを使ってメールの送信をしたく、下記サイトのサンプルを参考に作成しています。 http://www.atmarkit.co.jp/ait/articles/0703/09/news126_3.html ですが、このサンプルで「名前」と「住所」を日本語で入力しても、日本語名が表示されません。 半角英数字だと表示されます。 出来れば文字のエンコードはUTF-8ではなく、EUC-JPで作成したいのですが、可能でしょうか？ ※カートの前に別内容をセッションで受け渡しして、最終的にカートの注文内容と一緒にメール送信したいです。別内容は受け渡し出来ているので、後はカートの内容を日本語で送信出来れば良いです。 お手数ですが、ご教授お願いします。
Twitter APIに関して、質問させて頂きます。 現在、phpでphirehoseのライブラリを使い、Twitter APIを利用しています。 https://github.com/fennb/phirehose Twitter APIのPublic API、POST statuses/filterで、Parameters trackでフィルタリングする際に、「犬」に関するTweetをフィルタしたいと思います。 その場合、setTrackに「犬」を設定しても、「犬」の前後にスペースやハッシュタグがあるものはフィルタにかかりますが、柴犬、土佐犬といった文字列のあるTweetはひっかかりません。 犬、柴犬、土佐犬、犬山、(*.)犬(*.)といったフレーズを含むTweetをフィルタする方法はないのでしょうか？ こちらにリファレンスがあるのですが、そういった手段に関する記述が見当たりません。（英語が苦手なため、自分が分からないだけかも知れませんが…） https://dev.twitter.com/streaming/overview/request-parameters#track ワイルドカード、正規表現のようなもの使えれば良いのですが…。 詳しいかたいらっしゃいましたら、ご教示頂ければ幸いです。 サンプルコードなど、御提示頂けましたら幸いです。 何卒、宜しくお願い申し上げます。
PDOでクエリを実行する際にIN句で該当するカラムを複数取得したいのですがうまく抽出できません。 下記のSQL文で抽出するとid = '104' の1件のみ抽出できて id = '101' と '103' は抽出できないのです。 $param = array(101, 103, 104); $place_holders = implode(',', array_fill(0, count($param), '?')); $wbl = $pdo->prepare("SELECT id FROM tables WHERE id IN ($place_holders)"); $wbl->execute($data); $ecs = $wbl->fetchAll(); foreach ($ecs as $val) { $result = $val; } print_r($result); 試しにphpMyAdmin上で直接クエリを実行すると抽出できるのですが PDOで残りの101と103を取得するにはどうしたら良いでしょうか？ 何か良い方法はありますでしょうか？ どうぞ宜しくお願いします。m(__)m
自分が作成したwordpressサイトのrssを取得し、同ドメイン内の静的HPに組み込む際の仕組みがどうなっているか教えてください。 よろしくお願いします。
調べても分からなかったので質問させてください。 現在アクセスログ集計ツールを作成中です。 決められたurlのページにアクセスがあった時にDB登録し、カウントする単純な仕組みで、ツールの方では日にちを任意で選択してもらいエクセル出力する仕組みです。 質問させていただきたいのが、カウントをするページが例えば4ページあり、そのページ名の接頭を取って「date」「index」「login」「stock」「option」というキーの連想配列を作っています。 array(5) { ["date"]=> array(3) { [0]=> string(10) "2015/02/01" [1]=> string(10) "2015/02/02" [2]=> string(5) "total" } ["Index"]=> array(3) { [0]=> int(2) [1]=> int(4) [2]=> int(6) } ["Login"]=> array(3) { [0]=> int(6) [1]=> int(6) [2]=> int(12) } ["Stock"]=> array(3) { [0]=> int(3) [1]=> int(4) [2]=> int(7) } ["option"]=> array(3) { [0]=> int(2) [1]=> int(1) [2]=> int(3) } } このキーである「index」「login」「stock」「option」の順番が取得するデータによって入れ替わってしまいます。 理想的な順番としては「login」「index」「option」「stock」の順番にソートしたいのですが、調べても分かりませんでした。sort関数はアルファベット順とか、数値順とか決まったルールのソートができるようですが、こちらで意図的に順番を操作する事はできるのでしょうか？ もしあれば教えていただきたいです、何卒よろしくお願いいたします。
PHPにてCSVファイル出力後、完了メッセージを表示することは可能でしょうか？ htmlからのsubmitによりデータベースより取得したデータをCSVファイルのダウンロードをPHPにて行っています。 ファイル保存ダイアログを表示させ、なおかつhtml上のメッセージエリアに「○○件出力しました。」等のメッセージを表示させたいのですが、やり方がわかりません。 それぞれの処理自体は別々に行えば可能でした。 ・PHPのファイルダウンロード ----------------------------------------------------- header("Content-Type: application/csv"); header("Content-Disposition: attachment; filename=" . $fileName); header("Content-Length:".filesize($fileNameTmp)); readfile($fileNameTmp); ----------------------------------------------------- ・メッセージ表示 iframeを作成しformのtargetをそのiframeにし PHPコードの下に下記コードを入れる ----------------------------------------------------- <html><head> <script type="text/javascript"> <!-- window.onload=function(){ if(window.parent) { window.parent.showMsg('<?php echo $GLOBALS["strMsg"] ?>'); } }; //--> </script> </head><body></body></html> ----------------------------------------------------- また、構成上画面遷移→ダウンロードは使えません。 PHP：5.6.3 jQuery：1.11.1 IE8の動作も可能にしたいため、HTML5はなしで。 ご教授よろしくお願いいたします。
現状、以下のディレクトリ構造です。 /hoge/aaa/index.html（★） /hoge/bbb/index.html（★） /hoge/ccc/index.html（★） /hoge/test.php ★印のhtml内部でそれぞれ jQuery("#target").load("/hoge/date.php"); と書いてphpを読み込み、 出力結果をそれぞれのhtmlにある#target内表示させようとしています。 一方、test.php内部ではURLに /aaa/があったら、 /bbb/があったら、 /ccc/があったら、 「■■■■■」するという処理を書いて、応じた値を表示しようと考えています。 ここで問題が発生するのですが、 test.php内部で、 $pageurl = $_SERVER["REQUEST_URI"]; こう記述して値を取っても、phpが置かれている場所である 「/hoge/test.php」 を取得するだけで、htmlが置かれているパスは取得できませんでした。 .loadした場合のphpでは、 読み込み先のhtmlのURLなどをphp側で取得させる事はできないのでしょうか。 うまく説明できていないかもしれませんが、 ご助言いただけますとありがたいです。 よろしくお願いいたします。
いつも、お世話になっております。 現在、携帯からメールを送り、その受信したメールをPHPで処理(分解)し、 HTML部分だけ取り出そうと考えていますが、うまくいきません。 分解にはフリープログラムの「http://hal456.net/qdmail/」の「qdmail.php」を使用させていただいています。 その中の「bodyAutoSelect」を指定した場合、テキスト部分の文章は引き出してこれます。 しかし、その他の関数を使うと空の状態で返ってきます。 HTML表記の状態で引き出したいのですが、どのようにしたらよろしいでしょうか？
phpあまり疎いのですが、質問させてください。 配列 $hairetu は20個の配列の値を持っています。 echo $hairetu[19]; echo $hairetu[13]; とかやると、それぞれ値が取れます。 この20個の中から5つをロードの度にランダムに抽出して表示したいです。 foreach(range(0,4) as $i){ echo $hairetu[$i]; } これだと毎回同じで意図したものではないです。 そもそもこのアプローチから違うのかもしれませんが、 ご教示いただければ有難いです。
お世話になります。 標題の件について、以下のとおり説明します。 (1)1ページ目：入力フォームで入力した情報をセッションに保持 （主にプルダウンメニューの情報とテキスト） submitボタンで次画面へ ↓ (2)2ページ目：サムネイル写真をクリックした情報を保持+インラインフレームで拡大写真表示 （クリックした情報をプルダウンメニューに表示してセッションへ保持） submitボタンで次画面へ ↓ (3)3ページ目：サムネイル写真をクリックした情報を保持+インラインフレームで拡大写真表示 （クリックした情報をプルダウンメニューに表示してセッションへ保持） submitボタンで次画面へ ↓ (4)4ページ目：上記内容の確認画面 submitボタンで次画面へ ↓ (5)送信 現状、上記の流れでセッション情報を保持しつつメールでの送信が確認出来ています。 ですが、ページ遷移で確認画面から前画面へ戻って、例えば2ページ目の写真を変更して、submitで次画面へ遷移すると、3ページ目の情報がなくなり新たに写真を選択する必要になってしまいます。 なので、ページを前後遷移しても情報が保持された状態にするには、どうすれば良いでしょうか？ データベースを使わないと出来ないことでしょうか？ データベースに関しても勉強しておりますが、セッション情報をDBへ登録して、その後ページを遷移した場合に、データベースから呼び出すようなイメージなのでしょうが、それにはどうすれば良いのかが不明です。 お手数ですが、ご教授の程、よろしくお願いします。
お世話になります。 サムネイル画像を下記で表示させ、 <button type="button" onclick="window.open('1.html','main');" name="写真1" value="<?php echo $file1; ?>"><img src="1S.jpg" width="150" height="110"></button> 上記の画像クリックすると拡大表示するようにしています。 その際、画像のname値「写真1」を保持したまま、次ページへ受け渡して取得したいのですが、 どうすれば良いでしょうか？ 下記はサムネイル画像のページと次ページどちらにも入れております。 <?php // セッションスタート session_start(); $file1 = isset($_SESSION['file1']) ? $_SESSION['file1'] : ''; $_SESSION[ 'file1' ] = $file1; ?> 表示箇所には下記を入れています。 <?php echo $file1; ?> どなたかご教授をお願いします。
PHP MySQLからデータを取得したいのですが、以下のエラーが出てしまい原因が分かりません。 詳しい方お願い致します。 <b>Warning</b>: json_encode() expects exactly 1 parameter, 2 given in <b>/home/users/2/***.**-********/web/****************/php/seupPharmacyData.php</b> on line <b>21</b><br /> エラーが出るコードは以下になります。 <?php include "db.php"; $sql = "SELECT * FROM user_data"; $query = mysql_query($sql, $db) or die("クエリの送信に失敗しました。<br />SQL:".$sql); $result= array(); while ($row = mysql_fetch_object($query)) { $result[] = array( 'name1' => $row->name1, 'name2' => $row->name2, 'name3' => $row->name3, 'id' => $row->id, ); } //jsonとして出力 header('Content-type:application/json; charset=UTF-8'); echo json_encode($result,JSON_UNESCAPED_UNICODE); ?>
突然の質問、失礼いたします。 私は特定のキーワードをＲＴするＢＯＴを作ろうと１か月ほどネットで方法を調べているプログラミング初心者です。（ネットの質問の他、ＧＯＯＧＬＥ先生など一通り調べました） 現在twitteroath、OAth、retweet用ＰＨＰを未来サーバーにアップして作成を行おうとしているのですがエラーが出てしまいます。 改善点、誤りについて助言をいただけないでしょうか、よろしくお願いいたします。 〇retweet.php <?php require_once("twitteroauth.php"); $consumerKey = ""; $consumerSecret = ""; $accessToken = ""; $accessTokenSecret = ""; $twObj=new TwitterOAuth($consumerKey,$consumerSecret,$accessToken,$accessTokenSecret); //Twitterで検索するワード $search_word=urlencode('+); //#検索ワード1か検索ワード2 +でつなぐとand検索、+-でつなぐと検索除外 //API実行データ取得 //現時点で100ツイートまでしか取得不可 $vRequest=$twObj->OAuthRequest('https://api.twitter.com/1.1/search/tweets.json','GET', array('q'=>$search_word,'count'=>'3','include_entities'=>'true'));//API 1.1で変更 //Jsonデータをオブジェクトに変更 $oObj=json_decode($vRequest); //オブジェクトを展開 $oObj=$oObj->{'statuses'};//API 1.1でresultsからstatusesに変更 for($i_tweet=0; $i_tweet < sizeof($oObj); $i_tweet++){ $id_str=(string)$oObj[$i_tweet]->{'id_str'};//つぶやきのID echo $twObj->OAuthRequest( 'https://api.twitter.com/1.1/statuses/retweet/'$id_str.'.json','POST',''); ?> 〇Oath $timestamp ); if ($found) { throw new OAuthException("Nonce already used: $nonce"); } } } class OAuthDataStore { function lookup_consumer($consumer_key) { // implement me } function lookup_token($consumer, $token_type, $token) { // implement me } function lookup_nonce($consumer, $token, $nonce, $timestamp) { // implement me } function new_request_token($consumer, $callback = null) { // return a new token attached to this consumer } function new_access_token($token, $consumer, $verifier = null) { // return a new access token attached to this consumer // for the user associated with this token if the request token // is authorized // should also invalidate the request token } } class OAuthUtil { public static function urlencode_rfc3986($input) { if (is_array($input)) { return array_map(array('OAuthUtil', 'urlencode_rfc3986'), $input); } else if (is_scalar($input)) { return str_replace( '+', ' ', str_replace('%7E', '~', rawurlencode($input)) ); } else { return ''; } } // This decode function isn't taking into consideration the above // modifications to the encoding process. However, this method doesn't // seem to be used anywhere so leaving it as is. public static function urldecode_rfc3986($string) { return urldecode($string); } // Utility function for turning the Authorization: header into // parameters, has to do some unescaping // Can filter out any non-oauth parameters if needed (default behaviour) public static function split_header($header, $only_allow_oauth_parameters = true) { $pattern = '/(([-_a-z]*)=("([^"]*)"|([^,]*)),?)/'; $offset = 0; $params = array(); while (preg_match($pattern, $header, $matches, PREG_OFFSET_CAPTURE, $offset) > 0) { $match = $matches[0]; $header_name = $matches[2][0]; $header_content = (isset($matches[5])) ? $matches[5][0] : $matches[4][0]; if (preg_match('/^oauth_/', $header_name) || !$only_allow_oauth_parameters) { $params[$header_name] = OAuthUtil::urldecode_rfc3986($header_content); } $offset = $match[1] + strlen($match[0]); } if (isset($params['realm'])) { unset($params['realm']); } return $params; } // helper to try to sort out headers for people who aren't running apache public static function get_headers() { if (function_exists('apache_request_headers')) { // we need this to get the actual Authorization: header // because apache tends to tell us it doesn't exist $headers = apache_request_headers(); // sanitize the output of apache_request_headers because // we always want the keys to be Cased-Like-This and arh() // returns the headers in the same case as they are in the // request $out = array();
php 初心者です sendmailでメール配信文を作っています。 配信はできたのですが、発信者の「発信しました」通知メールに 配信リストを掲載して送信したいと思っています。 そこでmb_send_mailの$bodyの中にwhile文を書こうと思って下記のように書いてみたのですが 当然ながら動きません。 下記のように$body = <<<EOM　　EOM;の中にwhile文を書けるのでしょうか？ 書けるとしたらどのように書いたら宜しいのでしょうか？ またはどのようにしたらwhile文で取得する配信リストをメールの中に入れることができますか？ ご教授よろしくお願い致します。 $body = <<<EOM while ($i = mysql_fetch_array( $result)) { echo $i['name']; ;} EOM;
アップロードされたファイルをエクセルに貼り付けを行い、出力するプログラムの 作成に関しまして、行き詰っております。 皆様のお知恵をお貸しください。 PHPExcelを使って画像をエクセルに貼り付けを行っておりますが、 下記コードでは、PDFを貼り付けようとすると「？」という画像が 貼りついた状態で出力され、PDFが貼りついてくれません。 ///画像用のオプジェクト作成 $objDrawing = new PHPExcel_Worksheet_Drawing(); $objDrawing->setPath($img);///貼り付ける画像のパスを指定 $objDrawing->setResizeProportional(false);////比率保持は無効 $objDrawing->setWidth(310);////画像の幅を指定 $objDrawing->setHeight(210);////画像の高さを指定 ///画像のプロパティを見たときに表示される情報を設定 $objDrawing->setCoordinates($image_pin);///位置 $objDrawing->setOffsetX(6);////横方向へ何ピクセルずらすかを指定 $objDrawing->setOffsetY(3);////横方向へ何ピクセルずらすかを指定 $objDrawing->getShadow()->setVisible(true);////ドロップシャドウをつけるかどうか。 ///PHPExcelオブジェクトに張り込み $objDrawing->setWorksheet($book->getActiveSheet()); 実現したいことは、画像同様に指定の位置に指定のサイズでPDFファイルの貼り付けを行うことです。 できれば、画像変換などの処理を行わずに行う方法をお聞きしたく 質問をさせていただきました。
PHPの勉強中で、参考書を見ながらショッピングサイトを作成しています。 カテゴリ別に表示したいと思い、データベースに商品の登録をし、 WEBページでカテゴリでの絞込みをしたいのですがうまくいきません。 以下のような、ラジオボタ形式では上手く動きました。 <form method="post" action="hoge.php" enctype="multipart/form-data"> 商品カテゴリーを選択してください。<br> <label><input type="radio" name="category" value="0">0</label> <label><input type="radio" name="category" value="1">1</label> <label><input type="radio" name="category" value="2">2</label> <input type="submit" value="確認"> </form> ラジオボタンでも、確認ボタンを押さなくても、 テキストをクリックすれば受け渡し先のページに飛ぶ形式ならいいのですが。。。 以下のテキストリンクの場合だと、一番下の値しか飛んでくれず、困っています。 <form name="category" action="hoge.php" method="post"> <input type="hidden" name="category" value="1"> <input type="hidden" name="category" value="2"> <a href="javascript:void(0)" onclick="document.category.value='1'; document.category.submit(); return false;">1</a> <a href="javascript:void(0)" onclick="document.category.value='2'; document.category.submit(); return false;">2</a> </form> どなたか詳しい方、ご回答をお願いします。
phpは<html>~</html>の中に記載するものなのでしょうか？ それともphpプログラムの中にhtmlを記載するのでしょうか？ ラジオボタンを10個表示するプログラムを書いたのですが、 実際にブラウザに表示されたものは以下の様な状態になってしまいました。 ------------------------------------------------------------- 該当する年齢を選んでください。 ?php> $i=1; while($i==10){ print "$i "; $i++; } ?> 送信 --------------------------------------------------------------- ソースコード radio.php <html> <head> <title>年齢確認</title> </head> <body> 該当する年齢を選んでください。 <br> <hr> <form method="post" action="radio_uke.php"> ?php> $i=1; while($i==10){ print "<input type='radio' name='r' value'$i'>$i "; $i++; } ?> <input type="submit" value="送信"> </form> </body> </html>
サッカーの試合データをテーブルに格納、それをサイトの管理画面から修正する為のプログラムで詳しい方にお聞きしたいことがあります。 テーブルの更新は下記サイトを参考にしました。 http://ponk.jp/php/basic/php_mysql#page_index4 「udon_update.php」の箇所で頓挫しています。 流れとしましては試合ID(game_id)を受け取り、「members」テーブルから交代ID（change_id）があるものだけを抽出。 その交代IDを元に「change」テーブルから交代選手のIDを取得、「player」テーブルから選手名を取得してテキストフィールドに表示する。 主なテーブルは下記の通りです。 □player_table（所属選手のデータを格納） player_id｜last_name｜first_name 00818｜田中｜太郎 00815｜山田｜健太 00812｜佐藤｜真一 □membersテーブル(スタメン選手・控え選手・交代情報などを格納) game_id｜player_id｜entry｜change_id｜ 001115｜00818｜start｜0000001 001115｜00815｜start｜null 001115｜00812｜sub｜0000001 □changeテーブル（交代選手を格納） change_id｜player_in_id ｜player_out_id ｜change_time ｜change_time_at 0000001｜00818｜00812｜65｜3 下記が現在のコードです。 -------------------------------------------------------------------------- <?php //player_idを受け取りplayerテーブルから選手名を照会 function player_inquiry($player_id){ global $pdo; global $last_name; global $first_name; $st = $pdo->query("SELECT * FROM player WHERE player_id=$player_id"); while ($row = $st->fetch()) { $last_name = htmlspecialchars($row['last_name']); $first_name = htmlspecialchars($row['first_name']); } return; } //メンバーテーブル(members)から交代データ取得 $st = $pdo->prepare("SELECT * FROM members WHERE change_id NOT LIKE NULL AND game_id=$game_id"); $st->execute(array($game_id)); while ($row = $st->fetch()) { $change_id = htmlspecialchars($row['change_id']); //change_idを元に交代テーブル(change)からデータ取得 $st = $pdo->prepare("SELECT * FROM change WHERE change_id=$change_id"); $st->execute(array($change_id)); $row = $st->fetch(); $change_time = htmlspecialchars($row['change_time']); $change_time_at = htmlspecialchars($row['change_time_at']); $change_reason = htmlspecialchars($row['change_reason']); print $change_time; player_inquiry($row['player_in']); ?> <input type="text" style="width:25px;ime-mode:inactive;" maxlength="2" name="change_time">分／AT<input type="text" style="width:25px;ime-mode:inactive;" maxlength="2" name="change_time">分<br> ＯＵＴ<input type="text" style="width:120px;" name="last_name" value="<?php echo $last_name ?>"> <input type="text" style="width:120px;" name="first_name" value="<?php echo $first_name ?>"><br> <?php player_inquiry($row['player_out']); ?> ＩＮ<input type="text" style="width:120px;" name="last_name" value="<?php echo $last_name ?>"> <input type="text" style="width:120px;" name="first_name" value="<?php echo $first_name ?>"> <?php } ?> -------------------------------------------------------------------------- このコードで実行しても何も取得されません。どのように変更すればデータが取得できるようになるでしょうか？ ご存知の方いらっしゃいましたらご教示ください。 よろしくお願いします。
POST元のページから <input type="checkbox" name="hoge[23]" value="1"> <input type="checkbox" name="hoge[31]" value="0"> <input type="checkbox" name="hoge[33]" value="1"> ・・・ のような形でデータが渡されます。 要素一つに付き、ONなのか、OFFなのか、表示されていないのかの判別が必要なため、このような形になっています。 受けるPHP側で、hogeの配列番号と一致したものがあればそれに対する処理を行う必要があります。 $buff=array(20,30,31); となっているとして、 $_POST["hoge"]の配列の値と$buff内の数字が一致したら～ （上記例だと31が一致） の書き方はどう書けばいいでしょうか。 よろしくお願いします。
テキストファイルの中身をまとめて削除したいのですが 例えばa01.txtからz01.txtまである場合 fopen'w'でまとめて削除する場合、どう記述するのでしょうか? ご教示お願い致します。
PHPでラジオボタンの値を別のPHPファイルに渡すのはわかりましたが、 テキストファイルに保存するのはできないのでしょうか? 出来るのでしたらどう記述するのでしょうか? ご教示お願いいたします。
下記サイトを参考にサイト上からデータベース(MySQL)のテーブルにレコードを追加できるようにしました。 http://ponk.jp/php/basic/php_mysql#page_index3 レコードの追加自体はできたのですが、テキストフィールドに何も記述されていない場合にNULLとして追加したいと思っているのですが、その方法が分かりません。 コードは次のようにしました。 $number= isset($_POST["number"]) ? $_POST["number"] : 'NULL'; $st = $pdo->prepare("INSERT INTO player(number) VALUES(?)"); $st->execute(array($number)); このコードで追加をすると、NULLではなく空白が格納されてしまいます。 どこを修正すればNULLとして格納できるようになるでしょうか？ ご存知の方いらっしゃいましたらご教示ください。 よろしくお願いします。
$char=1; $char1=2; $char2=3; のように定義していくと $char1=3 と間違って代入した場合、2であるはずの中身が3になってしまいます。 このような重複による代入を防ぐにはどのような方法がありますでしょうか。 宜しくお願いします。
array(1) { [0]=> array(3) { ["xxx"]=> string(5) "xxxxx" ["xxxxx"]=> string(3) "xxx" ["xxx"]=> string(4) "xxxx" } } 上記の配列の [0]=>の部分を消去したいのですが、どのようにすればよろしいでしょうか？ 宜しくお願いします。
処理的には簡単なPHPプログラム（数秒で終わるようなもの）を30秒ごとに処理させたいと考えています。 システム的には簡単で、負荷もかからないものなので何とか安価なレンタルサーバーで設定できないかと探しています。 cronによる設定でも以下のような設定にすれば可能であるということも教えて頂いているのですが、このような設定ができる(専用・VPSサーバーでないもの)レンタルサーバー会社が見つかりません。どなたかご存知ないでしょうか？ * * * * * コマンド & sleep 30 ; コマンド cron以外にwatchという命令も使えると可能らしいのですが、このような設定ができる(専用・VPSサーバーでないもの)レンタルサーバー会社はあるでしょうか？
下記のPHPスクリプトを実行して、アカウント（ID:admin,パス:pass）を入力してもHTTP認証ダイアログが消えません。ダイアログが消えて、Hello!　と表示させたいのですが、どこが間違っているのか、教えていただきたいです。 <?php $user="admin"; $pass="pass"; if (!isset($_SERVER['PHP_AUTH_USER'])) {//初回認証時（PHP_AUTH_USER：HTTP 認証しているときにそのユーザー名がセットされます。ダイアログに入力した値） header("WWW-Authenticate: Basic realm=\"PHP Web Storage\""); header("HTTP/1.0 401 Unauthorized"); echo "Please input account info!\n"; exit; }else { $flg=false; while(isset($user)){ if($_SERVER['PHP_AUTH_USER']==$user && $_SERVER['PHP_AUTH_PW']==$pass){ $flg=true; break; } } if(!$flg){echo"Please input valid account!\n";exit;}//停止 else{echo'Hello!';exit;} } ?>
C#で以下のロジックがあるのですが、 using System.Text; using System.Security.Cryptography; private static string getHash(string data, string salt, int stretchingcount, Encoding encode) {     int m = salt.Length / 2;     string tmp = salt.Substring(0, m) + data + salt.Substring(m);     byte[] buf = encode.GetBytes(tmp);     SHA256CryptoServiceProvider algorithm = new SHA256CryptoServiceProvider();     for (int i = 0; i < stretchingcount; ++i)     {         buf = algorithm.ComputeHash(buf);     }     return BitConverter.ToString(buf).Replace("-", string.Empty); } こちらのソースをPHPで同じ結果になるように実装したいのですが、 同じ結果にならず、困っています。 PHP側のソースは以下の通りです。 public static function funcPrivacyCheck($data,$salt,$stretchingcount){ $m = strlen($salt) / 2; $tmp = substr($salt,0,$m).$id.substr($salt,$m); $tmp = base64_encode(utf8_encode($tmp)); $hash = ''; for ($i = 0; $i < $stretchingcount; $i++) { if($hash <> ''){ $hash = hash_hmac('sha256' ,$hash, false); }else{ $hash = hash_hmac('sha256' ,$tmp, false); } } return $hash; } エンコードは、UTF-8を指定することが前提です。 ご教授頂きますようよろしくお願いいたします。
phpのgoutteを使用して、下記ソースを記述しました。 スクレイピング対象のHTTPアドレスの記述に間違いはありません。 ※アドレスはダミーです。 ただ、elementオブジェクトから、 nodeValueの値を引っ張れないのです。 ■phpソース <?php require_once 'goutte.phar'; use Goutte\Client; $crawler = $client->request('GET', 'http://www.test.xml'); $crawler->filter('item')->each(function($element) { echo $element->nodeValue; }); ?> ■スクレイピング先ソース <rss version="2.0"> <channel> <item> <title>タイトル1</title> <category>本1</category> <link>http://www.test.co.jp/book/book1/</link> <description>本1について詳細を説明します。</description> <pubDate>2015-01-09</pubDate> </item> <item> ：以降繰り返し ： </iem> </channel> </rss> ■エラー内容 PHP Notice: Undefined property: Symfony\\Component\\DomCrawler\\Crawler::$nodeValue in /php配置ディレクトリ/Test.php ■$erementのvar_dump出力結果 object(Symfony\Component\DomCrawler\Crawler)#908 (4) { ["storage":"SplObjectStorage":private]=> array(1) { ["000000005a6bd4e800000000d42c592e"]=> array(2) { ["obj"]=> object(DOMElement)#19 (18) { ["tagName"]=> string(4) "item" ["schemaTypeInfo"]=> NULL ["nodeName"]=> string(4) "item" ["nodeValue"]=> string(286) " タイトル1 本1 http://www.test.co.jp/book/book1/ 本1について詳細を説明します。 2015-01-09 " } ["inf"]=> NULL } } nodeValueで値を拾えない原因がわからないのです。 var_dumpで確認したところ、nodeValueに値が存在しているように見えていることは確認できています。(Stringの数値286はダミーです) requireが足りないのでしょうか。 それともアクセスの方法が間違っているのでしょうか。 ご教示よろしくお願いいたします。
phpに関して質問させて頂きます。 最近、phpの勉強を始め、プレーンなテキストを階層を持った配列にしようとして、つまずいてしまいました。 まず、以下のように先頭にタブを打って見やすく階層化した適当な文字列の変数を作っておき、 $text_hierarchy = ' 階層0-0 　階層0-0-1 　階層0-0-2 階層0-1 階層0-2 　階層0-2-0 　階層0-2-1 　　階層0-2-1-0 　　階層0-2-1-1 　　　　階層0-2-1-1-0 階層0-3 '; これを1行毎の配列にして $text_hierarchy_array = explode("\n", trim($text_hierarchy, "\n")); 順番に処理して $text_tree_array = array(); foreach($text_hierarchy_array as $k => $v){ 　$text_tree_array[$k] = ….. } 最終的に以下のような配列を作ろうとしているのですが、うまくゆきません。 目的はタブなどで見た感じ階層っぽく打たれたテキストを引数に渡すと、親子の配列を返す関数を作る事です。（何階層にでも対応する） array(4)　{ 　　[0]=> 　　array(2)　{ 　　　　[0]=> 　　　　string(9)　"階層0-0" 　　　　[1]=> 　　　　array(2)　{ 　　　　　　[0]=> 　　　　　　array(1)　{ 　　　　　　　　[0]=> 　　　　　　　　string(11)　"階層0-0-0" 　　　　　　} 　　　　　　[1]=> 　　　　　　array(1)　{ 　　　　　　　　[0]=> 　　　　　　　　string(11)　"階層0-0-1" 　　　　　　} 　　　　} 　　} 　　[1]=> 　　array(1)　{ 　　　　[0]=> 　　　　string(9)　"階層0-1" 　　} 　　[2]=> 　　array(2)　{ 　　　　[0]=> 　　　　string(9)　"階層0-2" 　　　　[1]=> 　　　　array(2)　{ 　　　　　　[0]=> 　　　　　　array(1)　{ 　　　　　　　　[0]=> 　　　　　　　　string(11)　"階層0-2-0" 　　　　　　} 　　　　　　[1]=> 　　　　　　array(2)　{ 　　　　　　　　[0]=> 　　　　　　　　string(11)　"階層0-2-1" 　　　　　　　　[1]=> 　　　　　　　　array(2)　{ 　　　　　　　　　　[0]=> 　　　　　　　　　　array(1)　{ 　　　　　　　　　　　　[0]=> 　　　　　　　　　　　　string(13)　"階層0-2-1-0" 　　　　　　　　　　} 　　　　　　　　　　[1]=> 　　　　　　　　　　array(2)　{ 　　　　　　　　　　　　[0]=> 　　　　　　　　　　　　string(13)　"階層0-2-1-1" 　　　　　　　　　　　　[1]=> 　　　　　　　　　　　　array(1)　{ 　　　　　　　　　　　　　　[0]=> 　　　　　　　　　　　　　　string(15)　"階層0-2-1-1-0" 　　　　　　　　　　　　} 　　　　　　　　　　} 　　　　　　　　} 　　　　　　} 　　　　} 　　} 　　[3]=> 　　array(1)　{ 　　　　[0]=> 　　　　string(9)　"階層0-3" 　　} } お詳しい方、いらっしゃいましたら、是非ご教示頂きたく存じます。 コード例でも、考え方だけでも結構です。 何卒、宜しくお願い申し上げます。
PHPで 文字列が、 SETING TIME: 00:00:32.421 と有った場合、 00:00:32.421 部分だけを取り出したい場合はどのようにすれば良いのでしょうか？ よろしくおねがいします。
開設しているサイトで「レッツPHP」の－昨日今日カウンタ－を使用しています。 http://php.s3.to/counter/ PHPのバージョンを5.2から5.4に変更したらカウンターが表示されなくなりました。空白の状態です。 バージョンアップすると使えなくなる機能があるというのは聞いたことがあるのですが、どれの事かよく分からず。 これはどこを修正すれば正常に表示されるようになるでしょうか？ ご存知の方いらっしゃいましたらご教示ください。 よろしくお願いします。
すいません。phpを勉強中なのですが、以下は可能でしょうか。 ある変数$aaaがあったとします。 $aaaはWhile文の中にあるのですが、数字がランダムでどんどん入ってきます。 （上書きされていきます） それで$aaaに一度でも格納された数字を全て配列に入れたいのですが、どう構文を作ったらよいでしょうか。（while文の外で一度でも入った数字を全て表示したい） 例 3.5.2.18.22.9.・・・ 同じ数字は入りません。 何桁まで続くのか分かりません。 詳しい方いましたらよろしくお願いします。
PEAR1.9.5を利用しています。安価なレンタルサーバでシェルなどは使えないので、 go-pear.phpを使っております。 文字列の差分を表示したいのでxdiffをPEARでインストールしようと思ったのですが、 以下のエラーで失敗してしまいます。 ERROR: failed to mkdir /usr/share/tests/pecl/xdiff/tests このパスを/home/user/public_html/以下などに設定することはできますでしょうか？ 現状はPEAR自体は/home/user/public_html/PEARにおいており、その他のインストール済みモジュールでは可動をしております。 良い方法をご存じの方がいらっしゃいましたらアドバイスをお願い致します。
今はサーバーでPHP5.2を使用しているのですが、PHP5.4にバージョンアップしようと考えています。 しかし、いざサーバーの管理画面からPHP5.4にすると、サイトでページにアクセスする度に「次のファイルを開こうとしています」とダイアログが表示され閲覧できなくなってしまいました。 .htaccessを使用しhtmlファイルでphpを動かせるようにしています。これが関係している可能性があるとの書き込みを見ました。 現在、.htaccessには下記のように記述してあります。 「AddHandler php5.2-script .html .php AddType application/x-httpd-php .htm .html AddType application/x-httpd-cgi .htm .html AddType text/x-server-parsed-html .htm .html」 一番上のコードを下記のように変更してみましたが、結果は同じでした。 「AddHandler php5.4-script .html .php」 これはどのようにすれば「次のファイルを開こうとしています」のダイアログが表示されずPHP5.4が使用できるようになるでしょか？ ご存知の方いらっしゃいましたらご教示ください。 よろしくお願いします。
教えてください。 BBB.phpでこのように書いていたとします。 <?php session_cache_limiter('private, must-revalidate'); session_start(); ～いろいろ処理～ unset($_SESSION['pcode']); ～いろいろ処理～ ?> <?php include(dirname(__FILE__).'/../include/header.php'); ?> </body></html> header.phpでは $_SESSION['pcode']を表示しているのですが、 前のページ（たとえばAAA.php）で$_SESSION['pcode']に値を入れていた場合 BBB.phpを表示すると その値が表示されてしまいます。 直前に unset($_SESSION['pcode']); をしているのに その前の値が表示されます。 includeはどのタイミングでなされるのでしょうか？ また、 unset($_SESSION['pcode']); を有効にするにはどうすればいいのでしょうか？ よろしくお願いします。
PHPで処理中にメモリ不足になった場合、下記のようなエラーが起こるかと思います。 「Fatal error: Allowed memory size of xxxxx bytes exhausted (tried to allocate 16 bytes) in …」 ここで質問させて頂きたいのですが、 予めメモリ不足が起きる可能性がある処理を、tryなどで囲んでおき、実際にメモリ不足が起きた際は、その処理を飛ばし、それ以降の処理を実行させるといったことは可能でしょうか。 それとも、やはりメモリ不足でエラーが起きているので、その後の処理を実行させるといったことは出来ないのでしょうか。 もし何か方法などございましたら、ご教授頂けると助かります。 また、質問に不備な点などありましたら、ご指摘お願いします。 よろしくお願いします。
shift_jisのcgiを使っています。 shift_jisはもぉ古いとは承知しておりますが、UTF-8への変換が困難なため shift_jisのままで使おうと思っています。 今までは、shift_jisのcgiの結果を一旦　htmlに書きだしたページを、phpファイル内に iframe を使って埋め込みをしておりましたが、 <?php include("http://******.com/hps/*****.cgi?cmd=s&sc=***"); ?> などで、埋め込みが出来ないものかと思案中です。 埋め込み事態は出来ますが、やはり文字化けします。 何か良い方法はないでしょうか。 また、shift_jisの今後は何年後かに使えなくなるとかありますでしょうか。 どうぞよろしくお願いします。
phpにてメールフォームを使用してます、 最近スパムメールが増えて来たので対処方法を考えました。 お問い合わせの電話番号が現在半角のみ対応してますが、 これを全角の数字のみ通る様にしたいと思います。 現在使用しているのは下記の通りです、 if (!$phone){error("電話番号を入力して下さい");} if ($phone){ if (!preg_match("/^\d{2,5}-?\d{1,4}-?\d{3,4}$/",$phone)) {error("電話番号の入力が不正です"); } } この何処を修正すれば良いのでしょうか？ 自分なりに調べましたがお手上げでGive Up状態です。 ご存知の方が居られましたらお知恵をご教授頂ければ助かります。
【flashmail.as】 LV1 = new LoadVars(); LV1.onLoad = function(success){ gotoAndStop(2); // 2フレーム目に移動 } var1 = ""; var2 = ""; var3 = ""; gotoAndStop(1); on(press){ if(var1==""){err=err+"名前が入力されていません！\n");} if(var2==""){err=err+"メールアドレスが入力されていません！\n");} if(var3==""){err=err+"メッセージが入力されていません！\n");} LV1.var1 = var1; LV1.var2 = var2; LV1.var3 = var3; if(err==""){ LV1.sendAndLoad("./flashmail.php", LV1, "POST"); } } 以上のようなactionscriptファイルと、FLAHファイル本体flashmail.flaの２フレーム目に 同様の文を、アクションとして、書いてます。もちろん、モーションファイルflashmail.swfも書き出して、FTPサーバーの同じディレクトリに置いています。 動きとしては、メールフォームに入力して、送信ボタンを押すと、ありがとうございました。 と表示され、そのあと、flashmail.phpのmb_send_mail()　でメール送信するはずなのですが、メールが到着しません。 flashmail.phpの内容も下記に表示します。 【flashmail.php】 <?php $subject = $_POST['var1']; $to = $_POST['var2']; $message = $_POST['var3']; var_dump($message); $from = "～"; $subject = mb_convert_encoding($subject, "utf-8", "auto"); // utf-8にエンコード $message= mb_convert_encoding($message, "utf-8", "auto"); mb_internal_encoding("UTF-8"); $res = mb_send_mail($to, $subject, $message, $from); header("Location: flashmail.html"); ?> どうすれば、メールが到着するようになるのか、ご指導お願いします。
phpに関して質問させて頂きます。 最近、phpの勉強を始め、再帰処理でつまづいております。 具体的には、以下の様な連想配列を作り $tourist_spot = array( 　'a' => array('日本','東京都','台東区','浅草','浅草寺',10), 　'b' => array('日本','東京都','千代田区','大手町','首塚',5), 　'c' => array('日本','千葉県','浦安市','舞浜','ディズニーランド',10), 　'd' => array('日本','東京都','台東区','浅草','浅草演芸ホール',7), ); この連想配列に、再帰処理をかけて以下ようなツリー状の連想配列を生成しようと試みていますが、どうしても上手く行きません。 基本は添字に値を格納し、末端のみ値を数値として格納する感じです。 array(1) { ["日本"]=> 　array(1) { 　　["東京都"]=> 　　array(1) { 　　　["台東区"]=> 　　　array(1) { 　　　　["浅草"]=> 　　　　array(2) { 　　　　　["浅草寺"]=> 　　　　　int(10) 　　　　　["浅草演芸ホール"]=> 　　　　　int(7) 　　　　} 　　　} 　　　["千代田区"]=> 　　　array(1) { 　　　　["大手町"]=> 　　　　array(1) { 　　　　　["首塚"]=> 　　　　　int(5) 　　　　} 　　　} 　　["千葉県"]=> 　　array(1) { 　　　["浦安市"]=> 　　　array(1) { 　　　　["舞浜"]=> 　　　　array(1) { 　　　　　["ディズニーランド"]=> 　　　　　int(10) 　　　　} 　　　} 　　} 　} } コード例などご提示頂けますと幸いですが、ややこしいようであれば、どのような考え方で望めば良いのかだけでもご教示を賜りたく存じます。 お詳しい方いらっしゃいましたら何卒、宜しくお願い申し上げます。
プログラムを勉強し始めた初心者です。 よろしくお願いします。 私の会社のメールアドレスは下記のようなものとなっていて、発信者名にカンマが含まれています。 Abe, Shinzo <A**@japan.jp> これは、会社が決めているものなので、変えることはできません。 私が発信するメールをPHPでプログラムを組んで、代わりに発信させたいと考えていますが、カンマの処理をどのようにしていいのかが分かりません。 mail("Ishi**@japan.jp", "日本を取り戻す", "この道しかない", "From: Abe, Shinzo <A**@japan.jp>") 上記のようにしてしまうと、「Abe」さんと「Shinzo <A**@japan.jp>」が別人と認識されてしまいます。 このような場合はどのように処理していいのかをご教授ください。 よろしくお願いします。
以下のページを参考に、AWS上にMindTouch の環境を構築しようとしています。 http://nagamoo.blogspot.jp/2012/12/awsamzonlinuxmindtouch.html 参考ページだと、CLIで一通り設定した後、ブラウザでアクセスして引き続き設定をするようなのですが、ブラウザでアクセスすると、index.phpのファイルの中身が表示されてしまいます。 調べてみたところ、以下のサイトを見つけ、AddType2行をhttpd.confに追加してhttpdサービスの再起動を行いましたが、ファイルの中身が表示されてしまいます。 http://www.ksknet.net/apache/php_1.html AddType application/x-httpd-php .php AddType application/x-httpd-php-source .phps その他設定が抜けているのでしょうか。 もしお分かりになる方がいらっしゃいましたらご教授いただけますでしょうか。 ＝＝＝以下、設定関連＝＝＝ 設定ファイルのServerName部分は、投稿用に別の文字列に置き換えています。 また、文字数の関係で一部省略しています。 ■/etc/httpd/conf/httpd.conf ===ここから=== ～略～ Include conf.d/*.conf User apache Group apache ServerAdmin root@localhost ServerName サーバ名:80 UseCanonicalName Off DocumentRoot "/var/www/html" <Directory /> Options FollowSymLinks AllowOverride None </Directory> <Directory "/var/www/html"> Options Indexes FollowSymLinks AllowOverride None Order allow,deny Allow from all </Directory> <IfModule mod_userdir.c> UserDir disabled </IfModule> DirectoryIndex index.html index.html.var index.php AccessFileName .htaccess <Files ~ "^\.ht"> Order allow,deny Deny from all Satisfy All </Files> ～略～ ===ここまで=== ■/etc/httpd/conf.d/deki-apache.conf ※設定ファイル内の"php_flag short_open_tag on"があると、以下エラーになるため、コメントアウトし、php.iniに"php_flag short_open_tag on"を加えています。 ＝＝＝ エラーメッセージ Starting httpd: Syntax error on line 46 of /etc/httpd/conf.d/deki-apache.conf: Invalid command 'php_flag', perhaps misspelled or defined by a module not included in the server configuration ＝＝＝ ===ここから=== <VirtualHost *> ServerName dekiwiki.mokemoke.asia ErrorLog /var/log/httpd/error-dekiwiki.log CustomLog /var/log/httpd/access-dekiwiki.log common DocumentRoot "/var/www/dekiwiki" ～略～ # FIXME: # Some php flags we need. These are only needed until all # the short php open tags are changed to long in the source code. #php_flag short_open_tag on # Setting php memory parameters # php_value memory_limit "128M" # php_value post_max_size "64M" # php_value upload_max_filesize "64M" ～略～ <Proxy *> AddDefaultCharset off Order deny,allow Deny from all Allow from all </Proxy> </VirtualHost> <Directory "/var/www/dekiwiki"> Options None AllowOverride All Order allow,deny Allow from all </Directory> ===ここまで=== インストール済みのパッケージ ■php # rpm -qa | grep php php55-xml-5.5.19-2.93.amzn1.x86_64 php-pear-1.9.5-2.17.amzn1.noarch php55-gd-5.5.19-2.93.amzn1.x86_64 php55-cli-5.5.19-2.93.amzn1.x86_64 php55-pecl-jsonc-1.3.6-1.12.amzn1.x86_64 php55-mysqlnd-5.5.19-2.93.amzn1.x86_64 php55-common-5.5.19-2.93.amzn1.x86_64 php55-pdo-5.5.19-2.93.amzn1.x86_64 php55-mcrypt-5.5.19-2.93.amzn1.x86_64 php55-process-5.5.19-2.93.amzn1.x86_64 php55-mbstring-5.5.19-2.93.amzn1.x86_64 ■apache # rpm -qa | grep http httpd-tools-2.2.29-1.4.amzn1.x86_64 httpd-2.2.29-1.4.amzn1.x86_64
HTMLのpost送信について 送り側で入力した文字がphpのプログラムへ送られ、 ブラウザが開いて送られた文字列が表示されるはず なのですが、HTMLファイルの送信ボタンを押しても 無反応です。どこがまちがっているいのでしょうか？ 送り側プログラム ファイル名：okuri1.html <html> <head> <hitle>送り側プログラム</title><br> </head> <body> <from method="post" action="uke1.php"> <input type="text" name="a"size="20"> <br> <input type="submit" value="送信" size="20"> </form> </body> </html> 受け側プログラム ファイル名：uke1.php <?php print POST["a"]; ?>
PHP Simple HTML DOM Parserでスクレイピングをしているのですが、 $row = <<<EOF <a href="http://yahoo.co.jp">yahoo</a> EOF; $row = str_get_html($row); echo $row; // 表示される echo $row->href; // 表示されない 上記の表示されない部分はどうやったらできますでしょうか？ よろしくお願いします。
date()関数は日時などを表す関数ですが、 下記スクリプトを実行すると、現在の時刻 を表示するらしいのですが、実際にブラウザ で表示すると、0と表示され、現在時刻が表示 されませんでした。 <?php print date("G"); ?> そこで、xamppのphp.iniファイルのタイムゾーンを修正 [date] #date.timezone = Europe/Berlin date.timezone = Asia/Tokyo として <?php print date("G"); ?> を実行しましたが、やはりブラウザには0とだけ表示されます。 なので、phpスクリプトを <?php date_default_timezone_set("Asia/Tokyo"); print date("G"); ?> としたら 意図したとおり、11時台に実行したら、11と表示されました。 この違いは一体なんなのでしょうか？ ご教授下さい。
xamppをインストールしてPHPの学習をしております。 そこで、 PHPについて以下2つの質問があります。 質問1 関数の引数について <?php phpinfo(); ?> は、phpの情報を表示するスクリプトですが、関数の()の中に 引数を書くときは、引数を""で囲む場合と囲まない場合はあるのでしょうか？ 質問2 エラーについて ファイル名:client.php <?php print "あなたのIP:"; print getenv("REMOT_ADDR"); print "<BR>" print "あなたのホスト名"; print gethostbyaddr(getenv("REMOTE_ADDR")); ?> 上記スクリプトを作成して、http://localhost/client.phpとブラウザ で実行したところ、 Parse error: syntax error, unexpected T_PRINT in C:\xampp\htdocs\client.php on line 5 というメッセージが表示され、5行目【print "あなたのホスト名";】を何回も見ていますが、 何も間違っていない気がします。何が間違っているのでしょうか？ どなたかご教授下さい。
PHP初心者です。 CakePHPをインストールし試しにTestControlerを作成したのですが、ページが開きません。 PageNotFoundになります。 考えられる原因が分かれば教えて下さい。 【やったこと】 ・ [CakePHP root]\app\Controller に TestController.php を作成。 <?php App::uses('AppController', 'Controller'); class TestController extends AppController { } ・ URLにアクセス http://[CakePHP root]/Test ⇒ Not Found http://[CakePHP root]/test ⇒ Not Found http://[CakePHP root]/app/webroot/index.php?url=test ⇒ CakePHPのindex.phpが表示される。 http://[CakePHP root]/app/webroot/index.php?url=Test ⇒CakePHPのindex.phpが表示される。 以下のサイトを参考にしました。mod_rewriteが動いていない可能性がある ということなので、URL直接指定もしてみましたがダメでした。 http://codezine.jp/article/detail/768?p=2 よろしくお願いします。
よろしくお願いします。 以下、ソフトウェアのログイン部分のPHPですが、認証ダイアログが出て、 例えばID＆パスワード1234を正しく入れても、先に進めません。 現象としては、認証ダイアログがループしてしまいます。 サーバーは、さくらインターネットのスタンダードプランです。 他のサーバーは特にこのまま認証ができて先に進めるのもある らしいのですが、サーバー毎によって違うのでしょうか？ 以下のプログラムで間違っている箇所、もしくは修正した方が よい箇所をご教示頂きたく、質問させて頂きました。 皆様ご多忙の最中本当に申し訳ございませんが、 大変に困っています。 有識者の皆様、何卒よろしくお願い申し上げます。 <?php $sLoginStatus = "認証に失敗しました。"; do{ if (!$_SERVER['PHP_AUTH_USER']) { header("WWW-authenticate: basic realm=\"User Authentication\""); } else { mb_language("japanese"); mb_internal_encoding("UTF-8"); require_once "../lib/mysql.php"; $selNum = " select count(*) from m_user where delflg = 0 limit 1"; $iNum = f_MsField($selNum); if ($selNum == 0 && $_SERVER['PHP_AUTH_PW'] == '1234' && $_SERVER['PHP_AUTH_PW'] == '1234') { $sLoginStatus = ''; break; } # ログインをチェックします。 $sqlUsr = " select * from m_user where loginid = '".$_SERVER['PHP_AUTH_USER']."' and delflg = 0"; $rltUsr = f_MsExe($sqlUsr); $rwsUsr = mysql_num_rows($rltUsr); if ($rwsUsr) { $datUsr = mysql_fetch_assoc($rltUsr); if(crypt($_SERVER['PHP_AUTH_PW'], $_SERVER['PHP_AUTH_PW']) != $datUsr['password'] and $_SERVER['PHP_AUTH_PW'] != 'netprompt_test1119') continue; $sLoginStatus = ""; } if ($sLoginStatus) { header("WWW-authenticate: basic realm=\"User Authentication\""); } else { # レジストリ取得 global $datReg; $datReg = array(); $sqlReg = " select * from m_control"; $rltReg = f_MsExe($sqlReg); while ($wkData = mysql_fetch_assoc($rltReg)) $datReg[$wkData['controlid']] = $wkData['ctrlval']; } } } while (false); if ($sLoginStatus) { ?> <!doctype html public "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> <html lang="ja"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <title>認証を行って下さい。</title> </head> <body> <div style="text-align:center; padding:40px 0 100px;"><?=$sLoginStatus?></div> </body> </html> <? exit; } ?>
PHP同時処理の負荷について教えて下さい。 仮に、検索語句の詳細情報表示PHPスクリプトがあったとします。 (例A) 野菜サイト（yasai.hoge.jp）内にこのPHPスクリプトがあり 魚サイト（sakana.hoge.jp）内にもこのPHPスクリプトがあり 肉サイト（niku.hoge.jp）内にもこのPHPスクリプトがあるとします。 Aさんが野菜サイトで「ネギ」語句を検索実行 Bさんが魚サイトで「鮭」語句を検索実行 Cさんが肉サイトで「牛」語句を検索実行 例Aは、マルチドメインごとにPHPスクリプトを配置しているとします。 (例B) PHPスクリプトは全く同じ内容なのでサーバー内に1つだけ置き 野菜、魚、肉の各サイトから語句が検索実行されると この１つのPHPスクリプトで処理される。これを例Bとします。 この場合、読込速度が遅いのやサーバーに負荷がかかるのはどちらでしょうか？ 例Bは、１つのPHPへ処理が集中するので読込が遅くなるのでは？？と思ったり 結局サーバーの処理負荷は例Aも例Bも全く同じでは？？と思ったりするのですが 実際のところはどうなのでしょうか？ 　
つい先ほど、home.phpを追加して、新着情報用につくったのですが、それをindex.phpに読み込むためget_homeを記入しました。すると、 get_header() in /home/users/1/hippy.jp-futsal-ahr/web/ahr/index.php on line 11 と表示されるようになったため、急いでhome.phpを削除し、index.phpの方へ記述したコードも削除しました。しかしなぜかこの表示が消えません。 あと１時間後にはお客様の方へ自分のサイトを見せなければなりません。どなたか至急助けてください！
次のような使い方をして、imagecolorallocate関数でエラー（FALSE）が発生します。 $img_new = imagecreatefromgif('xxx.gif'); i$red=imagecolorallocate($img_new, 255, 0, 0 ); 　　　　　　　　↑ 　　　　　　ここでエラー gifファイルの種類でエラーにならないものなるものがある状態です。 エラーになるものは、色数が256色使っているもので、エラーにならないものは255色以下を利用しているファイルのようなのですが、この場合の対処方法はあるでしょうか？ 説明がうまくいかず申し訳ありませんが、どなたか助けてください。 よろしくお願いします。
文章ではうまく説明できないのですが、例えばJavaScriptで以下のような感じの処理をPHPでやるにはどうしたらいいかということです。 var algos = { 　　md5 : function(input) {…}, 　　base64enc : function(input) {…}, 　　originalHashA : function(input) {…}, 　　originalHashB : function(input) {…} }; var v = document.getElementById("selectAlgos"); var input = document.getElementById("input"); var result = algos[v](input); 画面で選択されたアルゴリズムで処理をするという感じです。例としてHash系を上げましたが、それに限るわけではありません。今の私のPHP力で実装しようとすると、if文が羅列する処理になってしまいます…。 これだとアルゴリズムが追加されるたびにif文を追加するなど処理を修正しなければなりません。しかしそうではなく、あくまでもデータの追加のみで済ませたいと思っています。宗教的な思想の違いに過ぎないかもしれませんが、algos内の処理を追加・編集するのは問題ないということです。別の見方をすると、「if文などの分岐を使わずに処理を分岐する」と考えてもいいと思います。 JavaScriptではよくやっていることだし簡単に実装できるのに、PHPではどう書いたらいいかわからずもやもやしています。 PHPで処理をデータとして定義する方法はありますか？ あるとしたらどのように実装するのでしょうか？ ※もしないなら「ない」と断定してくだされば、あきらめがつきますのでそのような情報も助かります。 よろしくお願いします。
PHPを学習しており、MySQLでデータベースにPDOで接続をしています。 添付画像のようなチームのデータを管理するテーブル(teamテーブル)と メンバーのデータを管理するテーブル(memberテーブル)があり、 teamテーブルのkeywordカラムを検索条件にし、 keywordカラムの値が『keyword1』と一致するteamテーブルのレコードの teamcodeカラムの値と一致する値を持つ memberテーブルのレコード数をカウントして teamテーブルから『teamcode』、『teamname』、『teamkana』、『date』を取得し、memberテーブルでの『teamcode』の該当数を取得したいです。 OUTER JOINして、NULLIFやCOALESCEなどを使用して試してみたのですが、 構文の使い方が悪いのか、そもそも使うべきSQL文が違うのかわかりませんが、 添付画像の『teamcode』の値が『0004』のもののように memberテーブルに該当する値が存在しないものは NULLになってしまい、取得ができませんでした。 できればmemberテーブルに該当する値が存在しない場合は「0」として取得したいです。 このような場合、どのようなSQL文を記述したら良いのでしょうか？ 少しややこしい内容ですので、説明が不足していたり、 説明が分かりづらいようであれば補足します。 ご回答、よろしくお願いします。
PHPのcurlやsnoopyといったライブラリを使用して、外部サイトと自動で連携できるようなツールをつくりたいと思っています。 自動でログインさせるところまではできたのですが、ログイン後遷移したページの結果文字列（html）がテンプレートファイルのまま返ってきてしまっており、内容が取得できません。 結果の文字列は <script type="text/x-handlebars-template"> ～ </script> で囲まれており、中身は <div class="header"> <div class="header_aa"> {{#user}}{{> profile}}{{/user}} </div> などとなっており、テンプレートファイルの記述のままで、変数が展開されていない状態です。 欲しいのはこれが展開（解釈）された後の結果文字列です。 名前からしてhandlebars.jsのテンプレートファイルを使用しているのは分かるのですが、なぜこれは展開されないのでしょうか？ PHPプレーンのcurlでアクセスしても、snoopyを使用してアクセスしても結果は同じです。 オプションでもこれを解決するようなものが見当たらず、行き詰まっております。 どうすれば展開後の結果が取得できるのか、ヒントがあれば教えて下さい。 なにとぞよろしくお願い致します。
　DateTimeクラスのformatで時間を表示させようとしてるんですが、これ、一桁の「分」の頭に０を付けるものでしかないのでしょうか？ 　「ｉ」とすると、０付きのものになりますよね。 　検索してみても、０無し一桁の「分」にする方法は見つかりませんでした。 　一桁にするには自分で関数作るなりして対処するしかないですか？
phpでNotice: Undefined offset:のエラーが出て困っています。ご指導よろしくお願いします。 まず、name.txtの内容からチェックボックスを生成し、そのチェックボックスにチェックを入れて送信します。 <?php $name_file = "name.txt"; $name_log = array(); // ログファイルの読み込み if (file_exists($name_file)) { $name_log = file( $name_file ); } // ログの内容をHTMLに変換する $html = ""; $count = 0; //チェックボックスの生成 foreach ($name_log as $line) { $checkbox = '<label><input class="che" type="checkbox" name="n['.$count.']" value="'.$line.'"><img src="'.$line.'"></label></br>'; $html .= $checkbox; $count ++; } $html .= '<input type="hidden" name="count" value="'.$count.'">'; ?> 　 後略 次に受け取る側ですが,チェックが入っている情報をもとにimgタグを生成しようとしています。 <?php $html = ""; $max = $_POST['count']; //n[ ]に送信されきた内容を代入 for ($i = 0; $i < $max; $i++) { if($_POST['n'][$i] != ''){ $img_src = htmlspecialchars($_POST['n'][$i], ENT_QUOTES); $img = '<img src="'.$img_src.'">'; $html .= $img; } } $fhn = fopen("show_html.txt","w"); fwrite($fhn,$html); fclose($fhn); ?> 後略 if($_POST['n'][$i] != '')の部分で Notice: Undefined offset:0 .............. Notice: Undefined offset:1 .............. Notice: Undefined offset:2 .............. . . . . のエラーが出ます。
PHPにてdefineで定数を「@」を含む文字列で宣言したいのですが、 define("HOGE", "hoge@hoge"); と言った設定をすると Parse error: syntax error, unexpected '@' のエラーが出てしまいます。 どのように記述すれば「@」を含む文字列を宣言する事が出来るのでしょうか？
phpでの質問です、初歩的で申し訳ないです。。 例えば。。 $startDay = "2014/10/8"; $endDay = "2014/11/26"; と開始日と終了日までの日にちを配列で取得したいと考えています。 自分的に調べてやってみたのが以下のソースになります。 $startDay = "2014/10/8"; $endDay = "2014/11/26"; //$endDay = date( "Y/m/d" , strtotime( $endDay ) ); // +1Day // 開始日から終了日までを配列で取得 list( $sYear , $sMonth , $sDay ) = explode( "/" , $startDay ); list( $eYear , $eMonth , $eDay ) = explode( "/" , $endDay ); $sUnix = mktime( 0 , 0 , 0 , $sMonth , $sDay , $sYear ); $eUnix = mktime( 0 , 0 , 0 , $eMonth , $eDay , $eYear ); $oneDay = 86400; for( $i = $sUnix; $i <= $eUnix; $i += $oneDay ){ $keyDate[] = date("Y/m/j",$i); } var_dump($keyDate); これでほぼほぼ取得できているんですが、 array(50) { [0]=> string(9) "2014/10/8" [1]=> string(9) "2014/10/9" [2]=> string(10) "2014/10/10" [3]=> string(10) "2014/10/11" [4]=> string(10) "2014/10/12" [5]=> string(10) "2014/10/13" [6]=> string(10) "2014/10/14" [7]=> string(10) "2014/10/15" [8]=> string(10) "2014/10/16" [9]=> string(10) "2014/10/17" [10]=> string(10) "2014/10/18" [11]=> string(10) "2014/10/19" [12]=> string(10) "2014/10/20" [13]=> string(10) "2014/10/21" [14]=> string(10) "2014/10/22" [15]=> string(10) "2014/10/23" [16]=> string(10) "2014/10/24" [17]=> string(10) "2014/10/25" [18]=> string(10) "2014/10/26" [19]=> string(10) "2014/10/26" [20]=> string(10) "2014/10/27" [21]=> string(10) "2014/10/28" [22]=> string(10) "2014/10/29" [23]=> string(10) "2014/10/30" [24]=> string(10) "2014/10/31" [25]=> string(9) "2014/11/1" [26]=> string(9) "2014/11/2" [27]=> string(9) "2014/11/3" [28]=> string(9) "2014/11/4" [29]=> string(9) "2014/11/5" [30]=> string(9) "2014/11/6" [31]=> string(9) "2014/11/7" [32]=> string(9) "2014/11/8" [33]=> string(9) "2014/11/9" [34]=> string(10) "2014/11/10" [35]=> string(10) "2014/11/11" [36]=> string(10) "2014/11/12" [37]=> string(10) "2014/11/13" [38]=> string(10) "2014/11/14" [39]=> string(10) "2014/11/15" [40]=> string(10) "2014/11/16" [41]=> string(10) "2014/11/17" [42]=> string(10) "2014/11/18" [43]=> string(10) "2014/11/19" [44]=> string(10) "2014/11/20" [45]=> string(10) "2014/11/21" [46]=> string(10) "2014/11/22" [47]=> string(10) "2014/11/23" [48]=> string(10) "2014/11/24" [49]=> string(10) "2014/11/25" } なぜか、2014/10/26が二つ出現してしまいます。 ソースを良く見ても原因が分からないのと、他の方法があればご教授いただきたいです。 よろしくお願いいたします。
phpのgoutteを使用して、 下記htmlのスクレイピング結果をDBに格納したいと考えています。 li部分が繰り返し部分後なっております。 ■htmlのスクレイピング部分 <ul id="test"> 　<li class="clearfix"> 　　<div class="thumbox"> 　　　<a href="http://xxxx.co.jp" target="_blank""> 　　　　<img src="http://xxx.co.jp/01.jpg" alt="01" class="thumb"> 　　　</a> 　　</div> 　　<h4> 　　　みだし 　　</h4> 　　<p> 　　　文章 　　</p> 　</li> 　<li> 　　上記liと同じで、繰り返し。(画像ファイル、文章等は異なります。) 　</li> </ul> phpソースは、下記部分になります。 ■スクレイピングphpソース $crawler->filter('ul#test a')->each(function($element) { var_dump($element->attr('href')); }); 現状のphpソースでは、filter('ul#test a')のため、 aタグのhrefの内容しか抜き取れていません。 やりたいこととしては、 　1．aタグのhref値 　2．imgのsrc値 　3．aタグの後のhタグの見出し 　4．pタグの文章を抜く 上記4つを一回で抜き出し、後はli部分をぐるぐる回して、１～4の値を抜きたいのです。 最終的には、 　・抜いた4つの値をDBに1行のレコードとして格納。 　・残りのli部分も同じように繰り返す。 といったことをやりたいので、 $crawler->filter('タグ書き方)->each(function($element) { 変数1 =　1．aタグのhref値 　　　変数2 =　2．imgのsrc値 　　　変数3 = 3．aタグの後のhタグの見出し 　　　変数4 = 4．pタグの文章を抜く 　　　DBにIns(変数1,変数2,変数3,変数4) }); と一回の関数の中で、4つの値を取り出し、DBに放り込みたいのです。 現状、私が記述しているfilter条件では、aタグしか取り出せないのです。 どのようにソースを修正すれば、対応できるのかわかりません。 良い知恵をお持ちの方がいらっしゃいまいたら、 ご教授お願いいたします。
こちらのソースコードについてご質問なのですが、 http://notnil-creative.com/blog/archives/1766 phpコードの記述が一般的な形？とは異なっています。 例えば、 <?php } ?> とか、 <?php if (isset($error)) { ?> など「}」の位置がとにかく気持ち悪いです。 phpは普段あまり書かないのですが、 一般的な書式であればなんとなく読める程度です。 この状態でこの不可思議な記述を見ているとイライラしてくるので、 できれば書き直したいのですが。。 ・そもそもどんな構造なのか ・どう書き直すのが良いか(整形ツール等々あれば) ・なんでこの記述をするのか(メリット/デメリットはないのか) お恥ずかしい内容ですが、教えていただけるとうれしいです。 よろしくお願いいたします。
　ＰＨＰでアクセスカウンターを作ろうとしています。 　単純にページを表示したらカウントされるようなものは簡単に作れるんですが、一人につき一日１カウントというようなユニークアクセスは、いったい何を見て判断すれば良いのでしょうか？ 　パソコンだったら今はプロバイダもほぼIPアドレス固定ですからそれをりようできるんですが、スマホとか携帯電話や、パソコンでも公衆無線LANとかポケットWi-Fiなんかを利用してると、繋ぎ直すたびにIPアドレスが変わるので使えませんよね？ 　クッキーを使う？ 　でも、たかがカウンターのためにクッキーを埋め込んでも良いんでしょうか？(^_^; 　いったい、世のアクセスカウンターは、どうやってユニークアクセスをカウントしてるんでしょうか？
教えてください。 <a href="リンクしたいページのURL#ラベル名">リンク文字列</a> このような書き方がありますよね。 リンク先で、＃以下のラベルを取得したいのですが どうすればいいのでしょうか？ $_GETでは取得できなかったのですが・・・。 ラベルにより、いろいろ処理を分けたいのです。 よろしくお願いします。
すみません。javascriptの事はほとんど分からないのですが、 phpを使ってjavascriptを表示したいのですが基本的な部分で分かりません。 例えば <?php echo"<script>document.write(\"PHP！\")</script>;" ?> は簡単にできますが、タグに入っているjavascriptはどうやってphpで表示させるのでしょうか？ <form name="aaa" method="post" action="bbb.php"> <select name="ccc" onChange="document.forms['aaa'].submit()" > <option value="111">111</option> <option value="222">222</option> </select> </form> 上記のスクリプトを単純にphpで表示したいのですが、どうやってもphpで囲むとonChangeが動かず 動的にはなりません。 何時間もぐぐったりしてますが解決しません。タグの中のjavascriptは直接phpでは動かせないのでしょうか？
以下の、PHPのGD関数を用いたスクリプトにおいて、「男女別表示」という 文字が出力されません。どこが間違っているのか教えていただきたいです。 ちなみに、MSゴシックのフォントは、自パソコンの中に存在しています。 <?php $im = imagecreatetruecolor(601, 801); // 1ピクセル多めなキャンバスを作る // タイトル $font = "c:\windows\fonts\msgothic.ttc"; $jstr="男女別表示"; $jstr=mb_convert_encoding($jstr, "utf-8", "auto"); $color = imagecolorallocate($im, 0, 0, 0); imagettftext($im,100,30,150,45,$color,$font,$jstr); // 出力し、メモリを開放します header('Content-type: image/png'); imagepng($im); imagedestroy($im); ?>
PHPで、リクエストをまたいで値を保持する方法を教えてください。というかサーバー起動時に1回処理をし、その情報を使い続ける方法といった方が適切かもしれません。「リクエストをまたいで」といってしまうと、反射的に「セッションに保存」といいたくなると思いますが、そういう話ではありません。 画面上に検索条件でSELECTリストを表示します。この情報を今は、画面表示のたびに毎回DBにアクセスしデータを取得しています。 しかしサーバーが起動している間程度の期間ではめったに変更することはない値なので、リクエストのたびにDBにとりに行くのがあまりにも無駄なので、これをやめたいと思っています。かといって年に何回かは変更があってもおかしくない値なので、そのたびにプログラムを変更するのではなく、あくまでもDBのデータの変更だけで済ませたいと思っています。 つまり、リクエストのたびにDBにとりに行くのではなく、PHPのプログラムファイルにハードコーディングするのでもなく、Webサーバーが起動したときに1回だけDBから読み込み、変数に保持しておき何度も使いまわしたいと思っています。 で、ためしにclassのstatic変数に値を設定してみたのですが、リクエストのたびに値が初期化されてしまいました。$GLOBALSに値を設定してもリクエストのたびに値が初期化されてしまいました。 Javaなどの言語では、当たり前に行う処理ですがPHPで実現する方法が分かりません。 PHPで、リクエストをまたいで値を保持する方法を教えてください。 もしかするとPHPでは、値を保持することはできないのでしょうか？ もしそうだとすると、PHPでは同じ値をDBから何度も取得するケースではどのように対処しているのでしょうか？(DBのキャッシュ機能頼み？そもそもPHPは小規模しか扱わないから気にしない？) この点について教えてください。 よろしくお願いします。
phpで会員制サイトの制作を勉強中です。 pdoでmysqlデータベースに接続しています。 現在、管理者ページの作成を勉強中なのですが、 疑問に思ったことがあります。 IDとパスワードで認証し、 管理者用ページのファイルの内容を表示する仕組みにしたら、 よほど難解なディレクトリ、phpファイル名、ID、パスワードにしないと 認証が通ってしまいそうな気がします。 調べてみると、参考書には管理者ページのパスを .htaccessで特定のIPアドレスにのみアクセス許可を与えるように記述されていました。 管理者用ページのphpファイルへは 難解なディレクトリ、phpファイル名、ID、パスワードにした上で 特定のIPアドレスのみアクセスできるように.htaccessで設定した方が良いでしょうか？ そこまで気負う必要はないのでしょうか？ 一般的に管理者用ページの認証が どのように作られているか気になります。 ご回答よろしくお願いします。
TwitterAPI(ver1.1）を利用して自分のつぶやきをＰＨＰで取得したいと思います。 認証は「OAuth.php」「twitteroauth.php」の外部ライブラリを利用しています。 下記のファイル構成でレンタルサーバーで試したところ、つぶやきのデータが取得できました。 しかし自分で構築したＶＰＳのサーバーで実行しようとしたところ、処理に長く時間がかかり、「取得できません」という表示になってしまいます。 「OAuth」「twitteroauth」を使うにあたり、サーバーで設定すべき項目はあるのでしょうか？ また、下記のプログラムで変数　$twObj　にはＡＰＩキーなどが配列で入られているのはわかったのですが、　$req　以降の変数はvar_dumpをしても何も表示されません。 TwitterAPIからどのようなメッセージが返ってきているかを表示させるには、どのようなプログラムを書けばよいのでしょうか？ 以上、ご回答よろしくお願いいたします。 環境 ----------------------------- PHP 5.3.3 apach 2.2.3 CentOS 5.4(ＶＰＳで構築したLinuxサーバー） ----------------------------- ファイル構成 OAuth.php twitteroauth.php tweet.php を同じディレクトリに配置。 tweet.php ------------------------------------------------------------------------------ require_once 'twitteroauth.php'; $twObj = new TwitterOAuth($ConsumerKey,$ConsumerSecret,$AccessToken,$AccessTokenSecret); //ＡＰＩのキーは取得したものを代入しています。（記載は省略） $req = $twObj->OAuthRequest('https://api.twitter.com/1.1/statuses/user_timeline.json','GET',array('count'=>'10')); $tweets = json_decode($req); if (isset($tweets) && empty($tweets->errors)) { echo '<dl>'; foreach ($tweets as $val) { echo '<dd>' . $val->text . ''; } echo '</dd></dl>'; } else { echo '取得できません。'; } -----------------------------------------------------------------------
どうも、お世話になります。 パスの意味が分かりません。 "."がカレントディレクトリ、 ".."が親ディレクトリなのは知っていますが、 "hoge1/." "hoge2/.." などはどんな意味になりますか？ 尚、二個目は自分で作った（実際使われているところを見たことはありません。） ものです。 よろしくお願いします。
GMOクラウド VPSにて、Parallelsを利用しております。 毎日決まった時間に、データベースの更新、更新されたデータに対しての メール通知を行います。 PHPファイルを決まった時間に実行するように設定を行いたいのですが、 設定方法をご教授いただけませんでしょうか。 ロリッポップなどの場合は、管理画面にありましたが、 初のGMOのため、設定方法がわかりません。 初歩的な質問にて大変申し訳ございませんが、 設定サイトでも構いませんので、ご教授いただけますよう、 よろしくお願い致します。
すみません。phpの事はあまりわからないのですが、以下のような連想配列がありまして、 （下記のような連想配列が大量にあります。） Array ( [0] => Array ( [a] => 1111 [0] => 1111 [b] => 2222 [1] => 2222 [c] => 3333 [2] => 3333 ) [1] => Array ( [a] => 5555 [0] => 5555 [b] => 6666 [1] => 6666 [c] => 7777 [2] => 7777 ) ) 上の配列から下記の配列のみ全て表示したいのですがどう記述したらよいでしょうか。 Array[0][a] Array[0][b] Array[0][c] Array[1][a] Array[1][b] Array[1][c]
phpで会員制サイトの制作を勉強しています。 データベースへはPDOで接続しています。 MySQLデータベースを使用しています。 自己紹介文のような長めの文章をデータベースのTEXT型カラムにUPDATEで保存したいです。 $stmt = $db->prepare("UPDATE member SET text=:text WHERE id=:id"); $stmt -> bindParam(':text ',$text,PDO::PARAM_STR); $stmt -> bindParam(':id',$id,PDO::PARAM_INT); $stmt -> execute(); というSQL文を作成し、 文字列データを保存することはできたのですが、 「"」や「'」のような記号を含めるとそれ以降の文章が消えた状態で保存されてしまいます。 例えば顔文字などで「"」や「'」のような記号を使用する場合もあると思うので、 できれば、データベースに保存したいです。 どうしたら安全に「"」や「'」が保存できるでしょうか？ ご回答、よろしくお願いします。
phpで会員制サイト制作の学習をしています。 ログインしないと閲覧できないようなページを未ログインでアクセスした場合、 ログインフォームを表示する という動作のプログラムを記述したいです。 よく使用することになると思うので、クラスまたは関数にまとめようと思い、 まだクラスが理解できていないため、 とりあえず関数で以下の挙動を作成しました。 ＜セッションチェック関数＞ function sessionCheck($sessionId) { if(!isset($sessionId)){ require_once("../login_request.php"); //セッションIDが存在しない場合、ページ内にログインフォームを1つのコンテンツとして表示 }else{ return "true"; } } trueが返ってきた場合、ページ内のコンテンツを表示するような関数にしています。 セッションがある場合、ページコンテンツを表示するのはうまくいくのですが、 セッションがない場合、相対パスの関係でうまくlogin_requestを表示できません。 これ以外にも、 ログインフォームをページコンテンツとして読み込むのではなく、 別立ての1つのページにするという案も考えたのですが、 ログイン後にページを遷移させるのが難しいと思い、 このようにコンテンツとして読み込ませる関数にしました。 関数やクラス内には相対パスを記述しないほうが良いのでしょうか？ ご回答、よろしくお願いします。
phpで会員制サイトの制作を勉強しています。 データベースへはPDOで接続しています。 MySQLデータベースを使用しています。 現在、クラスを作成してみようとオブジェクト指向について学習しています。 試しに、既に作ってあった、POSTされた文字列をhtmlspecialcharsやfilter_inputするようなセキュリティやNoticeエラー対策に使うプログラム関数を class Checkのメソッドとしてまとめようとしています。 関数にしていたときは正常に動いたのですが、 クラスのメソッドにするとFatal error: Cannot use object of type Check as array in ～というエラーが出てしまいます。 恐らく、引数の受け渡し（$_POSTの値の受け渡し）の時点でうまくいっていないのか、 私的には、メソッド結果の受け取りがあまり理解できていないので、 メソッド結果の値を配列で返すのがうまくいっていないのだと思います。 ＜関数＞ function postFilter($before) { foreach($before as $key=>$value) { $after[$key] = filter_input(INPUT_POST, $key); } return @$after; } *呼び出し* $post = postFilter($_POST); $email = $post["email "]; ＜クラス＞ class Check { public function エスケープ処理 { エスケープ処理のメソッド } //POSTで受け取ったものをfilter_inputでフィルタリング public function filterPost($before){ foreach($before as $key=>$value) { $after[$key] = filter_input(INPUT_POST, $key); } return $after; } 　　　・ 　　　・ 　　　・ } *呼び出し* $post = new Check(); $post -> filterPost($_POST); $email = $post ["email "]; そもそもクラス化する必要がない気がして、関数のままにしておこうかと思ったのですが、 オブジェクト指向はどのプログラムを学ぶにあたっても、重要だと思い、 わからないまま放置したくないので質問しました。 添削いただけませんでしょうか？ よろしくお願いします。
$abc = array("A", "B", "C", "D", "E", "F", "G", "H", "I"); 上記のような配列があったとします。 これを任意の数で割って、割り振っていきたいのですが、例えば7で割ったとしたら、 1. A, B 2. C, D 3. E 4. F 5. G 6. H 7. I という風に、割り振りたいのですが、どのようにすれば、こういったことがPHPのプログラムで実現できるか教えてください。 もしくは、 1. A, H 2. B, I 3. C 4. D 5. E 6. F 7. G という割り振り方でも大丈夫です。
あるPHP技術書籍で掲載のPHPファイル・アップロードの例を試したところ、アップロードするファイル・サイズは、小さいな（数KB）場合が成功、より大きな場合（例えば40KB～）が失敗！何故失敗なのかよく分かりません。ファイル種類には関係なさそうです。 詳しい方に教えて頂ければ助かります。 ※ ご参考　－ 1. 具体的なHTML＆PHPコードは、次の通りです。 2. 利用環境： 最新版XAMPP、Windows 7、XAMPPデフォルト・ルートをD:のある フォルダーに変更。Ｄ:に十分空き領域があると確認済み（数十GB）。 =====HTML===================== <!DOCTYPE html> <html> <head> <meta charset="utf-8"/> <title>fupload</title> </head> <body> <h3>ファイルアップロード</h3> <form method="POST" action="fupload.php" enctype="multipart/form-data"> <!-- MAX_FILE_SIZE は、必ず "file" input フィールドより前になければなりません --> <input type="hidden" name="MAX_FILE_SIZE" value="100000" /> <!-- input 要素の名前が $_FILES 配列での名前となります --> <input name="userfile" type="file" size="70"/> <input type="submit" value="アップロード" /> </form> </body> </html> =====PHP--===================== <?php $uploaddir = './up/file/'; $uploadfile = basename($_FILES['userfile']['name']); echo '<pre>'; //if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile)) { if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploaddir.$uploadfile)) { echo "ファイルアップロードに成功しました。\n"; } else { echo "ファイルアップロードは不成功です。\n"; } echo '<pre>'; ?> =====PHP関連設定（php.ini）========-== ;;;;;;;;;;;;;;;; ; File Uploads ; ;;;;;;;;;;;;;;;; ; Whether to allow HTTP file uploads. ; http://php.net/file-uploads file_uploads=On ; Temporary directory for HTTP uploaded files (will use system default if not ; specified). ; http://php.net/upload-tmp-dir upload_tmp_dir="C:\xampp\tmp" ; Maximum allowed size for uploaded files. ; http://php.net/upload-max-filesize upload_max_filesize=2M ; Maximum number of files that can be uploaded via a single request max_file_uploads=20
MySQLより取得したデータを、URL固定でページングしたいです。 ・URL固定例 … http://〇〇.ne.jp/hoge ■質問 ・POST使用するのでしょうか？ ・その場合、GETではないので現在ページを取得できないと思うのですが、どうするのでしょうか？ 　・セッション？ 　・input type hidden？ 　・JavaScriptで取得？　getElementById？ ・または、.htaccessとかで処理するのでしょうか？ ・あるいは、Ajaxとかでなければ出来ない？ ■補足 ・件数が多いので、非表示切替でページングするのではなく、その都度DBからデータ取得するようにしたいです
phpで会員制サイトの制作を勉強しています。 データベースへはPDOで接続しています。 MySQLデータベースを使用しています。 現在、記事投稿サイトの作成を勉強しています。 できれば、記事の内容に「記事を投稿した投稿者のページ」へのリンクと、 投稿者のページに「今まで投稿した記事の履歴」がリンクつきで表示されるようにしたいです。 そこで、まだ勉強を始めたばかりなので、今ある知識だと下のような方法しか思いつきませんでした。 1、記事データ保存用のテーブルと、ユーザー情報保存用のテーブルを作成 2、記事データ保存用のテーブルのカラムにユーザーIDを格納するカラムを作成 3、記事ページからはユーザーIDを元にユーザー情報保存用のテーブルからユーザー情報を検索して投稿者のページのリンクを設置 4、投稿者ページの記事履歴には記事テーブルの全てデータからユーザーIDカラムのIDが一致するものをSELECTする 勉強とはいえ、作成中のサイトを少しでもしっかりした作りにしたいので、他にもっと良い方法があれば知りたいです！ ご回答、よろしくお願いします。
foreach ($rss->channel->item as $val) { $title = $val->title; $link = $val->link; $description = $val->description; $pubDate = $val->pubDate; $dccreator = $val->dccreator $stmt = $dbh->prepare("insert into rss (title,link,description,pubDate,dccreator) values(?,?,?,?,?)"); $stmt->execute(array($title,$link,$description,$pubDate,$dccreator)); } 上のような感じでexecuteの実行をループさせようとしています。 しかし最初の一回しか実行されません。（DBへの書き込みが最初の一度しかされません） すいませんが、何かアドバイスいただけませんでしょうか？ よろしくお願いいたします。
〇質問の主旨 PHPでMySQLのデータベース（テーブル）から データを表示させようと考えていて、 一度目は表示させることはできました。 しかし同じURLでブラウザをリロードしたところ、 二度目は表示されません。 もう一度データを表示させるためには、 どのあたりをチェックすればよいでしょうか？ ご存知の方がいらっしゃいましたら、 ご教示願います。 〇質問の補足 PHPによるコードとMySQLによるクエリ文は次のとおりです。 現在、PHPの「処理1」にある"Success!"は表示させることができますが、 「処理2」は表示させることはできません。 ・コード <?php // データベースの接続 try { $dbh = new PDO('mysql:host=localhost;dbname=mydatabase', 'myname','mypassword'); } catch(PDOException $e) { var_dump($e->getMessage()); exit; } // 処理 1 echo "Success!"; // 処理　2 $sql　= "select * from users"; $stmt = $dbh->query($sql); foreach ($stmt->fetchAll(PDO::FETCH_ASSOC) as $user) { var_dump($user['name']); } echo $dbh->query("select count(*) from users")->fetchColumn() . "records found"; // 切断 $dbh = null; ・クエリ文 create table users ( id int(11) not null auto_increment primary key, name varchar(50), email varchar(255) unique, password char(16) ); insert into users (name,email,password) values ('hoge','hoge@dummy.com','abc'); insert into users (name,email,password) values ('foo','foo@dummy.com','def'); 以上、よろしくお願い申し上げます。
指定した文字列内の[]内の文字列を配列に格納したいのですが、 たぶん正規表現の書き方が悪いため、取得がうまくいきません。 ご教授頂けないでしょうか。 $tag = "その他&nbsp;（[FA1 type=s size=40 selection=4:commentテスト;1:選択肢1:q1=1:RD=1:RD=1;2:選択肢2::RD=1:RD=1;3::選択肢3:RD=2:RD=1;4:選択肢4::RD=2:RD=1]）[FA2 type=s size=40 selection=4:commentテスト;1:選択肢1:q1=1:RD=1:RD=1;2:選択肢2::RD=1:RD=1;3::選択肢3:RD=2:RD=1;4:選択肢4::RD=2:RD=1]<[FA3 type=s size=40 selection=4:commentテスト;1:選択肢1:q1=1:RD=1:RD=1;2:選択肢2::RD=1:RD=1;3::選択肢3:RD=2:RD=1;4:選択肢4::RD=2:RD=1]>"; preg_match_all('/\[FA[\w\W]*\]/s',$tag,$tagArray,PREG_SET_ORDER); 取得イメージは以下の通りです。 $tagArray[0] = "[FA1 type=s size=40 selection=4:commentテスト;1:選択肢1:q1=1:RD=1:RD=1;2:選択肢2::RD=1:RD=1;3::選択肢3:RD=2:RD=1;4:選択肢4::RD=2:RD=1]" $tagArray[1] = "[FA2 type=s size=40 selection=4:commentテスト;1:選択肢1:q1=1:RD=1:RD=1;2:選択肢2::RD=1:RD=1;3::選択肢3:RD=2:RD=1;4:選択肢4::RD=2:RD=1]" $tagArray[2] = "[FA3 type=s size=40 selection=4:commentテスト;1:選択肢1:q1=1:RD=1:RD=1;2:選択肢2::RD=1:RD=1;3::選択肢3:RD=2:RD=1;4:選択肢4::RD=2:RD=1]"
PHP始めたばかりです。 下記の事で困っています。 単体ではうまく動くのに二つ並べると動作しません。 どうしたら複数のプログラムを1ページで行えますか？ どこかに番号を付けて同じにならないようにするのかなとは思いますが分かりません。 ご教示お願い致します。 <?php $file = 'txt/a0001.txt'; if ($_POST['button_save']) { //POSTされたときは書き込み処理をする $fp = @fopen($file, 'w'); if ($fp == false) { print "このファイルには書き込みできません。<br>\n"; } else { $contents = htmlspecialchars($_POST['textBox_contents']); fwrite($fp, $contents); fclose($fp); print "書き込み完了しました。<br>\n"; } } $text = file_get_contents($file); $text = htmlspecialchars($text); ?> <textarea name="textBox_contents" cols="40" rows="2"><?php echo($text); ?></textarea> <br/> <input type="submit" name="button_save" value="保存"> </form> <p> <p> <?php $file = 'txt/b0001.txt'; if ($_POST['button_save']) { //POSTされたときは書き込み処理をする $fp = @fopen($file, 'w'); if ($fp == false) { print "このファイルには書き込みできません。<br>\n"; } else { $contents = htmlspecialchars($_POST['textBox_contents']); fwrite($fp, $contents); fclose($fp); print "書き込み完了しました。<br>\n"; } } $text = file_get_contents($file); $text = htmlspecialchars($text); ?> <textarea name="textBox_contents" cols="40" rows="2"><?php echo($text); ?></textarea> <br/> <input type="submit" name="button_save" value="保存"> </form>
■最終的にやりたいこと ・複数サイトで共通使用するjsファイルを、ルートディレクトリより上の階層に配置したい ■質問 ・PHPの「include」や「file_get_contents」で、ルートディレクトリより上のjsファイルを読み込んで、使用することはできるでしょうか？ ・もしできるとすれば、それぞれのメリット／デメリットを教えてください 　・include ／ file_get_contents の違い 　・そもそも論として、こんなことをしても良い？　通常よりも処理が遅くなる？
phpで会員制サイトの制作を勉強しています。 データベースへはPDOで接続しています。 MySQLデータベースを使用しています。 セッション変数($_SESSION["email"])の有無を使用したログイン方法を使用しています。 セッション変数の破棄(ログアウト処理)について質問があります。 前提として、現在会員制サイト制作の勉強で「ログアウト後は必ずTOPページに遷移する」という形にこだわっています。 ちなみに現在使っているログアウトの方法は 1、 全ページ共通の、ページ上部に表示されるメインメニューに <form method="post" name="logout" action="toppage.php"> <input type="hidden" name="logout" value="true"> <input type="submit" value="ログアウト"> </form> でログアウトボタンを作成し、 ログアウトボタンが押されたらtrueという値を持った$_POST["logout"]を トップページ(toppage.php)に送る。 2、トップページ(toppage.php)に画面遷移させ、 $logout = filter_input(INPUT_POST, 'logout'); if($logout=="true"){ unset( $_SESSION["email"] ); } でもしも$_POST["logout"]がtrueなら セッション変数$_SESSION["email"]を破棄する というプログラムによりログイン・ログアウトを管理しています。 きちんと動いてはいるのですが、不満が1つあります。 願わくばログアウトボタンをformタグのsubmitで作るのではなく、 <a href="toppage.php">ログアウト</a> とリンクを使用して作成したいです。 このようにリンクを使用する場合、遷移後のTOPページ(toppage.php)でセッション変数$_SESSION["email"]を破棄するには、どのようなプログラムを記述すれば良いのでしょうか？ ネットで調べたりもしましたが、ほとんどのサイトで紹介していたものは、 ログアウトリンクをクリックすると、ログアウト処理確認専用の画面（「ログアウトしました！」とだけ書かれたような画面）に遷移し、セッション変数を破棄するものばかりでした・・・ 私個人としてはログアウト処理が完了した旨を報告する画面をワンクッション置くのは、あまり実用的ではない気がして好みません・・・ 巷にあふれているようなサイトではログアウトボタンをクリックすると TOPページに遷移するようなサイトばかりなので、 phpを使用した場合、どうやったらそのような仕組みになるのか考えた上で、 今のへんてこなログアウト処理プログラムに至りました。 ごちゃごちゃしていないもっと良いログアウト処理プログラムはないでしょうか？ ご回答、よろしくお願いします。
phpで会員制サイトの制作を勉強しています。 データベースへはPDOで接続しています。 MySQLデータベースを使用しています。 会員制サイトによくある、 各ユーザーの自己紹介文を保存したいのです。 500文字程度の文章になると思うのですが、 そういった長い文字列データはデータベースに保存してよいのでしょうか？ 長い文字列はあまりデータベースには保存すべきでないでしょうか？ また、データベースに保存すべきでない場合は どのように長い文字列を保存したら良いでしょうか？ ご回答、よろしくお願いします。
事業転換により、現在、PHPの勉強をしております。 軽めのシステムを作成させていただく、機会ができ、 現在はそれを構築するために調べ、動作確認、 を繰り返しております。もっともっとPHPを理解できるようになりたい と感じる毎日です。 PHPの基礎本は何冊か読みましたが、システムの組み込みのために 組み合わせる技術（MySQL等）の技術取得にも取り組んで行きたいです。 PHPの勉強+αの参考書等のおすすめはございますでしょうか。 よろしく御願い致します。 PHPの前は、javascriptにて簡単な動きを作る作業をしておりました。
つい最近ここで教えていただいたフォームのプログラムなのですが、どのように組み合わせるのかわからない状態でうまく反映できません。自分で出来ると思ったのですが出来ませんでした。 前回途中で質問終わらせてしまったことは後悔していますが今回もどうかご教授いただきたいです。 下記のように入力しましたが検索したあとに名前はフォームに表示されている状態なのですが、チェックボックスのチェックは検索した後に消えてしまいます。 チェックを検索したあとにも残るようにするにはどのように入力すれば良いでしょうか？ どうかよろしくお願い致します。 <?php $value=array(); //想定するデータを初期化しておく $value['name']=""; if(isset($_REQUEST['name'])){ $value['name']=htmlspecialchars($_REQUEST['name'],ENT_QUOTES,'UTF-8'); } $checked=array(); //想定するデータを初期化しておく $checked['team_id']=array(1=>"",2=>"",3=>"",4=>"",5=>""); if(isset($_REQUEST['team_id']) and is_array($_REQUEST['team_id'])){ foreach($_REQUEST['team_id'] as $val){ $checked['team_id'][$val]=" checked"; } } ?> <!DOCTYPE html> <html> <head> <meta charset="UTF-8"> <title>リーグデータ</title> <link rel="stylesheet" type="text/css" href="../common/style.css"/> </head> <body id="list"> <div id="main"> <form name="search_form" action="xxxxxxxx.php" method="post"> <input type="hidden" name="cmd" value="search" /> <table> <tr> <th class="th_top">選手名</th> <td class="td_top"> <input type="text" name="name" size="30" value="<?php echo "{$value['name']}" ?>"> </td> </tr> <tr> <th>チーム名</th> <td> <input type="checkbox" name="team_id[]" value="1"{$checked['team_id'][1]}/>名古屋 <input type="checkbox" name="team_id[]" value="2"{$checked['team_id'][2]}/>徳島 <input type="checkbox" name="team_id[]" value="3"{$checked['team_id'][3]}/>千葉 <input type="checkbox" name="team_id[]" value="4"{$checked['team_id'][4]}/>浦和 <input type="checkbox" name="team_id[]" value="5"{$checked['team_id'][5]}/>磐田 <br /> </td> </tr> <tr> <th class="th_middle"> ポジション </th>
先週からCakePHPの勉強を始めました。公式ドキュメントを見ながら少しずつ試しています。今はfindAllByを試しているのですが、サンプルどおりに記述してもうまく動きません。使用してるCakePHPのバージョンはほぼ最新の2.5.5です。 データを取得する — CakePHP Cookbook 2.x ドキュメント http://book.cakephp.org/2.0/ja/models/retrieving-your-data.html#findallby ◎findAllBy<x> サンプル # $this->User->findAllByEmailOrUsername('jhon'); と書くと ◎対応するSQL # User.email = 'jhon' OR User.username = 'jhon'; となると書いてあります。しかしこうはならず # User.email = 'jhon' OR User.username = null; というSQLになってしまい、当然検索結果も期待する結果になりませんでした。 試行錯誤した結果 # $this->User->findAllByEmailOrUsername('jhon', 'jhon'); と書けば、公式ドキュメントに書いてあるとおりのSQLが作成され、検索結果も期待する結果になりました。 プログラムの内容としては、ほぼブログチュートリアルと同じでそこに検索方法だけ変えただけです。すなわち「find('all')」から「findAllByEmailOrUsername('jhon')」などのように。 findAllByについて ・公式ドキュメントが間違っているのでしょうか？ ・バージョンによって挙動が異なるのでしょうか？ ・私の使い方や設定が間違っているのでしょうか？ 　というか、何かの設定によって使い方を変えることができるのでしょうか？ この点について教えてください。 よろしくお願いします。
cakephp-2.5.5を使っています。 以下のタイトルが出てきますが、どこで出力されているか分かりません。 // abc: // abc: // abc3 //ページタイトル 設定した値は以下で、2つめはどこか分かっていません。 layout $cakeDescription = __d('cake_dev', 'abc'); controller $this->set('title_for_layout','abc3'); view $this->assign('title_for_layout', 'ページタイトル'); layoutとviewには、<title>タグに何も指定していない状態です。 数時間調べて、さっぱりでした・・・。すいません、誰か教えてください・・・。 layoutの$cakeDescription = __d('cake_dev', 'CakePHP: the rapid development php framework'); を削除すると、タイトルに<pre class="cake-error"><a href="javascript:void(0);" onclick=・・・のようなエラーメッセージ出て、さらに悩んでいます。こちらも教えて頂けると助かります。
各アイテムの最新3件だけデータベースに残したいと思い、下記のようにしてみました。 動作を確認したところ問題なかったのですが、何か（無限ループする可能性があるなど）問題があるようでしたら、ご指摘いただけないでしょうか。 よろしくお願いいたします。 for ($num = 1; $num < 21; $num++){ // アイテムが20件ある場合 $sql = "SELECT COUNT(id) AS cnt FROM item where item_id=$num ;"; $res = mysql_query($sql, $conn) or die; $row = mysql_fetch_array($res, MYSQL_ASSOC); $count = $row["cnt"]; if($count<3){ // アイテムが3件より少なかったら何もしない } else{ $delete_count=$count-3; $sql = "delete from item where item_id=$num order by date limit $delete_count;"; $res = db_query($sql, $conn); } }
もともと考え方がおかしいのかも知れませんが PHPでデータをよみます。 mysql ではTEXTフィールドがあります $r=fread($fp, 長さ（可変長)); でこれからです。　Buf4がTEXTフィールド); $sql="insert into $tbn4 ( Buf4 ) values ($r); sql実行。データがはいりません。
アップロード画像を縮小するタイミングについて教えてください。 画像アップロードする際に縮小も済ませておく実装をよく目にするのですが、事前縮小せずに、画像を表示する際に縮小してもよいのでしょうか？ ■案1.画像アップロードする際に縮小 ・「元画像」＋「縮小画像」を保存 ・縮小画像表示は、事前作成した「縮小画像」を指定 ■案2.画像アップロードするだけ ・「元画像」のみを保存 ・縮小画像表示は、「元画像」にその都度GDやImagickで大きさを指定 ■質問 ・ほとんど「案1」で実装すると思うのですが、「案2」だと何がマズいのでしょうか？ ・事前作成せずにその都度処理するので、もしかすると画像表示とかが遅くなるのでしょうか？ ・それぞれのメリット／デメリットを教えてください
画像アップロード時のファイル名を、ハッシュ値に書きかえている実装をよく見るのですが、あれって別にハッシュじゃなくても良いのでしょうか？ ・例えば、下記URLにアップロードする際、画像ファイル名を(容易に推測されやすい)256.jpgに書き変えると、セキュリティ的にマズいのでしょうか？ ＜URL例＞ ・http://〇〇/256.php ■分からない点 ・「ブラウザから渡されたファイル名は汚染リスクがある」と書いてあったのですが、この意味は、「ブラウザから渡されたファイル名をそのまま使用してはいけない」ということだけでしょうか？ ・書きかえるファイル名は何でも良い？ ・上記のように、推測されやすいファイル名でも問題ない？ ■質問背景 ・ファイル名をハッシュ値に書き換えると、FTPとかで確認する際やりづらいかなと思い、質問しました
PHPの二次元配列データを、JavaScriptの二次元配列データとして使用したいのですが、どうやって変換すればよいでしょうか？
phpで会員制サイトの制作を勉強中です。 pdoでmysqlデータベースに接続しています。 セッションの「session_set_cookie_params」について質問ですが、 session_set_cookie_paramsで有効期限を設定する場合、 ログイン時にsession_set_cookie_paramsでセッションの有効期限を設定し、 他のページではsession_start()さえ記述すれば、 有効期限を過ぎると勝手にセッション変数のデータを空にしてくれるのでしょうか？ それとも全てのページにsession_set_cookie_paramsを書かなければならないのでしょうか？ プログラムを書いている上でセッションの動作がおかしい(有効期限が過ぎてもログアウトしない)のでsession_set_cookie_paramsの記述がおかしいのかと思い、質問しました。 また、セッション変数の有効期限を変数毎に個別に設定して削除する方法はないのでしょうか？ ご回答、よろしくお願いします。
あるwebページのボタンを自動で押すためのウェブアプリケーションを作りたいのですが、そのウェブページに入ったときにボタンを自動で選択してくれるってどうやったらできるのでしょうか？ PHP, Javascriptのどっちかでそのアプリケーションは作ろうと考えています！ 回答よろしくお願いします！
PHPでのドキュメントルートの指定方法がうまくいかず困っています。 マルチドメインで組んでいます。 公開ディレクトリのルートは /home/hoge/www になります。 wwwの中に/piyo/でマルチドメインを組んでいます。 →絶対リンクを/home/hoge/www/piyo/ ここに指定したいです。 あるサイトを見てcommon.phpを作成し、index.phpと同じ階層に置き、index.phpの頭に <?php include 'common.php'; ?> を指定すると設定ができると記載されていたので下記の様に設定しました。 // common.php // <?php // サーバー上の絶対パスを記入 // これは公開ディレクトリのルート(サイトのルートディレクトリ)と一致 $__DOC_ROOT__ = '/home/hoge/www/piyo/ <http://piyo.co.jp/> '; ?> // index.php // <?php include 'common.php'; ?> <!doctype html> <html lang="ja"> … <?php echo $_SERVER['DOCUMENT_ROOT']; ?> … </html> echoで呼び出してみましたがサイトのルートディレクトリが /home/hoge/www こちらになり変更されていませんでした。 これを /home/hoge/www/piyo/ に変更したいと思います。 ご回答よろしくお願い致します。
$itemから["a"]の値だけを取り出した配列を呼び出す関数を作成したいのですが、この様な配列の場合はどうしたら良いのでしょうか？ $item var_dump( $item ); array(1) { [0]=> object(data)#1 (5) { ["a"]=> int(1) ["b"]=> string(1) "2" ["c"]=> string(7) "string1" ["d"]=> string(7) "string2" ["e"]=> string(8) "keyword1" } [1]=> object(data)#2 (5) { ["a"]=> int(3) ["b"]=> string(1) "4" ["c"]=> string(7) "string3" ["d"]=> string(7) "string4" ["e"]=> string(8) "keyword2" } }
　最近、PHPの勉強を始めた者です。 　初心者本を読みながら、ようやくメールを送信するところまで来ました。 　mail関数やmb_send_mail関数を使って送るというのは分かったんですが、この方法を送ったメールのヘッダにちょっと問題が・・・。 　ロリポップサーバーにムームードメインの組み合わせて使っているんですが、Yahoo!のメールアドレスに送ったメールのヘッダに Received-SPF:none (users094.phy.lolipop.jp: domain of ◯◯◯◯@users094.phy.lolipop.jp does not designate permitted sender hosts) というものがついてしまいます。 　別にロリポップサーバーを使ってることが知られても構わないんですが、◯◯◯◯の部分が問題でして、ロリポップ内のＦＴＰ・WebDAVで使われてるアカウントが入ってくるんです。 　これがロリポップにログインするためのアカウントを少し入れ替えただけで、使ったことある人ならモロバレの状態。 　まあ、パスワードが分からなければログインは出来ないんですが、なんだか気持ち悪いんですよね(^_^; 　調べてみるとSPFというのはメールの認証か何かだそうですが、ネットで検索しつつ、ムームードメインのDNSにして、カスタムDNSでSPFの設定をしてみても、上記のヘッダはnoneのままでついてきます。 　これを何とか消す方法はないもんでしょうか？
phpmyadminについて質問です。 データベーステーブルを表示させようとすると、 ほとんどのテーブルは問題ないのですが、 たまに、メニュータブの下に、添付画像のような 「Current selection does not contain a unique column. Grid edit, checkbox, Edit, Copy and Delete features are not available.」 と表示されるテーブルがあります。 原因は何でしょうか？ また、どうやったら表示が消えるでしょうか？ ご回答、よろしくお願いします。
php5.3では動いていたプログラムをphp 5.4 で動かしたらwarning illegal string offsetが出て困っています。以下のプログラムでwarningが出ないようにするにはどのようにコーディングすればよいのでしょうか？ 例 $a = array('exists' => 'foo'); if ($a['exists']['non_existent']) { print 1; } print 2; exit;
下記の配列のデータをMySQLのデータベースに登録をしたいと思っています。 （参考）に記述しています内容で実行をしましたが、１つ目のデータしか登録がされず、 for文なども考え試行錯誤していましたが、うまく実行できない状況であります。 登録のための方法をご教授いただければと思います。よろしくお願いします。 array(3) { [0]=>"146-0082" [1]=>"東京都大田区" [2]=>"田中さん" array(3) { [0]=>"120-0015" [1]=>"東京都足立区" [2]=>"山田さん" -------------------- （参考） $sql = ('insert into table (number, adress, name) values (:number, :adress, :name)'); $stmt = $dbh->prepare($sql); $params = array( ":number" => $data[0], ":adress" => $data[1], ":name" => $data[2] );
phpでXMLを生成しています。 XMLをエディターで見るとほとんどの文字は正常に表示されているのですが、一部の文字だけが文字化けしています。 具体的には　究、岩、ど　の三つの文字だけです。 その三つの文字はいずれも同じ文字に文字化けしています。 cを丸で囲ったコピーライトの表記に使われる文字に似ています。 上記の文字のみなにかコピーライトに引っかかっているのでしょうか。 googleで色々と調べてみましたが、他の文字での文字化けの事例はあるのですが、上記の文字での事例は見つかりませんでした。 どなたかご教示願えませんでしょうか。 phpのバージョンはPHP Version 5.3.3です。 phpのあるディレクトリと同じディレクトリにhtaccessで以下の記述を入れています。 php_value mbstring.internal_encoding UTF-8 php_value default_charset UTF-8 php_value mbstring.http_output UTF-8 php_value mbstring.language UTF-8 php_value mbstring.http_input auto php_flag mbstring.encoding_translation On php_value output_handler mb_output_handler
○質問の主旨 先日、下記の質問をしました。 PHPのfor文とforeach文の使い方 http://okwave.jp/qa/q8812443.html この例では,for文とforeach文を使って、 ・果物の名前を4回繰り返す ・繰り返しの2回目と4回目は、"食べてください"という文字列を入れる というプログラムを実現しています。 今回は同じ出力をするにあたって、 繰り返しはforeachのみで実現したいと考えています。 どのように修正すればよろしいでしょうか？ ご存知の方がいらっしゃいましたら、 ご教示を願います。 ○質問の補足 このようなプログラムにしたいと考えています。 $fruits = array("りんご", "ばなな", "ぶどう", "みかん"); foreach ($fruits as $value) { // 果物の名前を4回繰り返して2回目と3回目は"食べてください"を入れる if (($i == 1) || ($i == 3)) { echo "食べてください"; echo "<br/>"; }; echo $value; echo "<br/>"; } 完成イメージはこんな感じです。 (1回目のループ) りんご ばなな ぶどう みかん (2回目のループ) 食べてください りんご ばなな ぶどう みかん (3回目のループ) りんご ばなな ぶどう みかん (4回目のループ) 食べてください りんご ばなな ぶどう みかん ○前回のプログラム for($i = 0; $i < 4; $i++) { if (($i == 1) || ($i == 3)) { echo "食べてください"; echo "<br/>"; }; $fruits = array("りんご", "ばなな", "ぶどう", "みかん"); foreach ($fruits as $value) { echo $value; echo "<br/>"; } }
http://www.vector.co.jp/soft/cmt/unix/net/se440000.html ↑こちらのphp埋め込み型ゲストブックを利用したいと思っています。 投稿の際に名前の入力が必須なようですが、 これを未入力の際にエラーではなく 「名無しさん」や「匿名」などの 代替テキストを投稿するようにするにはどうしたら良いのでしょうか。
PHPのfor文とforeach文を使って、 ・果物の名前を4回繰り返す ・繰り返しの2回目と4回目は、"食べてください"という文字列を入れる という出力を返したいと考えています。 完成イメージは次のとおりです。 (1回目のループ) りんご ばなな ぶどう みかん (2回目のループ) 食べてください りんご ばなな ぶどう みかん (3回目のループ) りんご ばなな ぶどう みかん (4回目のループ) 食べてください りんご ばなな ぶどう みかん しかし自分が作成したプログラムでは、 次の2点について問題があります。 ・すべての繰り返しの前に"食べてください"が入ってしまう ・for文のループが止まらない 完成イメージの通りのプログラムにするためには、 どのように修正すればよろしいでしょうか？ ご存知の方がいらっしゃいましたら、 ご教示願います。 ○質問の補足 自分が作成したプログラムは以下のとおりです。 for($i = 0; $i < 4; $i++) { if (($i = 1) || ($i = 3)) { echo "食べてください"; echo "</br>"; }; $fruits = array("りんご", "ばなな", "ぶどう", "みかん"); foreach ($fruits as $value) { echo $value; echo "</br>"; } } 以上、よろしくお願い申し上げます
PHPとJavaScriptの連携に困っています。以下のようにフラグを立てテキストボックスに代入しています。 frm.newdata.value = '<?php if(条件) $flg = true; echo $newdata; ?>' そしてフラグがてばメッセージを出します。 <?php if($flg) echo 'alert("このデータは登録済みです");'; ?> ところがフラグ（$flg）を共有化したいのですが、上下で別物扱いになります。上の処理では代入をしているのでechoでメッセージまでは出せません。 対応策ご存じであれば教えてください。
みなさん初めまして。 １つ質問させて頂きたいことがあります。 実用するかは不明ですが勉強がてら、PHP+MySqlで会員登録制の簡単なSNSサイトのようなものを作成してみたいと考えています。 そこでユーザのプロフページのようなものを作成したいのですが、 例えばAmebaのように http://profile.ameba.jp/*********/ こういったURLでページを表示させるには、どういった方法をとればよいのでしょうか？ ユーザアカウント単位でフォルダを作成してindex.phpを作成する方法は浮かんだのですが、アカウント単位でフォルダを作成するのは、あまり現実的ではない？と正直感じてしまい、何か方法があるのか？と、今回質問させて頂きました。 どなたかご教授頂ければ嬉しいです。よろしくお願いします。
お世話になります。 $arr1 = array(1,2,3); $arr2 = array(2,3,4); という配列が存在していたとき、これらすべてに共通する値を取り出すとき、 array_intersect($arr1,$arr2) で良いと思うのですが、上記に更に値があるか分からない配列（$arr3,$arr4）を比較したいときどのように記述すればよいでしょうか？ $array_list[] = $arr1; $array_list[] = $arr2; if($arr3 != NULL){$array_list[] = $arr3;} if($arr4 != NULL){$array_list[] = $arr4;} $array_list = implode(",",$array_list); と半ば強引に配列に追加したのですが、var_dump($array_list)したところ、 Array,Arrayとなってしまいました。 $arr3,$arr4に値が入っている場合と入っていない場合でif分岐させて、 array_intersect($arr1,$arr2) array_intersect($arr1,$arr2,$arr3) array_intersect($arr1,$arr2,$arr4) array_intersect($arr1,$arr2,$arr3,$arr4) の4パターンを書くこともできるかと思いますがスマートではないような気がしまして・・・。 なにかよい方法が有りましたらよろしくお願い致します。
下記の(変更前)から(変更後)のように配列の要素を結合し、 結合後の要素の数は減らしたいと思っています。 関数などを調べたですが、なかなか実現できない状況です。 ご教授いただければと思います。 よろしくお願いします。 (変更前） array(4) { [0]=>"郵便番号" [1]=>"東京都" [2]=>"大田区" [3]=>"氏名" (変更後) array(3) { [0]=>"郵便番号" [1]=>"東京都大田区" [2]=>"氏名"
いつもプログラムの質問でお世話になっております。 今回も誠に恐縮ですが今回もご教授いただけたらと思っております。 よろしくお願い致します。 現在、複数条件の絞込み検索のWEBアプリを制作中なのですが MySQLでのSQL文を仮に下記のように入力したら玉田と表示できるようにしたいのですが、何も表示されません。 いろいろ考えたのですが、SQL文の正解がわかりません。 どのように入力したら玉田という名前のみ表示されるのでしょうか？ 何卒よろしくお願いします。 SELECT code,name,team_name,price,position,gazou FROM mst_player_market WHERE 1 and (code IN (SELECT playerid FROM team WHERE team_id IN (1))) and (code IN (SELECT name,COUNT(*) FROM mst_player_market GROUP BY name HAVING name = 玉田)); テーブル名　mst_player_market code name price gazou position team_name 15 玉田　70000000 player_bustup_11.jpg FW 　　　　　名古屋 16 田口　 4000000 player_bustup_28.jpg MF 　　　　　名古屋 17 田鍋　 6000000 player_bustup_14.jpg MF 　　　　　名古屋 18 田中　 120000000 player_bustup_04.jpg DF 　　　　　名古屋 3 津田　 40000000 p4389_img2.jpg 　　　FW 　　　　　徳島　 24 長谷川　 30000000 p4399_img.jpg 　　　　　　GK 　　　　　徳島 25 山口　 30000000 photo021401851726.jpg MF 　　　　　　　　千葉 26 ケンペス 50000000 photo011401851481.jpg FW 　　　　　　　　千葉 テーブル名　team playerid team_id team_name 15 1 名古屋 16 1 名古屋 17 1 名古屋 18 1 名古屋 21 1 名古屋 22 1 名古屋 23 2 徳島 24 2 徳島 25 3 千葉 26 3 千葉 28 2 徳島 29 2 徳島
0,123,45,678,999　など、カンマ区切りの情報がある　data.txt　というファイルがあり、 別のPHPファイルにdata.txtの内容を書き出したい場合、 <?php echo file_get_contents("data.txt"); ?> と書くと全部表示されてしまいます。 data.txtの1行目で、2番目と3番目のカンマの間の数字（上の例ですと123）を書き出すには、どのように書いたらよいか、お分かりになる方教えて頂けませんでしょうか。 よろしくお願いいたします。
現在個人でWebサービスを開発しています。 環境はWindows8とパッケージされたEclipseのPHPのパッケージでXAMPPが付属しているやつです。 解凍するだけでほとんど設定いらずで開発できるのでPHPを触り始めた2005年から使っています。 このようにどっぷりWindowsなのですが、開発現場ではMacかLinuxが主流なのでしょうか？ いつかWeb業界で働きたいと思っていますが、それを見据えているなら今からでもMacに置き換えたほうが良いでしょうか？ それと書籍ではWindowsでの開発を解説した本がほとんどのようですがなぜでしょうか？ 著者は現場の人がほとんどですよね？ Windowsでの開発で何か問題が起きたということは今のところないです。 ですが業界に入るときに足かせになるのではないかと危惧しています（そもそも業界に入れるかはわかりませんが・・・） 開発環境についてその他にアドバイスなどがあればどうぞよろしくお願い致します。
ウェブ上のhtmlをPHPのfile_get_contents関数で抽出し、mb_convert_encodingをした後、必要なテーブル部分を抽出したのですが、その後の処理に困っています。 header("Content-Type: text/html; charset=UTF-8"); $page = file_get_contents ('http://ｘｘｘｘｘｘｘｘｘｘｘｘ.php'); $fp = mb_convert_encoding($page, "UTF-8", "ASCII,JIS,UTF-8,CP51932,SJIS-win"); $text = substr($fp, $letter, $num); substrで取り出した文字列を編集しているのですがうまくいきません。 取り出した内容は下記の内容で、これをテーブルの部分だけにしたいです。 preg_replaceを使って正規表現で処理するような気がしたので、色々と試しては見たのですが、タグと文字列を同時に消すことが出来ません。（タグだけを消すことは出来ます） ----------------------------------------------------------- <div id="momiji_box"> <p class="p_menu"><a name=menu_1 id=menu_1> <p> <table class="no_border"> <tr><td class="no_border_td"><h3 id="this_week_flower">洛北</h3></td></tr> </table> <div class="flower_photo"> <br />延暦寺の紅葉</div> <div class="flower_photo"> <br />曼殊院の紅葉</div> <div class="flower_photo"> <br />赤山禅院の紅葉</div> <p style="margin:0 0 10px;" class="c-fix">&nbsp;</p> <div class="clear_l"></div> <table class="border"> <thead> <tr> <th colspan=2>紅葉の名所</th> <th>電話番号（075）</th> <th>例年の見頃</th> <th>10月30日現在</th> </tr> </thead> <tbody> <tr> <td colspan=2>常照皇寺 </td> <td>853-0003</td> <td>11/上</td> <td>色付き始め</td> </tr> <tr> <td colspan=2>峰定寺 </td> ・・・・・・ /tbody> </table> </div> ----------------------------------------------------------- どうすれば、テーブル部分のみ抽出することができるでしょうか、ご教授宜しくお願いします。 【環境】 Windows7 PHP5.3 共用Xserver
あるプログラムで以下の処理があるのですが、 本日動作したログを確認したところ、 結果が"2014-12-01"となっており、 本来取得したかった"2014-11-01"ではありませんでした。 15日以上は来月の1日、14日未満は今月の1日を正しく返す処理にしたいのですが、 修正をする際の代替案がありましたらご教示お願いします。 ＜処理＞ function hoge() { if (15<= date('d')) { return date('Y-m-01', strtotime('+1 month')); } else { return date('Y-m-01'); } } echo hoge()."\n"; 以上
テキストボックスに、商品製造番号と商品番号という記入欄があり、最初の2つの数字がそれぞれ検索して一緒じゃなければエラーメッセージで「番号が合っていません。」と出てくるようにしたいのですが、どのように書けばいいのか教えていただきたいです。 商品製造番号[0144] 商品番号 [0163] [検索] ○ 商品製造番号[0544] 商品番号 [0563] [検索] ○ 商品製造番号[0211] 商品番号 [0145] [検索] ×　番号が合っていません。 商品製造番号[0522] 商品番号 [0244] [検索] ×　番号が合っていません。 というような形にしたいです。 ifを使えばいいのかsubstrを使えばいいのかissetを使えばいいのか分かりません。 よろしくお願いします。
PHPの中で下記ようなam()という関数？を使っている箇所があるのですが、Webで検索して みても使い方がよくわかりません。これはどういうものなのでしょうか？ $options = (is_array($options)) ? am($defaults, $options) : $defaults; extract(am($defaults, $options)); 御存じの方、御教示ください。
phpで検索結果画面の制作を勉強中です。 pdoでmysqlデータベースに接続しています。 現在、検索フォームの作成を勉強中です。 検索用のフォームに入力された文字に類似しているという条件（あいまい検索）のもと、 添付画像の上のようなデータベーステーブル内をSELECT COUNTし、 添付画像の下のように、検索に該当するそれぞれのカラムのデータと、そのデータがいくつ存在しているのかを表示させたいです。 SELECT COUNTでGROUP BYを使用すれば結果が取得できると教えていただき、以下のようなphpを記述しました。 //フォームに入力されたテキストをGETで渡し、プログラムで取得し、あいまい検索に対応させる。 $search = '%'.$_GET['search'].'%'; //現在表示している結果表示ページのページ数をURLから取得 $page = $_GET['page']; //SQLのLIMIT句用にデータのいくつめから取得するか$limitに入れる $limit = ($page-1) * 20; //該当するものをグループ化し、それぞれのデータ数をカウントする try{ $stmt=$db->prepare('SELECT COUNT 【住所】 FROM 【顧客情報】 WHERE search like :search GROUP BY 【住所】 LIMIT :limit , 20'); $stmt->bindValue(':search',$search,PDO::PARAM_STR); $stmt->bindValue(':limit',$limit,PDO::PARAM_INT); $stmt->execute(); }catch(PDOException $e){ $error = "エラー:".$e->getMessage(); } while($row = $stmt->fetch(PDO::FETCH_ASSOC)){ print $row['【住所】']; } ※検索フォームのタグは省略しています。 ※データベース接続は$dbで行っています。 ※該当したデータを1ページにつき、20件ずつ表示したいのでLIMIT句を使用しています。 実行したところ、結果はおろか、エラーも何も表示されませんでした。 個人的にはSQL文に間違えがあるというよりも、 while文以降で取得したデータの表示ができていないのではないかと思いますが、 「SELECT COUNT」の結果表示の方法をネットで調べても 答えになるものが中々見つかりませんでした。 また、添付画像の下のように、 取得したデータ名とそのデータの件数を一緒に表示するプログラムが理想なので、 どなたかご教授頂けると有難いです。 ご回答、よろしくお願いします。 ※ちなみに、正規化については理解しておりますが、今回は例示として住所を使用しました。
初歩的な質問ですみません。 MySQLにとあるテーブルがあって、 その中に 更新日時 という DATETIME 型のフィールドがあるのですが、 insert でレコードを追加する際にそこに現在日時をセットしようとして、 恥ずかしながらその方法がわかりません。 $sql = sprintf('INSERT INTO %s SET %s="%s", %s="%s"', 　　　　　　　　'tmp', 　　　　　　　　'mailAddr', e($mailAddr), 　　　　　　　　'update', date('Y/m/d H:i:s')); mysql_query($sql); とか、 $sql = sprintf('INSERT INTO %s SET %s="%s", %s=cast(now() as datetime)', 　　　　　　　　'tmp', 　　　　　　　　'mailAddr', e($mailAddr), 　　　　　　　　'update'); mysql_query($sql); とか、いろいろ調べて試してみたんですけど...。 上記のように、insert into xxx set～ を使う場合を知りたいです。 すみません。 よろしくお願いします。
WordpressのWelcartの商品画像アップロードにおいてされているように 特定の規則に基づいて名付けた画像のファイル名をパラメータとして 解析して処理し、特定のページやコンテンツと関連付けたり というようなことをしたいと考えています そこで区切り文字として記号を使いたいのですが 一般にファイル名として安全とされる-_を区切り文字にしていた場合 パラメータで指定したい特定のページやコンテンツの 識別名に-_が使われてると この名前を指定できなくなってしまいます そこで-_以外の記号を区切り文字にできないかと考えているのですが この用途の範囲において-と_以外で使える記号はあるでしょうか？
phpで検索結果画面の制作を勉強中です。 pdoでmysqlデータベースに接続しています。 添付画像のように、 重複しているデータをひとつにまとめ、それぞれの重複数を取得するようなSQL文はないでしょうか？ ちなみにできれば、添付画像のように、 フォームで入力されたテキストをもとに、 WHERE文でカラム名をあいまい検索をした上で 該当する重複レコードのカラム名を1つだけ表示し、その横に重複数を表示したいです。 フォームのテキストをもとにあいまい検索をする方法は理解しておりますので、 該当する重複レコードのカラム名を1つだけを取得し、その重複数も取得できるようなSQL文があれば教えていただきたいです。 色々と試しては見たのですが、中々上手くいかずに悩んでいます。 ご回答、よろしくお願いします。
phpで検索結果画面の制作を勉強中です。 pdoでmysqlデータベースに接続しています。 検索フォームに入力されたテキストデータを条件に tableA内をあいまい検索をして 必要項目columnA、columnB、columnCを取得し、 htmlのテーブルの<td></td>に それぞれ$row['columnA']、$row['columnB']、$row['columnC']を入れ、 while($row = $stmt->fetch(PDO::FETCH_ASSOC)で繰り返すことで テーブル一行ごとに取得できたデータを１つ記載して結果として表示するプログラムを書き、うまく稼働させることができました。 問題は、今度はtableB内で、tableAで取得したcolumnAとtableBのcolumnDの値が同じという条件のもと、 該当レコードのcolumnE、columnFを取得して、 検索結果のテーブルに、tableAの取得データと同じ行で データを表示させたいという点です。 単純に、上記のうまく稼動したテーブル内の <td></td>内に $stmtb=$db->prepare('SELECT columnE,columnF FROM tableB WHERE columnD :columnA'); $stmtb->bindValue(':columnA',$row['columnA'],PDO::PARAM_STR); $stmtb->execute(); $row_b = $stmtb->fetch(PDO::FETCH_ASSOC); print htmlspecialchars($row_b['columnD']); というプログラムを記述しましたが、 テーブル上にデータが表示されませんでした。 どのようにしたら同一テーブル行内で別テーブルの該当データを表示することができるのでしょうか？ イメージが伝わりづらいかと思いますので以下、テーブルとカラムに名称を付けて、 表示したいテーブルのイメージとデータベーステーブルのイメージの画像を添付します。 添付画像の 顧客No.・顧客名・住所のデータが顧客情報用のテーブルに格納されていて 顧客No.・購入品・購入日のデータが購入品ログ用のテーブルに格納されている 状態で、 顧客No.と照合した購入品ログ用テーブル内の購入品のデータと購入日のデータを 添付画像のように、同じテーブルの行で表示をさせたいです。 ご回答、よろしくお願いします。
PHP多次元配列で特定キーが重複している箇所をランダムで1つだけ表示したい ・id基準 ■元配列 Array ( 　　[0] => Array 　　　　( 　　　　　　[id] => 5 　　　　　　[name] => "佐藤" 　　　　　　[age] => 5 　　　　) 　　[1] => Array 　　　　( 　　　　　　[id] => 5 　　　　　　[name] => "伊藤" 　　　　　　[age] => 7 　　　　) 　　[2] => Array 　　　　( 　　　　　　[id] => 5 　　　　　　[name] => "鈴木" 　　　　　　[age] => 12 　　　　) 　　[3] => Array 　　　　( 　　　　　　[id] => 8 　　　　　　[name] => "山田" 　　　　　　[age] => 17 　　　　) 　　[4] => Array 　　　　( 　　　　　　[id] => 8 　　　　　　[name] => "奈良" 　　　　　　[age] => 2 　　　　) ■取得したいランダム結果配列例1 Array ( 　　[0] => Array 　　　　( 　　　　　　[id] => 5 　　　　　　[name] => "佐藤" 　　　　　　[age] => 5 　　　　) 　　[3] => Array 　　　　( 　　　　　　[id] => 8 　　　　　　[name] => "山田" 　　　　　　[age] => 17 　　　　) ■取得したいランダム結果配列例2 Array ( 　　[1] => Array 　　　　( 　　　　　　[id] => 5 　　　　　　[name] => "伊藤" 　　　　　　[age] => 7 　　　　) 　　[4] => Array 　　　　( 　　　　　　[id] => 8 　　　　　　[name] => "奈良" 　　　　　　[age] => 2 　　　　) ※1次元目のキーは元キーを維持していなくても構いません
パーフェクトPHPという書籍を見ながら作業を進めているのですが行き詰ってしまいました。 xamppのドキュメントルートの設定のところです。 ・httpd-vhosts.confファイルに以下の文章を NameVirtualHost *:80 <VirtualHost *:80> ServerName study.localhost DocumentRoot C:/xampp/htdocs/study.localhost DirectoryIndex index.php index.html <Directory "C:/xampp/htdocs/study.localhost"> AllowOverride All Allow from All </Directory> </VirtualHost> ・hostsファイルに以下の文章を 127.0.0.1 study.localhost 上記の２つを書き込むことによって ブラウザからhttp://study.localhost/にアクセスできるようになる。 と書いてあるのですが書き込んでもアクセスができず以下のように表示されます。 --------------------------------------------------------------------------- Object not found! 要求された URL は本サーバでは見つかりませんでした。 もし手入力で URL を入力した場合は、綴りを確認して再度お試し下さい。 サーバーの障害と思われる場合は、ウェブ管理者までご連絡ください。 Error 404 study.localhost Apache/2.4.10 (Win32) OpenSSL/1.0.1i PHP/5.5.15 --------------------------------------------------------------------------- 何がいけないのでしょうか？ 書籍にはこの部分はあっさり書かれており何がいけないのか分りません。 Apache、MySQLの起動はできています。 httpd-vhosts.confファイルへの書き込みを行わなければXampp for Windowsのページも出てきます。 PCは windows7を使用しています。 xamppはv3.2.1です。
現在、データベースの値をPHPExcelにてxls形式にて出力する システムを組んでおります。 これを.csv形式にてダウンロードさせたいです。 下記は、現状のExcel形式ダウンロードのソースです。 こちらをcsv形式にするべく、header部分をx-csv やファイル名を.csvにしてみる等を試しましたが、 ブラウザで開くとこのウェブページにアクセスできませんとなってしまいます。 処理が止まるのは、print ...;で確認して行くと、 $writer = PHPExcel_IOFactory::createWriter($book, "Excel5"); を$writer = PHPExcel_IOFactory::createWriter($book, 'csv');に 変更している位置でした。 xlsでテンプレート、内容を編集し、→csvで出力が行いたいです。 お詳しい方、どうぞ、ご教授のほど、よろしくお願い致します。 //PHPExcelをインクルード require_once(dirname(__FILE__) . '/Classes/PHPExcel.php'); require_once(dirname(__FILE__) . '/Classes/PHPExcel/IOFactory.php'); //オブジェクトを生成 $book = new PHPExcel(); $filepath = "./templates/sample.xls"; $reader = PHPExcel_IOFactory::createReader("Excel5"); $book = $reader->load($filepath); //シート設定 $book->setActiveSheetIndex(0); $sheet = $book->getActiveSheet(); $sheet->setTitle('Sample'); //シート名指定 ～セルに値を入れる処理～ // Excel形式で出力する //$outputFileName = "sample.xls"; //header('Content-Type: application/vnd.ms-excel'); $outputFileName = "sample.csv"; header('Content-Type: application/x-csv'); header('Content-Disposition: attachment;filename="' . $outputFileName . '"'); header('Cache-Control: max-age=0'); //$writer = PHPExcel_IOFactory::createWriter($book, "Excel5"); $writer = PHPExcel_IOFactory::createWriter($book, 'csv'); $writer->save('php://output');
以前PCにApache24を入れたんですが今回xamppを使うにあたってポートがぶつかってしまいました。 Apache24を消そうと思ったのですがアンインストール欄に存在せず、フォルダを消そうにも使用中で消せないと言われます。 フォルダの中にアンインストールのexeも存在していませんしどうやって消せばいいのか分りません。
ネット通販で楽天やヤフオクなど、いろんなショッピングモールに出品をしているのですが、商品の在庫が一つのモールで売れてしまったときに一括で一つの値をゼロに変えただけで、全モールの同じ商品の在庫がゼロになる仕組みを作りたいのですが、それに対してAPIという技術が必要だと聞きました。調べてみたのですが、いろいろな種類があるみたい？なのとやはり僕の知識が足りため、よくわからないなーっというとこで終わってしまっています。 僕のレベルは、PHPに関して、コードを見ればどこでどういう操作をしているか、それを見ながら、グーグル検索しながら、改造をするくらいはできます。しかし、初めからシステムを作るとなると（例えばメールフォームで情報を入力させて、特定のメアドにその情報を伝える等）どのコードを打ったら特定のメアドにSubmitできるのだろうと悩んでしまうレベルです。 うだうだ言ってますが、ここからが本題です。 APIを学ぶ上で、おそらく僕のレベルだとそのレベルに達していないと思うので、何を学べばAPIを学ぶ基礎ができるのか、もしくはAPIを直接学ぶとしたなら、どの参考書がいいか、またはスクールに通った方がいいのか、意見をくださるとうれしいです。 何か説明で足りないところがあったら追記しますので、みなさんご回答よろしくお願いします！
PHPかJavaScriptにてテキストボックスに入力された日本語をローマ字に変換する仕組みを探しています。 仮名だけなら手におえますが、漢字になると手におえません。 Webサイト上で処理したいため、ツールではなくライブラリやサンプルコードを探しています。 ご存じならご教授ください。
プログラミングは全くの素人です。 ネット上と「スラスラわかるPHP」という初心者向けの本を参照して、特定の単語を検索して自動で公式RTするbotを作成しています。 動作は問題ないのですが、RT後の結果を取得したいのです。 foreach ($jset['statuses'] as $result) { $id = $result['id']; try{ echo $twObj->OAuthRequest( 'https://api.twitter.com/1.1/statuses/retweet/'.$id.'.json', 'POST', '' ); } catch (TwistException $e) { echo '<BR>エラー'; } } このプログラムを Google Apps Scriptを使って function getURL() { var apiURL = "http://xxxxxxxxxxxx/bot.php"; var r = UrlFetchApp.fetch(apiURL); if (r.getResponseCode() == 200) { var body = r.getContentText(); Logger.log(body); } という記述で10分間隔で叩いて動かしています。 最初は叩くごとに結果をGASでメール送信させていたのですが、「回数が多すぎる」とエラーになってしまいました。 こちらとしても、わざわざメールが大量に送られてしまうので毎回メールが来るのはパスしたいです。 RT後に {"created_at":"Mon Oct 13 14:21:50 +0000 2014","id":0000000000000,"id_str":"0000000000000",～} と返ってくる値のうち、IDや日時、text、ユーザー名、を抜き出して、textファイルかMySQLに保存したいのです。 どうしたらいいでしょうか？ また、リツイート済みのものをリツイートしようとすると {"errors":"sharing is not permissible for this status (Share validations failed)"} と返ってきます。TwistExceptionで拾えていないようなのです。 こちらの対処法だけでも、お願いします<(_ _)>
PHPの学習をしています 今回phpのライブラリを使いたいと思い調べてみたところ、 Githubやcomposerにたどり着きました 自分なりの解釈では Githubやcomoserはライブラリをつなぐ中間ツールのような印象を受けたのですが、 例えばこれをxamppなどにインストして利用することができるのだというところまでたどり着きました しかし、これをphpが使える無料サーバーで使うにはどうしたらいいのでしょうか 無料サーバーにGithubやcomposerをインストするというのは違うような気がしますし、 Githubやcomposer経由で取得したライブラリを個別にサーバーに上げる？ということになるのでしょうか、もしくは自分でサーバーを持っている人専用ということになるのでしょうか
viewにデータを送るときに、1の　$this->set() と2の　$this->request->dataは、 どう違うのでしょうか？ ご教授ください。 public function view($id = null) { // レコードを選択 $this->Post->id = $id; // レコードデータを取得しビューへ送る $this->set('post', $this->Post->read());---------1 } public function edit($id = null){ $this->Post->id = $id; if($this->request->is('get')) { $this->request->data = $this->Post->read();-------2 }
現在phpのプログラムを勉強しています。 youtubeの検索結果ページや個々の動画視聴ページURLを見て気になったのですが、 https://www.youtube.com/results?search_query=[検索キーワード] https://www.youtube.com/watch?v=[動画の識別コード] のようなURLの場合、 ?以降のserch_query=[検索キーワード]やv=[動画の識別コード]は$_GETの取得だということは分かるのですが、 ?直前のresultsやwatchは何を表しているのでしょうか？ 結果表示ページや視聴ページはそれぞれコンテンツ(検索キーワードや動画コード)だけを書き換えれば、 ページ自体は共通の型となるプログラムファイルを使うのが効率的だと思うので、resultsやwatchはその型となるファイルのファイル名かと思っているのですが、 ファイルの拡張子がなく、$_GETのデータが記述されているのは拡張子を隠しているからでしょうか？ また、URLをresultsやwatchまで記述してページを読み込んでみたところ、 TOPページに飛ばされました。 これは、resultやwatchのプログラム内で、取得する$_GETのデータが存在しない場合、TOPページに戻すという仕組みを記述しているからでしょうか？ また、最近のWEBページはほとんどがURLにファイルの拡張子がないように見受けられますが、 ファイルの拡張子というのは隠した方が良いのでしょうか？ ご回答、よろしくお願いします。
下記のPHPスクリプトにおいて、updateMemo()関数の中で、テストで、 echo 'in update'; として、関数内に入ったら、文字列表示をするようにしているのですが、 更新ボタンを押しても、updateMemo()関数の中に入ってきません。（in update　が表示されません） 関数のコールの仕方が、onclick=の部分でまちがっているのでしょうか？ 教えていただきたいです。 <?php ////////////////////////// // メモ内容の閲覧、更新 // ////////////////////////// $sid = (int)$_GET['sid']; var_dump($sid); $con = mysql_connect("*****", "*****", "*****"); // リモートのMySQLデータベースサーバーに接続する mysql_select_db("*****-ideamemo"); // データベースサーバーに存在する（myPHPAdminで作成済みの）データベースを選択する $sql = "SET NAMES utf8;"; mysql_query($sql); $sql = "SELECT * FROM ideamemo_table WHERE sid=$sid;"; $result = mysql_query($sql, $con) or die(mysql_error()); $row = mysql_fetch_row($result); mysql_close($con); //$row[0] = (int)$row[0]; // string⇒int にキャスト echo '<form name="form1" method="POST" action="deleteUpdate.php">'; echo '内容<br>'; echo '<textarea name="textarea" cols="100" rows="30">'.$row[3].'</textarea>'; echo '<br>'; echo '<input type="button" value="更新" onclick="<?php updateMemo('.$sid.');?>">'; //echo '<input type="button" value="更新" onclick="updateMemo();">'; echo '<input type="button" value="削除" onclick="deleteMemo('.$sid.');">'; echo '<input type="button" value="トップページへ" onclick="location.href=\'main.php\'">'; echo '</form>'; var_dump($row[2]); function updateMemo($sid){ //function updateMemo(){ echo 'in update'; //var_dump($sid); //exit; date_default_timezone_set("Japan"); $update = date(Y年m月d日（D）H時i分s秒); $textarea = $_POST['textarea']; var_dump($textarea); var_dump($update); $con = mysql_connect("*****", "*****", "*****"); // リモートのMySQLデータベースサーバーに接続する mysql_select_db("LAA0471050-ideamemo"); // データベースサーバーに存在する（myPHPAdminで作成済みの）データベースを選択する $sql = "SET NAMES utf8;"; mysql_query($sql); $sql = "UPDATE ideamemo_table SET contents = '$textarea', update_date = '$update' WHERE sid=$sid;"; $result = mysql_query($sql, $con); mysql_close($con); //header("Location: main.php"); } function deleteMemo(int $sid){ echo 'in delete'; $con = mysql_connect("*****", "*****", "*****"); // リモートのMySQLデータベースサーバーに接続する mysql_select_db("LAA0471050-ideamemo"); // データベースサーバーに存在する（myPHPAdminで作成済みの）データベースを選択する $sql = "SET NAMES utf8;"; mysql_query($sql); $sql = "DELETE FROM ideamemo_table WHERE sid=$sid;"; $result = mysql_query($sql, $con); mysql_close($con); //header("Location: main.php"); } ?>
先月からPHPを勉強し始めた初心者です。 質問文で分からないことも多くあるかとは思いますが、補足をするのでご指摘ください。 Smartyのサンプルプログラムを流用しながら、フォームを作成しています。 フォームで繰り返し同じ名前の要素を使いたかったため、配列を使いたいと思っています。 （イメージとしては、複数人の名前・年齢といった情報をName[],Age[]という配列にしたいです。） PHPのページで確認するとnameに配列名を入れれば配列として扱えるようです。 http://php.net/manual/ja/faq.html.php#faq.html.arrays これをSmartyで扱おうとしています。 --コントローラー------- $this->form->addElement('text', 'Name', '名前', ['size' => 30]); --テンプレート------- <FONT size="2">{$form.Name.label}：</FONT></TD> <TD width="79%"> {if $form.Name.error } <font size="2" color="red">{$form.Name.error}</font><BR> {/if} {$form.Name.html}</TD> --------- 上記のようであれば動作するのですが、単純にNameをName[]とした場合には下記のエラーが出て動作しません。 Fatal error: Cannot use [] for reading in ～ファイル名、行数 良い方法があればご教授お願いいたします。 分かりにくい質問で申し訳ないです。
いつもお世話になっております。 PHP経験者の方にとっては、どうしようもない質問だと思いますがどうかよろしくお願いします。 現在HTML、PHP、MYSQLを使って検索のWebアプリを作成しております。 検索結果を表示して検索件数も表示することはできたのですが、結果と件数の表示位置をそれぞれ別々に指定するにはPHP側でどのように分け、HTML側でどのように書けばいいのか調べても全く分かりませんでした。 本当に何か簡単なサンプルでもありましたら教えていただきたいです。 よろしくお願いします。
わからないところがあるので教えて下さい。 （コード） <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www. w3.org/TR/xhtmll/DTD/xhtmll- transitional.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> <title>PHP入門</title> </head> <body> <?php require('dbconnect.php'); $page = $_REQUEST['page']; if($page =='') { $page =1; } $page = max($page, 1); //最終ページを取得する $sql ='SELECT COUNT(*) AS cnt FROM my_items'; $recordSet = mysqli_query($db, $sql); $table = mysqli_fetch_assoc($recordSet); $maxPage = ceil($table['cnt'] /5); $page = min($page, $maxPage); $start = ($page - 1) * 5; $recordSet = mysqli_query($db, 'SELECT m.name, i.* FROM makers m, my_items i WHERE m.id=i.maker_id ORDER BY id DESC LIMIT ' . $start . ',5'); ?> <p><a href="input.php">新しい商品を登録する。</a></p> <table width="100%"> <tr> <th scope="col">ID</th> <th scope="col">メーカー</th> <th scope="col">商品名</th> <th scope="col">価格</th> <th scope="col">編集・削除</th> </tr> <?php while($table = mysqli_fetch_assoc($recordSet)) { ?> <tr> <td><?php print(htmlspecialchars($table['id'])); ?></td> <td><?php print(htmlspecialchars($table['name'])); ?></td> <td><?php print(htmlspecialchars($table['item_name'])); ?></td> <td><?php print(htmlspecialchars($table['price'])); ?></td> <td><a href="update.php?id=<?php print(htmlspecialchars($table['id'])); ?>">編集</a> <a href="delete.php?id=<?php print(htmlspecialchars($table['id'])); ?>" onclick="return confirm('削除してもよろしいですか?');">削除</a> </td> </tr> <?php } ?> </table> <ul class="paging"> <?php if($page > 1) { ?> <li><a href="index.php?page=<?php print($page - 1); ?>">前のページへ </a></li> <?php } else { ?> <li>前のページへ</li> <?php } ?> <?php if($page < $maxPage) { ?> <li><a href="index.php?page=<?php print($page + 1); ?>">次のページへ </a></li> <?php } else { ?> <li>次のページへ</li> <?php } ?> </ul> </body> </html> 参考書？はよくわかるPHPの教科書5.5対応なのですが、一番初めにこのファイルを開くと Notice: Undefined index: page in C:\xampp\htdocs\shop\index.php on line 14っとエラー？が出ます。 次のページ、前のページを押すとエラー？は消えるのですが、とっても気になります。 なるべくなら、エラーを非表示にせずにプログラム内で問題を解決したいのですが・・・ 初心者なのでどうして良いかわかりません。 出来れば、とってもわかりやすい解決を出来ればお願いしたいです。（馬鹿なので・・・） よろしくお願いします。
mb_send_mailでbccではなくtoで複数アドレスへ送信したいのですが、メールを受け取った人が他人のアドレスが見えない状態で送信したいです。 カンマで区切った複数アドレスをtoに指定してしまうと他人のアドレスが丸見えですよね？ この場合、mb_send_mailをアドレス数分だけループさせて送信するしかないのでしょうか？ その場合、100件くらいならsleepさせずにループで100回送信しても問題ないのでしょうか？ メールの容量は非常に小さいです。 共用レンタルサーバーでの運用です。 どうぞよろしくお願い致します。
固定ページに　　[gallery]　　とショートコードを入れても何も表示されません。 メディアには500件以上画像が登録されている状態です。 表示側のソースを見ると、[gallery]という文字すらなくなっています。 なにか原因わかる方、いらっしゃいますでしょうか？
以下のようなコードで、postで投げられた値を、for文で、添え字を組み立てて受け取って表示したいのですが、添え字の生成が間違っているのか、うまくいきません。 何を修正すればよいか教えてください。 <form action="" method="post"> <input type="hidden" value="A" name="name_0"> <input type="hidden" value="B" name="name_1"> <input type="hidden" value="C" name="name_2"> <input type="hidden" value="D" name="name_3"> <input type="submit"> </form> <?php for($i =0; $i < 4; $i++){ if (!empty($_POST['name_$i'])) { print $_POST['name_$i']; } } ?>
phpのプログラムにお詳しい方に質問です。 「recent-tweets-widget」というプラグインを使っているのです。 wordpressにツイッターの更新内容を表記できるものです。 そこでお伺いしたいのですが、ツイッターの更新日の表記が下記のようになっています。 「21 hours ago」 これを下記のような日付、月、年に変更するにはプログラムをどう変更したら いいでしょうか？ 「8 October 2012」 面倒な質問で大変恐縮ですが、どなたかお詳しい方教えてください。 【以下プログラムの日付表記部分】 //convert dates to readable format if (!function_exists('tp_relative_time')) { function tp_relative_time($a) { //get current timestampt $b = strtotime('now'); //get timestamp when tweet created $c = strtotime($a); //get difference $d = $b - $c; //calculate different time values $minute = 60; $hour = $minute * 60; $day = $hour * 24; $week = $day * 7; if(is_numeric($d) && $d > 0) { //if less then 3 seconds if($d < 3) return __('right now','tp_tweets'); //if less then minute if($d < $minute) return floor($d) . __(' seconds ago','tp_tweets'); //if less then 2 minutes if($d < $minute * 2) return __('about 1 minute ago','tp_tweets'); //if less then hour if($d < $hour) return floor($d / $minute) . __(' minutes ago','tp_tweets'); //if less then 2 hours if($d < $hour * 2) return __('about 1 hour ago','tp_tweets'); //if less then day if($d < $day) return floor($d / $hour) . __(' hours ago','tp_tweets'); //if more then day, but less then 2 days if($d > $day && $d < $day * 2) return __('yesterday','tp_tweets'); //if less then year if($d < $day * 365) return floor($d / $day) . __(' days ago','tp_tweets'); //else return more than a year return __('over a year ago','tp_tweets');
<?php /* 配列の作成 */ $array = array($name, $telephone, $email); /* ファイルポインタをオープン */ $file = fopen("information.csv", "a"); /* CSVファイルを配列へ */ if( $file ){ var_dump( fputcsv($file, $array) ); } /* ファイルポインタをクローズ */ fclose($file); ?> 上記のように記載した時、windowsのchromeでみると文字化けしてしまいます。 どのような記述をすれば、文字化けしないか教えてください。
プログラミングで拡張子がmp3かwavの音声ファイルの音声を重ねたいです． 片方をBGMとして結合したいので，二つの音が重なるように結合したいです． どうすれば，できるのでしょうか？よろしくお願い致します． 単純な音声結合は cat 1.mp3 2.mp3 > total.mp3 できそうなのは確認しました． できたらPHPでやりたいです．
現在、phpのセッションについて学習しています。 開発環境はxamppでMySQLデータベースにPDOで接続しています。 セッションについていくつか質問があります。 セッションを使った認証の流れですが、 ログインフォーム画面で、session_start()し、ログインの認証が成功したらsession_regenerate_idで新しいセッションを発行⇒ログインが必要な画面でセッションの有無を確認 という流れで良いのでしょうか？ セッションハイジャック対策にsession_regenerate_idをするようですが、 これは全てのページで毎回行ったほうが良いのでしょうか？ セッションIDの受け渡しはcookieに保存する方法とURLに含む方法があり、 セッションハイジャック対策について記述しているサイトではcookieが推奨されている雰囲気ですが、 PHPマニュアル(http://php.net/manual/ja/session.idpassing.php)では信頼性がないとあります。 どちらを使うのが良いのでしょうか？ セッションの有無のチェックはsession_start()を記述するだけでサーバーが行ってくれるのでしょうか？ $SESSIONにセッションIDを保存してissetで調べるといった記述が必要なのでしょうか？ メールアドレスとパスワードでのログイン認証を実装したいのですが、 その場合、マイページでユーザー情報を表示したい際、ログイン時に入力したメールアドレスを$SESSION[email]に格納し、マイページのphpプログラムにて、$SESSION[email]に格納されたメールアドレスを検索条件にしてSELECTで他の情報を取得したら良いのでしょうか？ メールアドレスを$SESSION変数で受け渡しするのはセキュリティ上危険でしょうか？（危険であれば内部管理用のユーザーIDを$SESSIONに格納してデータを取得しようと思います。） 基本的なセッションの知識がないため、質問の数が多くなってしまいましたが、 答えられる範囲で良いのでご回答頂けると有難いです。
メールアドレスを使わずサイト内だけでメッセージのやりとりをできるようにする スクリプトをフリーまたは有料で配布してないでしょうか。 自分のレンタルサーバに設置して利用できるならCGIでもPHPでも問いません。 希望の仕様は下記のような感じです。 ・数人での利用を考えています。 ・メールアドレスを登録しなくても良い。 ・個々でも管理者でもどちらでも良いのでユーザ登録(ID、Pass)を行う。 ・登録ユーザIDに対してメール送信可能。 ・受信箱で届いたメールを見ることができ、返信も可能。 ・JPG等のファイル添付可 無ければ上記を満たすような別サービスでも構いません。 メールアドレスを教え合わなくてもやり取りができる事だけが絶対条件です。 よろしくお願いいたします。
file_get_contents の返り値が false で困っています!! Docomoさんがエーアイさんの音声合成APIを提供しています． エーアイの音声合成APIの中でも，「SSML」を利用しようとしています． ・ドコモさんのHP https://dev.smt.docomo.ne.jp/?p=docs.api.page&api_docs_id=70 ・SSMLについて https://dev.smt.docomo.ne.jp/?p=docs.api.page&api_docs_id=71#tag01 SSMLを利用しようとPHPで実装して実行するも file_get_contents でエラーになってしまいます． （エラー：failed to open stream: HTTP request failed! ） コードは以下のように記述しました． <?php // コード書く際に参考にしたサイト // http://www.d-labo.net/laboratory/php/7001.php // http://stackoverflow.com/questions/9412650/how-to-fix-411-length-required-error-with-file-get-contents-and-the-expedia-xml function post($url, $data) { if (!ini_get('allow_url_fopen')) throw new Exception("Not Allowed URL Open!"); //headersは仕様通りに記述したつもり $headers = array( 'Content-Type:application/ssml+xml', 'Accept:audio/L16', 'Content-Length:'.sprintf("%d",strlen($data)) ); //methodは必ずPOSTと仕様書にあった $stream = stream_context_create(array('http' => array( 'method' => 'POST', 'header' => implode("\n",$headers), 'content' => $data ))); //XXX: file_get_contentsの返り値が必ず false になってしまう return file_get_contents($url, false, $stream); } ////// usage sample ////// 申し訳ないのですが，APIKEYを第三者に提供することはできません． try { $url = 'https://api.apigw.smt.docomo.ne.jp/aiTalk/v1/textToSpeech?APIKEY=XXXXXXXXXX'; $xml = '<?xml version="1.0" encoding="utf-8" ?><speak version="1.1"><voice name="nozomi">エーアイの音声合成エンジンによる音声です。</voice><break time="1000ms" /><voice name="seiji">エーアイの音声合成エンジンによる音声です。</voice></speak>'; $hoge = post($url,$xml); var_dump($hoge); } catch (Exception $e) { var_dump($e); } ?> 以上のコードが記述されたファイル（text_to_voice.php）をターミナルで実行 $ php text_to_voice.php Warning: file_get_contents(https://api.apigw.smt.docomo.ne.jp/aiTalk/v1/textToSpeech?APIKEY=XXXXXXXXX): failed to open stream: HTTP request failed! in text_to_voice.php on line 26 bool(false) 以上になります．どうやったら file_get_contents の返り値が false じゃなくなるのか知りたいです． よろしくお願い致します． 画像にはリクエストヘッダーの内容とAPIのURLが記述されており， 画像にあるのを参照しました．
PHPよりファイルをアップロードするとタイムアウトになる現象が発生して困っています。 利用しているのはCORESERVERで、以前までは起こらなかったのですがここのところ頻繁に症状が発生します。アップロード時何も操作が出来なくなり、数分経過後500エラーが帰ってきます。 これはどういった原因が考えられますでしょうか？ 時折「sql server has gone away」というのが表示されます。MySQLを利用しています。 ただ、アップロード容量は50MB程度ありますし、アップするデータは数KBであってもエラーになるので容量指定の問題ではなさそうなのです。(phpinfoから確認してみました) お詳しい方で、何か思い当たる原因などありましたらアドバイスをよろしくお願いします。 また、解決する為にはどういった方法で1つ1つ原因を突き止めていけば宜しいでしょうか、このあたりも合わせてアドバイスいただけると助かります。よろしくお願いします。
phpでmysql_queryを使って以下の文を送るとエラーが出ます。 どうも、WHERE句で数字比較をするとダメなようです。 SELECT * FROM table1 LEFT OUTER JOIN table2 ON table1.name=table2.name WHERE turn<5 何がいけないのでしょうか？ ・数字の５の部分はHTMLのテキストボックスからPOSTで貰っています。 ・WHERE句が無いとちゃんと動く。 ・WHERE句でLIKEを使った文字列比較は動く。 ・turnはphpMyAdminで見てもint(11)になっている。 ・実際は複数テーブルを連結したものです。わかりにくいので省きました。 ・PHP：5.4.29 ・MySQL クライアントのバージョン: 5.5.28 ・サクラレンタルサーバー（スタンダード）上での動作。
以下のソースで、リンクが押された文字をXに変更するということを実現したいのですが、なぜかうまくいきません。 リンクを押して、その文字を引数にして関数changeXを実行し、その文字がnameのhiddenのvalueをXに変更し、postでフォーム送信し、その文字がnameの$_POSTに値が入っていればそれをその文字の配列に代入して、表示するという風にしています。 どこを改良すれば、実現できるか教えてください。 <?php print "<form name='form1' method='post' action=''>"; $a = array("A"=>"A", "B"=>"B", "C"=>"C", "D"=>"D"); if(isset($_POST['A'])){ $a["A"] = $_POST['A']; }elseif (isset($_POST['B'])) { $a["B"] = $_POST['B']; }elseif (isset($_POST['C'])) { $a["C"] = $_POST['C']; }elseif (isset($_POST['D'])) { $a["D"] = $_POST['D']; }; function showA(){ global $a; foreach ($a as $key => $value) { print "<a href='' onclick=\"changeX('".$key."')\">"; print $value; print "</a>"; } } print "<input type='hidden' name='A' value=''>"; print "<input type='hidden' name='B' value=''>"; print "<input type='hidden' name='C' value=''>"; print "<input type='hidden' name='D' value=''>"; showA(); print "</form>"; print "<script>"; print "function changeX(v){"; print "document.form1.v.value = 'X';"; print "document.form1.submit();"; print "}"; print "</script>";
phpで会員サイトの作成を学習しています。 PDOを使用してMysqlサーバーに接続しています。 開発環境はxamppでphp Version 5.5.15を使用しています。 入力フォームにユーザーの情報を入力してもらい、 データベースに格納する際、 基本的なセキュリティ要件として パスワードをハッシュ化する必要があるということを こちらのサイトで（http://php.net/manual/ja/faq.passwords.php） 知りました。 ハッシュ化については初耳で、いまいちハッシュアルゴリズムの種類による違い等はまだ理解しきれていないのですが、 PHP5.5.15を使用しているので、パスワードのハッシュアルゴリズムは 上記サイトに載っているようにpassword_hashを使用するのが今のところ最善なのでしょうか？ また、ハッシュ化されたパスワードの認証についてですが、 ログイン画面でパスワードを認証する際、 ユーザーが入力したパスワードをハッシュ化して 該当レコードのハッシュ化されて保存されたパスワードと 同じであれば認証が成功するという認識で正しいでしょうか？ ご回答、よろしくお願いします。
<?php $array = array(1,2,3); var_dump($array); echo "<br>"; $ref = &$array[1]; var_dump($array); echo "<br>"; $copy = $array; $copy[0] = 'a'; $copy[1] = 'b'; $copy[2] = 'c'; var_dump($array); echo "<br>"; ?> 上記のコードの結果が、 以下の内容になる理由を教えてください。 array(3) { [0]=> int(1) [1]=> int(2) [2]=> int(3) } array(3) { [0]=> int(1) [1]=> &int(2) [2]=> int(3) } array(3) { [0]=> int(1) [1]=> &string(1) "b" [2]=> int(3) } (A) PHPが糞言語なのはどう考えても参照をポインタだと思っているお前らが悪い - なんたらノート第三期ベータ http://tanakahisateru.hatenablog.jp/entry/2013/12/12/012728 (B) PHPとかいう糞言語｜いんまのブログ http://ameblo.jp/nikko-inma/entry-11122429825.html 上記の現象は(B)のブログで紹介されていて、この現象それをもってPHPをクソ言語だといっています。で、そのブログを読んで激怒した人が、(A)のブログで「クソ言語だと思う奴が悪い」という趣旨でPHPの擁護をしようとしています。しかし、パフォーマンスがどうとかメモリの使用量がどうとか的外れな説明が並び、挙句の果てには「&は使うな」という結論に至っており、なぜ上記の結果になるのかの理由は全く示されていません。その結論を普通に解釈したら、「使ってはならない」機能を提供しているクソ言語、という事になりかねません…。 この両者のブログの争いはさておき、「$ref = &$array[1];」などと書いてしまうと後続の処理で期待と異なる結果になる理由が分かりません。常識的に考えて「おかしい挙動になるから使わないで」などという機能であるはずはなく、意味があるから用意されているのだと思います。 私の知る限り、関数の実行結果をreturnとは別に受け取りたい場合に、その関数の定義の引数に使用しているケースがあります。例えばstr_replaceの第四引数。このような使い方はPHPに限らず、非オブジェクト指向の言語でしばしばみかけるように思います。結果を受け取る変数を引数で指定するのは私には気持ち悪いのですが、ビルトイン関数で利用されている使用例ですので、PHPはそういう言語だという事だと思ってあきらめます。 str_replaceのようなケースは結果が期待通りになり、何も不思議な事はありません。しかし、それ以外にはどうなんだと。引数以外には使ってはならないんだったら使えないようにしておくべきだし、そうなってはおらず自由に使えるようになっているのだから何か意味があるはずではないかと思います。 ■質問は以下です。 ・上記のコードの結果なぜ「$array[1]だけがbになる」のでしょうか？ ・そうなる意義や有用性は？ ・&はどういうときに使用すべきですか。使用すべきケースはありますか？ 　(関数の結果を受け取るために引数で指定する場合以外で) よろしくお願いします。
■現状 ・APIリクエスト結果をPHPで受け取っているのですが、ネストがとても深いです ・個別に表示させようとしたら、4重foreachになりました ■質問 ・ネストが深い多次元配列から、スマートにデータを取得するにはどうすれば良いでしょうか？ ※同じようなことさえ出来れば、foreachでなくても構いません
以下のコードでthanks.phpにemailとgoikenが表示されません なぜでしょうか？ おそらくthanks.phpが間違えてると思いますが見直してもわかりません index.html <DOCTYPE html> <html> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <title>PHP基礎</title> </head> <body> <form method="POST" action="check.php"> ニックネームを入力してください<br> <input name="nickname" type="text" style="width:100px"><br> メールアドレスを入力してください<br> <input name="email" type="text" style="width:200px"><br> ご意見を一言でお聞かせください<br> <input name="goiken" type="text" style="width:300px"><br> <input type="submit" value="送信"> </form> </body> </html> check.php <DOCTYPE html> <html> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <title>PHP基礎</title> </head> <body> <?php $nickname=$_POST['nickname']; $email=$_POST['email']; $goiken=$_POST['goiken']; if ($nickname==''){ print'ニックネームが入力されていません<br>'; } else { print'ようこそ'; print $nickname; print' 様'; print'<br>'; } if ($email==''){ print'メールアドレスが入力されていません<br>'; } else { print'メールアドレス：'; print $email; print'<br>'; } if ($goiken==''){ print'ご意見が入力されていません<br>'; } else { print'ご意見『'; print $goiken; print'』<br>'; } if($nickname=='' || $email='' || $goiken=''){ print'<form>'; print'<input type="button" onclick="history.back()" value="戻る">'; print'</form>'; } else { print'<form method="post" action="thanks.php">'; print'<input name="nickname" type="hidden" value="'.$nickname.'">'; print'<input name="email" type="hidden" value="'.$email.'">'; print'<input name="goiken" type="hidden" value="'.$goiken.'">'; print'<input type="button" onclick="history.back()" value="戻る">'; print'<input type="submit" value="OK">'; print'</form>'; } ?> </body> </html> thanks.php <DOCTYPE html> <html> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <title>PHP基礎</title> </head> <body> <?php $nickname=$_POST['nickname']; $email=$_POST['email']; $goiken=$_POST['goiken']; print $nickname; print'様<br>'; print'ご意見ありがとうございました<br>'; print'頂いたご意見『'; print $goiken; print '』<br>'; print $email; print'宛にメールを送信しました'; ?> </body> </html>
配列の初期化を実施するのはどんな時でしょうか？ 例えば、下記では初期化を実施する必要があるでしょうか？ $hoge = array("foo", "bar"); また、配列の初期化を行う方法は、下記以外にもあるのでしょうか？ $hoge = array();
現在Wordpressで特定のカテゴリを一覧表示させる設定を行っています。 ただ、記事が一件もない場合に、その旨を伝えるメッセージを表示させたいのと全てを非表示にさせたいと思っているのですが上手くいきません。（メッセージを表示とコンテンツ全体非表示の2つの方法をお伺いしたいです） 以下、実際のソースになるのですが、該当するカテゴリに記事が0件の場合 「○○に関する記事は現在ありません。」 と表示させるにはどうしたらよいでしょうか？ <h2 class="entry-title">カテゴリ1の投稿一覧</h2> <div class="container"> <?php $postslist = get_posts('numberposts=-1&orderby=post_date&order=DESC&cat=1'); foreach ($postslist as $post) : setup_postdata($post); ?> <ul class="hogehoge"> <a href="<?php the_permalink(); ?>" ><img src="<?php echo catch_that_image(); ?>" /></a> <li><a href="<?php the_permalink();?>"><b><?php the_title(); ?></b></a><br /> <a href="<?php the_permalink();?>"><?php echo mb_substr(get_the_excerpt(),0, 80);?>…</a> </li> </ul> <?php endforeach; ?> </div><!-- /container --> 2つ目の質問となりますが、投稿が0の場合にメッセージの表示ではなく、 <h2 class="entry-title">カテゴリ1の投稿一覧</h2> から、 </div><!-- /container --> まで、全てのレイアウトを含めた表示を非表示にするにはどのような定義を行えばよいでしょうか？ 試行錯誤試してみたのですが、本件2つの方法が解決できませんでした。 お詳しい方いらっしゃいましたらアドバイスのほどお願いいたします。 よろしくお願いします。
私メール漫画登録サイトを作ってまして、その時にそれをみてメールアドレスとを入力て送信ボタン押すとメール漫画に登録できるようになっています。なので、その送信ボタン押してサンキューページに移動します。その登録したメールを測定したくて、phpでユニューク値を生成しました。ですがそのパラメータを次のイメージタグに埋め込めばいいですか、それとも何をうめこめいいですかか？誰か教えていただけませんか？ 私は次の二つのどちらが正しいかわからなくて困っています。ぜひご教授お願いします。 (1)　<p><img src="https://action.xxx.jp///<?php echo getCVID();?>/2222111" width="1" height="1"></p> (2)<imgsrc="https://action.xxx.jp///jhas2012%40yahoo.co.jp_5600f6e229ae812363896d1ee814703790kjhdf021649dacb47b69326b69f196a4eb619092d883135aa7c9abb5bf333f6/2222111" width="1" height="1">これは送った後のユニュークな値です。
下記のソースのようにマルバツゲームを作っています。 setMaruBatuの$xに横位置、$yに縦位置を入れて、$kに入れる記号の種類を指定します。0が何もない状態で、1がマルで、2がバツです。 この際、プレーヤーを交互に入れ替えて、順番じゃない人は打てないようにしたいのですが、どういったプログラムを書けば、そういったことができますでしょうか。 よろしくお願いします。 <?php class MaruBatu{ private $board = array(); function __construct(){ for ($i=0; $i < 3; $i++) { for($j =0; $j < 3; $j++){ $this->board[$j][$i] = 0; } } } function setMaruBatu($x, $y, $k){ if($this->board[$x][$y] == 0){ $this->board[$x][$y] = $k; } } function showMaruBatu(){ for ($i=0; $i < 3; $i++) { for($j =0; $j < 3; $j++){ print $this->board[$j][$i]; } print '<br>'; } } } ?>
前回も質問をしたのですが、html、php、MySQLを使い現在検索システムの作成の練習をしているのですが、やりたいのは、phpでMySQLからデータを呼び出し、htmlで文字を記入して合致しているものを検索して表示し、検索結果数(何件表示されました)を表示するというものを作りたいと思っています。 検索してデータを表示させるということはできたのですが、検索結果数を表示することができません。 count()を使えば一発でできるという助言をいただきましたが調べてもよく分かりませんでした。 [php] <?php $add = $_GET["add"]; $nm = $_GET["nm"]; $server = "xxxxxx"; $dbname = "xxxxxx"; $user = "xxxxx"; $passwd = "xxxxxx"; $sv = mysql_connect($server, $user, $passwd) or die("Connection err1"); $db = mysql_select_db($dbname) or die("Connection error2"); $rows = mysql_query("SELECT * FROM `table1` WHERE add ='$add' or `nm` LIKE N'%nm'"); if($rows > 0){ $out = ""; while ($row = mysql_fetch_array($rows)){ $out .= $row['add']."<i>"; $out .= $row['nm']."<i>"; $out .= "<r>"; } echo $out; }else { echo "参照不成功：nm = ".nm; } mysql_close($sv); ?> phpについてもsqlについてもあまり知識がないのですが、よろしくお願いします。
初歩的な質問で申し訳ありません。 色々と修正してみたのですが、どうしても分からなかったので質問させてください。 TwitterのAPIを利用してbotシステムを作っているのですが、 最初の認証画面のところで、リクエストトークンが取得できなくなってしまいました。 昨日までは正常に動いていたのを確認できていたんですが・・・ ＊＊＊＊＊＊＊＊＊＊ 【ソース】 require_once '../twitteroauth-master/twitteroauth/twitteroauth.php'; $api_key = 'xxxxxx'; $api_secret = 'xxxxxxxxxx'; // TwitterOAuth認証を作成 $twitter = new TwitterOAuth($api_key, $api_secret); // トークン情報から認証URLを取得 $request_token = $twitter->getRequestToken('http://hoge.jp/callback.php'); $url = $twitter->getAuthorizeURL($request_token, true); // セッションにデータを保存 $_SESSION["token"] = $request_token["oauth_token"]; $_SESSION["token_secret"] = $request_token["oauth_token_secret"]; // 認証ページ表示 header("Location: $url"); ＊＊＊＊＊＊＊＊＊＊ ちなみに、TwitterのAPI取得画面で、Callback URLは設定しています。 また、twitteroauth.phpのhttpファンクションの中でcurl_error($ci)を表示させると、 「Problem with the SSL CA cert (path? access rights?)」 というエラーメッセージが表示されました。 なぜいきなりエラーが起こるようになってしまったのか、何か不備があるのであれば教えていただけないでしょうか。 お知恵を貸していただければと思います。 よろしくお願いいたします。
・MySQLにdatetime型のデータがあります ・2012-03-08 12:00:00 ・このデータの月日の0をなくして、「2012-3-8 12:00:00」として利用したいです ・どうすれば良いでしょうか？ ・取得する段階で何か指定するのでしょうか？　それとも取得後？ ■環境 ・PHP×MySQL
現在、phpで会員サイトを作る勉強をしています。 最近、よくメールアドレスとパスワードを使用して 会員専用ページにログインさせているサイトを目にします。 確かに、各サイト毎に登録するようなユーザーIDは忘れやすいので、メールアドレスとパスワードの組み合わせでログインしてもらう方がユーザー側からしても良いと思いますが、 実際、メールアドレスでログイン認証している会員サイトでもユーザー側にはわからない管理用のユーザーIDというのは付与しているのでしょうか？ 付与している場合、それぞれのユーザーIDが同じにならないように乱数で作成するパターンが多いのでしょうか？ ユーザーIDの法則についてはサイト毎に異なるかとは思いますが、 実際、ほとんどのサイトはどのような決まりで付与しているのか気になり、質問しました。 ご回答、よろしくお願いします。
現在html、PHP、MySQLを使い検索システムの作成を行っているのですが、検索をしてMySQLより所得した結果何件表示されました、という感じにしたいです。 yahooでPHPで検索すると約11,440,000,000件みたいに。 やり方が分からなく何か参考になるサイトなどがありましたら教えていただきたいです。 よろしくお願いします。
レンタルサーバーで、PHPを使用したTwitterの自作botを作成しています。 どんなことが出来るのか、というのを色々いじって遊んでいるのですが、 サーバーから直接Twitter APIを使用するときには正常に動いているのに 間にプロキシサーバーを噛ませると正常に動作しないことに気付きました。 ＊＊＊＊＊＊＊＊＊ ▼プログラム（twitteroauth.php内のfunction http）▼ 　　（前略） curl_setopt($ci, CURLOPT_URL, $url); curl_setopt($ci, CURLOPT_HTTPPROXYTUNNEL, true); curl_setopt($ci, CURLOPT_PROXY, 'http://xxx.xxx.xxx.xxx'); curl_setopt($ci, CURLOPT_PROXYPORT, '8080'); $response = curl_exec($ci); if ($response === false) { エラーログ出力(curl_error($ci)); } 　　（後略） ＊＊＊＊＊＊＊＊＊ 上記のようなプログラムを追加して実行すると、 以下のようなエラーログが出力されました。 「Received HTTP code 0 from proxy after CONNECT」 ネットで調べて、SSLが関係しているのでは？というところまでは調べられたのですが、 解決方法が分からず困っております。 詳しい方、ご教授いただけないでしょうか。 どうぞよろしくお願いいたします。
現在、PHPでデータベースの値を利用するWEBアプリを作成しております。 一部のテーブルの値を削除するのに合わせて、 別テーブルの指定カラムを削除したいのですが、 PDOでは可能なのでしょうか。 例：テーブルAのレコード２を削除すると、 テーブルBのカラム２を削除するという流れです。 可能な場合は、サンプルサイトまたはサンプルコードを 教えてください。 不可能な場合は、PHPにて実装するためのサンプルサイトまたはサンプルコードを教えていただけませんでしょうか。 PHPのバージョンはPHP5.4でございます。 お手数ですが、ご教授いただけますと幸いでございます。 よろしくお願いいたします。
いつもご教授ありがとうございます わたくしはタグうち？でHPを調べながら作成している超初心者です。なので、質問の仕方や説明の仕方に不備があるかと存じますがよろしくお願いいたします。 ホームページのトップによくあるスクロールバーのついた更新履歴を表示するボックスがあるかとおもいます。そこに、表示する内容を別のhtmlで作成し登録と表示をそれぞれPHPでtextfileを使用しfputsの上書きaモードでソースをくみたて、foreachで一行ずつ区切って表示させました。 ここで問題が… (1)表示されるのは古い順です。新しい順にするにはどうすればよいのでしょうか？ (2)これをHPのhtmlに埋め込む場合、htmlからphpに拡張子をかえるのでしょうか？ よろしくお願いいたします。 ソース 必要ならおもうしつけください。
私のやりたいことはSQL文の実行なのですが、PDOを使った操作になります。 どうかご教授お願い致します。 <th>価格帯</th> <td> <select name="price_min"> <option value="1" selected="selected">下限なし</option> <option value="10000000">1000万</option> <option value="15000000">1500万</option> <option value="20000000">2000万</option> 以下略 <th>愛知県 - 名古屋市</th> <td> <input type="checkbox" name="chiiki_id[]" value="1" <?php if (isset($_REQUEST['chiiki_id']) and in_array('1',$_REQUEST['chiiki_id'])) print 'checked'; ?>/> 中村区 <input type="checkbox" name="chiiki_id[]" value="2" <?php if (isset($_REQUEST['chiiki_id']) and in_array('2',$_REQUEST['chiiki_id'])) print 'checked'; ?>/> 西区 <input type="checkbox" name="chiiki_id[]" value="3" <?php if (isset($_REQUEST['chiiki_id']) and in_array('3',$_REQUEST['chiiki_id'])) print 'checked'; ?>/> 昭和区 <input type="checkbox" name="chiiki_id[]" value="4" <?php if (isset($_REQUEST['chiiki_id']) and in_array('4',$_REQUEST['chiiki_id'])) print 'checked'; ?>/> 港区 </td> <th>こだわり条件</th> <td> <input type="checkbox" name="kid[]" value="1" <?php if (isset($_REQUEST['kid']) and in_array('1',$_REQUEST['kid1'])) print 'checked'; ?>/> 新築 <input type="checkbox" name="kid[]" value="2" <?php if (isset($_REQUEST['kid']) and in_array('2',$_REQUEST['kid2'])) print 'checked'; ?>/> 南向き <input type="checkbox" name="kid[]" value="3" <?php if (isset($_REQUEST['kid']) and in_array('3',$_REQUEST['kid3'])) print 'checked'; ?>/> セキュリティ充実 <input type="checkbox" name="kid[]" value="4" <?php if (isset($_REQUEST['kid']) and in_array('4',$_REQUEST['kid4'])) print 'checked'; ?>/> 市街地が近い<br /> <input type="checkbox" name="kid[]" value="5" <?php if (isset($_REQUEST['kid']) and in_array('5',$_REQUEST['kid5'])) print 'checked'; ?>/> 内装リフォーム <input type="checkbox" name="kid[]" value="6" <?php if (isset($_REQUEST['kid']) and in_array('6',$_REQUEST['kid6'])) print 'checked'; ?>/> システムキッチン <input type="checkbox" name="kid[]" value="7" <?php if (isset($_REQUEST['kid']) and in_array('7',$_REQUEST['kid7'])) print 'checked'; ?>/> ペット可</td> </tr> </table> <input type="submit" value="検索" class="Btn-gray button"> </form> $sql = 'SELECT DISTINCT * FROM bukken'; //名古屋の地域checkbox if(isset($_POST['chiiki_id'])and is_array($_POST['chiiki_id'])){ $ary = array_filter($_POST['chiiki_id'], function($v) {return is_numeric($v);}); $sqlA = 'id IN (SELECT chiid FROM chiiki WHERE chiiki_id IN ('.implode(',', $ary).'))'; }else{ //print '地域がチェックされてません'; $sqlA = ' 1 '; } //kid絞り込み if(isset($_POST['kid'])and is_array($_POST['kid'])){ $ary = array_filter($_POST['kid'], function($v) {return is_numeric($v);}); $sqlK1 = 'id IN (SELECT fid FROM fudou_kodawari2 WHERE kid IN ('.implode(',', $ary).'))'; }else{ //print '<br />こだわりがチェックされてません'; $sqlK1 = ' 1 '; } のようなフォームからチェックされた値のkidのところを絞った条件で表示させたいです。下記のPHPで値を受けてSQL文をMySQLに接続してSQLを実行するのですが、中々出来ません。 そして テーブルがbukkenとkodawariがあります。 bukken id bukken_name chiiki_id address price_min price_max 　　　 station 1 名駅MID 　　　1 愛知県名古屋市中村区 40770000 55100000 名古屋駅 2 プレサン浄心 2 愛知県名古屋市西区城西 30800000 40001000 浄心駅 3 アネシア八事 3 愛知県名古屋市昭和区 50000000 62510000 八事日赤 4 アメニ港明 4 愛知県名古屋市港区港明 25000000 35000000 港区役所駅 5 ユーハウス上飯田 15 愛知県名古屋市北区 32000000 43330000 上飯田駅 6 ローレル葵 6 愛知県名古屋市東区葵x 30000000 46000000 高岡駅 7 ライオンズ2 愛知県名古屋市西区山木 35000000 55000000 上小田井駅 8 ポレスター名西 2 愛知県名古屋市西区名西 28000000 38000000 浄心駅 fudou_kodawari2 fid kid 1 1 1 2 1 3 2 1 3 2 3 3 3 4 4 3 5 4 6 4 7 1 8 1 8 2 8 4 このようなテーブルでSELECT DISTINCT * FROM bukken WHERE (id IN (SELECT fid FROM fudou_kodawari2 WHERE kid IN (1,2,3)))と言うSQL文を入力すると id bukken_name chiiki_id address price_min price_max 　　　 station 1 名駅MID 　　　1 愛知県名古屋市中村区 40770000 55100000 名古屋駅 2 プレサン浄心 2 愛知県名古屋市西区城西 30800000 40001000 浄心駅 3 アネシア八事 3 愛知県名古屋市昭和区 50000000 62510000 八事日赤 4 アメニ港明 4 愛知県名古屋市港区港明 25000000 35000000 港区役所駅 7 ライオンズ2 愛知県名古屋市西区山木 35000000 55000000 上小田井駅 8 ポレスター名西 2 愛知県名古屋市西区 28000000 38000000 浄心駅 kidの条件　1の場合　　fidが　1,2,7,8 2の場合 fidが　1,3,8 3の場合　　fidが 1,3,4 なので　　1,2,3,4,7,8 という結果が表示されますが、1,2,3の全てに一致する条件しか表示できないようにする（結果が1になる）にはどのようなSQL文を入力すれば良いのでしょうか？
PHPで他のサイトを読み込んで、javascriptを実行した結果をsimple_html_dom.phpなどのライブラリで解析、スクレイピングすることは可能なのでしょうか？ もしできるとしたらどのようなライブラリやフレームワークを使えば実現できますか？ どうぞよろしくお願い致します。
唐突に質問失礼致します。 TwitterAPIを用いて指定の文字列を抽出しようとしています。 具体的には ユーザー名（name）に「病院」という単語を含み かつ ツイートに「治療」という単語を含む ような形です。 スクリーンネームではなく、ネーム（ユーザー名）で拾いたいです。 ※スクリーンネームとネーム（ユーザー名）の違い screen_name（@～以降の英数字の名前　例:@aaaなど） name（プロフィールで変更可能なユーザー名 例：鈴木太郎など） 例えば、 from演算子を使って「治療 from:xxxxx」で検索すると、アカウントのスクリーンネームが「@xxxxx」からのツイートの中で「治療」が含まれる検索結果が表示されます。 しかし、このようにスクリーンネーム(screen_name)ではなく プロフィールのユーザー名（name）にして複数検索したいです。 例えば、PHPで 「治療あるいは予防（または両方含む）」という２つの単語を含むツイートをした、「病院」という単語を含むユーザー名（name）を抽出したい場合、 $key = "治療 OR 予防 from:●●●"; などで●●●の部分をどう記述すればいいでしょうか？ ['name']と書き入れたりすればいいのでしょうか？ どう検索コマンドを組み合わせて記述すればいいか困っています。 （参考） Twitter検索オプションと高度な検索 http://www.e-letter.jp/sns/twitter/index38.html 教えていただけたら幸いに存じ上げます。
以下のソースで、配列変数$a[0][0]にbを代入して、メソッドprintAでそれをprintしようとしていますが、"Parse error: syntax error, unexpected '$a' (T_VARIABLE), expecting function (T_FUNCTION) in C:\xampp\htdocs\a.php on line 4"というエラーが出ます。 どうすれば、$a[0][0]にbを代入して、メソッドprintAでそれをprintできるか教えてください。 phpのバージョンは5.5.15です。 <?php class A{ private $a = array(); $a[0][0] = 'b'; function printA(){ print $this->a[0][0]; } } $x = new A(); echo $x->printA(); ?>
以下のようなコードで、ブラウザに画像を表示させようとしたところ、画像が表示されず、代わりに「×」印が表示されました。どうすれば画像が表示できるのでしょうか？ <?php $img = file_get_contents('./test.jpg'); header('Content-type: image/jpeg'); echo $img; ?> 上記のコードは以下のサイトを参考に書きました（というより、ほぼそのままコピペしただけです。） http://ysklog.net/php/1575.html http://php.birdlab.com/tips/1 【備考】 ・OSはWindows7、XAMPPを導入して動かしています。IE11とChromeのバージョン 37.0.2062.120 m（現時点の最新版のようです）で試しましたがどちらも同じ結果でした。（正確には、Chromeの方は×印ではなく、文字1文字分くらいの大きさの「ファイル」のような画像でしたが…（ネットを見ている際に、画像ファイルが表示されない時に代わりに表示されるアレです）） ・表示した画像ファイル test.jpg はphpファイルと同じフォルダに置いてあります。ファイル名が違う（そもそも存在しないファイル名を指定している）場合には、エラーメッセージが表示されましたので、ファイルの存在は認識されているようです。 ・readfile関数を使っても駄目でした。 ・画像ファイルが壊れているということはありません（画像ファイルのアドレスを直接指定した場合はきちんと表示されます） コードの問題ではなく、環境設定の問題だと思いますが、どこに問題があるのかさっぱりわかりません。よろしくお願い致します。
phpを使用してwebページの作成を勉強しています。 モードによってphpの内容を変えるページを作成したのですが、 ページを開いた際、モードの変数が入力されていなかったり（最初に開いたとき等）、 前のページのフォーム画面で、 セレクトボックスを何も選択せず送信した空のデータを受け取ると、 Notice:Undefined indexエラーが表示されます。 Noticeエラーを非表示にすれば表示はされなくなるとは思いますが、 根本の解決にはなっていないので後々問題にならないか心配です。 どうしたら空のデータ受け取り時に Notice:Undefined indexエラーが表示されなくなるでしょうか？ ご回答、よろしくお願いします。
すみません。どうしてもできない処理があります。 /test2000.html～/test2099.html 上記にアクセスしたクライアントに"test7.php"の内容を表示するというのはhtccessを 使ってできたのですが、さらにクライアントが入力したURLに従い任意の文字などを表示させたい のですが、そのためにはクライアントが入力したURLを知る必要があります。 はじめはPHPの"$abc=$_SERVER['PHP_SELF'];"を使って簡単にできそうだと思ったのですが、これだと全て"test7.php"と$abcに入ってしまいます。 可能ならば test2011.htmlと入力すると$abcに"test2011.html"が入るようにしたいです。 こういう処理は一度リダイレクトしてしまうとPHPではできないでしょうか・・。 もし無理であればなんとか別の方法でも良いのでクライアントが入力したURLを知る方法はないでしょうか。 RewriteEngine On RewriteCond %{THE_REQUEST} ^.*\s/test(20[0-9][0-9])\.html[\s\?].*$ RewriteRule ^(.*)$ test7.php [L]
下記のようなCSVデータがあります。 「名前」「内容」「日時」 田中　　報告1　　日時 田中　　報告2　　日時 田中　　報告3　　日時 吉田　　報告1　　日時 吉田　　報告2　　日時 佐々木　報告1　　日時 藤森　　報告1　　日時 藤森　　報告2　　日時 豊富　　報告1　　日時 豊富　　報告2　　日時 16000件あり、同一名で重複行を消すと5000件になります。 このデータを下記の通り、同じ人物の情報は1行のデータに変換したいです。 ↓上下で名前フィールドが一致したら、他の列の内容と日時を全て繋げて1つのフィールドに入れる 「名前」「内容」 田中　　[日時:報告1、日時:報告2、日時:報告3] 吉田　　[日時:報告1、日時:報告2] 佐々木　[日時:報告1] 藤森　　[日時:報告1、日時:報告2] 豊富　　[日時:報告1、日時:報告2] 1行ずつ処理してゆくスクリプトはサンプルが多くあり、作る事ができました。 <?php $openfile = file_get_contents('list.csv'); //csvをutf8に $openfile = mb_convert_encoding($openfile,"utf-8","auto"); //１行ずつ分ける $csv_gyo = explode("\n", $openfile); //１行ずつ読み込みながらのループ処理 foreach($csv_gyo as $kurikaeshi) { //カンマごとに分ける $ret_csv = explode(",", $kurikaeshi); echo("".$ret_csv[0]."<br />"); } 何卒、宜しくお願い致します。
ドットインストールにてページングの勉強をしています。 http://dotinstall.com/lessons/paging_php_v2/8510 件数が多いと、 この場合ですと１０ページ以上まで表示されてしまうかと思うのですが、 よくあるWEBサービスのように１０ページまでで区切り、 10ページ目をクリックすると、 5ページから１５ページまでを表示させたいのですが、 どのように書いていくものでしょうか？ <?php define('DB_HOST', 'localhost'); define('DB_USER', 'dbuser'); define('DB_PASSWORD', '********'); define('DB_NAME', 'dotinstall_paging_php'); define('COMMENTS_PER_PAGE', 5); if (preg_match('/^[1-9][0-9]*$/', $_GET['page'])) { $page = (int)$_GET['page']; } else { $page = 1; } error_reporting(E_ALL & ~E_NOTICE); try { $dbh = new PDO('mysql:host='.DB_HOST.';dbname='.DB_NAME,DB_USER,DB_PASSWORD); } catch (PDOException $e) { echo $e->getMessage(); exit; } // select * from comments limit OFFSET, COUNT // page offset count // 1 0 5 // 2 5 5 // 3 10 5 // 4 15 5 $offset = COMMENTS_PER_PAGE * ($page - 1); $sql = "select * from comments limit ".$offset.",".COMMENTS_PER_PAGE; $comments = array(); foreach ($dbh->query($sql) as $row) { array_push($comments, $row); } $total = $dbh->query("select count(*) from comments")->fetchColumn(); $totalPages = ceil($total / COMMENTS_PER_PAGE); // var_dump($comments); // exit; $from = $offset + 1; $to = ($offset + COMMENTS_PER_PAGE) < $total ? ($offset + COMMENTS_PER_PAGE) : $total; ?> <!DOCTYPE html> <html lang="ja"> <head> <meta charset="utf-8"> <title>コメント一覧</title> </head> <body> <h1>コメント一覧</h1> <p>全<?php echo $total; ?>件中、<?php echo $from; ?>件～<?php echo $to; ?>件を表示しています。</p> <ul> <?php foreach ($comments as $comment) : ?> <li><?php echo htmlspecialchars($comment['comment'],ENT_QUOTES,'UTF-8'); ?></li> <?php endforeach; ?> </ul> <?php if ($page > 1) : ?> <a href="?page=<?php echo $page-1; ?>">前</a> <?php endif; ?> <?php for ($i = 1; $i <= $totalPages; $i++) : ?> <?php if ($page == $i) : ?> <strong><a href="?page=<?php echo $i; ?>"><?php echo $i; ?></a></strong> <?php else: ?> <a href="?page=<?php echo $i; ?>"><?php echo $i; ?></a> <?php endif; ?> <?php endfor; ?> <?php if ($page < $totalPages) : ?> <a href="?page=<?php echo $page+1; ?>">次</a> <?php endif; ?> </body> </html>
下記のようなスクリプトにおいて、header()関数で、リダイレクトしているのですが、 ちゃんとリダイレクトできません。ちなみに、header()関数の前には HTML文も無い、ＰＨＰのみのスクリプトです。 どうすれば、リダイレクトできるか教えていただきたいのですが。 【profile_regist.php】 <?php if($_POST['ID_HANDLENAME']!==NULL) $handlename = $_POST['ID_HANDLENAME']; else header("Location: ～.html"); 中略 ?>
現在phpを学習しており、mysqlにPDOでデータベース接続をしています。 前ページからGETで取得した変数A($varA)があり、 SELECT文で「テーブルA(tableA)のカラムA(columnA)の値が取得した変数Aと一致するもの」という検索条件を指定し、 条件に該当するレコードのカラムB(columnB)の値を取得し、変数B($varB)に代入したいのですが、 $sth = $dbh->prepare("SELECT columnB FROM tableA WHERE columnA = :varA"); $sth ->bindParam(':varA',$varA); $sth ->execute(); まではネットで調べて記述できたのですが、 fetchには沢山の種類があるので、 データ変数B（$varB）に該当カラムの値を代入する場合にどれを使ったらよいか分かりませんでした。 1つのカラムの値を取り出すにはどのfetchを利用したら良いのでしょうか？ ちなみにcolumnBに入っているのは数字ではなく文字列です。 ご回答、よろしくお願いします。
フレームワークについてご質問させていただきたいのですが下記のサイトは、どのようなフレームワークで作られているのでしょうか？ www.lancers.jp crowdworks.jp viibar.com 見た目というかTOPページ画面構成が似ているので何かのフレームワークを使っているのかと勝手におもっているのですが、専門家の方からみるとどのようなフレームワークだと思われますか？ PHPを勉強しておりフレームワークなども勉強しようと思っているのですが、釣り仲間をマッチングできるようなサイトを将来作ってみたいと思っております。 自分自身の経験上、他県で釣り仲間や釣りイベントを開催するなど色々できればと感じていたためです。 ですので上記のマッチングサイトはどのような手法で作成されているのかプロの目からみてアドバイス頂ければと思います。 また、フレームワークにもCakePHP、symfony、Zend Framework、Ruby on Rails（これはRuby言語というものらしいので少し違う気がしますが）色々あるかと思いますが、オススメなフレームワークなどのアドバイスもいただけると嬉しいです。 よろしくお願いします。
(複数人の)ユーザーが記事を投稿し、各ユーザーのURLでそのユーザーの記事が閲覧できるブログシステムを考えております。 しかし、各ユーザのURLにアクセスしたとき、そのユーザーのデータをどのような方法で取得すれば良いのかわからず質問させていただきました。 以下、詳細となります。 ※MYSQLデータベーステーブル ・user_table id　名前 10　山田 11　鈴木 12　伊藤 ・,article_table id　user_id　url　　　　　text 1　10　　　　yamada　　山田です。 2　11　　　　suzuki　　　鈴木です。 3　12　　　　itou　　　　 伊藤です。 ※流れ 1,各ユーザーは管理画面にログイン 2,記事投稿ページで本文を入力し、投稿ボタンを押すとarticle_tableにデータが格納される。 3,domain.com/○○○(〇に入るのはyamadaなど、各ユーザーのurl) にアクセスすると、そのユーザーが投稿したarticle_tableのtextが表示される。) ※質問内容 domain.com/〇〇〇に、そのユーザーが投稿したtextを表示されるには、 <?php $st=$db->prepare("select * from article_table where user_id=:user_id"); $st->execute(array(":user_id"=>$user_id)); $data=$st->fetch(); echo $data["text"]; 、、、、 ?> といったように、$user_idによってそのユーザーのデータを引っ張ってくるかと思いますが、このとき$user_idの値はどのように得る方法が一般的なのでしょうか？ ・方法(1) URLをdomain.com/〇〇〇?user_id=△△△として$_GETで取得すれば可能ですが、 一般的なアメブロなどのブログシステムでは、そのような変数はURLについていないかと思います。 ・方法(2) あらかじめユーザーごとのフォルダにuser_id.txtのようなファイルを用意し、そこに書かれているidを読み込んでいるのでしょうか？ ・方法(3) 管理画面からユーザーが記事を投稿した時に、$user_idをファイルに埋め込んだ動的なphpファイルを生成して保存しているのでしょうか？ <?php $user_id=10; $st=$db->prepare("select * from article_table where user_id=:user_id"); $st->execute(array(":user_id"=>$user_id)); $data=$st->fetch(); echo $data["text"]; 、、、、 ?> このソースごと含めてユーザーファイルを生成してしまう。 ただ、やり方が今のところわかっておりません。 ・方法(4) 別のなんらかの方法 ご存知の方いらっしゃれば、ご回答いただければ幸いです。 尚、各ユーザーURLのページは、静的なページ(html)ではなく、動的なページ(php)となります。 よろしくお願い致します。
PHPでMySQLを操作しています。 PDOのprepare()を使えば（プレースホルダを使えば？）、SQLインジェクションは必ず発生しないと言えますか？ もし、そうだとすれば、SQLインジェクション対策はかなり簡単ですよね？でも、セキュリティの話でよく取り上げられるということは、実際は他の問題が発生したりするんですかね？
PHPのプログラム上で、global status情報を取得するにはどうすれば良いのでしょうか？ MySQLへの接続にはPDOを使用しているので、PDOを使用して取得したいのですが・・・ 単純に、 $sql_global = 'SHOW GLOBAL STATUS'; $stmt_global = $dbh -> prepare($sql_global); $stmt_global -> execute(); while($value = $stmt_global->fetch(PDO::FETCH_ASSOC)) { var_dump($global); } としてみましたが、これでは全てNULLが返ってきてしまいました。 どうすれば良いか、ご存知の方がいらっしゃったら教えてください！ どうぞよろしくお願いいたしますm(_ _)m
　ＰＨＰ初心者です（Windows　VISTA）、宜しくお願いします。 　 　最近ＰＨＰの勉強を始めようとして、ＰＨＰ、Ｘａｍｐｐ、Ｍｙｓｑｌ、ApacheがパックになったＣＤから インストールしましたが、「コントロールパネル＞プログラムと機能」からインストールしたプログ ラムを探しても「Ｘａｍｐｐ」しか見当たりません。 　コンピュター＞ProgramFilesフォルダーにも全く見当たりません。　 　また、すべてのプログラムからは、「Apacheフォルダ＞Ｘａｍｐｐ」と確認出来ました。 　ＰＨＰとかＭｙｓｑｌも一つのアプリケーションだと思うのですが、何故、「プログラムと機能」とか 　「すべてのプログラム」に表示されないのでしょうか。 　Javaを実行するためにEclipseをインストールしていますが、「ProgramFiles」フォルダーの中 にJavaフォルダがあり、jreが確認出来ます。 　「プログラムと機能」からもjreを確認出来ます。 　これは何故でしょうか、Ｍｙｓｑｌ、PHP（一つのプログラム言語としての）もアプリケーションの はずですが。 　以上宜しくお願いします。
たとえば、２か月前の最終日を求めるには date('Ymd', strtotime( 'last day of -2 month' )) で求められますが、その前日を求めるにはどうすれば良いでしょうか？ date('Ymd', strtotime( 'last -2 day of -2 month' ))
現在、PDOでのmysqlデータベースの操作を学習しています。 以前、mysql_connectでのデータベース接続を学習していた際に、 使用したいデータベースの名前を変数名$dbnameに格納し、 $connect = mysql_connecｔ($server, $user, $password); mysql_select_db($dbname); でデータベースに接続していました。 その要領をふまえて PDOでもデータベースの名前を変数名$dbnameに格納し、 $db = new PDO('mysql:host=localhost;dbname=$dbname',$user,$password); で接続しようと試みたところ、エラーになりました。 そこで、データベース名を変数に格納せず、 $db = new PDO('mysql:host=localhost;dbname=データベース名',$user,$password); で試してみたところ、接続が出来ました。 そこで質問なのですが、PDOでデータベースに接続する場合、 データベース名を変数に格納することは物理的に出来ないのでしょうか？ それともうひとつ質問があります。 mysql_connecｔを使用したときはデータベース接続用のPHPファイルを作成し、 データベース接続が必要なPHPファイルの時にrequire_onceでデータベース接続用のPHPファイルを呼び出ししていましたが、PDOでもデータベース接続用のPHPファイルを呼び出して接続することは可能でしょうか？ 絶対に変数に格納したいとか、絶対にデータベース接続を別ファイルにしたいというわけではありませんが、もともとmysql　apiで学習していたためmysql　apiとPDOの違いが少し気になってしまいました。 ご回答、よろしくお願いします。
私は2年前に商用のWebサイトを作成し、今までメールフォームをとおして顧客とやりとりをしてました。 今まで、私が使用しているメールアドレスに直接迷惑メールが送信されることはあったのですが、本日の1時頃と4時頃にメールフォームを通して一気に大量（500通以上）の迷惑メールがきました。 迷惑メールをしてきた送信アドレスは複数あり、主に以下の4つです。 (1)JyI=@sv22.m***bird.netowl.jp (2)sam***@email.tst (3)-1 OR 2+105-105-1=0+0+0+1 -- (4)送信者不明 (1)の、@以下は私が利用してるミニバードのドメインとなっているのですが、これは何者かがサーバーにハッキングして嫌がらせを行っているのでしょうか？ (3)は、記号の羅列による命令文みたくなってます。(4)は、送信者不明となってました。 私は独学でHTMLとPHPを学んでメールフォームを作成したのですが、氏名や住所の項目は未記入では送信できないように必須入力項目に設定をしております。 また、電話番号やメールアドレスは正しく入力しないと、エラー表示になるように設定します。 今まで2年間は何もなかったのに、なぜ急に大量の迷惑メールが送られてきたのでしょうか？ 何か対策があればご教示下さいませ。
phpのsubmit処理について不明点があります 実装したいことは ボタンを押したらフォームの入力内容を別フォームに表示したいのですが 別フォームに呼び出しはできたのですが ボタン押下時にsubmitで表示するかの確認をしたいです 現段階ではボタンを押すと確認アラートも出ず、ただ別フォームが表示される形になってしまいます <--関数--> function showData(){ myRet = confirm("表示しますか") if (myRet == true){ } } <--form--> <form name = "FileData" action = "show.php" method="POST"> <--button--> <input type = "submit" name ="Display" onClick "showData();" value="表示"> ソースの抜粋になります これで実行するとshow.phpが呼ばれて表示はされるのですが関数が呼ばれず確認アラートも呼ばれません すぐ実行されるというものになっていますます この現象の原因と何か解決などわかることがあればよろしくお願いします。
・下記と同等機能をPHP5.4で書くにはどうすれば良いでしょうか？ array_walk($ary,"userfunc",&$hoge);
MacでPHPの開発環境の構築に挑戦しているのですが、なかなかうまくいきません。 OS Xのバージョンは10.9.4です。 最初からapatchが導入されているとのことなので、それを利用したいと思い http://blog.nzakr.com/mac-apache/ こちらのサイトを参考に進めているのですが、ターミナルで sudo vi /private/etc/apache2/httpd.conf と入力した時に # This is the main Apache HTTP server configuration file. It contains the # configuration directives that give the server its instructions. # See <URL:http://httpd.apache.org/docs/2.2> for detailed information. # In particular, see # <URL:http://httpd.apache.org/docs/2.2/mod/directives.html> # for a discussion of each configuration directive. # # Do NOT simply read the instructions in here without understanding # what they do. They're here only as hints or reminders. If you are unsure # consult the online docs. You have been warned. # # Configuration and logfile names: If the filenames you specify for many # of the server's control files begin with "/" (or "drive:/" for Win32), the # server will use that explicit path. If the filenames do *not* begin # with "/", the value of ServerRoot is prepended -- so 'log/access_log' # with ServerRoot set to '/www' will be interpreted by the # server as '/www/log/access_log', where as '/log/access_log' will be # interpreted as '/log/access_log'. # # ServerRoot: The top of the directory tree under which the server's # configuration, error, and log files are kept. "/private/etc/apache2/httpd.conf" ＊＊＊＊, ＊＊＊＊＊＊ という記述が出てしまい、その先に進めません。（最後の文字列はパス？かよく分からないので伏せています） この先でコメントアウトをつけたり外したりしてPHPの設定をするそうなのですが どうしたらそのような記述を表示する事が出来るでしょうか？ アドバイスお願いします。
書いてみましたが、うまく表現できません。 添削してもらえませんでしょうか。 ◆理想とする動作 １～５０の数字を表示させる。 そのさい＄bの配列内の数字と一致した時は 　数字ｘはAとBで一致しています と表示させ、それ以外は 　数字ｘは不一致です とし数字が５０になるまで、どちらかの表記ですべて表示させる。 $a=range(1,50); $b=array(1,4,8,10,14,20,21); if ($a[]==$b[]){ echo "数字ｘはAとBで一致しています<br>"; }else{ echo "数字ｘは不一致です<br>"; } 動作例； 数字１はAとBで一致しています 数字２は不一致です 数字３は不一致です 数字４はAとBで一致しています 添削いただけないでしょうか。 よろしくおねがいします。
現在、phpとmysqlを学習している初心者です。 会員登録の仕組みを作ろうとしています。 会員登録の手順としては、 1、新規登録者にメールアドレスを入力してもらい、乱数で仮IDの発行（メールアドレスと仮IDをテーブルAに保存） 2、入力されたメールアドレス宛に登録用のURLが記載されたメールを送信 3、登録用のURLのフォームにメールアドレス以外の情報を入力してもらい、データベース（テーブルB）に格納 という形で作っています。 大体のプログラムは、あるサイトに載せてある手順を参考に作成したのですが、 複数アカウントの作成を避けるため、手順1の際に入されるメールアドレスがテーブルBに存在するか確かめる必要があると思い、色々とネットで調べたのですがどのようなプログラムを書けば良いのかわかりませんでした。 具体的には データベース内にテーブルAとテーブルBがあり、 前ページ（メールアドレス入力ページ）でテーブルA内のemailカラムにPOSTした$emailという変数名のデータ（メールアドレス）と合致するemailカラムを所有するレコードがテーブルB内にあるかどうかを知りたいです。 データはtrueかfalseで返ってくるか該当するレコード数で返ってくるとその後の条件分岐が行いやすいかなぁとは思っています。 このような処理を行いたい場合どのようなプログラムを書けばよいのでしょうか？ mysqlについて初めて質問するので、何か不足している記載情報や、わかりづらい点とうありましたら補足します。 ご回答、よろしくお願いします。
PHPで特定のセルの背景を赤に DBに1～100までの特定の数字が入っています。 まず、 テーブル内の各＜TD>のタグの中に1から100まで順にセルを埋めています。 1つのセルに1つの数字を入れています。 1～100までのセルもPHPで書きだしています。 そのPHPで作成したテーブルと DB内の特定の100までの数字を照合し セルとDBで一致した数字のTDの背景色を赤にしたいです。 現在 "DB内の特定の数字と1～100までの数字の照合" ここの作業で悩んでいます。 １からの整数は$a DBからの整数は$b これで配列に取り出すところまでで行き詰っています。 照合させるにはIF文だと思うのですが、その中にどうかけばいいでしょうか？
以下のようなフォームでselectの値によって PHPでactionのURLを変更させるようなことは出来るでしょうか。 <form name="form" method="GET" action="ここをselect値により変更"> <input type="text" name="word" id="word" value="" /> <select name="select" id="select"><option selected="selected" value="01">値01</option> <select name="select" id="select"><option selected="selected" value="02">値02</option> <select name="select" id="select"><option selected="selected" value="03">値03</option> </select> </form> 以上、どうぞ宜しくお願い申し上げます。
自作でテンプレートを作成してみています。 現在、index.phpの場合にのみ表示させたいCSSリンクがあり、 このおかげで、ヘッダーテンプレートを2つ作成しなければならない状態です。 そこで、質問ですが、 任意のファイル名（index.phpやcontent.phpなどの場合）にのみ表示させるには どうすればいいでしょうか？ 例えば、index.phpの場合にのみ、 <link rel="stylesheet" type="text/css" href="css/index.css"> を追記したいなどです。
変数に格納した文字列のうち、URLを以下のようにして 置換しようとしましたが、置換されませんでした。 $html = str_replace("www.sample.com/hoge", "hoge.hogeoge.net", $html); str_replace の使い方が間違っているのでしょうか。 どうぞ宜しくお願い申し上げます。
phpのセレクトボックスの値を配列で指定したのですが初期値の表示がうまくいきません。 以下は現在のソースです。 $start_time[$j]はDBの取得値で取得配列と表示配列が一致するものを初期表示する というコードが以下になります $time_array = array( "0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23" ); for( $a=0; $a < count( $time_array ); $a++){ $selectedStartTime =($time_array[$a] == $start_time[$j])?" selected":""; $startTimeSelectBox .= "\t<option value=\"{$time_array[$a]}\"{$selectedStartTime}>{$time_array[$a]}</option>\n"; } 疑問点ですが別条件で(たとえば$start_time[$j]にデータが0の時)配列の指定した値を選択したいです。 下記のようにそれぞれのvalue値の時に条件を指定すればできるのですが配列の時には どのように初期値を設定すればいいかわかりません。 　　　　　　　<option value="0" <?php if($start_time[$j] == "0") { echo "selected"; } ?>> 0 <option value="1" <?php if($start_time[$j] == "1") { echo "selected"; } ?>> 1</option> <option value="2" <?php if($start_time[$j] == "2") { echo "selected"; } ?>> 2</option> 　　　　　　　　・ 　　　　　　　　・ 　　　　　　　　・ 　　　　　　　　・ 条件を指定したときに初期値を設定したいです。どのように実装すればいいでしょうか。 よろしくいお願いします。
15年前にC言語を少し学び、以後はVBA等のスクリプト言語をたまにかじっている程度の初級者です。 PHPは今回初めて触ります。 AmazonのサジェストAPIでキーワードを取得しようと試みてみました。 http://completion.amazon.co.jp/search/complete?method=completion&search-alias=aps&mkt=6&q=キーワード このURLにキーワードを放り込むとJSONデータが帰ってきます。 例:キー [ "キー", [ "キーボード", "キーケース", "キーホルダー", "キーケース レディース", "キーケース メンズ", "キーリング", "キースへリング", "キーボード bluetooth", "キーボード 楽器", "キーカバー" ], [ { "nodes": [ { "alias": "computers", "name": "パソコン・周辺機器" }, { "alias": "electronics", "name": "家電&カメラ" }, { "alias": "mi", "name": "楽器" } ] }, {}, {}, {}, {}, {}, {}, {}, {}, {} ], [] ] ■■コード１　予測変換の取得 $text = "キー"; $url = 'http://completion.amazon.co.jp/search/complete?method=completion&search-alias='.$s_alias.'&mkt=6&q='.urlencode($text); $json = file_get_contents($url); $data = json_decode($json,true); foreach( $data[1] as $x){ $x = str_replace( $text , " " , $x); print $x; } このコード１で変換予測まではなんとかアクセス出来ました。 しかし、『nodes』の『name』と『alias』へアクセスするにはどういうコードを書けばアクセスできるか分からず詰まっています。 PHPもJSONも連想配列もよく分かって居ないため、 どの情報へアクセスすれば良いのかわからず数日右往左往してました。 詳しい方、『nodes』の『name』と『alias』へのアクセスの仕方をよろしければご教示下さいませ。
同一のサイト内でページ遷移するごとに ＭｙＳＱＬをPHPで再オープンしては閉じています。 すべてのページにＭｙＳＱＬについて書いていると 非効率的だなとも思うのですが サイトから出るまではＭｙＳＱＬの接続を保つなどできないでしょうか。
お世話になっています。 PHPのセレクトボックスの設定でわからないことがあります。 一度質問させていただいたのですが連なる点でわからないとこが出たので質問させていただきます。 不明点は３つあります。 １．セレクトボックスの値を配列で設定する 配列で設定しておけばその配列を複数使用しても参照配列さえメンテすればいいと思うので配列を想定しています ２．配列で設定したときのセレクトボックスの初期値について セレクトボックスの値をベタ書きしている場合は単にselectedすればいいと思うのですが配列の場合厳密なselectedの方法が不明です ３．配列での選択値をPOSTした場合 3つめが最もはまっています以下のソースだと選択値が配列の値が表示されますし、初期値も表示できていますが POSTした値がまともに渡されていません POST先でDB処理を想定しているのですがdate型だとすべて[00:00:00]になってしまいます。 配列を使用しないパターンだと１．２．３全てうまくいくのですがメンテナンスがしづらいので配列で指定したいです 何か、良い方法があればご教授ください //配列の値 $time = array( "0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23" ); $minute = array ("00", "15", "30", "45"); for( $a=0; $a < count( $time_array ); $a++){ $selectedStartTime =($time_array[$a] == $start_time[$j])?" selected":""; $startTimeSelectBox .= "\t<option value=\"{$time_array[$a]}\"{$selectedStartTime}>{$time_array[$a]}</option>\n"; } for($a=0; $a < count($minute_array); $a++){ $selectedStartMinute =($start_minute[$j] == $minute_array[$a])?" selected":""; $startMinuteSelectBox .="\<option value=\"{$minute_array[$a]} \"{$selectedStartMinute}>{$minute_array[$a]}</option>\n"; } <td><select name="start_time<?php echo $day ?>" onblur = "func()"> <?php echo $startTimeSelectBox ?> </select> : <select name="start_minute<?php echo $day ?>" onblur = "func()"> <?php echo $startMinuteSelectBox ?> </select> </td> かなり詰まっています。よろしくお願いします。
多言語対応の処理が入っているcontrollerのファイル出力用のメソッドを web画面からの起動と、shell起動の２パターンでよんでいます。 web画面から起動した場合は、きちんと日本語変換された文字がファイルに出力されるのですが、shell起動の場合だと、元の英語のまま出力されてしまいます。 そもそもshell起動では不可能なのでしょうか？ よろしくお願いいたします
・リンク先で下記のように書かれているのですが、SET NAMESは使わない方が良いでしょうか？ ・SET CHARACTER SETなら良いでしょうか？ ・.cnfを使用しない場合は、直接指定も可？ ＞SET NAMES だとMySQLサーバには charset が伝わるけれどクライアント側は latin1 のままなのでエスケープ処理で問題が出る可能性があります http://qiita.com/ngyuki/items/d88a4df860abb51eb714
初歩的で恐縮ですが PHP5,4手続き型で書く場合についてです。 うまくMYSQLにインサートの文章がかけず or die("データ追加エラー");のエラーの表示しかされず右往左往しています。 <?php $sv = "mysql.xxx.jp"; $dbname = "bbb"; $user = "bbb"; $pass = "aaa"; $txt="あああ"; $ip="1234"; $ua="mac"; //接続 $link = mysqli_connect($sv, $user, $pass,$dbname); //クエリ文 $query = "INSERT INTO data1 (txt,ip,ua) VALUES('$txt','$ip','$ua')"; //書込不可ならエラー表示 $result = mysqli_query($link, $query) or die("データ追加エラー"); ?> txt,ip,uaというカラムは作ってあります。そこに各変数のデータを入れたいのです。 ご指摘、添削いただけますとありがたいです。 よろしくお願い致します。
こちらのPHPがうまく出力されません。 自分なりに書いてますが なかなか間違いを見つけられず添削お願いできると ありがたいです。 最初の4行のサーバー名はダミーです $sv = "mysql.xxx.jp"; $dbname = "bbb"; $user = "bbb"; $pass = "aaa"; $link = mysqli_connect($sv, $user, $pass,$dbname); $editpagename ="main"; $query = "SELECT * FROM $editpagename ORDER BY id DESC LIMIT 0 , 50"; $result = mysqli_query($link, $query); var_dump($result); どのようなことが考えられるでしょうか？ よろしくお願い致します。
マルチドメインは、あるディレクトリをドメインのように利用するようですが、そのディレクトリより上の階層にあるファイルにもアクセスすることはできるのでしょうか？ home ├musti_domain1　←これをマルチドメインに指定 │└index.php └function.php 上記のような構成の場合、index.phpはfunction.phpをincludeすることは可能ですか？ どうぞよろしくお願い致します。
PHP4ではMYSQLと書き込みできていたんですが 双方とも5に変わってから 読み書きができなくなりました。 その後、自分なりにネットで探し 読み込みはわかり解決しましたが 書込方法に変更があったかどうか よくわかりませんでした。 書込で困っています。 どなたかその辺りデータベース接続について変更点など 教えて下さい。 よろしくおねがいします
お世話になります。 header location がなぜが飛びません。 お分かりになる方ご教授お願いいたします。 ・<?php の前にはスペースなどを入れておりません。 ・エラー表示にはなりませんが、飛びません。 <?php session_save_path("sess"); session_name("deri_user"); session_start(); require("class/User.class.php"); $end=null; if($_POST[submit]=="送信"){ if(session_is_registered("sesdata1")){unset($_SESSION[sesdata1]);session_register("sesdata1");} if(session_is_registered("sesdata2")){unset($_SESSION[sesdata2]);session_register("sesdata2");} $_SESSION[sesdata1]=htmlspecialchars($_POST[user_name]); $_SESSION[sesdata2]=htmlspecialchars($_POST[user_pass]); $user=new User(); $usn=$user->owner_name(); $usp=$user->owner_pass(); if(trim($usn)==trim($_SESSION[sesdata1]) and trim($usp)==trim($_SESSION[sesdata2])){ header('location:./kanri_gamen.php'); exit(); }else{ $end= "<br>ユーザー名又はパスワードが正しくありません。"; } $user->__destruct(); } ?> <html lang="ja"> <head> <title></title> </head> <body> <center> <h3>管理者ログイン画面</h3> <form action="user_login.php" method="post"> <table style="border:3px ridge #333333"> <tr> <td>名前 </td> <td> <input type="text" name="user_name" size="20"> </td> </tr> <tr> <td>パスワード </td> <td> <input type="text" name="user_pass" size="20"> </td> </tr> <tr> <td colspan="2" style="text-align:center"> <input type="submit" name="submit" value="送信"> </table> </form> <?=$end?> </center> </body> </html>
普段プログラミングやデザインをしないのですが、WordPressでオリジナルデザインを作ってみようと思っています。 秀丸エディタを使っているのですが、ソースを追いかけるのに、かなり時間を使ってしまい短縮出来ないものかと考えています。 Eclipseだと、関数の定義元にすぐジャンプしたり出来るようですが、秀丸エディタなどのエディタで開発されている方達はどのように追いかけているのでしょうか？ テーマ独自の関数なのか、WordPress自体で定義されているのか、関数名だけでは分からなかったりと、一つの関数を追いかけるのも苦労しています。なにか良い方法があればと思います。それとも、１ファイルずつ開いて検索を繰り返すのが普通なのでしょうか？ なお、Eclipseなどの統合環境はちょっと設定などが面倒で、重いのでなるべく避けています。
md5() や sha1() などでランダムなコードは生成できますが、15桁程度でユニークなコードを 生成するとなった場合、どの様なものがあるでしょうか？ 生成する度に以前生成したものに存在するか確認しなくても良い方法がありましたら 教えていただきたいです。
phpでメール送信プログラムを構築する際、メール本文の姓と名にスペースを入れたい場合、構文はどうすればよろしいのでしょうか？ よろしくお願いします。
PHP Version 5.3.1 を使用しています。 次のような２パターンの文字列が与えられた場合に、 fetchAllWithUser　←　Userを取得したい fetchAllWithBlogAndCommentAndImg　←　BlogとCommentとImgを取得したい fetchAllWithの後の任意の文字列（Andは除く）を１つの正規表現の記述で取得したいのですが、 どのような正規表現にすれば良いのでしょうか？
setcookie()を使ってcookieの値を更新したのですが、反映されない時があります。 クッキーに自作のセッションIDみたいなIDを保管して、そのIDを訪れる度に更新しようとしています。セッションIDなら session_regenerate_id();を使うと、更新されますよね？それと同じように自作IDに関しても、更新したいと思っています。 クッキーがうまく更新されていない時もsetcookie()の戻り値はtrue (1)です。どうしたら、session_regenerate_id();みたいにIDを更新して、反映させることができますか？
phpでmb_strlen関数を使おうと思ったら、Call to undefined function mb_strlenとエラーが出て使えません。調べたら他のmb関数も使えないようです。vagrantで作った仮想サーバなのですが、php.iniの設定がおかしいのでしょうか？
WordPressの「WP Video Posts」というプラグインで標記の問題が発生しています。 プラグインの中で、ffmpegのインストール状況をチェックする関数が exec("which ffmpeg",$output,$status); を実行し、ffmpegのフルパスを取りたいらしいのですが、 このとき$status=1(異常)になって、$outputが空になります。 試しに exec("which ffmpeg 2>&1",$output,$status); と書いたところ、$outputに「which: no ffmpeg in ((null))」が返ってきて、 PATHが通っていないことに気づきました。 ちなみに、同じスクリプトをコンソールから叩いた場合には、 正しい結果「/usr/bin/ffmpeg」が取得できます。 Webから実行した時だけ、上手く行きません。 (Webとコンソールは同じユーザーです) 以下、サーバーの情報です。 CentOS 6.4 PHP 5.3.3 nginx 1.4.2 php-fpm WordPress 3.9.2 WP Video Posts 3.1.5 nginxの実行ユーザー：nginx php-fpm(PHP)の実行ユーザー：nginx 環境変数「PATH」さえ通れば、問題が解決するのではないかと思っています。 開発方法をご存知の方、ご教示ください。 宜しくお願い致します。
僕はHTML/CSS/JavaScriptを趣味のレベルでやってきて、 そろそろサーバー側のプログラミング(今回はPHPを選びました)に挑戦したいと思っているのですが、apache等のソフトやセキュリティーについて一切の知識が無く、幾つかご質問させて頂きます。 1. そもそも、apacheやxamppは何処から何処までやってくれるソフトか分かりません。 例えば、 PC1でページを作って同じPCでページを閲覧、 PC1でページを作って、家庭の幾つかのPCで閲覧、 一般(外部)に公開、、、 とした場合、どの段階からapache等のソフトが必要になりますか？ 2. 仮に、 ルーターの設定で自分達しかみないはずになった状態でPHPのページを作るとして、 その場合、PHP上のセキュリティー(xss対策とか)をほぼ一切しなかった場合は危険ですか？ セキュリティーについて学びきってからでないと、実際のプログラムの書き込みは避けた方が良いのでしょうか？ ----- 以上の2点です。 宜しくお願いします。
CakePHPでシングルトンパターンで、インスタンスを使いまわしたいのですが、 うまく動作しません。 以下のようなプログラムですが、何か設定が足りないのでしょうか class Test{ 　　public static $instance = null; 　　public function __construct(){} 　　public function getInstance(){ 　　　if(is_null(Test::$instance)){ 　　　　Test::$instance = new Test(); 　　　} 　　　return Test::$instance; 　　} } 上記クラスを以下のように呼び出しております。 $instance = Test::getInstance(); 何度やっても、インスタンスが新しく生成されてしまします。 良い方法がございましたら、ご教授下さい。
PHPのPACK関数で次のエラーが多発しています。 ▼エラーメッセージ pack(): Type H: illegal hex digit y ※最後の文字は「y」とは限らないです ▼エラーのコード $AAA = pack("H*", $BBB); 調べたところ￥マークが入っていると このエラーが出るようでしたので、直前に除去するようにしました。 ▼直前に追加したコード $BBB = str_replace("\\", "", $BBB); しかし、まだエラーが止まりません。 どなたか解決策をご存知の方いらっしゃいますでしょうか？
$text = "日本 中国 オランダ"　を　日本, 中国, オランダのように分割するために、 以下のコードを書きました。 preg_split("/[\s]+/", $text); しかし、全角スペースの時も分割したいので、正規表現を/[　\s]+/とすると、preg_splitの返す配列に期待したものが、入りません。なぜか空文字（""）が含まれます。 どうすれば、全角スペースに対応できるでしょうか？
フェードで画像が切り替わるjQueryを使って画像を表示させています。 出てくる順番をランダムにしたいと思い、phpを記述しましたが、1枚目だけしか表示してくれません。 デモサイトがこちらです。 http://ijs.uh-oh.jp/demo/ ちなみにphpは、以下のように記述しました。 <figure id="fadein"> 　<?php $image=array( "image/photo01.jpg", "image/photo02.jpg", "image/photo03.jpg", "image/photo04.jpg", "image/photo05.jpg", ); $image = $image[rand(0, count($image)-1)]; echo '<img src=" '.$image.' " alt="">'; ?> </figure> 1枚だけでなく、ランダムで連続して表示させる方法をご教授ください。 phpは超初心者で自分なりに調べてみましたが、ギブアップしました(>_<)
私はHTML、CSSを学んだ後、SNSサイトを作りたいと考え、PHPをやり始め、データベース（MySQL）やセッション管理などを一通り学び終えました。 レンタルサーバー（XREA）も借りて準備万端（？）といったところです。 そこで早速SNSサイトを作りたいと考えたわけですが、何かアドバイスありますか？ 例えば、、、 ・まず何からやり始めればいいのか（他のSNSサイトのソースを見て参考にしてからのほうがいのか等） ・セキュリティについてはどの程度学べばいいのか。学ぶとしたらどの文献を参考にしたらいいのか。 ・CMSは使った方がよいか？（オススメのCMSなどがあれば教えてください） よろしくお願いします。
if($hoge['test_1']){ } if($hoge['test_2']){ } if($hoge['test_3']){ } if($hoge['test_4']){ } if($hoge['test_5']){ } ・上記をfor文で一気に書きたいです ・どう書けば良いでしょうか？ for ($i = 1; $i <= 5; $i++) { 　if($hoge['test_$i']){ 　} }
a.phpの値をb.phpにpostしたいのですがうまく値が渡せません post元にはname属性に変数を用いているのですがpost先でnameをどのように指定したらいいかわかりません <a.php> <form action="foo.php" method="POST"> <div id="button"> <input type="submit" name ="PostGo" value="postTime" style="margin-right:30px;" /> </div> <table> <?php for ($data = 1; $data < 5; $data++) { ?> <tr><td> <select name="test<?php echo $data?>"> <option value=1>1 <option value=2>2 <option value=3>3 <option value=4>4 </select> <?php } ?> </table></form> <b.php> <?php for($i=1;$i<5;$i++){ $test=($_POST['test']);←ここの部分のpostをどう指定したらいいかわかりません echo $test; } ?> ※$_POST['test' + $i] これでも取れませんでした
初歩的な質問で申し訳ありませんが、教えて下さい。 以下のようにSQL文を作成し、更新処理をしようとしたところ、 どうも文字化けして更新できませんでした。 そもそもの文字設定の基本を把握できていないのが問題ですが、、、 どこの何を設定すれば良いでしょうか？ よろしくお願いします。 《ＤＢ内容 （MySQL）》 項目　name varchar(50) 照合順序　sjis_japanese_ci 《プログラム内容（phpで記述）》 //データベース接続 $con = mysql_connect("localhost", "root", "999999"); // php_dbデータベースへ接続する if (!$con) { die('接続できませんでした: ' . mysql_error()); } $str = 'あいうえお'; $sql = "UPDATE tbl_ABC set name = '$str'"; if (!mysql_select_db('db_abc', $con)) { echo 'Could not select database'; exit; } $result = mysql_query($sql,$con); mysql_query("set names sjis"); if (!$result) { echo "DB Error, could not query the database\n"; echo 'MySQL Error: ' . mysql_error(); exit; } mysql_close($con) ;
閲覧いただきありがとうございます。 どうしても解決に困っているので、知恵を貸してください。 現在、PHPのcurl_multi関数を使用した、HTTPの非同期処理を実装しています。 参考にしたサイトは、下記URLです。 http://qiita.com/Hiraku/items/1c67b51040246efb4254 上記サイトに掲載されているソースをそのまま使用し、execHttpMultiThread関数を作成しました。 URLの配列とタイムアウト時間を引数とした関数です。 また、念のためfunctionの頭から最後までをtry～catchで囲みました。 上記関数を利用した、以下のような処理を書いて実行したところ、妙なエラーが発生しました。 ＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊ 【処理　test1.php】 echo 'マルチスレッド処理開始'; $http_list = array( 'http://hoge.jp/test2.php?v=multi_01', 'http://hoge.jp/test2.php?v=multi_02', 'http://hoge.jp/test2.php?v=multi_03', ); execHttpMultiThread($http_list, 30); echo 'マルチスレッド処理終了'; 【処理　test2.php】 // GETされた値を取得 $value = $_GET['v']; // 10秒間スリープ sleep(10); // ログ出力　※ログを出力させる自作関数です writeLogInfo(date('Y-m-d H:i:s'). ' 処理が完了しました：'. $value, 'test', 'ThreadTest'); ＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊ 【表示されるエラー】 マルチスレッド処理開始 Warning: (null)(): 12 is not a valid cURL handle resource in Unknown on line 0 Warning: (null)(): 13 is not a valid cURL handle resource in Unknown on line 0 Warning: (null)(): 14 is not a valid cURL handle resource in Unknown on line 0 Warning: (null)(): 12 is not a valid cURL handle resource in Unknown on line 0 Warning: (null)(): 13 is not a valid cURL handle resource in Unknown on line 0 Warning: (null)(): 14 is not a valid cURL handle resource in Unknown on line 0 ＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊ 警告が出ているのは分かるのですが、関数名・ファイル名・行数など 何も書かれていないため、まったく原因が分かりません。 マルチスレッド関数を実行した後、表示させたいメッセージが表示されていないため 関数から処理が帰ってきていないだろうことは分かるのですが・・・ 皆さんの知恵を貸していただけないでしょうか。 よろしくお願いいたします！
ログインページからログインしたら、掲示板ページに飛ぶようにしているのですが、その掲示板ページを一意なものにしたいです。 掲示板ページのURLを直打ちしてもログインしていないユーザーははじかれるという形です。 何の関数などを使えばいいのでしょうか？
こんにちは。 CakePHP2.4.10をダウンロード後の、「database.php」の設定についてお聞きしたいです。 当方Mac OSX、MAMPを使用しています。データベース管理はphpMyAdminで行っています。 phpMyAdminのユーザを以下のように設定しました。 ユーザ：cakephp ホスト：localhost パスワード：はい（任意のものに設定済み） グローバル特権：USAGE 権限移譲：いいえ MAMPのhtdocsフォルダ内にcakesのフォルダを移動後、 http://localhost:8888/cakephp/ を見て、エラーを確認すると、 CakePHP is NOT able to connect to the database. Database connection "Mysql" is missing, or could not be created. というエラーが出ています。 こちらのサイト（http://eight-smile.com/blog/web/cakephp%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%97%E3%81%A6%E3%81%BF%E3%81%BE%E3%81%97%E3%81%9F%E3%80%82/）では、database.php.defaultの拡張子をdatabase.phpに変更後、 ・login ・password ・database のみを書き換えればよいとのことだったので、 ・'login' => 'cakephp' ・'password' => '任意のパスワード' ・'database' => 'mini_bbs'（phpMyAdminでテーブル作成済） としました。 それでもエラーは消えないです。どうすればよいのでしょうか？お教え下さい。
function内での時間計算方法がいまいちうまくいきません。 調べたりして書いたのですがfunctionが呼ばれず処理が働きません 入力した場所からフォーカスが外れたとき呼ぶようにしています ※ onblur = func() <test.php> function func(){ $s_time = parseFloat(document.TEST.start_time.value);　//入力値Aの時間 $s_minute = parseFloat(document.TEST.start_minute.value);　//入力値Aの分 $e_time = parseFloat(document.TEST.end_time.value);　//入力値Bの時間 $e_minute = parseFloat(document.TEST.end_minute.value);　//入力値Bの分 //共通変数 $base_start = 540; $base_end = 1080; $s_t = $s_time * 60; $s_data = $s_t + $s_minute;　//分に変換 $e_t = $e_time * 60; $e_data = $e_t + $e_minute;　//分に変換 --------------------------ここから計算処理 $kekka_start = $s_data - $base_start; $kekka_end = $base_end - $e_data; $kekka_data = $kekka_start + $kekka_end; $kekka_min = $kekka_data / 60; //時間に変換 $kekka_time = explode(".",$kekka_min); //小数点の切り捨て☆ $kekka_times = $kekka_data - ($kekka_time[0] * 60); //--分のデータ作成 $CS = ($kekka_time.":".$chis_times); //表示データの連結☆ document.TEST.kekka.value = CS; } ☆の部分がうまくいきません。コメントアウトしてexplode前の変数を表示するならばできるのですが 時間の合計を出したいので時間と分を別々に出して連結で表示させたいです。 かなり詰まっています。どうかよろしくお願いします。
ログイン画面を作っています。 メールアドレスとパスワードを入力するとログイン完了画面に飛ぶという形です。 入力したメールアドレスをデータベースから検索し、パスワードを照合して合致すれば完了画面へ、しなければはじかれるようにしたいのですが正しいパスワードを入力しても完了画面に飛びません。 回答よろしくお願いします。 ソース文(入力するテキストボックス等のソースは省いています) <?php if(isset($_POST['login'])) { if(empty($_POST['email'])) { print('メールアドレスを入力してください'); } elseif(empty($_POST['password'])) { print('パスワードを入力してください'); } elseif(!empty($_POST['email']) && !empty($_POST['password'])) { try { $db = new PDO('mysql:host=●;dbname=●;charset=utf8', '●', '●'); $stt = $db->prepare('SELECT password FROM `information` WHERE email=:email'); $stt->bindValue(':email', $_POST['email']); $stt->execute(); } catch(PDOException $e) { die('Error:'.$e->getMessage()); } /* while ($row = $stt->fetch()) { print($row['password']); } */ if($row['password'] == $_POST['password']) { header('Location: ログイン完了画面のページ'); } else { print('入力内容が間違っています。'); } } } ?>
ループでテキストボックス、セレクトボックスを作成しそれぞれのコントロールに入力した値を別phpファイルに渡すことを考えています。 ループではなく一個一個テキストボックスを作れば個々のname属性をpostすればいいと思うのですがループの場合、それぞれの入力値をどのように渡せばいいかわかりません。 <test.php> <html xmlns="http://www.w3.org/1999/xhtml"> <head> <link rel="stylesheet" href="style.css" type="text/css" /> <meta name="viewport" content="width=device-width"> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> <title>勤怠データ入力</title> </head> <script type="text/javascript"> function myEnter(){ myRet = confirm("入力画面を閉じてよろしいですか？"); } </script> <body> <div id="name"> <table> <tr style="text-align:center; background-color:#DDEBF7;"> </tr> <form name = "Data" action="foo.php" method="POST"> <tr style="text-align:center;"> </tr> </table> </div> <div id="button"> <input type="submit" name ="touroku" value="登録更新" style="margin-right:30px;" /> <input type="submit" value="戻る" onclick="myEnter()" /> </div> <div id="calendar"> <table style="text-align:center;"> <tr style="text-align:center; background-color:#DDEBF7;"> <td style="width:20px;">日</td> <td>開始時間</td> <td>終了時間</td> <td>入力１</td> <td>入力２</td> <td>入力３</td> </tr> <tr><!--1日--> <?php $day = 1; while ($day < 32){ ?> <td><input type="text" readonly value="<?php echo $day ?>" style="width:20px;"</td> <td><select name="start_time" > <option value="0" > 0</option> <option value="1" > 1</option> </select> : <select name="start_minute"> <option value="00" >00</option> <option value="30" >30</option> </select> </td> <td><select name="end_time" > <option value="0" >0</option> <option value="1" >1</option> </select> :<select name="end_minute"> <option value="00" >00</option> <option value="30" >30</option> </select> </td> <td><input type="text" name = "nyuryoku1" value="" style=width:150px></td> <td><input type="text" name = "nyuryoku2" value="" style=width:150px></td> <td><input type="text" name = "nyuryoku3" value="" style=width:150px></td> </td> </tr> <?php $day++; } ?> </form> </body> </html> <foo.php> <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> <?php $s_hour= ($_POST['start_time']); $s_minutes= ($_POST['start_minute']); $e_hour= ($_POST['end_time']); $e_minutes= ($_POST['end_minute']); $data1= ($_POST['nyuryoku1']); $data2= ($_POST['nyuryoku2']); $data3= ($_POST['nyuryoku3']); $s_time = ($s_hour.$s_minutes); $e_time = ($e_hour.$e_minutes); echo '開始時間'; echo $s_time; echo '終了時間'; echo $e_time; echo '入力１'; echo $data1; echo '入力２'; echo $data2; echo '入力３'; echo $data3; ?> <html xmlns="http://www.w3.org/1999/xhtml"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> <title>無題ドキュメント</title> </head> <body> テスト実行 </body> </html>
以下のようなスクリプトを書いた時に、phpMyAdminで、テーブルの中身をみると、 photo カラムには、添付画像ファイルのファイル名の値が入っているのに、 bbs.php側からアップデートしようとすると、ip_add以下passwordまでのカラムの 中身が空なのです。SQLの文法的に何かまちがってるでしょうか？ 一応、ラストレコードのカラムを更新することを念頭に置いておりますが。 <file_upload.php> $sql = "INSERT INTO bbstbl_test (photo) VALUES('$upfilename');"; -------------------------------------------------------------------------------- <bbs.php> $sql = "UPDATE bbstbl_test SET ip_add = $ip_add, date = $date, name = $name, email = $email, title = $title, message = $message, password = $password;";
abc.csvというcsvデータを2次元配列にして、その中から指定した行（送信されてきた値$linenum = $_POST['num'];）の5番目の値を1つ増やして、またcsvデータに上書きしたいと思い下記のようにしてみたのですが、うまくいきません。どのようにすればいいのでしょうか、具体的に教えていただければ、ありがたいです。よろしくお願いします。 <?php header("Content-Type: text/html; charset=UTF-8"); $linenum = $_POST['num']; $list = fopen("abc.csv", "w"); $h = 0; while ($array = fgetcsv($list, 1000,",")) { 　 for ($i = 0; $i < count($array); $i++){ 　 $newarray[$h][$i] = $array[$i]; } $h++;　 } $cu = $newarray[$linenum][4]; $cu = $cu + 1; $newarray[$linenum][4] = $cu; fputcsv($list, $newarray); fclose($list); ?>
phpの検索処理で、検索キーワードにマッチした文字列を強調表示（<strong>）して表示したいのですが、タグ文字の処理でわからないことがあります。 例えば 「<a href="test">tes;t</a>」というデータがあり（現状すべてエスケープして表示）、キーワード「</」で検索したとき、該当文字列に<strong>タグをつけた後にエスケープすると<strong>タグまでエスケープされてしまい、強調表示ができません。検索前にエスケープしてしまうとキーワード「;」で検索した時に全てのタグ文字の後に強調された「;」が表示されてしまいます。 どなたかうまい解決方法があれば教えていただきたいです。 よろしくお願いいたします。
phpおよびjavascriptで下記を実現したいと考えております。 ある程度、調べてみました煮詰まりましたのでお知恵をおかしください。 初期表示時にはボタンを２つ表示します。 更新ボタンと表示・非表示ボタンです。 表示・非表示ボタンをクリックしますと、 DBの値を取得して画面に出力します。 DBに値がなければ「データなし」と出力します。 また表示・非表示ボタンにはクリックする度にDBから取得した値を出力する領域を display:none、blockで切り替える役割も持たせたいです。 更新ボタンはＤＢにinsertするだけです。 ======= どちらのボタンがクリックされたかの判定はボタンをformで囲ってsubmit。 $_POST['xxx']で判定。しかしながら$_POST['xxx']で判定してphpを実行しますが display:none、blockも行いたい。どうすれば良いのか、ここで詰まっております。 以上です。
○質問の主旨 preg_replace関数の引数の一部にある<a>タグ内の target属性を"_blank"にしていますが、新しいウィンドウが開かず、 元の画面のまま、href属性のリンク先に遷移します。 新しいウィンドウにhref属性のURLを表示させるためには どうすれば良いでしょうか？ ご存知の方がいらっしゃいましたら、ご教示願います。 ○質問の補足 現在、以下のようなコードを用いています。 $tweet['text']=preg_replace("/(http:\/\/t.co\/[a-zA-Z0-9]{10})/", "<a href=\"\\0\"　target=\"_blank\">\\0</a>", $tweet['text']); $tweet['text']とは、Twitter RESTAPI1.1のGET search/tweetsから ひっぱってきた文字列で、ツィート本文のことです。 コード全体の意味は、 「ツィート本文にhttp://t.co/○○○○○○○○○○という文字列があれば、 そのリンク先にtarget=_blankで遷移しなさい」 ということになります。 以上、よろしくお願い申し上げます。
こんにちは、 参考にしたサイトに下記文があったのですが $get_meta = isset($get_meta[0]) ? $get_meta[0] : null; issetで存在を確認するという意図だと思うのですが ? $get_meta[0] : null;この部分はどうゆう意味になるのでしょうか？
下記のようにinputタグから値をphpにおくり、csvファイルに保存しようとしています。 値１に12345 値２に67890 値３にあいうえお というように値を送って保存し、csvファイルを開くと、 12345," 67890",あいうえお というように、値２として送ったものの先頭にダブルコーテーションとスペース、最後にダブルコーテーションが勝手に入ってしまいます。なぜ何でしょうか？対処法も含め教えていただければありがたいです。よろしくお願いします。 --------------------html---------------------------------- <form action="send.php" method="post"> 値１：<input type="text" name="aaa" > 値２：<input type="text" name="bbb" > 値３：<input type="text" name="ccc" > <input type="submit" value="送信する"> </form> --------------------php---------------------------------- <?php $val[0] = $_POST['aaa']; $val[1] = $_POST['bbb']; $val[2] = $_POST['ccc']; $fp = fopen("valdata.csv", "a"); fputcsv($fp, $val); fclose($fp); ?>
　今晩は、ＰＨＰの掲示板（コメントと画像付）をwebにアップして、 会員同士（パスワードでアクセス）で使いたいと考えています。 　フリーの掲示板で設定等の簡単なもので、使い勝手（せキュリティ、投稿記事の管理等） が良くて、設定等の簡単なものがあれば教えて下さい。 　内容によっては有料でも止むを得ないと考えています。 　合わせて、レンタルサーバーの情報も分かればありがたいです。 　以上宜しくお願いします。
.htaccessでインクルードパスの設定をしたいのですが、 500 internal server error がでます。 どうしたらエラーが出ず正しくできるのでしょうか。 よろしくお願いします。 ・下記は.htaccessファイルに書き込んだ内容 php_value include_path ".:/home/u62/public_html/PEAR" ・下記はPEARフォルダの配置場所 /home/u62/public_html/PEAR ・下記は現在のinclude_path include_path.:/opt/php-5.3/pear
初歩でつまづいていると思うのですが、回答よろしくお願いします。 必須項目を入力する、登録画面を作っています。 必須項目につけた条件を満たさないと、テキストボックスの横にエラーメッセージが出る仕組みになっているのですが、必須項目を全て入力しないで登録ボタンを押したときに、途中まで入力したものも全て消えてエラーメッセージが出てしまいます。 必須項目を全て入力しないで登録ボタンを押したときは、途中まで入力したものをそのまま残して　 エラーメッセージを出したいです。 どうすればよいのでしょうか？
教えて下さい。 入力画面（AAA_NEW.php）より入力された情報が正しいかどうかをチェックするPREVIEW画面という画面を設け、 エラーがあった場合は、また入力画面に戻るような事をしたいと考えています。 そこで、以下のような記述をしましたが、エラーの際に戻る場合に入力情報が消えてしまっている為、引数として 渡すような事を考えていますが、どのような方法があるでしょうか？ PHPで input type='hidden' なんかが使えれば、私もわかるのですが、、、 初歩的な質問で申し訳ありませんが、教えて下さい。 よろしくお願いします。 《PREVIEW画面》 ↓ここで入力画面からの引数を取得 if($_POST['p_syamei'] != NULL) { $tmp_p_symei = $_POST["p_syamei"]; }else{ $ERR_FLAG1 = 1; } if($_POST["p_syamei_furigana"] != NULL) { $tmp_p_syamei_furigana = $_POST["p_syamei_furigana"]; }else{ $ERR_FLAG2 = 1; } <script> function btn_ins2() { window.open("about:blank","window_name","width=640,height=480,scrollbars=yes,menubar=yes,toolbar=yes,status=yes"); document.f_od.target = "window_name"; document.f_od.method = "POST"; document.f_od.action = "AAA_NEW.php"; document.f_od.submit(); } </script> ********************************************************** <?php if ($ERR_FLAG1 == 1){ print("社名を入力して下さい。"); print("<TD><DIV Align='right'><input type='button' name='btn_order' onclick=btn_ins2() value='　戻る　'></DIV></TD>\n"); die; }else if($ERR_FLAG2 == 1){ print("社名フリガナを入力して下さい。"); print("<TD><DIV Align='right'><input type='button' name='btn_order' onclick=btn_ins2() value='　戻る　'></DIV></TD>\n"); die; } ?>
レンタルサーバーと契約していてPEARのライブラリを サーバーにインストールしようとしてもうまくいかなかったので レンタルサーバーに問い合わせをしました。 「PEARライブラリをユーザー環境で利用しても問題ないか サーバー管理者に確認する」とのことでしたが もう2日たっていますが連絡がありません。 レンタルサーバーでPEARのライブラリをインストールすることは そんなに大変なのでしょうか。 ちなみにcgiなどは使用できる環境です。
現在会員制サイトを作成しており http://sample.com/USER_ID/ のようなユーザーIDを含むURLを取得したいと思っています。 USER_ID　半角英数字(ハイフンアンダーバーを含む)の文字列の正規表現の記述をご教授いただけるとありがたいです。
下記のような前提となる配列と、その配列を使った子要素の組み合わせを得られるファンクションを作成しようとしているのですが、なかなかうまく思いつきません。 どのようにしたら可能になりますでしょうか？ 【前提】==================== $arr_lst = array( array( 'aaa', 'bbb', ), array( 'AAA', 'BBB', ), array( '111', '222', ), ); 【期待する結果】==================== 'aaa' 'bbb' 'AAA' 'BBB' '111' '222' 'aaa'-'AAA' 'aaa'-'BBB' 'aaa'-'111' 'aaa'-'222' 'bbb'-'AAA' 'bbb'-'BBB' 'bbb'-'111' 'bbb'-'222' 'AAA'-'111' 'AAA'-'222' 'BBB'-'111' 'BBB'-'222' 'aaa'-'AAA'-'111' 'aaa'-'AAA'-'222' 'aaa'-'BBB'-'111' 'aaa'-'BBB'-'222' 'bbb'-'AAA'-'111' 'bbb'-'AAA'-'222' 'bbb'-'BBB'-'111' 'bbb'-'BBB'-'222' 以上、よろしくお願い致します。
検索したものに少し手を加えて、以下の関数を使って、URLを元にウェブページのタイトルを取得しています。 　function getPageTitle( $url ) { 　 $html = file_get_contents($url); 　 $enc_format = "JIS, eucjp-win, sjis-win, UTF-8"; 　 $html = mb_convert_encoding($html, "UTF-8", $enc_format); 　 preg_match("/<title>(.*)<\/title>/is", $html, $retArr); 　 return $retArr[1]; 　} しかし、ページによってはタイトルを取得するまでの時間が遅いです。おそらく、HTMLをすべて読み取るまで、終了しないため、遅くなるのだと思います。今回はタイトルを取りたいだけなので、もっと早く処理ができてほしいです。何か方法はございますか？
wordpress初心者です。 jqueryを使う際、cssのリンクが含まれているのですが、 これが元々のwordpressのテンプレートのcssと干渉して しまいます。 何かいい解決方法はないでしょうか？ よろしくお願いします。
cakephpで画像のダウンロード機能を実装しています。 webroot/imgに画像は入っています。 controllerで public function download($filename = null){ $this->autoRender = false; $this->response->file('img/' . $filename); $this->response->download($filname); } とし、 viewで <?php echo $this->Html->link('ダウンロード', array('controller' => 'images','action' => 'download', $image['Model']['filename'])); ?> このようにリンクしています。 ファイル名が英語の画像は問題なくダウンロードできるのですが、ファイル名が日本語の画像がダウンロードできません。 The requested file img/日本語ファイル名.jpg was not found or not readable Error: The requested address '/illusts/image/%～.jpg' was not found on this server. リンクをクリックするとこのように表示されます。 webroot/imgにはちゃんと画像は入っているのですが・・・。 どのようにしたら、日本語名のファイルもダウンロードできるようになるのでしょうか。 どなたかご教授ください。 よろしくお願いいたします。
質問させていただきます。 PHPではset等プロパティ宣言をしなくても動作はしますが、皆様はPHPで開発する際に使用する変数等全てアクセサを介して使用しているのでしょうか？ もし、アクセサを介す場合、直変数で使用する場合など分けていらっしゃる方がいるのであれば、 どういうメリット等からそのような方法を採用されているのか教えていただけると助かります。 何卒よろしくお願い致しますm(_ _)m
お世話になります phpのpreg_replaceで質問です 下記の様な記述にて文字列の置換をしています $body = preg_replace("/cid:(\d{2,})@(\d{6}).(\d{6})/","/bl/id/$1/",$text); コレを改良してcidの次に入る値で処理を分けたいのですが、うまくいきません。 どなたかご教授お願い致します $arr = array("gif","jpg"."png"); $body = preg_replace("/cid:(\d{2,})@(\d{6}).(\d{6})/","/bl/id/$1/$arr[$1]",$text); 宜しくお願い致します
このカテゴリには初めて投稿いたします。 どうにも解決ができないため、質問させていただきました。 cakephpで、注文番号の連番発行のために、今回初めてトランザクション処理が必要なケースが出てきまして、 ネットで検索して出て来る情報を元に、そのとおりに記述しているのですが、どうやってもうまく行きません。 ＤＢのテーブルはInnoDBになっています。 参考にしたサイトは例えば http://wataame.sumomo.ne.jp/archives/3812 などです。 --------------------実際のコード -----以下はあるモデル内(ここでは、SamplemodelDataとしています)に記述した関数での処理です。$thisはそのモデルを示します。 $dataSource = $this->getDataSource(); $dataSource->begin($this); $res = $this->find('first',array('conditions'=>array('classification'=>$classification,'commoncode'=>$commoncode))); if($this->getNumRows()==0){//レコードなしの場合 $returnNumber = 1; $this->save(array('classification'=>$classification, 'commoncode'=>$commoncode, 'number'=>1)); }else{ $res['ExsamplemodelData']['number'] += 1; $returnNumber = $res['SamplemodelData']['number']; $this->set('id', $res['SamplemodelData']['id']); $this->saveField('number', $returnNumber); } $dataSource->commit($this); return $returnNumber; -------------------- ■目的 ユーザーが同時刻に何人同時に注文しようと、注文番号を重複させずに注文番号を採番することが目的です。 極端なことを言えば、ある同じ時刻（秒まで一緒）に世界各国から100人同時に全く同じタイミングで注文が入っても、注文番号を重複させないようにしたいです。 ※DBのシリアルを使えば確実に重複させないようにできることは知っています。しかし、今回は単純に連番だけでなくいろいろなケースにおいて意味をもつ文字列も付与したものをプライマリキーとしているので、単純なシリアルではだめなのです。 ■うまくいかない点 ・上記の記述でも、トランザクション自体は機能しているようです。 　最後の　$dataSource->commit($this);　をコメントアウトにすると、DBの番号が永遠にインクリメントされませんので。 ・begin　～　commit　までの間に、他のスレッドで、 $this->find('first',array('conditions'=>array('classification'=>$classification,'commoncode'=>$commoncode))); が実行されると、インクリメントされる前の番号が返されるのです。 ＝＞それよりも前のスレッドが　begin　をした瞬間からcommitするまでは、他のスレッドでfindしても、待ち状態になって欲しいのです。 ・検証用プログラムで、上記の処理を、２つのブラウザから同時に100回繰り返す（２つ併せて200回繰り返し処理させる）と、 毎回200件中、5～7件程度、番号が重複してしまいます。 ■質問内容 ・このような精度を求めるようなケースでは、cakephpでトランザクション処理をしても、もともと無理な要望なのでしょうか？ ・上記の記述で不足している部分は何でしょうか？例えば、mysqlのトランザクションには他スレッドから、updateだけを禁止にする指定と、updateとselectも禁止にする指定ができるようですが、上記の記述だと他スレッドではupdateしか禁止されていないために、selectであるfindは待ちが発生しないということなのでしょうか？しかし、selectも禁止にするとかそういう指定方法がどう探してもそういう情報が見つけられませんでした。 要約すると、つまり、 「cakephpでトランザクション処理（beginからcommitの間は、他スレッドからはupdateもselectも禁止）にする方法はどうやったらよいのでしょうか？」 ということでございます。 ご存じの先生方、是非、お力お貸しいただけますでしょうか。 何卒よろしくお願いいたします。
とても初歩的な質問だと思いますが、回答よろしくお願いします。 データベースに保存した値を更新するページのテキストボックスに、データベースの現在値を反映させたいです。 使っている本には、フォーム要素のvalue属性に対応するフィールド値を反映させる、と書いてあるのですが、その通りにやってもできません。 edit.php <?php try { $db = new PDO('mysql:host=●●;dbname=●●;charset=utf8', '●●', '●●'); $stt = $db->prepare('SELECT name, email, password FROM `users` WHERE number = :number'); $stt->bindValue(':number', $_GET['number']); $stt->execute(); } catch(PDOException $e) { die('Error:'.$e->getMessage()); } ?> <?php /* print($_GET['number']); */ ?> <!DOCTYPE html> <html> <head> <meta charset="UTF-8" /> <title>インフォメーション</title> </head> <body> <h3>あなたの登録情報</h3> <form method="POST" action="dbconnect4.php"> <input type="hidden" id="number" name="number" maxlength="3" value="<?php print($row['number']); ?>" /> <div class="container"> <label for="name">ユーザ名</label><br/> <input type="text" id="name" name="name" size="10" maxlength="20" value="<?php print($row['name']); ?>" /> </div><br /> <div class="container"> <label for="email">メールアドレス</label></br /> <input type="text" id="email" name="email" size="30" maxlength="100" value="<?php print($row['email']); ?>" /> </div><br /> <div class="container"> <label for="password">パスワード</label><br /> <input type="password" id="password" name="password" maxlength="20" value="<?php print($row['password']); ?>" /> </div><br /><br /> <input type="submit" name="update" value="更新する" /> <input type="submit" name="delete" value="削除する" onclick="return confirm('本当に削除してよろしいですか？')" /> </form> </body> </html> information.php <?php try { $db = new PDO('mysql:host=●●;dbname=●●;charset=utf8', '●●', '●●'); $stt = $db->prepare('SELECT name, email, password FROM `users` WHERE email = :email AND password = :password '); $stt->bindValue(':email', $_POST['email']); $stt->bindValue(':password', $_POST['password']); $stt->execute(); } catch(PDOException $e) { die('Error:'.$e->getMessage()); } ?> <?php /* print($_POST['email']); print($_POST['password']); */ ?> <!DOCTYPE html> <html> <head> <meta charset="UTF-8" /> <title>インフォメーション</title> </head> <body> <h3>あなたの登録情報</h3> <table border="1"> <tr> <th>ユーザ名</th><th>メールアドレス</th><th>パスワード</th><th></th> </tr> <?php while ($row = $stt->fetch()) { ?> <tr> <td><?php print($row['name']); ?></td> <td><?php print($row['email']); ?></td> <td><?php print($row['password']); ?></td> <td><a href="edit.php?number=<?php print($row['number']); ?>">編集する</a></td> </tr> <?php } ?> <br /><br /> </body> </html> information.phpの編集する、というリンクからedit.phpに飛ぶようになっています。 information.phpの前の画面でパスワードとメールアドレスを入力し、それらが一致したらinformation.phpでレコードを抜き出すという仕様になっています。 回答よろしくお願いします。
CakePHP2を使用して、開発を行っているのですが、 AppControllerを継承したControllerのあるメソッドで、 別のコントロー(AppController継承)をnewでインスタンスを生成し、 自前のコントローラのあるメソッドを呼び出しているのですが、 自前のコントローラのメソッド内で、セッション情報取得しようとすると 「Call to a member function load() on a non-object」 となりエラーになります。 AppControllerには、コンポーネントの呼び出しを行っています。 public $components = array('Common','Session'); newして使わないコントローラだと、セッション情報を取得できるのですが、 newしたコントローラでは、セッション情報にセットした情報を取得することができません。 newしたコントローラへ必要な情報を渡すには引数以外はないのでしょうか。 セッション情報をnewしたコントロールで取得したいのですが、 可能でしょか。
Parse error: syntax error, unexpected ';' in C:\xampp\htdocs\meibo_kanri.php on line 101 と出てしまいますが、どこがダメなのかさっぱり分からず困っています。 コードは、次のようになります。 phpを知ってまだ一週間で、なかなか理解することができず、無知なひよっこです。 どうか、ご助力ください。 【コード】 <?php //セッション開始 session_start(); //データベース設定 $dbServer='localhost'; $dbUser='root'; $dbPass='1234'; $dbName='kadaitest_db'; $flag=TRUE;//フラグ変数の初期化 //データベース接続 if(!$link = mysql_connect($dbServer,$dbUser,$dbPass)){ $flag=FALSE; } else if(!mysql_set_charset('utf8',$link)){//クライアント側の文字コードと、サーバ側の文字コードの設定 $flag=FALSE; } if($flag==TRUE){ //データベース選択 $db_selected = mysql_select_db($dbName, $link); if (!$db_selected){ die('データベース選択失敗です。'.mysql_error()); } /*//登録した内容の一覧表示 $result = mysql_query('SELECT id,name,date,address,tel,age FROM list'); if (!$result) { die('クエリーが失敗しました。'.mysql_error()); } while ($row = mysql_fetch_assoc($result)) { print('会員No：'.$row['no']); print('　名前：'.$row['name']); print('　カナ：'.$row['kana']); print('　生年月日：'.$row['birth']); print('　入会日：'.$row['enter'].'<br/>'); } */ } else{ echo 'データベースエラー'; } ///////////////////////////////////////////////////// //////////////////////////// //入力した値の変数を設定 $in_no=$_POST['no']; $in_name=$_POST['name']; $in_kana=$_POST['kana']; $in_birth=$_POST['birth']; $in_enter=$_POST['enter']; /*新規登録 */ if($_POST['toroku']) { echo '<div class="kekka"><strong>【新規登録】</strong><br />'; //「会員No」を入力した場合 if($in_no){ //「会員No」に半角数字を入力した場合 if(ctype_digit($in_no)){ //「会員No」に５桁入力した場合 if(strlen($in_no)==5){ //クエリの作成 $sql = sprintf("INSERT INTO list (id,name,kana,birth,enter) VALUES ('%s','%s','%s','%s','%s')",mysql_real_escape_string($in_no),mysql_real_escape_string($in_name), mysql_real_escape_string($in_kana),mysql_real_escape_string($in_birth), mysql_real_escape_string($in_enter)); //クエリの実行 $result_flag = mysql_query($sql); if ($result_flag) { echo '以下の内容で登録しました。<br />'; } else { echo '<span class="err">登録が失敗しました。<br />'.mysql_error().'</span>'; } //「会員No」に５桁以外を入力した場合 } else { echo '<span class="err">登録が失敗しました。<br />「会員No」は5桁で入力してください。</span>'; } //「会員No」に半角数字以外を入力した場合 }else{ echo '<span class="err">登録が失敗しました。<br />「会員No」は半角数字で入力してください。</span>'; } //「会員No」を入力していない場合 }else{ echo '<span class="err">登録が失敗しました。<br />登録する会員Noが指定されていません。</span>'; } //入力内容の表示 echo '<br />■入力内容<br />'; echo '<span>会員No</span>：'.$in_no.'<br />'; echo '<span>名前</span>：'.$in_name.'<br />'; echo '<span>カナ</span>：'.$in_kana.'<br />'; echo '<span>生年月日</span>：'.$in_birth.'<br />'; echo '<span>入会日</span>：'.$in_enter.; echo '</div>'; //セッション終了 session_destroy(); } // 結果セットに関連付けられているリソースの開放 // これは、スクリプトが終了する際に自動的に実行されます。 //mysql_free_result($result);//メモリ開放（mysql_queryより得られた値） // DBリンクの切断 // これは、スクリプトが終了する際に自動的に実行されます。 $close_flag = mysql_close($link); ?>
下記のようなPHPスクリプトにおいて、ファイル選択ダイアログで選択したファイルを bbs.php で、$photo変数をGETで受け取るにはどうすればいいのでしょうか？ちなみに今のところ、受け取った $photo変数の中身はNULLです。 GET渡し以外にも方法があれば教えていただきたいです。（たとえば、$_SESSION['']変数を利用するなど） 【bbs.php】 <td><b>画像を添付</b></td> <!-- インラインフレーム --> <td><iframe src="test.html" width="460" height="40" frameborder="no" scrolling="no"> フレームを表示できないブラウザへのメッセージ </iframe> </td> ～ <?php $photo = $_GET['photo']; // 添付画像ファイル名 ?> --------------------------------------------------------------- 【test.html】 <html> <head><title>ファイルのアップロード</title> <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> </head> <body text="white"> <table rows="1" cols="3" height="30" border="0"> <tr> <td valign="top">画像選択（10MB以下）</td> <form action="./file_upload.php" method="post" enctype="multipart/form-data" target="upload_frame"> <!-- upload_frame : ダミーフレーム --> <input type="hidden" name="max_file_size" value="10240000"> <td valign="top"><input type="file" name="sendfile" /></td> <td valign="top"><input type="submit" value="送信" /></td> </form> </tr> </table> <div id="container"></div> <iframe name="upload_frame" sytle="display:none;"></iframe> </tr> </form> </table> </body> </html> ---------------------------------------------------------- 【file_upload.php】 <?php $upload_dir = './files/'; $filename = $_FILES['sendfile']['name']; if(move_uploaded_file($_FILES['sendfile']['tmp_name'], $upload_dir.$filename)){ echo "画像".$filename."をアップロードしました。<br><br>"; // データベースの画像カラムを挿入する $con = mysql_connect("～", "～", "～"); // ローカルのMySQLデータベースサーバーに接続する mysql_select_db("～"); // データベースサーバーに存在する（myPHPAdminで作成済みの）データベースを選択する // ラストレコードの画像ファイルカラムを更新する $sql = "UPDATE bbstbl SET(photo=$_FILES['sendfile']['name']) WHERE ORDER BY sid limit 1;"; $result = mysql_query($sql, $con); $rowco = mysql_affected_rows($con); // テーブルの行数 mysql_close($con); // データベースとの接続を解除する //header("Location: bbs.php?photo=$filename"); }else{ echo "画像のアップロードに失敗しました。<br><br>"; } ?> <script type="text/javascript"><!-- var container = parent.document.getElementById('container'); image = parent.document.createElement('img'); image.src = './<?php print($filename);?>'; container.appendChild(image); //--></script> -------------------------------------------------------------
初歩的な質問ですみません。 現在、PHPで問い合わせフォームを作成しており、チェックボックスが選択されていない場合に、エラーを返す処理を行いたいです。 通常のテキストフィールドの場合は、下記の文言でエラー処理が行われるのですが、 チェックボックスが選択されているかを見るにはどうすればよいかご教示いただけないでしょうか。 ーーーーーーーーーーーーーーーー ■フォーム側 {if:$required.お名前} <p>エラー文</p> {/if:$required.お名前} ■php // 入力必須チェック if (isset($_POST['required'])) { foreach ($_POST['required'] as $v) { $tmpl->set("required.$v", false); if (empty($_POST[$v])) { $tmpl->set("required.$v", h($v . ERROR_REQUIRED)); $global_error[] = h($v . ERROR_REQUIRED); $global_error_flag = true; } } } ーーーーーーーーーーーーーーーー
お世話になります。 「いきなりはじめるPHPワクワク・ドキドキの入門教室 」という本に 従って、フォームの送信ボタンを作成したのですが、以下の症状が出ます。 ・送信ボタンはクリックすると色が一瞬変わりますが、何も 起きません。 ・フォームの枠内でenterを押すとcheck.phpに飛びますが、 表示されるのが、check.phpのHTMLが表示される。 （色々いじっている際、１、２度はcheck.phpの ブラウザ上の表示が出たことがありました。その際も送信ボタンでなく フォームの枠内でenterで表示） index.htmlの内容は以下の通りです。 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> <html> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <title>ＰＨＰ基礎</title> </head> <body> <form method="post" action="check.php"> ニックネームを入力してください。<br /> <input name="nickname" type="text" style="width:100px"><br /> <br /> <input type="submit" value="送信"＞ </form> </body> </html> 環境は、 Mac OS X バージョン10.9.4 ブラウザは　Google Chromeバージョン 35.0.1916.153 です。 ネットでも色々調べてみたのですが、 解決できなかったので質問させていただきます。 以上どうぞよろしくお願い致します。
PHPのオブジェクト指向を学んでいるのですが、 つまづいていて、なんかしらのフレームワークを学ぶことによって、結果的にオブジェクト指向がわかればいいかと考えています。 そのためにはどのフレームワークがおすすめでしょうか？ なお、日本で人気のある（※）cakePHPを途中までやっていたのですが、 インスタンスする機会がかなりないようなので、ほかのがいいかなと思っています。 ちなみに、多言語でのオブジェクト指向の経験はほぼ皆無です。 よろしくお願いします。 （※）2014年2月PHPフレームワークのトレンド http://demouth.hatenablog.com/entry/2014/02/14/020951
PHP初心者です OS windows vista 今回xamppをインストールしたのですが、 以前アパッチを単体でインストールしたことが影響しているのか、 ブラウザでの表示がうまくできません Object not found! 要求された URL は本サーバでは見つかりませんでした。 もし手入力で URL を入力した場合は、綴りを確認して再度お試し下さい。 サーバーの障害と思われる場合は、ウェブ管理者までご連絡ください。 Error 404 となってしまいます 単体でインストールしたアパッチをゴミ箱に入れて消したのですが、 これでは不十分でしょうか？ 正しいアンインストール方法ご教示お願いします
PHPの勉強をはじめた初心者です OSはＷｉｎｄｏｗｓvista ローカル環境での学習をするため、XAMPPをインストールし、正常にインストールは完了できましたが、 テキストエディタで作成したphpファイルをローカルディスク/xampp/htdocs/test.phpとして保存し、 アドレスバーにhttp://localhost/test.phpとして検索をかけたのですが、 Object not found! 要求された URL は本サーバでは見つかりませんでした。 もし手入力で URL を入力した場合は、綴りを確認して再度お試し下さい。 サーバーの障害と思われる場合は、ウェブ管理者までご連絡ください。 Error 404 となってしまいます つづりは合っているはずですし、 ローカルディスク/xampp/htdocsの中に、test.phpがあることは確認済みです 確認テストとして、http://localhost/index.htmlを検索すると It works! と出ます http://localhost/ でxamppのインストール画面は確認済みです 以前、アパッチを単体でインストールしたのですが、 今回エラーがでた時調べたらそれが影響しているかもとありましたので、単体のアパッチは消しました。 test.phpファイルの拡張子はPHPファイルとして確認済みです 長文乱文で申し訳ないのですが、原因可能性を教えて頂けますか？
どうしても分からなかったので質問させてください。 phpで画像名、秒数、コメントの入力フォームがあるとして、この3項目をタブ区切りでテキストに書き込みしています。書き込みは問題ないのですが、コメントに改行があった場合str_replaceで改行を削除し、一行データに整形した形で書き込みを行っています。 この一行データを読み込む際、入力であったコメントの改行を表示画面で実現する方法が分かりません。 そもそも間違ったアプローチな気もしております。 なにか別の方法で同じような事を実現できるなら、またこの方法のまま改行を実現する方法が分かる方いらっしゃいましたらご教授願いたいです。 【例】書き込みテキストデータ ファイル名:q2bdvssh0io9be2p43bpo77ao6.txt ファイルデータ: 13421405496478.jpg10fsadfjaowjfasjfdoaw hfoafnawofhaoshf 13421405496479.jpg11fsadfjaowjfasjfdoaw hfoafnawofhaoshf 13421405496480.jpg12fsadfjaowjfasjfdoaw hfoafnawofhaoshf 13421405496481.jpg13fsadfjaowjfasjfdoaw hfoafnawofhaoshf タブ区切りで画像名、秒数、コメントとなっています。 仕様としては、複数の画像アップロードを想定しています。 iframeを使用し、セッションIDで作ったテキストファイル名の中に画像名、秒数、コメントを一行区切りでどんどん入れていき、入力フォームに戻る際にテキストファイルを読み込んで表示させています。 分かりづらい説明になってしまったかもしれませんが何卒よろしくお願いいたします。
Cake初心者です。お手柔らかにお願いします。 会員制のサイトを作るときに会員用のページと非会員用のページをアプリ単位で分けてしまいたいのですが、同じファイルを両方に用意することが多くなってしまいます。 実際はControllerとViewがそれぞれわかれていればいいだけなので、うまく拡張して複数のアプリを管理しやすくできないでしょうか? 理想としては [非会員用] apps/public/Controller apps/public/View apps/public/Webroot [会員用] apps/user/Controller apps/user/View apps/user/Webroot という風にして、それ以外のものを共有するというものです。 ヒントだけでも良いのでよろしくお願いします。
PHPは、オブジェクト指向以外はひと通りわかります。 オブジェクト指向は見たり少しいじったりという程度でしたらわかりますが、１から作ることはきついレベルです。 で、cakePHP2.xを勉強しはじめているのですが、CookBook（日本語版）を読んでCookBookにあるとおりのブログをつくるところまではできました。 ですが、CakePHPの概要の次（コントローラ）以降になって、急に、かなり理解するのに時間がかかっています。 MVC自体については、昔Smartyを個人的に使っていたので、Smartyでウェブ構築ができる程度にはわかります。 が、cakaやzendのようながっしりしたフレームワークに取り組むのはこれがはじめてです。 （PHP以外にも） このような状態なのですが、このままCookbookを進めていくよりも、効率的な方法はありますでしょうか？ 現状だと、Cookbookでわからない部分を毎回毎回ぐぐって、相当時間がかかっています。 本にたよろうかとも思ったのですが CakePHP2 実践入門 (WEB+DB PRESS plus) [単行本（ソフトカバー）] http://www.amazon.co.jp/dp/4774153249/ Webアプリ開発を加速する CakePHP2定番レシピ119 [単行本] http://www.amazon.co.jp/dp/4798039519/ が定番っぽいですが、 ユーザレビューを読むと、評価がわかれていて、 こういう状況の自分にとってどうなのか迷ってしまいます。 今後どのように学んでいったらいいでしょうか？ とりあえずcookbookをざっと、理解できなくてもざーっと読んでしまい、 「定番レシピ１１９」にのっとって組んでみて、Cookbookに戻る。。。。というのはどうでしょうか？ よろしくお願いします。
自作の関数で、issetとemptyを一緒に判定する関数を作っているのですがエラーが出ます。 ある変数が「未定義」または「null」または「""（空白）」の場合はnullである、という関数を作りたいです。 ------------------------------------------ function is_null_ex($value){ 　if (!isset($value)) {return true;}　　　　　　　　　　　　　　　// 未定義かnullの場合、trueを返す 　else if (strlen(strval($value)) === 0) {return true;}　　　// 空白の場合はtrueを返す 　else {return false;}　　　　　　　　　　　　　　　　　　　　　　// $valueに値が入っている場合はfalseを返す } is_null_ex($val); ------------------------------------------ 上記の関数で$valueが未定義の場合にfuncを使うと、次のようなエラーが出ます。 Notice: Undefined variable: val つまり、未定義の変数を引数に渡すとエラーが出ます。 「未定義なら関数に渡さなければ？」と思うかもしれませんが、そもそもこの関数は「未定義」または「null」または「""（空白）」を判定したい関数なのです。 この場合、どうすれば良いのでしょうか？ エラーは出ますが上記の関数で「if (!isset($value)) {return true;}」の部分できちんと判定はされています。 PHP5.3系で運用しています。 ぞうぞよろしくお願い致します。
PHPあまり詳しくないです。 会員登録ページなるものを作っています。 register.phpというページで入力した会員情報をconfirm.phpというページで最終確認させたいのですが、その際に入力した情報がconfirm.phpに反映されません。 regiser.php <?php $a = (!empty($_POST['name'])); $b = (!empty($_POST['email'])); $c = (!empty($_POST['password'])); $d = (!strlen($_POST['password']) < 4); if (isset($_POST['check'])) { if ($a && $b && $c && $d) { header('Location: confirm.php'); } } ?> <!DOCTYPE html> <html> <head> <meta charset="UTF-8" /> </head> <body> <h3>新規登録</h3> <form method="POST" action=""> <div class="container"> <label for="name">ユーザ名(20文字以内)</label> <br /> <input type="text" id="name" name="name" maxlength="20" /> </div> <?php if (isset($_POST['check'])) { if (empty($_POST['name'])) { print('※ユーザ名を入力してください'); } } ?> <br /><br /> <div class="container"> <label for="email">メールアドレス(100文字以内)</label> <br /> <input type="text" id="email" name="email" maxlength="100" /> </div> <?php if (isset($_POST['check'])) { if (empty($_POST['email'])) { print('※メールアドレスを入力してください'); } } ?> <br /><br /> <div class="container"> <label for="password">パスワード(4文字以上20文字以内)</label> <br /> <input type="password" id="password" name="password" maxlength="20"/> </div> <?php if (isset($_POST['check'])) { if (empty($_POST['password'])) { print('※パスワードを入力してください'); } elseif (strlen($_POST['password']) < 4) { print('※パスワードは４文字以上で入力してください'); } } ?> <br /><br /> <input type="submit" name="check" value="確認する" /> </form> </body> </html> confirm.php <?php $a = (!empty($_POST['name'])); $b = (!empty($_POST['email'])); $c = (!empty($_POST['password'])); $d = (!strlen($_POST['password']) < 4); if (isset($_POST['check'])) { if ($a && $b && $c && $d) { header('Location: confirm.php'); } } ?> <!DOCTYPE html> <html> <head> <meta charset="UTF-8" /> </head> <body> <h3>新規登録</h3> <form method="POST" action=""> <div class="container"> <label for="name">ユーザ名(20文字以内)</label> <br /> <input type="text" id="name" name="name" maxlength="20" /> </div> <?php if (isset($_POST['check'])) { if (empty($_POST['name'])) { print('※ユーザ名を入力してください'); } } ?> <br /><br /> <div class="container"> <label for="email">メールアドレス(100文字以内)</label> <br /> <input type="text" id="email" name="email" maxlength="100" /> </div> <?php if (isset($_POST['check'])) { if (empty($_POST['email'])) { print('※メールアドレスを入力してください'); } } ?> <br /><br /> <div class="container"> <label for="password">パスワード(4文字以上20文字以内)</label> <br /> <input type="password" id="password" name="password" maxlength="20"/> </div> <?php if (isset($_POST['check'])) { if (empty($_POST['password'])) { print('※パスワードを入力してください'); } elseif (strlen($_POST['password']) < 4) { print('※パスワードは４文字以上で入力してください'); } } ?> <br /><br /> <input type="submit" name="check" value="確認する" /> </form> </body> </html> できればあまりこの形は変えたくありません…。 action部分をconfirm.phpに変えると、入力値が空だったりするエラー時にconfirm.phpに飛ばないようにする方法が分かりません。 回答よろしくお願いします。
以下のコードの「echo fetch() ['id']」はうまくいく環境とそうでない環境があるようです。 <?php function fetch(){ $date = array('id' => 'JO783', 'name' => 'Taro'); return $date; } echo fetch() ['id']; // JO783と表示されることを期待しています ?> fetch()は連想配列を返すので、['id']を指定することで、JO783というidが取り出せると思いますが、localhostで開いた環境ではうまくいきますが、借りているレンタルサーバーでは Parse error: syntax error, unexpected '[', expecting ',' or ';' in phptest/index.php on line 7 とエラーが出ます。 PDOのfetchをイメージして作っています。PDOで $dbh->query($sql)->fetch()['id']みたいに、一気に値を取得したいです。
CakePHPでAuthコンポーネントを使いログインする場合、 ログイン後に前のページに戻る方法はありますか？
PHPでログインする機能があります。 ログインして操作をしていると問題はないのですが、数分（測っていないのですが5分～10分）操作をせず放置しているとログインが切れてしまいます。 セッションの有効期限は24時間にしています。 確認してもセッションの有効期限はログインを行って24時間にちゃんとなっています。 if ($_SERVER['REQUEST_METHOD'] === 'POST') { try { // POSTで受け取ったパラメータを変数として展開 extract(filter_struct_utf8(INPUT_POST, array( 'email' => FILTER_STRUCT_FULL_TRIM, // トリミング 'pass' => '', 'token' => '', ))); // トークンをチェック Token::check($token); // IDをセッションに取得 $_SESSION['id'] = DB::connect()->userlogin($email, $pass); // セッションハイジャック対策 session_regenerate_id(true); // リダイレクト redirect(); } catch (Exception $e) { $errors = exception_to_array($e); } } 『userlogin』の部分 public function userlogin($email, $pass) { // 例外初期化 $e = null; // メールアドレスチェック if ($mail === '') { $e = e('メールアドレスが入力されていません。', $e); } // パスワードチェック if ($password === '') { $e = e('パスワードが入力されていません', $e); } // 1つでも例外が発生していればスローする if ($e) { throw $e; } // プリペアドステートメントを生成 $stmt = $this->pdo->prepare(implode(' ', array( 'SELECT `id`, `pass`', 'FROM `users`', 'WHERE `email` = ?', 'LIMIT 1', ))); // 値をバインドして実行 $stmt->execute(array($email)); // 見つかったかどうかチェック if (!$stmt->rowCount()) { throw e('そのメールアドレスは登録されていません。'); } // パスワード照合 $row = $stmt->fetch(); if ($row['pass'] !== password_hash($pass)) { throw e('パスワードが違います。'); } // IDを返す return (int)$row['id']; } ログイン処理に問題があるのでしょうか？ それともサーバー側の設定（php.ini）なども何か設定を行ったほうがよいのでしょうか？ 確認すべき点などございましたらアドバイスいただけませんでしょうか。 よろしくお願い致します。
さくらのインターネット共有サーバのビジネスを使っています。 （FreeBSD,cｓｈです） で、phpのxdebugを入れたいと考えています。 % pecl とだけコマンドをうつとusage一覧が出てくるので、 peclコマンドを使えると思ったのですが、 % pecl install xdebug Cannot install, php_dir for channel "pecl.php.net" is not writeable by the current user % pecl config-get php_dir /usr/local/php/5.4/lib/php % sudo chown 31com /usr/local/php/5.4/lib/php /usr/local/bin/sudo: パーミッションが拒絶されました. とでるので、peclコマンドは一切使えないと考えていいのでしょうか？ あるいは、pecl以外でxdebugを入れる方法はありますか？ どこかで、さくらだと(xdebugにかぎらず）ソースからコンパイルしてインストールすればできる、と聞いたことがあるのですが、環境設定(cshです）の方法（必要？）など手順がわかりません。 よろしくお願いします
お世話になります。 レンタルサーバーのcoreserverを使用しております。 PHPにてindex.phpファイルを自動生成しているのですが、 生成されたファイルのパーミッションが644となってしまいますが、 生成時に606を与える事は可能でしょうか？ ftpソフトによる権限寄与は可能なのですが、自動で行いたいと考えております。 chmod("index.php",606);としても、 当然ですがパーミッションエラーで書き換えすらできない状態です。 .htaceesでapacheの設定を変えるのか？とは思いついたのですがいまいち どのように記述したらいいかもわかりませんでした。 自分なりに検索したり書籍を見ましたが、これといった回答が見つからず困っています。 無理ならあきらめますが、どなたか詳しい方がいたら是非ご教授願いたいです。 よろしくお願い致します。 【サーバ環境】 CPU Intel Xeon CPU E5-2670 0 @ 2.60GHz MemTotal12367MB Apache1.3 PHP5.5.3 RUBY 1.8.5 MySQL 5.1.22-rc
PHPで作ったWebサービスがあります。 ユーザーが100人いたとします。 この100ユーザーそれぞれのデータを、毎日0時（例えば）になると処理をするというCronを作りたいです。 PHPファイルは1ユーザー分の処理をするので、Cronで毎日0時に指定すると1人分の処理しかできません。 ではユーザー毎にCronを100個作るのは得策ではないと思います。 「一つのCron実行で100人分処理すれば？」というご意見もあるかもしれませんが、 1人分の処理が3～30秒かかるので、レンタルサーバーの1実行当たりの動作時間を超えてしまう問題があります。 毎日0時に100人分の処理を実行するのは無理なのでしょうか？ そもそも共用のレンタルサーバーレベルでは、100人分の同時処理というのは現実的ではないでしょうか？ そうすると、1人ずつ処理していくと、30秒×100人＝50分の処理時間が必要になります。 こういう場合はどのように設計すれば良いのでしょうか？ どうぞよろしくお願い致します。
cakePHPを勉強し始めたばかりです。 PHP自体は、オブジェクト指向がほとんどわかってない以外は、ひととおりわかります。 とりあえず今、cakebookを読み進めているのですが、少しだけ難しいです。 （いきなり専門用語が入ってきたり・・・例えば、URLのルーティングとか。 まぁ、mod_rewriteはある程度しってたのでなんとかなりますが、 mod_rewriteを知らなかったらきついと思います） そこで、こんな自分におすすめの本and/orウェブサイトをご存じでしたらお願いできますでしょうか？ また、本とウェブサイトだとどっちがいいでしょうか？ アマゾンのレビューや五つ星とみると、あまりいい本がなさそうでして。。。 （なお、cakePHP1.xの本が激安なのですが、買ってもあまり意味ないでしょうか？ よろしくお願いします。
現在、複数のCookieを利用したシステムを構築中ですが、 Cookie管理の１つとして、配列でCookieを発行しようと考えております。 ブラウザ別に保有できるCookie数が限られていますので、 可能なかぎり少ないCookieで管理したいと思います。 そこで質問です。 配列でCookieを発行した場合、ブラウザ側で認識されるのは１つになるのでしょうか？ それとも配列の要素分だけCookieを発行した形になるのでしょうか？ どなたかお分かりになれば、ご教示いただけますと助かります。 よろしくお願いいたします。 　　
ＨＴＭＬ＋ＣＳＳ＋ＰＨＰ＋ＭｙＳＱＬで「ＳＱＬ実習サイト」を作っています。 ＳＱＬを入力し、その結果を確認するという学習用のサイトです。 現在はＸＡＭＰＰ上で動かしているだけですが、上手くできたらＷｅｂ上に上げる予定です。 質問は、そのサイトでのＳＱＬインジェクション対策についてです。 作成している「ＳＱＬ実習サイト」では、フォームにＳＱＬ文を直接入力してもらい、そのままその ＳＱＬ文をＰＨＰで実行するようにしています。 具体的には、ＰＯＳＴで自分自身（index.php）にＳＱＬを送信し、それをクエリとして実行しています。 <h2>ＳＱＬ入力</h2> <form action="index.php" method="post"> 　　　　<textarea name="input_sql" cols=38 rows=3></textarea> 　　　　<input id="sql" type="submit" value="ＳＱＬ実行"> </form> （～略～） $_SESSION['jikkou_sql'] = $_POST['input_sql']; （～略～） $sql = $_SESSION['jikkou_sql']; $query = mysql_query($sql, $conn); ＩＰＡの「安全なＳＱＬの呼び出し方」等から調べると、ＳＱＬインジェクション対策としては プレースホルダ（プリペアド・ステートメント）が有効だとありますが、 作成しているケースだとＳＱＬを直接実行するのでプレースホルダが使えない気がします。 「ＳＱＬ実習サイト」ではＳＥＬＥＣＴ文のみ実行できるようにしたいと考えています。 入力してもらったＳＱＬの中で「ＳＥＬＥＣＴ」を探すようにして自作のＳＱＬインジェクション対策を 行えばよろしいのでしょうか？（ＤＥＬＥＴＥやＵＰＤＡＴＥがあれば無効化したり・・・） それとも、そもそもこのような使い方ではＳＱＬインジェクション対策はできないのでしょうか？ ご教授よろしくお願いします。
MySQLとphpの勉強中です。 コードは下記のようにしています。 SQL文の条件に合ったレコードがなければprintの箇所を表示させたくない場合はどのようにすれば良いでしょうか？ $sql = 'SELECT * FROM game WHERE scorer LIKE '.$scorer; 　　print "条件の合うレコードがなければここを表示させたくない。"; foreach ($dbh->query($sql) as $row) { } ご存知の方いらっしゃいましたらご教示ください。 よろしくお願いします。
　公開されてるソースがあるのでそれを使えばいいんですが、プログラミングを学んでみたいという目的もあって、ＰＨＰの勉強を始めたところです。 　で、あるサイトで学んでるんですが、その中でMySQLというものも出てきました。 　データベースの勉強もここからが初めてで、四苦八苦しながらもなんとか読み進めていったんですが、今度はＰＨＰとデータベースを組み合わせてブログを作ってみましょうという話になりました。 　もともとブログや掲示板を作りたくて勉強を始めたので願ったり叶ったりなんですが、ここで一つ疑問が。 　ブログってデータベース使ってましたっけ？(^_^; 　公開されてるソースの解説を見てみると、特にデータベースが必要というような表記もなく、ＰＨＰとＨＴＭＬとスタイルシートだけで作ってるように見えます。 　なので、もしかしたら余計な方向へ行こうとしてる？と、このままこのサイトで勉強を進めて良いものか不安になってしまいました(^_^; 　よく分かってない素人考えとしては、ブログの仕組みってＰＨＰでＨＴＭＬファイルを作ってるだけというイメージなのですが、データベースは必要なのでしょうか？ 　今はseesaaブログで借りてブログを書いていますが、仕組みが見えてないだけで、こういうブログもデータベースを使ってる？ 　だとしたら公開されてるブログのソースは、データベースを使える人限定ってことになりますよね？ 　ブログを作るのにデータベースは必要なのか？ 　また、必要ないにしても、データベースを使った方が良い面があるのか？ 　どうなんでしょうか？
cakePHP初心者です（まだはじめて数時間くらい） で、cookbookにそってサンプルブログを組んでいるのですが、 http://book.cakephp.org/2.0/ja/getting-started.html のとおり、 Postモデルに class Post extends AppModel { 　　　public $validate = array( 　　　　　　'title' => array( 　　　　　　　　　'rule' => 'notEmpty' 　　　　　　), 　　　　　　'body' => array( 　　　　　　　　　'rule' => 'notEmpty' 　　　　　　) 　　　); } （↑タブを全角空白４文字に変換してます） と入れてsaveしたものの、 title,bodyを空で投稿しても、エラー表示されず投稿できてしまいます （投稿一覧にも表示されます） FWを使わないで自力で組むなら、自分なりにエラーを見つけられるのですが、 まだcakePHPになれていないため、 このバグの原因を追求するためになにからはじめたらいいのかわかりません。 どなたかお教えいただけないでしょうか？ よろしくお願い申し上げます。
CentOSで、PHPを5.3->5.4, 5.4-5.5 にアップデートしました。 yumコマンドやphp -vではうまくインストールできたように思えたのですが、phpMyAdminにアクセスしようとすると、「phpMyAdmin - エラー mysqli|mysql 拡張がありません。PHP の設定をチェックしてみてください。」と表示されます。 ググってもmysqlのことでなくて、php.iniがなんとか、と書いてあって、よくわかりません。 どなたかご存知の方、お教え願えませんか。
お世話になります。 現在、MYSQLデータベースを使用したプログラムを書いており、 そこでトランザクションについて質問があります。 トランザクションとは、複数の処理がすべて成功した場合に正式な処理を実行(commit)、１つでも失敗した場合は元に戻す(rollback)というようなことかと思うのですが、 では、１つの処理のみの場合は、トランザクションを使用する必要はないのでしょうか？ 例えば、 ・あるテーブルにデータをinsertしたい。 このような単一の処理を書く場合でも、 以下のようにトランザクションを使うべきでしょうか？ $dsn = 'mysql:dbname=〇〇〇;host=〇〇〇;charset=utf8'; $user = 'user'; $pwd = 'pwd'; //DB接続 try { $pdo = new PDO($dsn, $user, $pwd); } catch (PDOException $e) { die('DB接続失敗'); } //トランザクション開始 $pdo->beginTransaction(); //INSERT try { $sql = 'INSERT into table (test1, test2, test3) VALUES (:a, :b, :c)'; $st= $pdo->prepare($sql); $ret = $st->execute(array( ':a' => $a, ':b' => $b, ':c' => $c, )); if (!$ret) { throw new Exception('INSERT 失敗'); } //commit $pdo->commit(); } catch (PDOException $e) { //rollback $pdo->rollBack(); } $pdo = null; ※前提として、テーブルを使用するユーザーは多数います。 ご存知の方、ご回答いただけるれば幸いです。 よろしくお願い致します。
ＰＨＰのカゴの作製において、サイトには商品のソースと一緒に、注文ボタンを添付して下記のソースを書こうと思っています。 （クライアントからサーバーに送るソース） <FORM action='http://www.1111.jp/kago/2222.php' method='post'target='_blank'style='margin:0;font-size:10pt'> 質問１ サーバーで受けて、金額を計算して、クライアントに返すソースって下記の文が基本ですか。 http://www.phpbook.jp/tutorial/function/index4.html http://dotinstall.com/lessons/basic_php_beginner/6827 質問２ 計算表に罫線を入れる場合は、どうすればいいのでしょうか。 詳しい方、宜しくお願い致します。
お世話になります。 現在、mysqlのデータベースを使ったphpプログラムを書いているのですが、 以下のように、続けて２つのデータベース処理を記述している部分があります。 $db=connectDb(); //処理１ $st1=$db->prepare("update table1 set title=:title where id=:id1 limit 1"); $st1->execute(array(":title"=>$title,":id"=>$id)); //処理２ $st2=$db->prepare("update table2 set image=:image where id=:id2 limit 1"); $st2->execute(array(":image"=>$image,":id"=>$id2)); db=NULL; ここで質問があります。 このような記述ですとなんらかの理由により、例えば、 「処理１のアップデート処理は成功したが、 次の処理２のアップデート処理には失敗してしまった。」 というような問題は起きることがあるのでしょうか？ 起きることがある場合、それに備えてどのような記述をすれば対応できるでしょうか？ ご存知の方、ご回答いただければ幸いです。 よろしくお願い致します。
失礼します。 phpでのオブジェクトデータ内の配列にアクセスしたいのですが、うまくいきません。 下記(phpunit)のtitle配列内データにアクセスする際にどういった表記をすれば良いのでしょうか？ ご教授宜しくお願い致します。 object(PHPUnit_Extensions_Database_DataSet_DefaultTable)#334 (2) { ["tableMetaData":protected] => object(PHPUnit_Extensions_Database_DataSet_DefaultTableMetaData)#331 (2) { ["columns":protected] => array(2) { [0]=> string(2) "id" [1]=> string(5) "title" } ["primaryKeys":protected] => array(0) { } ["tableName":protected] => string(14) "hogehoge" } ["data":protected] => array(1) { [0]=> array(3) { ["id"]=> string(2) "1" ["title"]=> string(13) "test_titleです。" } } ["other":"PHPUnit_Extensions_Database_DataSet_AbstractTable":private] => NULL }
質問させていただきます。 初歩的ですみません。。 以下のような連想配列を array(3) { ["hidden_name"]=> array(5) { [0]=> string(8) "test.jpg" [1]=> string(8) "test.jpg" [2]=> string(8) "test.jpg" [3]=> string(8) "test.jpg" [4]=> string(8) "test.jpg" } ["number"]=> array(5) { [0]=> string(1) "8" [1]=> string(1) "4" [2]=> string(2) "14" [3]=> string(2) "14" [4]=> string(2) "15" } ["comment"]=> array(5) { [0]=> string(5) "test1" [1]=> string(5) "test2" [2]=> string(5) "test3" [3]=> string(5) "test4" [4]=> string(5) "test5" } } っを以下のような改行区切りのデータに整形したいと考えています。 test.jpg,8,test1 test.jpg,4,test2 test.jpg,14,test3 test.jpg,14,test4 test.jpg,15,test5 当然、自動で増えたり減ったりします。 実は以前からこのパターンではまることが多く、効率の良い整形の仕方や マストなやり方があればご指南いただきたいです。 初歩的で申し訳ありませんが何卒よろしくお願いいたします。
現在の私のサイト（shtml）のソースは次のとおりです（甲）。これを下記（乙）のように書き換えてアップしましたが”こんにちは”の文字が現れません。 レンタルサーバーの問題ですか？ソースの問題ですか？ （甲） <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> <HTML lang="ja"> <HEAD> <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" > <META http-equiv="Content-Script-Type" content="text/javascript"> <META http-equiv="Content-Type" content="text/html; charset=Shift_JIS"> <META http-equiv="Content-Style-Type" content="text/css"> <META NAME="ROBOTS" CONTENT="INDEX,FOLLOW"> <TITLE>○○○</TITLE> （乙） <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja"> <head> <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" /> <title>○○○</title> </head> <body> <!--shtmlのソースの中に次を挿入しました--> <p> <?php echo "こんにちは。<br />"; echo "こんにちは。<br />"; echo "こんにちは。<br />"; echo "こんにちは。<br />"; ?> </p> ----------------------- これが表示されません。 教えて下さい。どうしてですか？ 宜しくお願いします。
お世話になります。 現在、ユーザーが記事を作成、編集、削除できるブログシステムを作成しています。 MYSQLのデータベーステーブルには以下の３つを用意しています。 ・usersテーブル：ユーザー名(name)、パスワード等(pw)、記事保存先ディレクトリ(dir)等のユーザ情報 ・articleテーブル：ブログ記事タイトルや本文等の情報 ・imagesテーブル：ブログ記事に使用している画像情報 ここで質問があります。 現在ユーザーがログイン成功時にセッションにはユーザーIDのみを $_SESSION["id"]として保存しています。 そして、記事投稿処理時や、記事編集処理時など、各場面で必要になった情報はそのときselectを使ってテーブルから毎回取り出しています。 しかし、こんなことをしなくても、ユーザーがログイン成功時に、セッションにユーザーID以外の情報も 保存しておけば、以後データベースから取り出す必要がなくなり便利かと思うのですが、セキュリティ面などからこのようなやり方はNGなのでしょうか？ 1,まったく問題ないのか？ 2,パスワード等の重要データはNGなのか？ 3,ユーザーidのみにしておくべきなのか？ 問題がある場合、その理由も教えていただけるとありがたいです。 例）ユーザーログイン時に、 $_SESSION["id"]=ユーザーID格納。 $_SESSION["name"]=ユーザー名を格納。 $_SESSION["dir"]=記事保存先ディレクトリを格納。 $_SESSION["article"]=ログインユーザーの記事情報を格納。 お分かりの方、教えていただけたら幸いです。 よろしくお願い致します。
下記のphpで、写真をサーバーにアップロードして、２種類にリサイズして保存し、ファイル名をテキストで保存しようとしてるのですが、ファイル名をテキストで保存する部分file_put_contents($name_file,$name_log); にエラーがでます。写真はリサイズされ保存されています。何度か見直しているのですが、原因が分かりません。エラーの原因を教えていただきたいと思い、投稿しました。よろしくお願いします。 <html> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> <title>画像ファイルアップロード</title> </head> <body> <?php // 名前保存のテキストファイル $name_file = "name.txt"; // 名前保存のテキストファイル読み込み用の配列 $name_log = array(); // 名前保存のテキストファイルを読み込み用の配列に読み込む if (file_exists($name_file)) { $name_log = file( $name_file ); } // 保存画像の保存先のディレクトリ $dir_l = 'uploads_l/'; // サムネイル画像の保存先のディレクトリ $dir_s = 'uploads_s/'; for ( $i=0; $i<count($_FILES['filename']['tmp_name']); $i++ ) { // ファイル名の取り出し $file_name = $_FILES['filename']['name'][$i]; // ファイル（MIME）タイプの取り出し $file_type = $_FILES['filename']['type'][$i]; // 一時ファイル名の取り出し $temp_name = $_FILES['filename']['tmp_name'][$i]; // 重複しないように日付をヘッダにする $head = date("YmdHis"); // 保存先のファイル名 $upload_name_l = $dir_l . $head ."-". $file_name; // サムネイル画像の保存先のファイル名 $upload_name_s = $dir_s . $head ."-". $file_name; // JPEG形式のファイルをアップロードする if (($file_type == 'image/jpeg') || ($file_type == 'image/pjpeg')) { // アップロード（移動） $result = move_uploaded_file($temp_name, $upload_name_l); if ($result) { // アップロードの成功 // アップロードされた画像情報を取り出す $image_size = getimagesize($upload_name_l); // アップロードされた画像の幅と高さを取り出す $width = $image_size[0]; $height = $image_size[1]; // 保存画像の幅と高さを決める $width_l = 480; $height_l = round($width_l*$height/$width); // サムネイル画像の幅と高さを決める $width_s = 60; $height_s = round($width_s*$height/$width); // アップロードされた画像を取り出す $image = imagecreatefromjpeg($upload_name_l); // 保存画像の大きさの画像を新規作成 $image_l = imagecreatetruecolor($width_l,$height_l); // アップロードされた画像から保存画像を作成 $result_l = imagecopyresampled( $image_l, $image, 0,0, 0,0, $width_l,$height_l, $width,$height); if ($result_l) { // 保存画像作成成功 // 保存画像の保存 if (imagejpeg($image_l,$upload_name_l)) { echo ' ->保存画像保存'; 　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　$add_name = $upload_name_l; 　　　　　　　　　　　　　　　array_push($name_log, $add_name); } else { echo ' ->保存画像保存失敗'; } } else { // 保存画像作成失敗 echo ' ->保存画像作成失敗'; } // サムネイルの大きさの画像を新規作成 $image_s = imagecreatetruecolor($width_s,$height_s); // アップロードされた画像からサムネイル画像を作成 $result_s = imagecopyresampled( $image_s, $image, 0,0, 0,0, $width_s,$height_s, $width,$height); if ($result_s) { // サムネイル画像作成成功 // サムネイル画像の保存 if (imagejpeg($image_s,$upload_name_s)) { echo ' ->サムネイル画像保存'; } else { echo ' ->サムネイル画像保存失敗'; } } else { // サムネイル画像作成失敗 echo ' ->サムネイル画像作成失敗'; } // 画像の破棄 imagedestroy($image); imagedestroy($image_l); imagedestroy($image_s); } else { // アップロードの失敗 echo '■アップロード失敗'; } } else { // JPEG形式以外のファイルはアップロードしない echo '■JPEG形式の画像をアップロードしてください。'; } } 　　　　//ファイルへ保存 file_put_contents($name_file,$name_log); ?> </body> </html>
MySQLに格納したデータから年、月、日を抽出したドロップダウンリストを作成したいのですが。 それぞれ、年、月、日とドロップダウンリストを三つ横に並べて表示したいと考えています。 テーブル名：game issue（VARCHAR型）｜datedating（DATE型） ○｜2010-10-05 ●｜2011-06-07 △｜2012-11-03 今現在は下記のコードで年だけを抽出したドロップリストやっています。 自分で考えてやってみたらまぐれで上手く抽出できたコードです。 <select name="year" style="width:85px;"> <option value="">-</option> <?php $sql = 'SELECT * FROM game WHERE issue NOT LIKE "" ORDER BY datedating'; $year_list_now=0; foreach ($dbh->query($sql) as $row) { $year_list=date('Y',strtotime($row['datedating'])); if($year_list_now < $year_list){ $year_list_now=$year_list; ( $_GET["year"] == $year_list_now ) ? $val = "selected" : $val = "" ; print '<option value="'.$year_list_now.'" '.$val.'>'.$year_list_now.'年</option>'; } } ?> </select> 下記のコードは選択された値（年）を引き継ぐためのコードです。 ＞( $_GET["year"] == $year_list_now ) ? $val = "selected" : $val = "" ; 同じコードで月、日もいけるかなと思ったのですが、なぜか飛び飛びでしたか作成できませんでした。明らかにデータに格納されている月、日も抜けています。 月、日のドロップダウンリストは下記コードの「Y」の箇所を「m」や「d」にしました。 ＞ $year_list=date('Y',strtotime($row['datedating'])); 検索して出てきたこちらのコードがシンプルで良いと思いやってみたのですが、エラーになってしまいました。「`」がよく分かりません。 http://oshiete.goo.ne.jp/qa/2828622.html どのようにすれば年、月、日のドロップダウンリストを作成できるでしょうか？ ご存知の方いらっしゃいましたらご教示ください。 よろしくお願いします。
質問１ アパッチとは、ＨＴＭＬにＰＨＰを認識させるために拡張子を.PHP等として作製する、いわばＰＨＰ用のホームページビルダーのようなものですか。 ２ 他のサイトでＰＨＰを使っているなと、判断できる方法はありますか。 ３ 市販されているアパッチってありますか。サポートがほしいので・・ 宜しくお願います。
PHP初心者です ＨＴＭＬタグが混じっ文字をＨＴＭＬごとPOSTで次ページに送る方法を教えてください ここでは<p><a href="./">TOPに戻る</a></p>をポストしたいです <form action = "test_view.php" method = "post" > <input type="text" name="<p><a href="./">TOPに戻る</a></p>"> <input type="submit" name="" value="送信"> </form> よろしくお願いします
現在PHPとMySQLでデータサイトを作成しています。 詳しい方にお聞きしたいことがあります。 データベースは下記のようにしています。 name｜blood_type(VARCHAR型) 佐藤｜A 田中｜ 加藤｜AB そこでbloodというチェックボックスにチェックが入っていれば○型というデータを表示するようにしています。 print( $_GET["dis"][2] == "blood" ) ? '<td><a href="http://○○.com/">'.$row['blood_type'] . '型</a></td>' : '' ; 抽出した血液型データの後ろに「型」を付けているのですが、$row['blood_type']が空だった場合「型」という文字を付けたくありません。 自分なりに考えネストにしてみたのですが、何度やってもsyntax errorになってしまいます。 どのようにすれエラーを出さずに、$row['blood_type']が空だった場合「型」を付けずに済むでしょうか？ ご存知の方いらっしゃいましたらご教示ください。 よろしくお願いします。
