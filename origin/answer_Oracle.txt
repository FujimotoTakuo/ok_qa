http://picowatt.net/log/eid86.html http://www.shift-the-oracle.com/config/auto-startup.html
オンライン試験でなんらかの障害が起きて受験できなかった、ということをメールや電話で伝えれば良いと思います。 どういう対応を取ってくれるかはわかりませんが、まずは行動してみましょう
> 解決出来ません。複数行になってしまいます。 デフォルト値より小さい値をしているからです。 もっと値を大きくすべきです。 ドキュメントにも書かれてますが2つのSETシステム変数はそれぞれ以下になります。 PAGESIZE ：１ページの行数を指定するものでデフォルト14です。6だと6行になるということで、例で貼り付けていただいている結果は6行なのでそれ以下にすると当然さらに行数が増えます。 LINESIZE ：１行の文字数(実際はバイト数)を指定するものでデフォルト80です。だいたい200とかもっと大きく1000とか2000とか32767(最大)とかにする人も多いです。
> ちなみにoracle databaseは無料でしょうか？ OTN開発者ライセンスをご覧ください。 http://www.oracle.com/technetwork/jp/licenses/standard-license-192230-ja.html
ちょっとどういうエラー出力になっているのか分からないですが、11gだとimportパラメータでGRANTS=nオプションを指定すれば権限が除外されたかと思いますが、そういうのでOKなんですかね？
SYSDBA権限を持つユーザで以下のよいうなSQLを実行することで情報を取得できると思います。 select file_name, bytes from dba_data_files where tablespace_name = 'USERS';
PHPのエラーログには何かエラーメッセージが出ていませんか？ 考えられるのは、PHPの処理時間が長くなりすぎてタイムアウトしているか、DBの処理時間やDBとの通信時間が長くなりすぎてタイムアウトしているか、PHPの利用できるメモリ量を超えてデータが抽出されたためメモリ不足でエラーになっていると言った所かと思います。 それぞれで対処方法が異なるので、まずは原因を特定する必要があります。
基本的には使っているJDKのバージョンによります。JDK6(JDK 1.6)を利用されているのであれば ojdbc6.jar を、JDK7(JDK 1.7)を利用されているのではれば ojdbc7.jar を使うことになると思います。 Oracle DB 11gR2側としては JDK5(JDK 1.5) or JDK6(JDK 1.6) がサポート対象ですが、純正JDBCドライバならJDK8(JDK 1.8)JDK7(JDK 1.7)およびJDK6(JDK 1.6)で概ね利用できるかもしません。(私自身はJDK1.7+Oracle DB11gR2での利用経験はないのですみません) http://www.oracle.com/technetwork/apps-tech/jdbc-112010-090769.html OracleDB 12c であれば JDK7(JDK 1.7)はサポート対象だったはずですので ojbc7.jar を利用いただけると思います。
単純に考えると、君が接続して使ったデータベースファイルの当該テーブルの当該項目のデータが期待通り更新ずみなら、SQL文実行は成功したと言えそう。SQL DeveloperにはSQL実行履歴を閲覧できる機能があるから、実行したかどうかだけなら、確認できるかも(履歴が直近のものしか残ってなくて何日も前の実行だと難しい)。当該テーブルを君が作成したのなら、その履歴も残っているはずだから当該項目のデータ型がもともとvarchar型で作られ、君の提出したSQL文実行前に変更した履歴がないことも念のためチェックしよう。 以上を確認できたら、問題は当該項目のデータ型を変更した上での実行かどうかになりそうだから、SQL実行履歴を見るか、ログファイル(Oracle DBサーバー側、SQL Developerアプリケーション側ともログ出力設定しないまま使っていたなら諦めるしかない)が残っていてアクセス権限があるなら、SQL文実行時刻またはSQL文そのもので探してその時刻を基準に、テーブルの当該項目の文字列データ型が変更されていないかを探すくらい。 検査担当者が君の使ったデータベースファイルで試した結果なのか、別のデータベースファイルで試した結果なのかが気がかりだけどね。 なお、char型は固定長の文字列、varchar型は可変長の文字列を格納するという違いについては理解しとこう。固定長の格納ずみ文字列データに連結で文字列を足そうとしても固定長サイズを越えてしまうからエラーになる。空白文字などパディングされた文字列を除去したうえで連結処理しなくてはならないよ。
検証も、特に調べてもいないので間違っているかもしれませんが、 SELECT 商品ID, 人員ID, AVG(span) FROM (SELECT 商品ID, 人員ID, 作成終了日時 - 作成開始日時 AS span FROM テーブル) A1 GROUP BY A1.商品ID, 人員ID みたいな感じかと。
oracleの環境がないので確認はできないのですが SELECT CASE WHEN table_a.aaa = 1 THEN (SELECT bbb FROM table_b where table_aとの結合条件) ELSE (SELECT ccc FROM table_c where table_aとの結合条件) END FROM table_a のように書けばできそうです。 もしくは SELECT CASE WHEN table_a.aaa = 1 THEN table_b.bbb ELSE table_c.ccc END FROM table_a, table_b, table_c WHERE table_aとtable_bの結合条件 AND table_aとtable_cの結合条件
ストアドからNUMBER型が返ってくるからといって数値型で戻り値を受けなければよいかと思います。 NULL許容ができるstringとか、DataTableとかで受けて、NULLだったらこうする、NULL以外だったら型変換して数値型にするとかの処理で可能かと思います。 なにぶん大分前の知識なのでウル覚えで間違っているかもしれません。 頑張ってください。
> Oracleのバージョンで11gR2(11.2.1.0）という物と(11.2.01)がありますが、何が違うのでしょうか？ライセンスを購入する方法によって違うのでしょうか？ パッチが適用されているかどうかの違いがあります。 11gR2であれば 11.2.X.X.X という形式で番号が付与されており、左から数値が大きいほど不具合修正や新機能追加などが行われている新しいバージョンになります。 11.2.1.0.X と 11.2.0.1.X だと、11.2.1.0 の方が上にのバージョンになります。 > また、Windows Server2012R2にインストールをしようとしていますが64bitか32bitかがわかりません。 Windows Server 2012は複数のエディションが用意されていたと思いますが、全て64ビット対応のみだったように思います。
下記ページに「Oracle Technology Network お問い合わせフォーム」へのリンクはありますが、ここからの問い合わせで良いのかは分かりません・・・ httpsのセキュリティ警告が出ますし・・・ ■ OTNに関するお問い合わせ先： http://www.oracle.com/technetwork/jp/community/join/help/index.html
ダウンロードしたものというのは、 ダウンロードしたファイルに情報が残るのかということでしょうか？ それであればダウンロードしたものには残りません。 ダウンロードしたサイトには当然情報は残ります。 そうでなければサインインさせる意味がないですから。
ファンクション索引を使ってみるとか？ http://otndnld.oracle.co.jp/document/products/oracle10g/102/doc_cd/appdev.102/B19248-02/adfns_indexing.htm#494614 例えばこんな感じで。 CREATE UNIQUE INDEX UK_DISTANCE ON DISTANCE_TBL (CASE WHEN S_POS < E_POS THEN S_POS || E_POS ELSE E_POS || S_POS END)
11gではSHA-2を利用できません。 12cなら利用できます。
下記のような感じでいかがでしょうか？ SELECT TNO, TO_NUMBER(SUBSTR(TO_CHAR(AREA), 0, 3)), ROUND(SCORE / 10), SCORE + NVL(ADJUST, 0), TO_CHAR(LAST_DAY(BIRTH), 'YYYY/MM/DD') FROM TEST;
ORACLE の統計情報が適切に更新されていないのでは？
新しいユーザを追加して、古いユーザで設定された権限情報やらなんやらをひとつひとつ移行するしか手立てはありません。 もしくは、以下の記事のように EXP / IMP を利用するというアイディアもあるようです。 http://www.oracle.co.jp/forum/thread.jspa?threadID=8006803
ORACLE のダウンロード以外のインターネットアクセス速度に問題がないのであれば、ORACLE 側の問題でしょう。配信サーバの能力がヘボいのか、もしくは全世界からのダウンロードが集中して混雑しているか、かと。 欧米でインターネットを使っていないような時間帯なら少しはましになるかもしれません。
DECODE を使うとか。 SELECT * FROM TEST WHERE TYPE IN (1,2,3) ORDER BY DECODE(TYPE, 1, 2, 2, 1, 3, 3, 4), DBID
SELECT 　予約番号, 　SUM( CASE WHEN 人員タイプ = '男性' THEN 人数 ELSE 0 END ) AS 男性, 　SUM( CASE WHEN 人員タイプ = '女性' THEN 人数 ELSE 0 END ) AS 女性, 　SUM( CASE WHEN 人員タイプ = '小学生' THEN 人数 ELSE 0 END ) AS 小学生, 　SUM( CASE WHEN 人員タイプ = '幼児' THEN 人数 ELSE 0 END ) AS 幼児, 　SUM( CASE WHEN 人員タイプ = '他' THEN 人数 ELSE 0 END ) AS 他, 　SUM(金額) AS 金額 FROM 　テーブル GROUP BY 　予約番号 ;
SELECT employee.employee_id, employee.employee_name, TO_CHAR(employee.hire_date, 'YYYY/MM/DD') AS hire_date employee.section, employee_data.address, NULL AS retirement_date FROM employee, employee_data WHERE employee.employee_id = employee_data.employee_id
SELECT * FROM テーブルA WHERE INSTR(材料一覧 , 材料) > 0 でどうかな？
Oracleに限らずSQLでデータを操作する型のDBMSで外部結合の結果外部されたレコードが無いとそのフィールドはNULLになる事は知っていると思う。 そういう場合にはNULLになる可能性があるフィールドにNVL関数やCOALESCE関数をかませる。 と思ったんだけど、それ以前に提示されたSQL文がそもそも外部結合じゃないがどこで使うのだい。 商品一覧はともかくフラグの0、1とそれ以外という組み合わせを作るには 商品一覧とフラグ0、フラグ1の組み合わせの完全な一覧を作る→それに対してtbl3を外部結合してカウントを取る→必要に応じてインラインサブクエリーやNVLを使う という流れになるだろうな。 あるいは、普通にSQLでデータを取得して（つまり、SQLでは質問文中の■実行した結果を得て）結果を画面や帳票に返す時に足りないところをプログラムで補うかしかないのでは（Oracleに限らずDBMSでは「存在しないレコードも含む完全な一覧を作る」というのは難しい）。外部結合（OUTER JOIN）の他に交差結合（CROSS JOIN）というのがあるが、これは普通使わない、と思う。 理由は、tbl2とtbl3をクロス集計してもSYOHIN_CODE（の元ネタとなるSYOHIN_ID）とFLGの組み合わせが SYOHIN_CODE FLG ----------- ---- A01 0 A01 1 B01 0 B01 1 C01 0 C01 1 D01 0 D01 1 E01 0 E01 1 になるとは限らないから。なので、商品一覧に対してフラグが0である一覧とフラグが1である一覧をUNIONしたものを元ネタにするのが良いと思う。 (select id, 0 as flg from tbl1 union all select id, 1 as flg from tbl1) tbl1cc -- (A) これが商品とフラグの完全な網羅パターンだ。まずはこれであなたが望む完全なリストが出てくることを確認しよう。この段階では商品コードではなく商品IDとフラグの組み合わせになる。 select * from (select id, 0 as flg from tbl1 union all select id, 1 as flg from tbl1) tbl1cc -- (A) order by id asc, flg asc 次に、idに名前（syohin_code）を寄せる。これはtbl1completecollectionが元々完全な商品一覧なので内部結合でも外部結合でもいい。内部結合の方が実行計画的にいいかも知れん。 select tbl1.syohin_code, tbl1completecolletion.flg from (select id, 0 as flg from tbl1 union all select id, 1 as flg from tbl1) tbl1cc -- (A) inner join tbl1 on tbl1completecollection.id=tbl1.id order by tbl1.syohin_code asc, tbl1completecolletion.flg asc なんなら(A)で直接syohin_codeを取ってきてもいいだろう。(A)'を作ってみよう。 (select id, syohin_code, 0 as flg from tbl1 union all select id, syohin_code, 1 as flg from tbl1) tbl1cc -- (A)' これ以降の説明では(A)'を使う。さらに、質問文に合わせて(A)'の別名をT1とする。 tbl1の変わりに(A)'を基本テーブルとして使うと、tbl2とtbl3を外部結合していくことで完全な一覧とNULL行を得る事ができる。OracleのcountはNULLを数えないので、最終的に商品コード（商品ID）とフラグが両方一致しないとNULLとなるT3テーブルの何かを用いて商品とフラグごとにカウントを取ればいい。 select T1.syohin_code, T1.flg, count(T3.flg) cnt from (select id, syohin_code, 0 as flg from tbl1 union all select id, syohin_code, 1 as flg from tbl1) T1 left outer join tbl2 T2 on T1.id=T2.syohin_id left outer join tbl3 T3 on T2.id=T3.num_id and T1.flg=T3.flg group by T1.syohin_code, T1.flg order by T1.syohin_code asc, T1.flg asc これを実行するとお望みの結果が得られるはずだ。 NVLとか全然関係ない解説（というか解説を書いていったらNVLはそもそも関係なかった）になったけど、まずは自分が得たい結果のサブセットを考えて少しずつSQLに肉付けしていくといいだろう。
TO_NUMBERが出来なかったのは、文字であるコロン(:)が入っているからですね。 日付型のSUMはできなかったと思います（間違っていたらごめんなさい）ので、時と分を分けて合計する必要があるかと思います。 SELECT __TO_CHAR(V1.hour + TRUNC(V1.min / 60)) + ':' + TO_CHAR(MOD(V1.min, 60), 'FM00') FROM (SELECT __SUM(TO_NUMBER(SUBSTR(string, 1, 2))) hour, __SUM(TO_NUMBER(SUBSTR(string, 3, 2))) min )V1
ALTER INDEX REBUILD ONLINE はしたほうが速くなると思います。 普通、大量のデータをinsertする際にはindexを一旦消し、(drop index) insert後に作成(create index)するとinsertが早く終わります。 データベースを何かの順位で読む際にはソートされて順に読み出されていきます。 インデックスを作っておくとソートがいらないのでその分早くなるというわけです。 今回のように大量にデータを入れた際にはインデックスもかなり複雑に絡まっていて 読みだすのに時間がかかる状態になっています。
replaceのつづりが間違ってるけど、それは関係ないよね？
http://www.shift-the-oracle.com/plsql/table-function/ パイプライン化した表関数を考えてはどうでしょう。 PL/SQL内で動的なSELECT文をもとにしても対応は可能です。
１．RDBMSによって仕様が異なりますが、文字列を表す場合、基本はシングルクォーテーションマークです。 ２．フリーでは無いですがOracle11ｇExpressEditionは無償ですのでお勧めします。尚、メーカー製で無償は他にMicrosoft SQL Server 2014 Express EditinとIBM DB2 10.5 Express-Cが有ります。フリーソフトではPostgreSQLとMariaDB(MySQL)がお勧めです、Firebirdも有ります。
UNION もしく　UNION ALL　で出来ます。 UNION ALLは単純にくっつけるだけ、UNIONは同じ内容の行は一つにまとめます(DISTINCTのような感じ) SELECT * FROM EMP2014 UNION ALL SELECT * FROM EMP2015;
and EXTRACT(MONTH from day_table.day) = EXTRACT(MONTH from sysdate) または、 and TO_CHAR(day_table.day, 'mm') = TO_CHAR(sysdate, 'mm')
Aテーブル.*
:NEW.営業所 := '99999'; 　　<------- ココに elsif で式を追加すればよいのでは？ END IF;
せっかく正しいクエリを作れたのに、何でそれを使わないのでしょう？ select substr(YMD,1,4) UP4,substr(YMD,5,2) DN2 from (select min(NO_1) YMD from PRM_A where NO_2=0) 最初にできたクエリを抽出元にすればよいだけです。サブクエリの min(NO_1)には"YMD"という別名を付け、上位SELECT文で参照 できるようにしています。 間違ったSQLではSELECT文の項目にサブクエリを指定していますが、 この場合は1レコードしか返らないことが原則です。上記では複数の レコードが返るので、失敗です。
　単一ビュー： 　その質問の表現、言い方が逆です。だから、意味不明になってます。 　単一ビュー「とは」、一つのテーブルから作成されたビューで、group byで集約したり、関数を使ったりしていないビューのことを言います。 　つまり、単一ビューという言葉の定義をしているだけです。定義ですから、これにとやかく言っても始まらないんですね。 　まぁ、単純に言えば、単一ビューというのは、一つのテーブルから、せいぜい単純な選択をしただけのビューと言えばいいのかな。 　この用語を定義する必要性は、次に、「このビューは、更新可能ですか？」と言い始めた時に、出てきます。単一ビューに対しては、insert , updateが可能です。（ただし、insertの際には、ビューに登場する以外のカラムが実テーブルにある時には、それらにはデフォルト値が入ります。それも無ければ、ＮＵＬＬです。そのカラムにnot null制約がついていると、制約違反ではねられます。） 　スキーマ： 　Ｏｒａｃｌｅでは、ユーザー毎に一つのスキーマが割り当てられます。 　そうですね。とあるマンションを一つのデータベースに例えてみましょうか。マンション一棟全体がデータベースです。隣のマンションは、別のデータベースとしましょう。 　マンションの部屋には、各々住人が住みますね。この部屋がスキーマです。隣の部屋にヤカンがあっても、自分の部屋に同じ形のヤカンを置いても良いですよね。このヤカンを区別する必要が出た時には、Ａさん宅のヤカンとか、Ｂさん宅のヤカンとか言えますよね。 　表名も同じです。userA.onajihyouとか、userB.onajihyouといったように識別します。 　自分の部屋にあるものを使うのに、Ａさん宅のヤカンとは言いませんよね。素直にヤカンです。 　表名も同じ。例え、他のスキーマに同じ表名があろうが何だろうが、自分のスキーマ内の表に対しては、onajihyouでちゃんと通用します。 　ただし、マンションにも共有部分があります。データベースも同じ。各自のスキーマに属さない要素がいくつかあります。何がスキーマに属して、何がスキーマに属さないのかは、参考書やマニュアルを見れば書いてありますので、興味があれば探してみてください。
「これは練習問題の内容がということなのでしょうか。それともテストという時間を計った問題が最後にありますがそのテストの的中率ということなのでしょうか。」 　多数の練習問題から、本試験の分数と問題数に絞り込んだものが、「テスト」です。 「このクラムメディアのテスト問題というのは、練習問題のページからランダムに出題されているものなのでしょうか。」 　その通りです。そしてその練習問題が、非常に的中率が高いのです。
そういうのって、まずマニュアル読めばすぐ解りそうなものですけど？ http://www.shift-the-oracle.com/sql/functions/decode.html 「第３パラメータのデータ型を戻り値の型とするので、それ以降に記述する戻り値用のデータもその型に合わせなければならない。」(少々表現変更)
これはOracle独自の書き方で、OUTER JOINの事を指しています。 プラス(+)を右側に付けるか、左側に付けるかで、LEFT OUTER JOINになるか、RIGHT OUTER JOINになるか変わってきます。 右側にプラスがある場合は、LEFT OUTER JOIN、左側ならRIGHT OUTER JOINになります（左右間違えやすいので注意） 参考：http://oracle.se-free.com/dml/08_outer.html
テスト環境無いので未確認ですが。 Select t1.No from テーブル as t1 where t1.商品 = ’Ａ’ minus select t2.No from テーブル as t2 where t2.商品 Not in （’Ａ’, ’Ｂ’, ’Ｃ’） ;
あまり深く考えていませんので、件数が多いと使いものにならないかもしれません。 with 休日テーブル as ( select 'busyo1' 部署コード, date'2014-09-13' 休日 from dual union all select 'busyo1' 部署コード, date'2014-09-14' 休日 from dual union all select 'busyo1' 部署コード, date'2014-09-20' 休日 from dual union all select 'busyo1' 部署コード, date'2014-09-21' 休日 from dual union all select 'busyo1' 部署コード, date'2014-09-23' 休日 from dual union all select 'busyo2' 部署コード, date'2014-09-07' 休日 from dual union all select 'busyo2' 部署コード, date'2014-09-14' 休日 from dual union all select 'busyo2' 部署コード, date'2014-09-21' 休日 from dual union all select 'busyo3' 部署コード, date'2014-09-20' 休日 from dual ) , 日付 as ( select trunc(/* sysdate */ date'2014-09-24' - 1) - level 日付 from dual --とりあえず過去30日分の日付 connect by level <= 30) select 部署コード, 日付 from ( select 部署コード, 日付, count(*) over(partition by 部署コード order by 日付 desc) cnt from (select distinct 部署コード from 休日テーブル) 部署マスタ cross join 日付 where not exists ( select * from 休日テーブル where 部署マスタ.部署コード = 休日テーブル.部署コード and 日付.日付 = 休日テーブル.休日 ) ) where cnt = 10; こまかい説明を書く時間がないので、そこはSQLから読みとってください。すみません・・・
まず、条件をなるべく素直に書くと↓のようなSQLになりました。 SELECT DISTINCT 車名 FROM 自動車 a WHERE EXISTS ( SELECT * FROM 自動車 b WHERE a.車名 = b.車名 AND 装備 = 'エアコン' AND 数量 = 2 ) AND EXISTS ( SELECT * FROM 自動車 c WHERE a.車名 = c.車名 AND 装備 = 'ブレーキ' AND 数量 = 1 ) ; WHERE句でサブクエリーを使って、条件にマッチする行の存在をチェックしています。 これでは、ちょっと冗長な感じがするのでGROUP BYとHAVINGを使って書き直すと下記の様になりました。 SELECT 車名 FROM 自動車 GROUP BY 車名 HAVING SUM(CASE WHEN 装備 = 'エアコン' AND 数量 = 2 THEN 1 ELSE 0 END) > 0 AND SUM(CASE WHEN 装備 = 'ブレーキ' AND 数量 = 1 THEN 1 ELSE 0 END) > 0 ; HAVING句内で集約関数とCASE式を組み合わせる事によって、1番目のSQLと同様の存在チェックを行っています。 蛇足ですが、車種も装備も同一の行が複数有ると思えませんので、連番の行は冗長かと思います。 下記の様に車名と装備の組が主キーとなっても良さそうに見えます。 車名(PK), 装備(PK), 数量
SQL*Plusからなら http://otndnld.oracle.co.jp/document/products/oracle11g/111/doc_dvd/server.111/E05784-01/apb.htm
「expdat.dmp」の中に「STUDY.TEST2」というオブジェクトの 情報がないという意味のメッセージが出ているので そのまんまの内容だと思うのですが。 そもそもData Pumpはバックアップや別のスキーマ・インスタンスに 移動する際に使用する機能であって、同一スキーマの別テーブルに 移動する為に使用するものではなかったと思います。たぶん。 study.TEST1のデータを削除して以下のコマンドを実行したらどうなりますか？ impdp system/パスワード@XE directory=test_dir dumpfile=expdat.dmp log=test_imp.log tables=study.TEST1 content=data_only
２つのファイルをダウンロードして winx64_12c_database_1of2をWクリックして解凍したあと、 winx64_12c_database_2of2をWクリックで解凍せずにインストールすると出るエラーです。 winx64_12c_database_＜2＞of2をWクリックで解凍しましたか？
>リレーショナルデータベースにも写真を保存できる。 そういう保存の仕方もできますけど、バイナリファイルも保存できるのでそのまま保存するほうが多いと思います。 >リレーショナルデータベースは銀行でよく使われていて、お金の出入りや顧客管理でリレーショナルデータベースは大活躍しているそうです。 どのようにも使えます。 >フォルダファイルシステムとデータベースは別物と聞いた事があります。 >一方で、フォルダファイルシステムの基本はデータベースで、 >データベースに何かアプリを組み合わせてフォルダファイルシステムが形成されているとも >聞いた事があります。どっちが正しいでしょう？どっちも間違い？ データベースシステムも物理的にデータを保存するためにファイルシステムを使います。ファイルシステムのどこにどのデータを格納しているのかを管理するのがデーターベースシステムです。 ファイルシステムも、HDD上のどこにどのファイルが保存しているのかを格納しているシステムがあります。広い意味ではこれもデータベースです。
こんにちわ。 > これを回避する方法ってありますでしょうか？？ 他スキーマが所有者なのでuser_sequences ではなく、all_sequences を使って下さい。
もう1つOBを起動して、管理→セッション情報から、セッションごと殺せばいいのでは。 サーバだけで動いてるわけではなく、アプリケーションを介してファイルを選択しているから、 OBのプロセスを殺せば止まる気もしますが。
=============================================== with tableA as ( select '000001' as ID,'001' as NUM,'TEST1' as NAME from dual union all select '000001' as ID,'002' as NUM,'TEST1' as NAME from dual union all select '000001' as ID,'003' as NUM,'TEST1' as NAME from dual union all select '000002' as ID,'001' as NUM,'TEST2' as NAME from dual union all select '000002' as ID,'002' as NUM,'TEST2' as NAME from dual union all select '000003' as ID,'001' as NUM,'TEST3' as NAME from dual union all select '000003' as ID,'002' as NUM,'TEST3' as NAME from dual ), tableB as ( select '000001' as ID,'001' as NUM,'A' as RANK from dual union all select '000001' as ID,'001' as NUM,'B' as RANK from dual union all select '000001' as ID,'001' as NUM,'C' as RANK from dual union all select '000001' as ID,'002' as NUM,'A' as RANK from dual union all select '000001' as ID,'003' as NUM,'C' as RANK from dual union all select '000002' as ID,'001' as NUM,'B' as RANK from dual union all select '000002' as ID,'002' as NUM,'B' as RANK from dual union all select '000003' as ID,'001' as NUM,'A' as RANK from dual union all select '000003' as ID,'002' as NUM,'A' as RANK from dual union all select '000003' as ID,'002' as NUM,'C' as RANK from dual ), tableC as ( select 'A' as RANK,'基A' as NAME from dual union all select 'B' as RANK,'基B' as NAME from dual union all select 'C' as RANK,'基C' as NAME from dual ), IDRANK as ( select A.ID, C.RANK from tableA A, tableC C group by A.ID, C.RANK ) select T.ID, T.RANK, case count(B.ID) when 0 then '×' else '○' end as 判定, count(B.ID) as 個数 from IDRANK T left join tableB B on B.ID = T.ID and B.RANK = T.RANK group by T.ID, T.RANK order by T.ID, T.RANK =============================================== =============================================== ID,RANK,判定,個数 000001,A,○,2 000001,B,○,1 000001,C,○,2 000002,A,×,0 000002,B,○,2 000002,C,×,0 000003,A,○,2 000003,B,×,0 000003,C,○,1 =============================================== 私の環境では上記の結果になります。 （RANKの"D","E"は使用されていないようなので除外しています） 求められている結果と一致しているかと思うのですが・・・
コマンドは合ってます。 メッセージを見る限り環境変数が設定されていないようです http://docs.oracle.com/cd/E16338_01/server.112/b56320/em_manage.htm を参考に必要な値を設定してください。 rootで実行出来ないのは単にemctlコマンドにパスが通ってないだけでしょう。 普通はoracleユーザでやるから気にしなくて良いです。
> Zipを２つ共同じフォルダに入れてから展開しております。 ZIPファイルの場所はどこでも良くて展開先が同じでないといけないのではないでしょうか？ Windowsの標準機能で展開した場合、それぞれのZIP毎に別々のフォルダが作られますけど。 実際にダウンロードして解凍したわけではないので、ダメな例でしか説明できませんが、 winx64_12c_database_1of2.zip winx64_12c_database_2of2.zip □winx64_12c_database_1of2 └□一枚目のフォルダ・ファイル □winx64_12c_database_2of2 └□二枚目のフォルダ・ファイル こうなってるとダメです。
こういうことでしょうか。 insert into 売上データ ( 注文番号, 売上番号, 連番, 商品名 ) select 注文番号 , 売上番号 , ROW_NUMBER() over(partition by 注文番号 order by 売上番号, 連番) + (select COUNT(*) from 売上データ T2 where T1.注文番号 = T2.注文番号) 連番 , 商品名 from 納品データ t1; ROW_NUMBER()で納品データ内での連番を振って、その連番に既存データの件数を足しています。 MAX(連番)だと、同一注文番号が既存データに存在しない時にNULLになってしまうので、COUNTで件数を取るようにしています。
こんにちわ。 > この手順と影響範囲が知りたいです。 http://docs.oracle.com/cd/E16338_01/server.112/b56311/initparams152.htm#CHDFHDJI 上記のマニュアルから判断すると、手順については認識の通りです。 影響範囲については、「Alter Session」 なのでAlter Session 文を実行したセッション でのみ有効で既存テーブルには影響しません。 > 既存テーブルもCharベースに変更するにはどのような手順を踏めばよいのでしょうか？ Alter Session したセッションからテーブルを再作成しないといけないので、 単純に思いつく方法としては、こんな感じでしょうか？ 1) exp 又は expdp でデータを外部に出力 2) Alter Session したセッションからテーブルをDrop＆Create 3) imp 又は impdp でデータ投入 4) 索引再作成
こんにちわ。 > ORA-01017: ユーザー名/パスワードが無効です。ログオンは拒否されました。 上のtnsnames.ora の設定は、CDB に接続するためのものです。 新しい接続文字列で、SERVICE_NAME にPDB名を指定したものを作成して 試してみて下さい。
OracleからCSVファイルへ出力すれば、件数の制限はないです。 CSVファイルをAccessへ投入するのはExcelより便利ですよ。 Accessで SUMとGroup byでSQLで簡単に集計できます。 簡単な例： SELECT ProductID, Avg(UnitPrice), Sum(Quantity) FROM "Order Details" GROUP BY ProductID
こんにちわ。 > なぜこの監査ログのみ adump 以下の記録されるのでしょうか。 Oracle が起動されていないため、初期パラの設定を読み込めていない 事が原因ではないでしょうか？
　テストしてないですが、このあたりで出来そうに思いますけど。 select at.id, bt.シーケンス番号 from Aテーブル at left outer join 　　　　　　(select bts.シーケンス番号 from Bテーブル bts 　　　　　　　where bts.登録日=(select min(bts2.登録日) from Bテーブル bts2 　　　　　　　　　　　　　　　　　　　　where bts.シーケンス番号 = bts2.シーケンス番号) 　　　　　　　and bts.処理済みフラグ=0) bt 　　　　on at.id = bt.シーケンス番号 　Ａテーブルの列は全て出力することが条件なので、Ａテーブルと、条件を適用済みのＢテーブルを外部結合する必要があるように思います。 　これをＡテーブルとＢテーブルの外部結合から、条件を適用すると、レコードに不足が出てしまいます。 　そのため、Ａテーブルに対して、Ｂテーブルから生成した誘導表を外部結合する形にしています。 　【注意】OKWEBの制約で、行頭に半角のスペースが入れられないので、インデントは全部全角のスペースになっています。カット＆ペーストする時には半角のスペースに直すか削除してください。
なんか眠れないので（笑）試しにやってみました。 Windows 7 64bitにOracle Database 11g Release 2 Client (11.2.0.1.0) for Microsoft Windows (x64) を管理者で導入した直後のC:\app\product\11.2.0\client_1ディレクトリ配下の一覧です。 ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ C:\app\product\11.2.0\client_1>dir ドライブ C のボリューム ラベルがありません。 ボリューム シリアル番号は C46B-FE60 です C:\app\product\11.2.0\client_1 のディレクトリ 2014/05/04 05:19 <DIR> . 2014/05/04 05:19 <DIR> .. 2014/05/04 05:15 <DIR> ASP.NET 2014/05/04 05:15 <DIR> assistants 2014/05/04 05:19 <DIR> BIN 2014/05/04 05:18 <DIR> cdata 2014/05/04 05:19 <DIR> cfgtoollogs 2014/05/04 05:15 <DIR> clone 2014/05/04 05:15 <DIR> crs 2014/05/04 05:15 <DIR> csmig 2014/05/04 05:18 <DIR> css 2014/05/04 05:15 <DIR> cv 2014/05/04 05:18 <DIR> dc_ocm 2014/05/04 05:19 <DIR> deinstall 2014/05/04 05:15 <DIR> diagnostics 2014/05/04 05:15 <DIR> has 2014/05/04 05:15 <DIR> hs 2014/05/04 05:19 <DIR> install 2014/05/04 05:15 43 install.platform 2014/05/04 05:17 <DIR> instantclient 2014/05/04 05:19 <DIR> inventory 2014/05/04 05:15 <DIR> javavm 2014/05/04 05:18 <DIR> jdbc 2014/05/04 05:18 <DIR> jdk 2014/05/04 05:18 <DIR> jlib 2014/05/04 05:15 <DIR> jpub 2014/05/04 05:15 <DIR> jre 2014/05/04 05:18 <DIR> ldap 2014/05/04 05:17 <DIR> LIB 2014/05/04 05:15 <DIR> MMC Snap-Ins 2014/05/04 05:18 <DIR> network 2014/05/04 05:15 <DIR> nls 2014/05/04 05:15 <DIR> oci 2014/05/04 05:18 <DIR> odbc 2014/05/04 05:15 <DIR> ODP.NET 2014/05/04 05:15 <DIR> olap 2014/05/04 05:15 <DIR> oledb 2014/05/04 05:18 <DIR> OPatch 2014/05/04 05:18 <DIR> opmn 2014/05/04 05:15 <DIR> oracore 2014/05/04 05:15 <DIR> ord 2014/05/04 05:18 <DIR> oui 2014/05/04 05:15 <DIR> owm 2014/05/04 05:18 <DIR> perl 2014/05/04 05:15 <DIR> plsql 2014/05/04 05:15 <DIR> precomp 2014/05/04 05:15 <DIR> racg 2014/05/04 05:18 <DIR> RDBMS 2014/05/04 05:15 <DIR> relnotes 2014/05/04 05:15 <DIR> slax 2014/05/04 05:17 <DIR> sqldeveloper 2014/05/04 05:15 <DIR> sqlj 2014/05/04 05:15 <DIR> sqlplus 2014/05/04 05:15 <DIR> srvm 2014/05/04 05:15 <DIR> sysman 2014/05/04 05:18 <DIR> ucp 2014/05/04 05:15 <DIR> uix 2014/05/04 05:15 <DIR> utl 2014/05/04 05:15 <DIR> wwg 2014/05/04 05:17 <DIR> xdk ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ BINフォルダもnetworkフォルダもありますね。Instant Clientでインストールしたとか？ > 11g32bit用のClientをダウンロード ここちょっと気になりますが。でも、netca後に接続できてるんですよね・・・ oo4oは、Oracle Data Access Components for Windows が必要かと。この辺、以下が参考になりますかね。 http://www.oracle.com/technetwork/jp/ondemand/db-technique/20110426-client-install-upgrade-366198-ja.pdf
大半の情報はOracle公式の機能比較表に網羅されているので、まずはこちらを紹介します。 http://www.oracle.com/jp/products/database/enterprise-edition/comparisons/index.html http://docs.oracle.com/cd/E16338_01/license.112/b56284/editions.htm Standard Editionには最大CPUソケット数の制限があり、将来の拡張性に制限が掛かります。この点は関係者の了承を取っておいた方が良いです。今時は2～4ソケットのサーバでも十分な処理能力を持っているのですが、コスト的なメリットより「拡張性が制限される」というデメリットの方に過剰に反応する人もいるためです。 また、経験では、Standard Editionではパラレル索引作成/スキャンやパラレル統計収集等が使えないことから、性能面・運用面の検証が必要となりました。事前に検証を実施して、処理時間が問題無い範囲に収まることを確認しておいた方が良いです。 重要なシステムの移行を計画されているのであれば、専門家の力を借りた方が良いと思います。 大変だと思いますが、頑張って下さい！
たとえば or使わないで UNION　使って selct 日付,商品,代理店,金額,'代理店マスタに存在しない' from 売上テーブル where 代理店　not in (select 代理店 from 代理店マスタ) union selct 日付,商品,代理店,金額,'商品マスタに存在しない' from 売上テーブル where 商品　not in (select 品名 from 商品マスタ) といったように別々の条件でselectしてしまう（代理店になく商品にも無いのは2行出てくる） 外部結合使って　外部結合先がNULLかどうかで判断してしまう select 日付,商品,代理店,金額,nvl2(商品マスタ.品名,'商品マスタに存在しない',null),nvl2(代理店.代理店,'代理店マスタに存在しない',null) from 売上テーブル,商品マスタ,代理店 where 売上テーブル.商品　= 商品マスタ.品名(+) and 売上テーブル.代理店　= 代理店.代理店(+) and (商品マスタ.品名 is null or 代理店.代理店 is null) (+)つかわないでOUTER JOIN句つかって書いてもいいし とりあえず nvl2で表記してみましたが　CASE WHENなどつかって1カラムで '商品マスタと代理店マスタに存在しない'を加えて3通りの表示してあげるとか nvl2(商品マスタ.品名,'商品マスタ','')||nvl2(代理店.代理店,'代理店マスタ','')||'に存在しない とかメッセージ作っちゃうとか
ODAC112012.zip(Oracle Data Provider for .NET 4 11.2.0.1.2)以降でしょうね。 32bitでコンパイルするのですから、当然必要なのは32bitです。 クライアントの64bitOSには、InstantClientにしろなんにしろ、32bitのクライアントが 設置されていないと接続不可です。 アプリケーションを32bit版しか用意しないのならば、それに関係するものは全て32bitで なければ64bitOSでは動きません。
こんにちわ。 > 作業時間 を　文字型で '01:45' として格納したデータを > Date型の'1.75'というデータに変換したいのですが、どうしたらできるでしょうか。 先ずDate 型についてですが内部では7バイト数値型で、整数部で基準日からの経過日数を 小数部で当日の経過秒を表しています。 01:45 は、時:分 を表していると思いますが、日付の部分はどのようにお考えでしょうか？ 強引にやれば、to_date('01:45', 'HH24:MI') ですが、これでは日付情報が欠落 しているため、以下のように目的の値とならない可能性があります。 SQL> select sysdate, to_char(to_date('01:45', 'HH24:MI'), 'YYYY/MM/DD HH24:MI:SS') from dual; SYSDATE TO_CHAR(TO_DATE('01:45','HH24:MI'),'YYYY/MM/DDHH24:MI:SS' -------- --------------------------------------------------------- 14-04-23 2014/04/01 01:45:00
>マイクロソフトのデータベースはジェットエンジンで動いていますが、 その認識は誤解があります。 Jetエンジンは元はAccess用で今はWindowsに組み込まれたりもしていますが SQL ServerになるとJetエンジンとは別のものです。 >オラクルのデータベースのエンジンは何という名前なのでしょうか？ ドキュメントにはエンジン名は出てこなかったと思いますので不明かと。 >また、ＭＹＳＱＬとは別のエンジンなのでしょうか？統合されているのでしょうか？ 別です。
select case when instr(col, '-') > 0 then substr(col, 1, instr(col, '-') - 1) else col end from tbl; ですかね。
decodeだったりnullifとnvlの組み合わせだったり方法はいくらでもあると思いますが、case式を使う例だと select 　case 　　when instr(col, '-') > 0 then substr(col, 1, instr(col, '-') - 1) 　　else col 　end as col from tbl; こんな感じとかでしょうか。
外部結合 Cテーブル（Dテーブル）に結合条件となる対象レコードが存在しなくてもAテーブルの レコードを出力することを示します。 通常は等結合で、結合条件に一致しなかったAテーブルのレコードは出力されません。 外部結合は出力することを前提とします。 別テーブルにデータが存在する時は、付加情報としてそれも出力したい場合などに利用しますね。
こんにちわ。 > 「14/04/03」で取得してしまいます。 aaa_date がDATE 型であれば、TO_DATE ではなくTO_CHAR で 取得だと思います。
こんにちわ。 > 複数列を複数行にする方法がわかりません。 > 何か良い方法はないでしょうか。 パイプライン表関数を作成すれば、効率的に作成できます。 カンマ区切りのデータから各項目を切り出して、各項目を PIPE ROW で返してやると、返したデータを行として認識できます。 実際の方法は、この辺が参考になるかと思います。 http://docs.oracle.com/cd/E16338_01/appdev.112/b56260/tuning.htm#i52932
＞なぜでしょう？ 文字列として、先頭から１文字つづ比較していくから。 「01 」と「002」を、先頭から１文字づつ比較すると、以下のようになります。 ・１文字目の「0」と、１文字目の「0」を比較、同じなので、２文字目の比較に進む。 ・２文字目の「1」と、２文字目の「0」を比較、「1」の方が大きい。 ・結果が出たので、３文字目は比較しない。 結果「01 」は「002」よりも大きい、となります。 これは、「AB 」と「AAC」を比べたら「AB 」の方が大きい、と言う比較と同じです。
こんにちわ。 > Oracle10.2.0.5 x64(windowsServer2008x64)ではコンパイルエラーになります。 > （Ora-00918）列定義が未確定がでます。 > 64bitでなにかあるのでしょうか？ Bit 数の違いよりも、Patch Level の違いが影響している可能性が高いです。 エラー発生箇所で参照しているオブジェクトの定義が、10.2.0.3 と10.2.0.5 で差異があるのでは無いでしょうか？ エラーになっているSQL とそのSQL が参照しているオブジェクト定義を確認 して見て下さい。 ORA-918 は、同一ビュー (テーブル) に同じ列名が複数回出現するような 場合に発生するエラーですが、稀にV$ やX$ でそのような事があります。
＞このように明らかに文字リテラルが入る箇所 ＞upper(aiueo) 違います。変数aiueoの値をupperに送るという文です。 変数aiueoが定義されていないとエラーが出ていませんか？
通るでしょう。何が問題点
先ず、大前提として32bitプログラムのプロセス空間には 32bitのDLLしかロードできません。同様に64bitのそれは 64bitのDLLしかロードできません。 OLEの実装にはDLL型とEXE型があり、前者は同一の プロセス空間にあるため、32bitプログラムからは32bitの、 64bitプログラムからは64bitのDLL実装でなければ動き ません。 OLEをインスタンス化する時に使うクラス名はレジストリに 登録されており、最終的に処理を担うDLLかEXEのパスに 行き着くようになっています。互換性を保つため、クラス名は 以前から変わっていませんし、32/64の区別もありません。 OracleのOLEはDLL型実装なので、32bitか64bitのどちらか 一方しか処理できません。 ここでは”OraOLEDB.Oracle”が示す最終パスは後から インストールした方に切り替えられているはずです。 サーバが64bitなら、64bit版で統一すべきでしょう。 32bit版をアンインストールして、もう一度、64bit版を インストールした方がよいでしょう。 そして、コンソールプログラムの方を64bit版でリビルドする ことを薦めます。Visual Studio 2012ならどちらでもビルド できます。
> これは、「1」や「a」などの英数字は1バイト、「%」や「#」などの記号は2バ > イト、「あ」「ア」「亜」などの全ての日本語は3バイトで保存されるという > ことだと思いますが正しいでしょうか？ その認識でOKです。 > そうであれば、例えば氏名項目に２０文字を保証したい場合は、一番バイト消 > 費の多い3バイトで見積もり、20 * 3 = 60バイトで定義すればよいでしょうか？ > 第3水準文字、第4水準文字は4バイトで保存されるという記事もあったのですが、 > これらはとても稀なケースなので考慮せずに3バイトで考えておくのが一般的で > しょうか？ anmochiさんがおっしゃられている通り、UTF-8では１文字の最大が６バイトです。 ただ、私が見てきたいくつかのプロジェクトでは、UTF-8 (AL32UTF8) を使用す る場合、１文字あたり３バイト (すなわち、氏名２０文字を保証したい場合、６０ バイトで定義) で定義していました。 もし、AP側でも何かしらのチェックをするのであれば、DB側は少し緩めで作成す るのも良いかもしれません。VARCHAR の場合、データが入った分の容量しか必要 としませんので。 > あとは、バイトで考えずにNLS_LENGTH_SEMANTICSという初期化パラメータをChar > にすることで文字数ベースにすることができるとも聞いたのですがこのアプロ > ーチは推奨されますか？ 推奨する人がいるとしたら便利そうな機能を売り込みたいOracle社のプリセール スくらいです。実績が少ないパラメータをみだりに設定することで、未曾有のバ グに遭遇するリスクがあるため奨めしません。
シーケンスを使う方法としては、１分以内に９９９９を超えることがないなら、 シーケンスを１分毎に０にリセットして使えばいいと思いますし、 他の方法としては、 連番 = (select nvl((select max(連番)+ 1 from テーブル where 連番 like to_char(sysdate,'hhmiss') || 'A%') ,to_char(sysdate,'hhmiss') || 'A0001') from dual) で既に登録されたデータに１を加えてもいいと思いますが。 ※どちらも秒単位で連番という仕様で書いています。 　単に連番で付けている番号だけでサイクリックにすると質問の現象は防げません。 　（防ぐためには、サイクリックにはできません。どこかでリセットするか十分に大きな桁数をとるか 　　いづれかが必要です。） なお、同時に複数のコミットされていないデータが発生する （ＤＢ側が、２ＣＰＵ以上で同時に処理されている）というのなら、不可能。 （複数のＣＰＵをまたいで連番を共有することはプログラムでもできっこないです。） ・・・２ＣＰＵ以上で同時に処理されているのでなければミリ秒まで同一のデータが出来るのは あまり起きないと思うのですが。
表領域を削除すればデータファイルも削除できます。 INCLUDING CONTENTS AND DATAFILESを付けて DROP TABLESPACE を実行することで、 表領域の削除時に Oracle がデータファイルも削除してくれます。 DROP TABLESPACE IndexTbs INCLUDING CONTENTS AND DATAFILES; IndexTbs表領域が２つ以上のデータファイルから構成されている場合に、 IndexTbsを削除することなく、複数のデータファイルのうち１つだけを削除することは できないので、そのようにしたい場合は、IndexTbs表領域のデータを一旦エクスポート して、IndexTbs表領域を再作成してください。
## ちょっと、大変そうですね。。。 >疑問 >・WEBページに対してマスタはもつものなのでしょうか。 目的を書かずに手段の要否を問われても、答えはでてこないです。 要は、WEBページに対してマスタを持って何をするかがまったくかかれていないので いるかいらないか誰も判断をつけれないということになってしまいます。 例えば、 ユーザーのアクセスログを別途取得する★ その際は、アクセスした日時とユーザーＩＤとＷｅｂアドレスを取得している ⇒ユーザーＩＤとＷｅｂアドレスで何をしたかはわかるといえばわかるが 　Ｗｅｂアドレスだけではとてもわかりにくい。★ 目的：アクセスログを参照するさいには、わかりやすくWEB画面名称を表示したい ⇒マスタをもって、ＷｅｂアドレスからWEB画面名称を参照し、 アクセスした日時とユーザーＩＤとＷｅｂアドレスとWEB画面名称を表示する このためにマスタを利用します という話の筋道になります。 ★のところがわからないとマスタの要否がわからないっていう話です。 参考資料については、 例えば、Ｗｅｂページの作り方がまったくわからない人に対してのサイトで http://www.shoshinsha.com/hp/1hour/first.html とか見つかりましたが、これからスタートだったら、業務で利用できるようになるまでには いったい何年かかることやら。。。（このＵＲＬは参考にならないはずです） きつい言い方してすいませんが、 業務要件を聞いて、どういう風に作ってというのをアドバイスしてもらえる人を探してこないと いつまでたっても出来そうにないです。 ・・・質問文を見ると、WebアプリのＤＢ設計を担当ということなので、 Webアプリを作るサイドにそういう人がいるということなら、 その人に要件を聞くことからはじめれば対応できるかもしれません。 （Webアプリを作るサイドにそういう人がいないならもう撃沈するのがオチとしか思えませんが。。）
このような場合はいくつかの対応ですね。 (1)リスク承知で8.1を導入する 動作確認がとれていないと言っても動作しないという訳ではないかもしれないので、自己責任で8.1の導入をする (2)8.0のまま導入する 動作確認が取れるまで8.0を使い続ける。最新のOSが最良とは限らない 企業としての対応なら(2)になると思います。当社では顧客にメリット・デメリットを伝えた上であえて古いOSを納入することもあります。逆にWin7を導入することもありますね。
>>説明不足でしたが、SQLではなくオラクルです。 オラクル・データベースをはじめとして、ＲＤＢは、ＳＱＬ言語を使っています。このレベルも理解できてないなら、大学で学んでいることが理解できないのも当然でしょう。 >>私JAVAはあまり慣れていないので、まずはJAVAの基礎を固めてからオラクルの勉強をしたほうがよいということでしょうか？ 現在学んでいることを理解するならば、どちらも必須です。なおJavaとオラクルは直接の関係はありません。Javaの基礎が分かったとしても、オラクルは別ものですので、ゼロからのスタートです。 さらにTomcatやそれ以外のWebServerとか、html、JavaScript、データベースや文字コードのことも理解しないとだめでしょう。全部を勉強しないといけません。 とはいっても、同時に勉強しようと何冊も同時に書籍を読みまくっても、頭に入るわけはないので、理解しやすいところから順番にやっていくしかないかもしれません。 そして書籍を読むだけではなく、時間がかかっても、自分の手を動かして、１からサイトを作ることが、学ぶ良い方法だと思います。 ただ、正直なところ、JavaでのWeb開発は、PHPとかRubyonRailsなどに比べると、難しいと思います。私もいろんな言語でのシステム開発経験があったのですけど、JavaをつかったWeb開発は、本をよんだだけでは分からず、ベテランＳＥさんの応援を求めて、なんとか開発を進めることができたという経験があります。なので、今でもWeb開発をするときは、Javaを敬遠して他言語で行っています。 ということで、質問には (1)WEBデータベースにあたって何をどの順番で学んでいくのがよいか 人それぞれだと思うけど、時間をかけて一歩ずつ進むしかない。ただ、ある程度分かるまでは、冬休みなどの休暇を全部潰して、１日に１５時間の勉強を連日続けるとか、まとめて学習したほうがいいと思います。 (2)それにあたっておすすめの参考書またはサイト たぶん「これだけ１冊読めばいい」とはならず、辞書的な本、言語解説的な本とか、逆引き本が必要になると思います。また、データベースやＨＴＭＬとか、いろんな技術・知識が必要になりますので、書店で自分が必要でかつ理解できると思える書籍は、財布が許す限り全て購入すればいいと思います。
こんにちわ。 > 何かわかる方が居ましたら教えて頂きたいです。 サービスが正常に起動していない事があると言う事は、正常に起動 している場合もあると言う事でしょうか？ そのような場合は、起動に時間がかかっているだけの可能性が高いです。 PC 再起動後暫く待ってから、接続を行った場合はどうでしょうか？ また、問題発生時のAlert log を見れば何か分かるかも知れません。
　Ｒｏｕｎｄ 【丸め】の略です。 　日付を、２０００年に向けて丸める（四捨五入）するイメージですね。
顧客情報が重複しているというなら、SQLを副問い合わせと外部結合の組み合わせにすれば何とかなります。 select A.銀行No, B.銀行名, A.顧客No, C.顧客名, A.残高 from 口座 as A left outer join 銀行 as B on B.銀行No = A.銀行No left outer join (select distinct 顧客No, 顧客名 from 顧客) as C on C.顧客No = A.顧客No しかしそもそもテーブルの正規化が出来ていないという、関係データベースの基礎がおろそかになっているように思われます。 素直に重複が発生しないように、テーブル設計を見直してはいかがでしょうか。
> SYSスキーマなどを含めてエクスポートしたいときには、 > Full=y　では無理だから各スキーマ（SYS、ORDSYS等）を指定して個別で > 行う必要があるということなのでしょうか。 SYS スキーマはシステムの持ち物なのでexp した事はありません。 その他も、Oracle Text やExpression Filter 等、Oracle の拡張機能をInstall した際に作成されるスキーマのため、ユーザが意識的にexp/imp する事はありません。 SYSスキーマにオブジェクトを作成しなければならない理由が無いのであれば、 新しいスキーマを作成してそちらにオブジェクトを移動した方が良いです。 テーブルのデータだけで良ければ、ユーザ作成後に Create table 新ユーザ.テーブル名 as select * from SYS.テーブル名; とすれば、コピー可能です。
>>必要はディスク領域は400MBに対して私のPCは264MBしかありません。 必要なディスク容量が４００ＭＢと表示されていて、それを満たさないのですから、インストールがうまくいかないのは当然です。 ２００Ｖ用のモータを１００Ｖで使って、「規定のパワーが出ない」といっているようなものでしょうね。 ハードディスクを増設するか、不要なファイルを消して、４００ＭＢのフリースペースを確保して、再インストールしましょう。
効率良くというか、普通のupdate文・delete文ですが・・ update テーブル T1 set T1.カラムD = (select カラムD from テーブル T2 where T2.カラムA = 'aaa' and T1.カラムB = T2.カラムB and T1.カラムC = T2.カラムC) where T1.カラムA = 'bbb' and exists ( select * from テーブル T2 where T2.カラムA = 'aaa' and T1.カラムB = T2.カラムB and T1.カラムC = T2.カラムC ); delete from テーブル T1 where T1.カラムA = 'aaa' and exists ( select * from テーブル T2 where T2.カラムA = 'bbb' and T1.カラムB = T2.カラムB and T1.カラムC = T2.カラムC ); こんな感じでどうでしょうか。
そもそもがUNIONの用途として正しくない気がしますしね。 複数のテーブルの同一キーのデータを簡単に取れないというのは、設計がよくないのではないかという気がします。 >１つ１つNULLを設定するのは難しいかと、、、 とありますが、ただ面倒だということですよね？ ひとつひとつ項目を列挙していくだけなので難しいことはないと思うのですが。 たしかに、テーブルや項目が多ければ大変だとは思いますが、やらなければいけないことならやるしかないと思います。 役に立つか分かりませんが、複数のテーブルの全項目をUNIONで取得するSQLを組み立てるSQLを考えてみました。 --全角スペースでインデントしています select 　　case 　　　　when COL_NUM = 1 then 　　　　　　case 　　　　　　　　when TAB_NUM > 1 　　　　　　　　then 'UNION ALL' ||CHR(10) 　　　　　　end 　　　　　　|| 'SELECT' || CHR(10) 　　　　else ',' 　　end || coalesce(P_COLUMN_NAME, 'NULL') || ' AS ' || L_COLUMN_NAME || case 　　　　when max(COL_NUM) over() = COL_NUM then 　　　　　　CHR(10) || 'FROM ' || TABLE_NAME 　　end from 　　( 　　　　select 　　　　　　TABS.TABLE_NAME 　　　　　, COLS.COLUMN_NAME L_COLUMN_NAME 　　　　　, TAB_COLS.COLUMN_NAME P_COLUMN_NAME 　　　　　, dense_rank() over(order by TABS.TABLE_NAME) TAB_NUM 　　　　　, ROW_NUMBER() over(partition by TABS.TABLE_NAME order by COLS.COLUMN_NAME) COL_NUM 　　　　from 　　　　　　( 　　　　　　　　select distinct COLUMN_NAME 　　　　　　　　from USER_TAB_COLS 　　　　　　　　where TABLE_NAME in ('Aテーブル', 'Bテーブル') --対象のテーブルを列挙してください 　　　　　　) COLS 　　　　cross join 　　　　　　( 　　　　　　　　select TABLE_NAME 　　　　　　　　from USER_TABLES 　　　　　　　　where TABLE_NAME in ('Aテーブル', 'Bテーブル') --対象のテーブルを列挙してください 　　　　　　) TABS 　　　　left join USER_TAB_COLS TAB_COLS 　　　　on 　　　　　　( 　　　　　　　　TAB_COLS.TABLE_NAME = TABS.TABLE_NAME 　　　　　　and TAB_COLS.COLUMN_NAME = COLS.COLUMN_NAME 　　　　　　) 　　) order by 　　TAB_NUM 　, COL_NUM ; これを実行すると、たとえば今回提示されているテーブル定義であれば、 SELECT 内容 AS 内容 ,所属 AS 所属 ,日付 AS 日付 ,時間 AS 時間 ,NULL AS 理由 ,社員番号 AS 社員番号 ,結果 AS 結果 FROM Aテーブル UNION ALL SELECT 内容 AS 内容 ,NULL AS 所属 ,日付 AS 日付 ,NULL AS 時間 ,理由 AS 理由 ,社員番号 AS 社員番号 ,NULL AS 結果 FROM Bテーブル というSQLが出来ます。 これをインラインビューにして、SELECTする項目順を入れ替えたり、不要な項目を削除したりすれば少しは楽になるかもしれません。
単純に infile '入力ファイル名' "str '@\r\n（か@\n)'" でダメですか？
記載のデータって正しいですか？ このデータだとID:2～4が連続することになると思うのですが。 正しいデータが不明なので、期待どおりの結果が取れるか分かりませんが、 select min(START_DATE) START_DATE, max(END_DATE) END_DATE from( select ID, START_DATE, END_DATE, sum(TERM_START) over(order by START_DATE, END_DATE) TERM_ID from ( select ID, START_DATE, END_DATE, case when START_DATE >= LAG(END_DATE, 1) OVER(ORDER BY START_DATE, END_DATE) THEN 1 else 0 end TERM_START from EVENT ) ) group by TERM_ID order by START_DATE, END_DATE; こんな感じでどうでしょうか。
Order by 項目名　asc/desc で、項目名に case文は、使えるけど、 asc/desc にcase文は使えません。 (1つ目のCase文は項目名を指定しているのと同じで、1レコードずつ処理されて同じCase文の結果を 1レコードづつ返していると思うけど、内部処理の話なのではっきりしたことはわかりません。) >2つ目のCase文（：LINE）を消し、最初のCase文だけを残して、並び順（DESC・ASC）を埋め込むと、 >実行される状態になります。 では、デフォルトのascが適用されて実行できている。 じゃあどうすれば実現できるのかといわれると、 SQLを発行している元の処理が何かわからないので最善かどうかはわかりませんが、 SQLで実行するなら、 Select case ：LINE when '1' then (row_Number() Over(Order by Case ：ITEM When 'PJコード' then PJコード When '部署コード' then 部署コード end desc) when '2' (row_Number() Over(Order by Case ：ITEM When 'PJコード' then PJコード When '部署コード' then 部署コード end asc) end .... とでもするしかないと思います。 ※未検証。
こんにちわ。 > 私の考えでは、13でテーブルを確認するとデータが2件はいっていると思ったのですが、 > 結果は、1件だけでした。 > 解決の手がかりになる情報などがございましたらご教示いただけますでしょうか。 RMAN で取得したBackup に対して、SQL*Plus からRecovery を行っているから だと思います。 増分 Backup (Backup Set) はRMAN 独自の形式のため、RMAN からRecovery を 行ってやる必要があります。 但しRMAN にはuntil cancel が無いので、最後に取得したBackup 時のログから Backup されたThread番号, Log順序番からv$archived_log 等を検索して Recovery するSCN を算出しないといけないですね。 RMAN はRestore する時もultil SCN の指定が可能ですので、Restore を開始する前に Restore/Recovery するSCN を取得した方が良いと思います。
一般的には在庫テーブルを作り、入庫日と出庫日または入出庫日欄を設けて、在庫の有る物に対し６ヶ月以前か判定します。現テーブルで判定出来ない場合は、新たなテーブルや項目を持つ必要があります、このようにシステムは新たなニーズが発生した場合は、テーブル構造も含めて対応を取る必要があります、つまり、常に変化成長させる必要が有ります。
情報が少ないのでなんともいえませんが >パスが間違っている事はありませんでした。 これが嘘だと思います。 >ファイルはバッチと同じ階層にあり と言う事は相対パスで指定しているのではないかと思います。相対パスの指定の仕方を失敗しているように思います。絶対パスで試してみましょう。
こんにちわ。 > 私には、なぜバックアップから除外されているデータファイル6に対して > 「～古いバックアップからリストア～」といったメッセージが出てくるのか > 理解できていません。 バックアップしていない表領域は、リカバリの対象外となります。 そしてリカバリとは、「全てのデータファイルの最終更新SCN を一致させる事」 と考えると、TBLSP01, TBLSP02 のデータファイルについてもSCN を一致させる 必要があるため、データベースをオープンするためにはバックアップが必要となります。 TBLSP01, TBLSP02 表領域については、バックアップを取得していないのであれば 該当の表領域を除外してリカバリを行う事になると思います。 Alter database datafile 'データファイル#6 のフルパス' offline drop; Alter database datafile 'データファイル#7 のフルパス' offline drop; としてから、データベースのリカバリを行い、resetlogs を指定してDB を オープンした後で、 Alter tablespace TBLSP01 including contents and datafiles; Alter tablespace TBLSP02 including contents and datafiles; でリカバリの対象外とした表領域を削除した後で、該当表領域の再作成と テーブル, 索引等の再作成を行って下さい。 ※ 表領域を読取専用にしておけば、1度だけBackup を取得しておけば、 　 (Backup を残しておけば) そのBackup を使ってリカバリが可能になります。
>>>> Could not execute auto check for display colors using command /usr/X11R6/bin/xdpyinfo. Check if the DISPLAY variable us set. エラーメッセージに書かれている事柄は確認されましたか？ また、具体的にどのような手順でインストールしようとされてるのでしょうか？
このページの内容で解決しないでしょうか？ http://www.noguopin.com/oracle/index.php?ORA-12541 http://www.shift-the-oracle.com/oerrs/ora-12541.html （Ｏｒａｃｌｅから離れてだいぶ経つので、的確なアドバイスできなくてすみません）
こんにちわ。 > Oracleでの動的ポートがわからないのでご教示頂けますでしょうか。 デフォルトでは、TNS Listener がClient からの接続要求を1521ポートで 待っていますが、接続要求を受け取った後はClient とサーバープロセスが 別のポートで通信し合う事かと。 この辺が参考になるかと思います。 http://www.oracle.co.jp/forum/thread.jspa?threadID=27000005
こんにちわ。 > 他のDBのテーブルを参照したいのですが方法がわかりません。 DB Link 使用すれば、他DB のデータを参照する事ができます。 手順としては、こんな感じです。 1) 接続しているDB Server のtnsnames.ora にもう1つのDB に接続するための 　 接続文字列を定義する。 2) SQL*Plus から、以下のようにしてもう1つのDB を参照するための 　 DB Link を作成する。 　 SQL> Create database link dblink名 connect to 接続ユーザ名 　　　　　identified by パスワード using '接続文字列'; 3) 後は、テーブル名を@dblink名で修飾すると、他DB のテーブルを 　 ローカルのテーブルと同じように扱えます。
話がおかしいと思います。 恐らく、 　１．本番環境旧システムのスキーマをエクスポート 　２．開発環境新システムのNEWテーブルをエクスポート 　３．本番環境新システムのスキーマへ１．のダンプファイルをインポート 　４．本番環境新システムのスキーマへ２．のダンプファイルをインポート という流れかなと思います。 この時、NEWテーブルがトリガーからデータ登録が行われるならば、 インポート後は0件でも問題ないと思います。 開発環境で作成されたデータが本番環境に混ざってはいけませんからね。 しかし、NEWテーブルが今回追加され、トリガーによってレコードが挿入される テーブルとしたら、足りないものがあります。 それは、『トリガーの生成』。 どこかのテーブルが更新された時に、NEWテーブルを更新するトリガーを 追加、もしくは変更しているはずです。 これは上記１．２．３．４．をやっても反映されません。 そのトリガーの所在を明確にした上で、４．を適用後にトリガーのCREATE文を 本番環境へ走行させる必要があります。
select a.a1,count(b.a1),count(c.a1) from a,b,c where a.a1 = b.a1(+) and a.a1 = c.a1(+) group by a1 でcount(b.a1)とcount(c.a1)の値がどのようにでてくるかの理解が違っています。 ★a.a1 1 2 3 ★b.a1,a2 1,101 1,102 2,201 ★c.a1,a3 2,222 3,333 3,444 というデータになっていると、 select a.a1,b.a1,b.a2,c.a1,c.a3 from a,b,c where a.a1 = b.a1(+) and a.a1 = c.a1(+) は、 a.a1,b.a1,b.a2,c.a1,c.a3 1,1,101,, 1,1,102,, 2,2,201,2,222 3,,3,333 3,,3,444 となります。 で、 select a.a1,count(b.a1),count(c.a1) from a,b,c where a.a1 = b.a1(+) and a.a1 = c.a1(+) group by a1 は、 1,2,2 2,1,1 3,2,2 となります。 b.a1やc.a1がNullであろうが値が入っていようが、1件としてカウントされます。 select a.a1,sum(case b.a1 isnull then 1 else 0 end) ,sum(case c.a1 isnull then 1 else 0 end) from a,b,c where a.a1 = b.a1(+) and a.a1 = c.a1(+) group by a1 なんてしたら、 1,2,0 2,1,1 3,0,2 とでてきます。 方法１：がんばってこれでやってみる。 select shohin.shohin_no as "商品NO" ,sum(case when yoyaku_1.shohin_no is null then 0 else 1 end) as "予約数" ,sum(case when receipt_1.shohin_no is null then 0 else 1 end) as "予約明細数" ,sum(case when yoyaku_2.shohin_no is null then 0 else 1 end) as "受取数" ,sum(case when receipt_2.shohin_no is null then 0 else 1 end) as "受取明細数" from shohin ,(select * from yoyaku where yoyaku.status = '1') yoyaku_1 ,(select * from yoyaku where yoyaku.status = '2') yoyaku_2 ,(select * from receipt where receipt.status = '1') receipt_1 ,(select * from receipt where receipt.status = '2') receipt_2 where yoyaku_1.shohin_no(+) = shohin.shohin_no and yoyaku_2.shohin_no(+) = shohin.shohin_no and receipt_1.shohin_no(+) = yoyaku_1.shohin_no and receipt_1.status(+) = yoyaku_1.status and receipt_2.shohin_no(+) = yoyaku_2.shohin_no and receipt_2.status(+) = yoyaku_2.status group by shohin.shohin_no order by 1 どう考えても処理遅そう。 方法２：group by した結果を結合する。 select shohin.shohin_no as "商品NO" ,nvl(yoyaku_1.cnt,0) as "予約数" ,nvl(receipt_1.cnt,0) as "予約明細数" ,nvl(yoyaku_2.cnt,0) as "受取数" ,nvl(receipt_2.cnt,0) as "受取明細数" from shohin ,(select shohin_no,count(*) as cnt from yoyaku where yoyaku.status = '1' group by shohin_no) yoyaku_1 ,(select shohin_no,count(*) as cnt from yoyaku where yoyaku.status = '2' group by shohin_no) yoyaku_2 ,(select shohin_no,count(*) as cnt from receipt where receipt.status = '1' group by shohin_no) receipt_1 ,(select shohin_no,count(*) as cnt from receipt where receipt.status = '2' group by shohin_no) receipt_2 where yoyaku_1.shohin_no(+) = shohin.shohin_no and yoyaku_2.shohin_no(+) = shohin.shohin_no and receipt_1.shohin_no(+) = shohin.shohin_no and receipt_2.shohin_no(+) = shohin.shohin_no group by shohin.shohin_no order by 1 注：nvl(yoyaku_1.cnt,0)は、yoyaku_1.cntがNull(対象商品がない)時に0を表示します。 　 方法３：スカラー副問い合わせを使う。 select shohin.shohin_no as "商品NO", (select count(*) from yoyaku where yoyaku.status = '1' and yoyaku.shohin_no = shohin.shohin_no ) as "予約数", (select count(*) from receipt where receipt.status = '1' and receipt.shohin_no = shohin.shohin_no ) as "予約明細数", (select count(*) from yoyaku where yoyaku.status = '2' and yoyaku.shohin_no = shohin.shohin_no ) as "受取数", (select count(*) from receipt where receipt.status = '1' and receipt.shohin_no = shohin.shohin_no ) as "受取明細数" from shohin order by 1 ※receiptはshohinと結合すべきでないのかもしれませんが、 　あってはいけないyoyakuと結合できないreceiptは 　（質問のようにyoyakuとreceiptを結合するとカウントされないが、 　　この回答ではカウントされてしまう。） 　質問に示された【想定結果】では調べようがないので、 　別途調べるselect文を実行するだろうから、手っ取り早く、 　shohinと結合してしまいました。 ## 大量データを投入して、全部動かしてみてどれが早いか試してみるのも、 ## 勉強のうちなのかも。
こんにちわ。 > TIMESTAMP型が含まれるテーブルは上記のSQLでは取得できないのでしょうか。 通常、そのような事はありません。 問題のテーブルにアクセスできるユーザからuser_tab_columns ビューを 参照している前提で、考えられる原因が3つあります。 1) 別スキーマにテーブルがある。 　 user_tab_columns ビューは、自スキーマに定義されているテーブルの 　 列情報を持ちます。 　 all_tab_columns ビューで情報が取得できるか確認して下さい。 　 ※ all_tab_columns ビューのowner 列にテーブルの所有者名が 　　　格納されています。 2) テーブルが大文字/小文字混在で作成されている。 　 テーブルを大文字/小文字混在でCreate table しても、大文字でテーブルが 　 作成されますが、テーブル名をダブルクォーテーションで囲むと大文字/小文字 　 混在で作成させる事ができます。 　 その場合、ディクショナリにもテーブル名は大文字/小文字混在で格納されて 　 います。 　 where upper(table_name) = upper('テーブル名') で確認してみて下さい。 3) Synonym 経由で別の表にアクセスしている。 　 Synonum 経由で別の表にアクセスしている場合も、user_tab_columns や 　 all_tab_columns ビューには列情報は格納されません。 　 select owner, object_type, object_name from all_objects 　　 where object_name = '先に指定したテーブル名'; 　 上のSQL で、どの所有者のどのようなオブジェクトにアクセスしているか 　 確認してみて下さい。
お疲れ様です。 tmnktmnkさんの言われていることで十分わかりますよ。 きっとそんなにOracle詳しくないので、言葉足らずかもしれませんが、 十分わかります。 >ログをスイッチし、Oracleは動作したのですが 確かに、listener.logをリネームすることをスイッチするって言われる方いますよね。 正しくはリネームというと思いますが、スイッチでわかります。 >dllからは動作しません。 固まるんじゃないんですか？応答がない感じで、ぐるぐる回ってるんじゃ？ エラーは特に表示されないんじゃ？ >なんとなくですが、with句を用いたものが失敗しているようです。 with句はSQLが複雑になっているんで、with句だけじゃなく複雑なものだと失敗すると思いますよ。 結論としてですが、 そのアプリケーションサーバからdll経由で接続したセッションが、DB側に残ってないでしょうか？ 質問されてからですので、20時間くらいセッションをはったものがないでしょうか？ それを切断すれば大丈夫です。 切断できない場合は、Oracleを再起動しかありませんが… こういった現象をなんとなく聞いてわかるようになるのには、経験しかありません。 エラーから調べることも大切ですが、現象である程度わかるようになれるといいですね。 tmnktmnkさんの今後のご活躍を期待します。 エラそうですみません。
こんにちわ。 > そもそも2台だけで構築は可能なものでしょうか？ 確かにRAC を構築するのであれば、共有ディスクが必要になります。 でもVMware とかを使えば、1台でもRAC の構築は可能ですょ。 物理マシンは1台なので、当然可用性はありませんが、動作検証などで 使用するには十分です。 手順については、この辺を見て下さい。 http://otndnld.oracle.co.jp/products/database/oracle10g/clustering/pdf/VMware-LinuxVer1.40.pdf http://sakusakuit.blog.fc2.com/blog-entry-96.html http://www.doppo1.net/oracle/admin/rac_install_112.html > (2)のShared File System（共有ファイルシステム）とは、NFSといった話でしょうか？ NFS とは違います。 NFS の場合、複数のマシンから同じファイルを一貫性を保って更新する事が できないため、RAC のStorage として使用する事はできません。
氏名って職員名と考えると、通常、 職員番号,氏名,レベル,点数 って項目が必要なら 氏名は正規化してテーブル上に持っていないと考えるべきなのだろうけど、 質問上の例見ても同一なので、氏名は職員の名前と考えて、 同一職員番号のレコードには同一氏名しかないと考えて回答すると。 select 職員番号,氏名,max(点数) from tableA where レベル <= 4 /* レベルが文字列なら、'4' */ group by 職員番号,氏名 order by 職員番号,氏名 でレベル以外は求められます。 レベルは・・・同一職員番号で同一の点数が複数あってその点数がmaxだったときに、 レベルが異なるレコードが複数あれば何を出せばいいのかな？ maxの点数のレベルのうち最大を出したければ以下。 select t1.職員番号,t1.氏名,max(t2.レベル),t1.点数 from ( select 職員番号,氏名,max(点数) from tableA where レベル <= 4 /* レベルが文字列なら、'4' */ group by 職員番号,氏名 ) t1,tableA t2 where t1.職員番号 = t2.職員番号 and t1.氏名 = t2.氏名 and t1.点数 = t2.点数 order by 職員番号,氏名 ※ select 職員番号,氏名,max(レベル),max(点数) from tableA group by 職員番号,氏名 としてしまうと、レベルと点数を別のレコードから持ってくるからご注意を。 例)レベル,点数が 1,4 2,3 とあると、こちらのsqlは、2,4とでたはず。
select 職員番号, 氏名, レベル, 点数 from aaaa a0 where 点数 is not null and レベル <= 4 and a0.レベル=(select max(a1.レベル) from aaaa a1 where a1.職員番号 = a0.職員番号 and 点数 is not null and レベル<=4) and a0.点数 = (select max(a2.点数) from aaaa a2 　　　　　　　　　　where a0.職員番号 = a2.職員番号 and　 　　　　　　　 　　　a0.レベル = a2.レベル) order by 職員番号 　ウィンドウ構文を使わずにやろうとすると、こんな感じでしょうか。 　なお、もし、（職員番号，レベル）の組に重複がないのであれば、where区内の２つめのselect文を含む条件( a0.点数=で始まる比較）は不要です。（ちなみに、一応実験は、01100でレベル４で得点5点を追加して行っています。） 　また、常識的に、職員番号が同じで氏名が違うなんてことはあり得ないとしていますが、もしこれを考慮に入れ別人として扱う必要があるなら、その条件は追加が必要です。
こんにちわ。 > なぜこのようなことが起きるのでしょうか？ > どのようにすれば回避できますでしょうか？ 恐らく、FQDN 無しのホスト名がknown_hosts に登録されていないのではないでしょうか？ 以下の確認をして見て下さい。 1) nslookup で、FQDN 無しのホスト名で、FQDN 指定のホストと同じIP が引ける事を確認 2) ssh FQDN指定無しホスト名 date で、FQDN 無しのホスト名 をknown_hosts に登録 　 ※ RAC を構成する全Node から実施 3) 再度Grid Infrastructure のInstall を実行
select 生年月日.ID,生年月日,基準日, cast(substr(基準日,1,4) as int)-cast(substr(生年月日,1,4) as int) -case when substr(基準日,5,4)<substr(生年月日,5,4) then 1 else 0 end as 年齢 from 生年月日,基準日 です。
http://www.4shared.com/file/ND9w2o9L/Oracle_Database_10g_Express_Ed.htm というのがありますが、そう称してはいるものの実体は何なのかは不明です。 自己責任でお試しください。
各テーブルの関連が不明なのですが、こんな感じのことでしょうか。 select T.*, N.SIME from TOKUTEN T inner join KIHON K on (K.SYKNCODE = T.SYOKUINCD) inner join NAME N on (N.SYOKUINID = K.SYOKUINID and T.HYOKIKAN_FR between N.TKYSTADATE and N.TKYENDDATE); NAMEテーブルにレコードがないTOKUTENテーブルのレコードも取得したいなら、LEFT JOINに変えてください。
select 項目 from テーブル where 'ABCDEF' like '%' || 項目 || '%'; regexp_likeを使うなら、 select 項目 from テーブル where regexp_like('ABCDEF', 項目); とかではどうでしょうか。 インデックスが使われないのでパフォーマンスに問題があるとは思いますけど。
> 但し、私はWHEREの所で、今日のデータの中の重複データを削除されるつもり > でいたのですが、今日以前の物も全て削除されてしまいました。 > 構文に誤りがあるのでしょうか。 構文に誤りはありません。構文通りに削除されただけです。 ＊WHERE句とGROUP BY句は、なんか引っかかってたのですが気付きませんでした。 副問い合わせの部分で、今日(SYSDATE)の重複しているデーターのID最少値を取得しています。 DELETEでは、そのID以外をすべて削除、ですので、日付などは関係なく削除されます。 今日のみというのであれば、DELETE文にもWHERE句で日付の指定を入れてください。 DELETE FROM D入庫データ WHERE ID NOT IN ( SELECT MIN(ID) FROM D入庫データ WHERE TO_CHAR(SYSDATE, 'yyyy/mm/dd') = TO_CHAR(登録日時, 'yyyy/mm/dd') GROUP BY PRID, 台車番号, 入庫数量, ロット番号, TO_CHAR(登録日時, 'yyyy,mm,dd') ) AND TO_CHAR(SYSDATE, 'yyyy/mm/dd') = TO_CHAR(登録日時, 'yyyy/mm/dd') ; ---- NOT EXISTS句を利用した方がパフォーマンスが良くなるかもしれませんが詳しくは調べてください。
こんにちわ。 > 非同期I/Oが有効なら、I/Oスレーブが使用されるのではないでしょうか？ http://docs.oracle.com/cd/E16338_01/backup.112/b56269/rcmtunin.htm#BABBGAHE この辺が参考になるかと思います。 http://docs.oracle.com/cd/E16338_01/server.112/b56311/initparams079.htm#CHDFBEHC http://docs.oracle.com/cd/E16338_01/server.112/b56311/initparams073.htm#i1126779 RMAN に限った話ではありませんが、非同期I/O がサポートされていない時に、 I/O を高速化するためにSLAVE 数をDBWR_IO_SLAVES に指定するようですね。
先ず、理論の組み立てが大切です。 (1)TBL_1からJUDGE=OKのものを抽出する。 (2)TBL_2からJUDGE=OKのものを抽出する。 (3)上記(1)と(2)をIDで結合する。 次にOracleのバージョンにより結合式の 書式が違います。 バージョンを明記しましょう。 最新と仮定すると、以下のようになります。 SELECT A.ID,A.JUDGE,B.DATE FROM (SELECT ID,JUDGE FROM TBL_1 WHERE JUDGE='OK') A INNER JOIN (SELECT ID,DATE FROM TBL_2 WHERE JUDGE='OK') B ON A.ID=B.ID 結合したクエリから条件を指定して抽出 するより、先に条件で絞り込んだクエリを 結合する方が件数が減っているので効率が 良くなります。まぁ、今時は機械も速いし、 件数が何十万でもなければ、どうやっても 見た目の変化はありませんが、昔はこういう ことをしないと、処理時間に大きな差がでた ものです。
ANO.3です。 後でみたところ、１行抜けてしまいました。 訂正というか、下の行を追加します。 ＞回線エラーなのでロールバックしようとすると、 ＞ロールバックする情報は自サーバで、ロールバックする先は、他サーバなのに ＞回線はつながらない といったことがおきないことを確認しておく必要があるはずです。 ＞・・・２フェーズコミットのサポートはしていたはずなので大丈夫だったと思いますけどね。
こんにちわ。 > 制御ファイルを別ホストのrmanのカタログなり制御ファイルに登録する > 必要があるかと思うのですが、それはどうやってやればいいのでしょうか。 http://docs.oracle.com/cd/E16338_01/server.112/b56301/control001.htm#i1006143 制御ファイルには、上記マニュアルにある通りデータベース物理構造が 格納されていますが、ホスト名等情報は特に格納されていませんので、 マニュアルにある通りの方法で良いかと思います。 それとも、マニュアルにある通りの方法で操作して、何らかのエラーが出ている のであれば、エラーの内容を記載して下さい。
3つある場合は、 SELECT * FROM ( SELECT 社員番号, 日付, 内容 FROM Aテーブル UNION SELECT 社員番号, 日付, 内容 FROM Bテーブル /*--------追加ここから--------*/ UNION SELECT 社員番号, 日付, 内容 FROM Cテーブル /*--------追加ここまで--------*/ ) ORDER BY 日付, 社員番号, 内容 ……という風にUNIONでつなげていけばOKです。
こんにちわ。 > ひょっとして、Oracleに設定すべきもの？ そうです。 ディレクトリオブジェクトです。 こんな感じで設定して下さい。 sqlplus "/ as sysdba" SQL> Create directory EXPORT_DIR as 'D:\TEST'; SQL> grant read on directory EXPORT_DIR to ユーザ名; SQL> grant write on directory EXPORT_DIR to ユーザ名; SQL> exit
要はある整数で割り切れるデータ、ということでいいですよね？ select データ from テーブル where mod(あるカラム, 整数) = 0; でいいのではないでしょうか。
No.1の補足にある >col1もcol2も同じく小さければという条件 の意味が理解できませんでした。 どのようなデータから、どのような結果を取得したいのかを 具体的に書いてもらえればアドバイスできるかもしれません。
with with表(コード,人数) as(select コード,count(*) from 表 group by コード) select * from 表 t1 where exists( select ' ' from with表 t2 where 人数=(select max(人数) from with表) and t1.コード=t2.コード) order by 1 の間違いでした。
SELECT * FROM 表 WHERE コード IN( SELECT コード FROM 表 GROUP BY コード HAVING MAX(番号) =　コード ); でどうでしょうか。 GROUP BYを使うときは、SELECTするカラムと同一でなくてはなりません。 もうちょっといい方法もあるように思いますが。
sqlを実施した時間から45分前が cast(sysdate-1/(24*60)*45 as timestamp) で、sqlを実施した時間が cast(sysdate as timestamp) です。
ただ割るなら select count(*) / 3 from tableA ; で問題ないですよ。 例えば、 select goukei / tanka from tableA ; select suryo * tanka from tableA ; など、計算ができます。
こちらが参考になると思います。 http://www.shift-the-oracle.com/plsql/dbms_lock/sleep.html
・3秒毎 ・REDOログバッファが3分の1になった時 はいずれもトランザクションがコミットされているという保証はありません。 逆に言えば、コミットされた時点で「このトランザクションはコミットされた」という情報もログファイルに書き込んでいるのです。 (6)name列確認 結果⇒test01 のタイミングではコミットされていませんので、UNDOデータを読みに行って「test01」を返しています。
>Cannot find a J2SE SDK installed at path:C:\Program Files\Java\jre6. とあるようにJDKをインストールする必要がありますが、指定したパスはJREのようですよ。 >Sqldeveloperはデスクトップ上から起動させていますが、そもそも64bit版の場合はどこのフォルダへ 格納するのが正しくて 64bit版に関わらず、インストールガイドにあるように好きなフォルダでいいのではないでしょうか。 http://docs.oracle.com/cd/E38764_01/doc.32/b70215/install.htm#CIHFHIAH
TABLEとINDEXで同じSEGMENT_NAMEの場合もあるので、SEGMENT_NAMEではユニークにならないです。 たぶんSELECTする際にはSEGMENT_TYPEを指定するのでしょうから、これで重複する事はあまり無いと思いますが。 上記以外でも、パーティション表の場合、 各パーティションのSEGMENT_NAMEは同一になり、PARTITION_NAMEにそれぞれのパーティション名が入るようです。 当方の環境は10g XEなので、パーティション機能を利用することは出来ないのですが、 DBA_SEGMENTSを見てみたらSYSAUX表領域にそのようなデータがあることが確認できました。 参考になれば幸いです。
select テーブルＡ.カラム１, テーブルＡ.カラム２, max(テーブルＢ.カラム２) from テーブルＡ, テーブルＢ where テーブルＡ.カラム１ = テーブルＢ.カラム１ group by テーブルＡ.カラム１, テーブルＡ.カラム２;
こういうことですか？ http://www.atmarkit.co.jp/fdb/rensai/odpdotnet03/odpdotnet03_3.html
>１）3-15においてstatusがAとBを持つcodeを返したい > >　→0001,0002が返ってきてほしい select code from DATA d1,DATA d2 where d1.status = 'A' and d2.status = 'B' and d1.date = '3-15' and d1.code = d2.code and d1.date = d2.date >２）3-15においてstatusにCを持つがそれ以外（A,B）は持たないcodeを返したい > >　→0005が返ってきてほしい select code from DATA where status = 'C' and code not in(select code from DATA where status in('A','B')) and date = '3-15' で取れると思います。 SQLでデータを取るためには頭の中でどういった表を用意したら 取得できるかの妄想力が必要です。 がんばってください。
おそらく、その形ではROWTYPE型として渡せないと思います。 そもそも、MY_TABLEのレコード全件を対象にして加工しようとするなら、素直に表関数機能を使ったほうがいいのではないでしょうか。
やりたいことそのままのSQLがこちらに載っています。 http://codezine.jp/article/detail/5154?p=2 参考になれば幸いです。
SELECT * FROM ALL_CATALOG; http://docs.oracle.com/cd/E16338_01/server.112/b56311/statviews_1030.htm より引用 ALL_CATALOGは、現行のユーザーがアクセスできるすべての表、クラスタ、ビュー、シノニムおよび順序を示します。 ----- ここまで ----- SELECT ROWNUM FROM ALL_CATALOG; としたら、上記の行の項目の代わりに番号が1から順番に振られた値が返ってきます。 ＞「10668」という数字は何でしょうか？ ときかれると、 現行のユーザーがアクセスできるすべての表、クラスタ、ビュー、シノニムおよび順序の数 ということになりますし、 >どのようなアルゴリズムで取得されているのでしょうか？ ときかれると、 表、クラスタ、ビュー、シノニムおよび順序は、作成時にデータディクショナリと呼ばれる領域に 記録されており、その領域を元データとして、 ALL_CATALOGは、現行のユーザーがアクセスできる表、クラスタ、ビュー、シノニムおよび順序を 抽出しています。 そして、ROWNUMは、出力対象として抽出されたレコードに対して１から連番を割り振ります。 >「10668」行返ってきました。 ということなら、最終行のROWNUM値は、10668とでていたと思います。
こんな事例がありますよ
ANO1.ですが、頻度が同じものがあるとうまくいかないですね。 TF.freqだけでなく、TF.telでもorder byするとか。
え～と・・・時間ができたので（笑）SQL版をば -- keyの設定（SQL*Plusでの実行を想定） VARIABLE v_key NUMBER EXECUTE :v_key := 1 -- なんか…無理矢理だな～、DB設計が悪いんだよな（笑）版 SELECT MAX(CASE WHEN A.fno = 1 THEN B.fvalue END) AS field1, MAX(CASE WHEN A.fno = 2 THEN B.fvalue END) AS field2, MAX(CASE WHEN A.fno = 3 THEN B.fvalue END) AS field3 FROM ( SELECT 1 AS fno, field1 AS fname FROM テーブルA WHERE key = :v_key UNION ALL SELECT 2 AS fno, field2 AS fname FROM テーブルA WHERE key = :v_key UNION ALL SELECT 3 AS fno, field3 AS fname FROM テーブルA WHERE key = :v_key ) A, ( SELECT 'item1' AS fname, item1 AS fvalue FROM テーブルB WHERE key = :v_key UNION ALL SELECT 'item2' AS fname, item2 AS fvalue FROM テーブルB WHERE key = :v_key UNION ALL SELECT 'item3' AS fname, item3 AS fvalue FROM テーブルB WHERE key = :v_key UNION ALL SELECT 'item4' AS fname, item4 AS fvalue FROM テーブルB WHERE key = :v_key UNION ALL SELECT 'item5' AS fname, item5 AS fvalue FROM テーブルB WHERE key = :v_key ) B WHERE A.fname = B.fname / 「動的SQL」をオススメします。
とりあえずSPFILEを適当な名前にリネームしておいて、 PFILEから起動（startup）するという手は？
"EXECUTE IMMEDIATE"が余計です。 取りましょう。
Ｎｏ１ですが、検索リストの http://bbs.wankuma.com/index.cgi?mode=red&namber=59856&KLOG=101 にも、面白い考察があります。リンク先のことは、実際にやってみないとイメージが浮かばないでしょう。まあ、こういうこともあるか。と言う感じです。なので、コード解析しないとわからないのです。他のリンクもみて、解析、実証をしないとわからないかも。それまでに、まず実行環境を洗い出して、列挙する必要があるでしょう。
ご参考 http://www.insight-tec.com/mailmagazine/ora3/vol422.html
Aさんがコミットして更新（この場合INSERT）を確定すれば Bさんからも見えるようになりますよ。 Aさんが確定しない限り、Aさんの更新はBさんからは見えません。 このカラクリがないと Aさんが「やっぱ、や～めた」ってロールバックした時 困るでしょ？ Bさんから見えてたら。 SQL*Plusで SET AUTOCOMMIT ON として自動コミット機能を有効にすれば Aさんが更新するたびに自動的（強制的）にコミットされますが、 Aさんは、その更新をロールバックすることができなくなります。 よ～～～く、考えて使うべき機能です。
こんにちわ。 > rmanコマンドに、時間を引数として渡したいのですが、渡し方がわかりません。 以下RMAN マニュアルの「例3-34 置換変数の指定」が参考になるかと。 http://docs.oracle.com/cd/E16338_01/backup.112/b56270/rcmsynta2011.htm
こんにちわ。 > 上記のテーブルにはIDという項目があるのですが、このテーブルで > 使用していないIDのみをSQLで抽出できないかと考えております。 ID にどのような書式でデータが格納されているか記載されていないので '00000001' から連番で入っていると仮定して 00001000までの間で使用 していない番号を求めるなら、こんな感じです。 Select to_char(level, 'FM00000000') as id from dual connect by level <= 1000 minus select id from XXXマスタ;
実際に試せる環境が手元にないけど SELECT MIN(NO) FROM ( SELECT NO FROM DUAL CONNECT BY LEVEL <= ( SELECT MAX(CD) FROM TABLE_1 ) ) Q WHERE NO >= 101 AND NOT EXISTS ( SELECT 1 FROM TABLE_1 WHERE Q.NO=TABLE_1.CD ) 一旦1からCDの最大値までの連番を生成して、その中でCDが存在していないデータの最小値を求める。 効率が悪そう。
動的SQLにするか、 SELECT A.* FROM testtable A WHERE A.testID = 123 AND (変数A = 0 or A.testName = 'aiueo'); なんてSQLにしておくとかでしょうか。
起動ユーザか環境変数の問題だと思われるので・・ （１）JP1が実行するユーザでの動作検証 （２）JP1が実行するときの環境変数 の2点を確認するとよいと思いますよ。 確認するまでもなく、接続エラーの時のエラーメッセージで判るような気もしますけどね。
#1 です。 ＞という事はPL/SQL内の静的SQLではバインド変数は使えないと言うことでしょうか？ ストアドプログラム（パッケージ/プロシージャ/ファンクション）内では動的以外には使えないと思います。 （SQL*PlusからストアドをEXECUTEする時の引数として使用する事は、もちろん可能ですが） 但し、私が例に書いた通り、無名PL/SQLブロック（DECLARE～BEGIN～END）内では静的にも使用可能です。 質問者様の試したサンプルで言えば。 CREATE OR REPLACE PROCEDURE TEST.TEST(v_Id IN VARCHAR2) IS v_name varchar2(20); BEGIN SELECT name INTO v_name FROM test WHERE id = v_Id; EXCEPTION WHEN OTHERS THEN RETURN; END; / これでコンパイルは通りますよね。（すいません、環境が無いので未検証です） 「これじゃ、v_Idはバインド変数にならないんじゃ？」と思うかもしれませんが、これバインド変数なんです。 （うーん、混乱しちゃいますかね？） SQLトレースを取るとわかるんですが、引数v_Idが '1' だろうが '2' だろうがトレースで解析されるSQLでは WHERE id = :b1 と言うバインド変数になるんですよ。 ＞このあたりが理解できていない部分です。 パフォーマンスチューニングで扱われるバインド変数と置換変数（リテラル）の差異を把握する事が、実はこの辺の理屈を理解する上での近道かもしれません。 OTNでパフォーマンス・チューニング・ガイドを落とすか、もしくはパフォチュー系の本を一冊読んでみるとよいかと思います。 もしJavaの経験がおありでしたら、"?"（プレースホルダ）を使ったSQLと、リテラル直指定の同じSQLをそれぞれ実行するJDBCプログラムを作って、SQLトレース（とtkprof）を取って較べてみると見えてくる物があると思います。 私自身、SQLトレースの中身を見るようになって、この辺の事が理解できるようになりましたから。 （SQLトレースに関しては前述のチューニング・ガイド等参照）
バージョンによって、名称が違うけど、8iだか9iの頃から機能的には用意されていますよ。 設定が面倒だけど、他社製DBMSを、DBLINKしたオラクルDBのごとく扱えます。 http://otndnld.oracle.co.jp/document/products/oracle11g/111/doc_dvd/server.111/E05709-01/installodbc.htm
下記のWordをKeyにしてGoogle先生に聞いてください。 DBMS_METADATA GET_DDL
No1のやり方で、型が合わなければ、型変換すればいいだけ。 to_dateやto_charをマニュアルで調べると、今後幸せになれると思いますよ。 同じやり方を書いても面白くないので、たとえば、これでもＯＫだと思いますよ。 where to_char(sysdate-1,'yyyymm')||'%' like S.KJN_YMD
>データベースとのセッションを切断してもサーバ上にhsodbcプロセスが解放されずに残る現象が発生しています。 というのは当然かと思います。 設定方法とかを見ていると、Listenerで定義していること等から、OracleサーバとListenerの間での接続なので、クライアントがセッションを切ろうが関係なく、 Oracleサーバが必要だと思っている限りは、クライアントがどうしようとつながっているから、 hsodbcは解放されないと思えます。 じゃあ、クライアントから接続を切る方法はないのかと調べてみました。 Oracle10gじゃないけど、11gR2では以下のような説明を見つけました。 （10gは調べてみてください。10gではまだ実装されていない機能かもしれません。） --引用-- アプリケーションで不要になった高コストの接続を切断するには、データベース・リンクを使用して確立されたリモート接続を終了することが有効です。・・・（中略）・・・ 次の文は、salesデータベース・リンクが指すリモート・データベース内のセッションを終了します。 ALTER SESSION CLOSE DATABASE LINK sales; 以上以下のサイトより。 http://docs.oracle.com/cd/E16338_01/server.112/b56301/ds_appdev002.htm
-- こういうことじゃないのかな？ select X1, min(X1) over (partition by substr(X1,1,1)) from zz where 条件
Accessとオラクルクライアント機能だけで処理可能だと思うのですが、あえて別に用意したいということですか？ もし、あえてフリーソフトを使いたいということであれば、その理由を挙げた上で質問されると、紹介できるものがあるかも知れません。
▼以下のSQLで無効化できます。 alter index ind_test invisible; alter index ind_test unusage; 有効化は以下です。 alter index ind_test rebuild; invisibleでオプティマイザから索引が見えなくなります。 unusageでDML発行時の索引の更新を抑止します。 有効化するときはテーブルと同期がとれていない状態なので 索引を再構築する必要があります。 ▼無効化している間のDMLで索引も更新されても問題ない場合はunusageのみでOKです。 alter index ind_test unusage; 有効化は以下です。 alter index ind_test usable; こちらの方が手軽ですが、大量データを入れる場合の性能改善はありません。 索引がない場合のオプティマイザの動作確認に使うくらいでしょうか。
tb_trn_aa_day_r の定義が分からないと、正しい回答は出来ないような気がします・・・ >全てNUMBER型のテーブル列で、NOT NULL制御を施しています。 とありますが、仮に tb_trn_aa_day_r が、テーブル%ROWTYPE だとしても各カラムの制約は引き継がれません。 そこを勘違いされているのかもしれません。 また、 >ちなみに、tb_trn_aa_day_r.tx_00～tx_23に「0」をセットしても とありますが、これはどのようにセットして確認したのでしょうか？ TO_NUMBER2ですが、strにどんな値が来たときにexceptionブロックに飛ぶことを期待していますか？ 空文字やNULLの場合は、exceptionは発生しないのでNULLが返りますよ。
>上記の接続方法としてどのようなものがありますでしょうか？ ・OLE DB.NET ・ODP.NET 私が使ったことがあるのは上記の2つかな。 他にも、.NET系の開発環境でもoo4oが使えるなんて話も聞いたことはありますが、やり方は知りません。 >ODBCよりも早く接続できる方法 ORACLEのバージョンが7.3以降ならODP.NETが良いかと。 他の接続と違って、DB接続時に無駄なブリッジが入らない分だけ高速化される……はず。 私はORACLE 9i/10g/11gしか使ったことが無いので、ORACLE 7世代でどうなるのかは分かりませんので、高速化する保証は出来かねますけどね。 仮に、大して変わらないとしても、.NET系の開発環境ならODP.NETを使うのが無難かと。
他の方の指摘通り、commentは予約語です。 で、予約語を項目名につけたときの指定は、""でくくればよかったはずです。 update table set "comment" = '新規' where code = '111'; で試してみてください。 ※予約語を項目名に使うことはお勧めしません。。。
>（１）インポート についてですが、 impdpを使うなら、CONTENT=DATA_ONLY DATA_OPTIONS=SKIP_CONSTRAINT_ERRORS impなら、IGNORE=Y のパラメータを設定することで、うまくいくのではないでしょうか。
こんにちわ。 > oracle 11gでは、1990年以前は、サポートしていないのでしょうか？ Oracle のDate 型の基準日はユリウス日です。 正確には憶えていませんが、紀元前4000年頃からサポートされている筈です。
聞くところが間違っています。 eventパラメータの詳細はサポートを通じてしか知り得ない情報です。 なので、サポートに聞いてください。
dda167さん 蛇足や余計なお世話などではありませんね。 質問者さんの欲しい値を取るには、 select SYS_CONTEXT ('USERENV', 'SID') from dual; こちらですね・・・ ご指摘ありがとうございました。 また、関数名について回答していませんでした。 確実に使えるかは分からないですが、DBMS_UTILITY.FORMAT_CALL_STACKの戻り値のコールスタックの内容から取得できるかもしれません。 当方の環境（10g XE）で少し試してみました。 インデントしていないので見づらいですが・・ --ストアド名を返すファンクション create or replace function get_name return varchar2 is callstack varchar2(2000); currentname varchar2(2000); begin callstack := DBMS_UTILITY.FORMAT_CALL_STACK; /* コールスタックの最初には、このファンクション自身の情報が入っているため 2つ目のストアド名を取得する */ currentname := regexp_substr(callstack, 'procedure.+$|function.+$|package.+$',1,2,'im'); return currentname; end; / --上記ファンクションを呼ぶだけのファンクション create or replace function func_a return number is begin dbms_output.put_line(get_name); return 0; end; / --プロシージャ create or replace procedure proc_a is begin dbms_output.put_line(get_name); end; / --パッケージ create or replace package pack_a is procedure proc_a; end; / create or replace package body pack_a is procedure proc_a is begin dbms_output.put_line(get_name); end; end; / --無名ブロックで上記ファンクションらを実行 set serveroutput on declare w_num number; begin w_num := func_a; --function スキーマ名.FUNC_A proc_a; --procedure スキーマ名.PROC_A pack_a.proc_a; --package body スキーマ名.PACK_A end; / set serveoutput off 無名ブロックのコード内にある、コメントの内容が出力されました。 パッケージの場合は、プロシージャ名までは取得できないようです。 参考になれば幸いです。
CACHE 5が影響しています。 User1が VALUES NEXT VALUE FOR my_seq INTO :con1hvar（1回目） をしたときに、5,10,15,20,25の５個をあらかじめ確保して、5を返します。 (START WITH 5 INCREMENT BY 5 CACHE 5なので) VALUES NEXT VALUE FOR my_seq INTO :con1hvar（2回目） でも確保された５個から次の番号を受け取り、10を返します。 User2が VALUES NEXT VALUE FOR my_seq INTO :con1hvar をしたときに、すでに確保された次の30,35,40,45,50の５個をあらかじめ確保し、30が返されます。 User3が、 SELECT NEXT VALUE FOR my_seq FROM sysibm.sysdummy1 をしたときは、 次の55がかえされるということになります。 ## 説明でお分かりかと思いますが、欠番が生じたり、 ## ややこしいことがおきたりしますので、 ## CACHEは指定するな、と私は普段言っています。 ## （個人的意見）
>MAX(日付) OVER (PARTITION BY 出発, 到着, 年齢) AS 最新, >LAG(運賃) OVER (PARTITION BY 出発, 到着, 年齢 ORDER BY 日付) AS 前日 上記の記述で大丈夫だと思います。 Good luck!
こんにちわ。 > 何かもっと有効な方法がありますか？ サーバーA とサーバB が同じOS で、サーバーA のインスタンスを停止できるのであれば、 以下の手順で可能かと 1) サーバーA のインスタンスを停止 2) データファイル, 制御ファイル, Online Redo Log 等を全てサーバーB にコピー 3) 初期化パラメータファイル, tnsnames.ora, listener.ora 等の設定ファイルを サーバーB にコピーして、ホスト名等の環境依存の部分を修正 　 ※ 制御ファイルのパスがサーバーA とサーバーB で異なる場合はここで修正 4) サーバーA のインスタンス起動 5) Windows 環境であれば、oradim でサービス作成 6) 必要であれば、orapwd でパスワードファイル作成 7) サーバーB のインスタンスをmount で起動 8) サーバーA とサーバーB のデータファイル等のパスが違っている場合は 　 alter database rename file コマンドでファイル名を修正 9) サーバーB のインスタンスオープン 要は、Cold Backup のリストア＆リカバリと同じ事です。
きっといいと思います。 唯一気にした方がいい部分としては、日付項目は明示的に日付型に 変換した上で比較してあげましょう。 個人的には必要性がない場合にFROM句内にサブクエリを書くのが 見通しが悪くなって嫌いなので SELECT 　　　A.ENAME 　　　B.FCODE 　　　C.DATE FROM　AAA A, 　　　BBB B, 　　　CCC C WHERE A.FNAME = B.FNAME AND　 B.ID　　= C.ID AND　 C.DATE >= TO_DATE('2012/10/31', 'YYYY/MM/DD')
最初のFETCHをループの外ですればいいのでは。 open cur1; fetch cur1 into rec1; if cur1%notfound then close cur1; raise NO_DATA_FOUND; end if; loop --処理 fetch cur1 into rec1; exit when cur1%notfound; end loop; close cur1;
Merge文のサンプル。 http://www.shift-the-oracle.com/sql/merge.html Ｂテーブルの項目数や属性とＡテーブルの項目数や属性に依存関係はないです。 例えば、Ｂテーブルのvarchar2に、ＡテーブルのdateからTO_CHAR()を使ってデータを格納する とかもできますし、Ａテーブルに項目がないので固定値をＢテーブルに入れることもできます。 ＡテーブルとＣテーブルを結合した結果を副問い合わせの形で指定すれば、複数のテーブルから 格納することすらできます。 ただね、利用できない条件がOracle10gではあった。 （11gの環境では試していないので大丈夫かもしれませんが） 例 MERGE INTO Out_Table USING In_Table ON ( Out_Table.Key_ID = In_Table.Key_ID) ・・・ で、In_Tableのデータが以下のような場合、 In_Tableのプライマリキー:Key_ID,UpdateDate Key_ID,UpdateDate,・・・ A,2012/1/5 B,2012/1/5 C,2012/1/5 A,2012/2/4 D,2012/2/4 ・・・ Out_TableのKey_IDにAが存在していなくて、 1回のmerge命令で同じレコードに対してInsertとUpdateが同時に行われる場合、 エラーになってました。 べたの場合より早いかどうかは、少なくとも遅くはないとはいえますが、処理によっては同じになる かもしれませんので、早いとは言い切れません。 （でも、プログラムは見やすいのは確実。） ## ANO2の人が書いているXEとは、ユーティリティ類等の一部機能がなかったと思いますが、 ## 基本的にOracleの機能が実装されたソフト。 ## 利用条件にも制約はあったと思いますが、無償。 ## サイズが大きいのでダウンロードでタイムアウトしないかどうかはわかりませんし、 ## ダウンロード元が英語サイトなので、私は、ちょっと薦めるには躊躇しますが、 ## ダウンロードして使う環境を作っておけば、いろいろ試せるので便利なことは確か。 ## 私の使っているとあるノートＰＣでも動いていたりする。。。
あなたの想いとは違うかもしれないけど -- 運賃比較 SELECT 日付, 出発, 到着, 運賃, LAG(運賃) OVER (PARTITION BY 出発, 到着 ORDER BY 日付) AS 前日 FROM 運賃テーブル; -- 運賃変更 SELECT * FROM ( SELECT 日付, 出発, 到着, 運賃, LAG(運賃) OVER (PARTITION BY 出発, 到着 ORDER BY 日付) AS 前日 FROM 運賃テーブル ) WHERE 運賃 <> 前日;
３点ほど。 １．emConfig.logのエラー内容を頂けませんでしょうか。 ２．「set ORACLE_UNQNAMEとありましたので、orclをsetしてみましたが、エラーメッセージが変わっただけで問題解決にいたりません。」とありますが、変わった後のエラーメッセージを教えてください。 ３．https:～は、VM上のWindowsのIEからやりましたよね？ すみませんが、よろしくお願いします。
TO_DATEは文字列をDATEに変換する関数。 DATEをDATEに変換してどうする？ また、大小比較するので、0時を跨ぐ場合(0時を跨ぐかどうかは、FROM>TOで判定可能)は 日付カラム >= 18:00 or 日付カラム < 02:00 にする必要あり わかりやすくすると、 (18:00 <= 日付カラム AND 日付カラム < 24:00) OR (00:00 <= 日付カラム AND 日付カラム < 02:00) だが、マイナスの時刻や24時を超えた時刻は存在しないから前述のとおり
手元にあるOracle9 , 10では別に問題ありませんでした。 Oracle7は手元に無いので何とも言えませんが、文法的には問題無いはずなので、多分大丈夫じゃないかと。
OracleのQAサイトに載ってますよ。 参考URL : http://otn.oracle.co.jp/forum/message.jspa?messageID=6006877 =====以下引用===== コールドバックアップと制御ファイル再作成で可能です。 コピー元のデータベースで alter database backup controlfile to trace; を実行して制御ファイル作成スクリプトを作成し、これで吐き出された トレースを次のように編集します。（トレースは user_dump_dest 配下に 吐き出されています） まず create controlfile 文に REUSE DATABASE "xxx" とありますので、これを SET DATABASE "newname" に変更します。また同じ行に noresetlogs が書かれて いるかと思うので、これを resetlogs に変更します。そして、REDO ログファイル、 データファイルのパスを新しいパスに変更します。また、RECOVER DATABSE 文と ALTER SYSTEM ARCHIVELOG ALL をコメントにし、最後あたりの ALTER DATABASE OPEN を ALTER DATABASE OPEN RESETLOGS に変更します。 それからデータベースのコールドバックアップをとって、データファイルと REDO ログファイルの バックアップを新しいパスに配置します。 先ほど編集した create controlfile 文を実行すれば、データベースのコピーができます。 initSID.ora と ORACLE_SID の設定をお忘れなく。 ======================
No1 , No3です。 何度もスミマセン。 >ログ出力先をオラクル外へ変更する場合、オラクルを止なくても全く問題ないでしょうでしょうか？また一般論でかまいませんが、ｔｒｃログはオラクルhome外へ出力しておくのが良いのでしょうか？メンテナンス的にも楽なんですが。。 Oracleを停止しなくても変更可能です。 詳細はOracleのマニュアルの"ALTER SYSTEM"を参照してください。 次ですが、アラートログやトレースログ等は、容量が増えていく＝ディスクを圧迫していくので、システム系以外の別なディスクに格納するのが絶対です。 でないと、システムディスクがパンクし、最悪システムダウンになりかねませんので。 また、当然ですが、そういったログの中には機密情報等が含まれる可能性がありますので、一般ユーザに教えない・見えないようにしておく事が必須です。 余談ですが、私はシステムエンジニアとして、多数の顧客のOracleDB等の管理する仕事をしています。
トランスフォーマという言葉は聞いたこと無いのですが、「自動SQLチューニング」という機能は存在します。 参考URL : http://otndnld.oracle.co.jp/document/products/oracle10g/102/doc_cd/server.102/B19207-02/sql_tune.htm >(1)変換前と変換後のＳＱＬを見る方法はありますか？ →EnterpriseManagerを使用すればGUIで簡単に見られます。 　また、コマンドラインで取得する事も可能です。 >(2)トランスフォーマを行わないようにするための、初期化パラメタなどはありますか？ →自動SQLチューニングは、「このようにしたらどうですか？」というアドバイスをOracle側が行ってくれるのであり、それを実際に受け入れるかどうかは管理者が決定します。また、自動SQLチューニング機能は動的に開始・終了が出来るので、初期化パラメータは存在しません。 まったく関係ない回答だったらスミマセン。。。
>UPDATA文を発行し、プロンプトが返ってくるが、 >これは嘘になりえるっていうことでしょうか？ 嘘ではありません。 そのセッションが存在している限り、また、そのセッションがロールバックしない限りは、そのセッション上は本当の事だからです。 トランザクションの一貫性とは、複数存在するセッションの１つ１つで、トランザクションの開始から終了までの間に実行されたDMLに対する値を保証する。という事です。 また、コミットがされていない状態で障害が起きた場合ですが、コミットされてない（トランザクションが終了していない）ので、コミット前にしか戻れません。 これは、障害が発生した瞬間にセッションが途切れてしまう（トランザクションが異常終了してしまう）為です。
--たとえば…… select No from tmp group by No having 0 < sum(case when Flg = 'A' then 1 else 0 end) and 0 = sum(case when Flg = 'B' then 1 else 0 end);
--TABLE4どぉえぇすぅかぁ（爆 set serveroutput on declare v_count number; begin for v_rec in (select id from TABLE1) loop select count(*) into v_count from TABLE4 where Id in ( select TB4_id from TABLE3 where TB2_id in ( select Id from TABLE2 where TB1_id = v_rec.id)); dbms_output.put_line(v_rec.id || ' ' || v_count); end loop; end; / TABLE3にTB3_idはないので……TB2_idですよね？ ちょっと時間がないので、PL/SQLで逃げときます。 SQLの部分を適当にいじってください。 # どなたか……SQLお願いします（笑
「FLG」が「0」か「1」だけ判断すればいいのなら SELECT CD, SUM( CASE WHEN FLG=0 THEN KINGAKU ELSE 0 END ) KINGAKU_0, SUM( CASE WHEN FLG=1 THEN KINGAKU ELSE 0 END ) KINGAKU_1 FROM テーブル名 GROUP BY CD
> どのような参考書を使えば良いですか？ 大きめの書店のデータベースのコーナーに行けば入門書がたくさん有りますから、その中から気に入ったものを選べばよいでしょう。 一つ挙げるとすれば下記の書籍がお勧めです。 http://www.amazon.co.jp/dp/4798118818/ > 独学で出来るのでしょうか？ 基本的な知識を身に付けるという点では独学で出来ると思いますよ。 ただし、何事でもそうですが、知識だけではスキルが有るとは言えませんが。 > 20代後半から勉強しても出来るようになるものでしょうか？ 十分出来ますよ。 > 基礎をマスターするのにどれくらいの時間がかかりますか？ SQL92の範囲を一通り覚えるだけであれば、数十時間も見れば十分でしょう。 (もちろん使いこなすには、はるかに時間が掛かるでしょう) > このスキルを使って就職できるようになるまでどれくらい時間がかかりますか？ うーん、独学で勉強したというだけでは採用の決め手になる可能性は少ないでしょうね。業務実績が無いとさほど評価はされないでしょう。まあ、難関とされている資格を持っていれば少しは興味を持ってもらえるかも知れません。 就職については、学んだスキルが一助となるかも知れない、程度に考えておいたほうが良いでしょう。 > 資格などはありますか？ いろいろ有ります。各DBベンダーがそれぞれの製品向けの技術認定試験を行っているケースも多いです。 DB関係の資格の例を挙げてみます。 「データベーススペシャリスト試験」 http://www.jitec.ipa.go.jp/1_11seido/db.html 「オラクルマスター」 http://www.oracle.com/jp/education/certification/index-172250-ja.html
こんにちわ。 http://docs.oracle.com/cd/E16338_01/server.112/b56318/e53000.htm#sthref13657 上記のメッセージマニュアルによると、詳細はAlert Log, Trace Log を確認するように 記載されています。 ORA-53203 発生時のAlert Log, Trace Log には何が記録されていますか？ 52000番台って、Oracle Multimedia 関連のエラーのようですので、Oracle Multimedia を 使っている部分を確認してみてはどうでしょう？
>どちらのテーブルを左側 FROMの次の最初のテーブルが左側です。 尚、後で解析しやすいように、なるべくLEFT JOINを使い、どうしてもRIGHT　JIONが必要な場合のみRIGHT　JIONを使う事を推奨します。
>※Col1に重複がある場合、重複結果の1行目のレコードをData2に入れる の「1行目」の定義がハッキリ書かれていませんが、 例を見ると一番小さな値ということでいいのでしょうか。 それなら単純に、 UPDATE Table2 T2 SET Data2 = (SELECT MIN(T1.Col2) FROM Table1 T1 WHERE T1.Col1 = T2.Data1); でいいのではないでしょうか。 ただ、このSQLだとTable1にTable2のData1と一致するデータがない場合は NULLに更新されてしまうので気を付けてください。 もし、そういうデータが存在するのであれば UPDATE文のWHERE句にEXISTS条件を書くようにしてください。
--綺麗かどうかはともかく、かなり無理やり SELECT 日付, SUM(金額) AS 金額 FROM ( SELECT 日付, 金額, ROW_NUMBER() OVER (PARTITION BY 日付 ORDER BY 金額) AS id FROM 出納帳 ) GROUP BY 日付, CASE WHEN 金額 < 0 THEN 0 ELSE id END;
例１）単純に縦に出力したいときに使う。 select 課名,'予算' as 予実,nvl(予算金額,0) from 課マスタ left outer join 予算マスタ on 課マスタ.課コード = 予算マスタ.課コード union select 課名,'実績' as 予実,nvl(実績金額,0) from 課マスタ left outer join 実績マスタ on 課マスタ.課コード = 予算マスタ.課コード order by 課名,予実 とすると、 1課 予算 10000 1課 実績 8500 2課 予算 20000 2課 実績 0 ・・・ とでる。 例２）例１と違ってどちらか一方にしかないデータをどちらも出したいときに使う。 select 課名,sum(予算金額), sum(実績金額) from ( select 課名,予算金額 as 予算金額,0 as 実績金額 from 予算マスタ union select 課名,0 as 予算金額,実績金額 as 実績金額 from 実績マスタ ) group by 課名 order by 課名 とすると 1課 10000 8500 2課 20000 0　　　←実績マスタなし 3課 0 8500　←予算マスタなし とでる。 例３）今年新規（過去３年間取引のなかった取引先も新規として扱う）で獲得した取引先の数 select count(*) from ( select distinct 取引先コード from 売上マスタ where 年度 = 2012 minus select distinct 取引先コード from 売上マスタ where 年度 = 2011 minus select distinct 取引先コード from 売上マスタ where 年度 = 2010 minus select distinct 取引先コード from 売上マスタ where 年度 = 2009 ) 例４）（これはどっちかというとシステム保守要件ですが。） 何らかの異常があったときに不整合データのチェックに使う select * from Ａマスタ_バックアップ minus select * from Ａマスタ Ａマスタ_バックアップにあってＡマスタにないものが出てくるので、 これらを調べたりする。 select * from Ａマスタ minus select * from Ａマスタ_バックアップ 逆のパターンのデータ。これも調べる。 とか。 例５）Orの代わりにunionを使うと便利なこともたまにある。 select * from table1 where Key1 between 1 and 3 union select * from table1 where Key1 between 6 and 7 union select * from table1 where Key1 between 12 and 18 select * from table1 where Key1 between 1 and 3 or Key1 between 6 and 7 or Key1 between 12 and 18 と書けばしまいなのだが、orを使うとインデックスを使ってくれないことがあるので、 orを使わないselectをunionしたほうが早いことがたまにある。 ★table1が、5000万件あるときなどあくまで例外的な使い方です。 ！！！普通は、orを使ったほうがいいです！！！ ## SQLはこんな感じだったと思うというレベルで書いています。（うまく動かないかも） ## とりあえず、過去に使った例ですぐに思いついたパターンを挙げてみました。
＞残念ながらaspnet_wp.exeというプロセスはタスクマネージャに ＞存在しておりませんでした。 すいません、IIS v6だとワーカープロセスはw3wp.exeみたいです。
こんにちわ。 > 元々キャッシュに関してはデフォルトのまま（20）で試してますが、欠番は確認できていません。 > 以前のoracleのバージョンだと欠番されていたが、11gだと起きないものなのでしょうか？ Sequence から採番した時に、SGA (Shared Pool) にCache されるので、 事前に「select seq1.nextval from dual;」とか行って、アクセスしておかないと Cache されません。 11g (11.2.0.3) で最近確認しましたが、Shared Pool をFlush しただけで普通に 欠番が発生していました。 書き忘れましたが、RAC 環境だったりすると、1Node を再起動しても、もう1Node が 情報を持ってたりするらしく、欠番は発生しませんでした。
where句は group by句の前段階で行単位に対して実行されるフィルタ処理で， having句は group by句の後段階でグループ化単位に対して実行されるフィルタ処理。 -------- (C) SELECT cat_id, MAX(price) FROM itemlist WHERE cat_id = 20 GROUP BY cat_id は，次のような流れになります。 ↓ □where …cat_id = 20 の行だけを次段階へ送る ↓ □group by …cat_idでグループ化 （今回は，全行がcat_id=20なので１グループになります） ↓ □having …（無し） ↓ □select …グループ単位でmax(price)を表示 -------- > (B) SELECT cat_id, MAX(price) FROM itemlist > HAVING cat_id = 20 GROUP BY cat_id は間違いです。group by句とhaving句は次の順に指定しなければなりません。 SELECT cat_id, MAX(price) FROM itemlist GROUP BY cat_id HAVING cat_id = 20 上記の修正後は，次のような流れになります。 ↓ □where …（無し） ↓ □group by …cat_idでグループ化（複数グループになります） ↓ □having …cat_id=20のグループだけを次段階へ送る ↓ □select …グループ単位でmax(price)を表示 -------- > WHERE のターゲットがグループ関数で得られた値 > で条件指定するわけではないので文法的にも正しく > おなじ結果が得られる > こういう解釈でよろしいのでしょうか？ はい，その解釈でよいでしょう。
Oracleのバージョンが書いていないのですが、10g以降であればmodel句を使って、こんな感じでどうでしょうか。 SDATE、EDATEのデータ型が不明なのでDate型と言う前提です。 --この部分はテーブルを作るのが面倒なので疑似データを用意しているだけです with tableA as ( select 1 KEY1, 1 KEY2, 1 KEY3, date '2012-07-12' SDATE, date '2012-09-11' EDATE from DUAL union all select 2 KEY1, 2 KEY2, 2 KEY3, date '2012-06-01' SDATE, date '2012-07-31' EDATE from DUAL ) --実際のSQLはここから select key1,key2,key3,to_char(dt, 'yyyy/mm/dd') dt from tableA model partition by (KEY1,KEY2,KEY3) dimension by (0 as IND) measures(trunc(SDATE, 'mm') as DT, months_between(trunc(EDATE,'mm'), trunc(SDATE,'mm')) as TERM) rules(DT[for IND from 0 to TERM[0] increment 1] = add_months(DT[0], cv(IND)));
TO_DSINTERVALかNUMTODSINTERVALを使えばいいと思うのだけど。 TO_DSINTERVALなら vAddTimeC varchar2(20); vAddTimeC := '0 0:0:0.5'; targetTime := targetTime + TO_DSINTERVAL(vAddTimeC); NUMTODSINTERVALが使えるなら（Oracle10gで使えたかどうか未確認。） vAddTime := 0.5; targetTime := targetTime + NUMTODSINTERVAL(vAddTime, 'SECOND') ; Varchar2でもNumberからTO_CHAR()で変換すればしまいの話なので、 どちらを使っても、間隔を可変にするのも容易なはず。
修正も含みます SELECT tbl1.sya_cd as 社員コード, tbl1.sya_nm as 社員名, SUM(IF(tbl1.status='出勤' OR tbl1.status='遅刻'), 1, 0) as 出勤, SUM(IF(tbl1.status='欠勤'), 1, 0) as 欠勤, SUM(IF(tbl1.status='遅刻'), 1, 0) as 遅刻, SUM(tbl1.hours) as 時間, SUM(tbl1.hours) * tbl2.pay as 給与, (SELECT tax FROM tbl3 WHERE SUM(tbl1.hours) * tbl2.pay BETWEEN tbl3.pay_from AND tbl3.pay_to) as 税 from tbl1 INNER JOIN tbl2 ON tbl2.sya_cd=tbl1.sya_cd WHERE tbl2.jig_cd=1 AND DATE_FORMAT(tbl1.date, '%Y%m')='201208' GROUP BY DATE_FORMAT(tbl1.date, '%Y%m')
＃１です。 うーん、不思議ですね。主キーはなんでしょう？ 検証できる環境が手元にないのですが、やはり＃１の最後に書いたように 　MINUS前後を別SQLにして、キー項目だけで考えてみては？ SUMをしないでT1.COL5を素直にSELECTさせてみるのが良いと思います。 実は何か別テーブルと結合してるとか？
ANo.1です。 説明の内容に誤解をまねく内容がありましたので訂正します。 >質問に書かれた【Ａテーブル】の中身のように、 というのはちょっと違っていて、 start with 品目番号 = 'B' となっているので、 【Ａテーブル】 品目番号,親品目番号 B,A B,C の２レコードを拾ってきてそれぞれについて正展開しています。 だから、 start with 親品目番号 = 'B' としたら、 B1,B の１個しか拾ってこないから目的が達成できたと思うけど・・・ （未確認。ひょっとしたらエラーになるかもしれません。 　申し訳ないですが今手持ちの試せる環境がないので。）
おそらくですが、 １０行目のカンマが余分なんだと思います。 CONSTRAINT cons_f1 FOREIGN KEY(Udp_dt) REFERENCES Genereation_MASTER(Udp_dt) この行は一連の句のはずです。 あと１１行目のカンマも最終行なのでいらないはずです。
OpenJDKでインストールしようとすると文字化けを起こすことがあります。 OracleのJDKをいれてみてはどうでしょう。
>これは、plsqlの記述内に加えるのでしょうか 同じplsql内では同じユーザーですので、GRANT権限が無いのが普通ですので、GRAN権限の有るユーザーで接続してGRANTします。 ＞それとも一度これを実行（コンパイル！？）すれば良いのでしょうか。 DROP　TABLEしない限り、一回実行しておけば良いので、通常はCREATE　TABLE直後にGRANTを実行しておきます。
可読性のために、INTERSECTやMINUSで説明しましたが、OUTER JOINやEXISTSでも構いません。 要するに、前回の回答の1,2,3のようにデータを分けて、FULL OUTER JOINでまとめてもよいし、UNIONでまとめてもよいでしょう。 1,2,3の条件のデータはサブクエリーで行うか、WITH句で先頭に書く、ビューで定義しておくかなどもパフォーマスとSQLの複雑さとのバランスでどの方法を使うかでしょうね。
いえ、違いますね。 分までであれば、本日も分までの形にして比較しないといけません。 そしてAの日付データは必ず書式通りに変換できることが前提なのは前回と同じです。 （秒まで入っているような場合はエラーになるので右辺と同じように切り捨て処理が必要になります。） また、書いたコードがあっているかどうかはデータを用意して動作の結果を確認しましょう。 where to_date(A,'yyyy/mm/dd hh24:mi') >= trunc(sysdate- 7,'MI')
結合したテーブル間でカラム名が重複しているかと思いますので、提示のSQLの場合のテーブルの定義を書かないとなんともだと思います。 あと、「select as.xx1,asxx2 」これの「asxx2 」はタイポですよね？
こんにちわ。 > 動的SQLでは無い方法でそのような事が可能でしょうか？ decode を使えば可能かもです。 例えば、v1, v2, v3 と言う数値型変数にそれぞれ列B, 列C, 列Dに 対する検索値が格納されていて、値が-1 だった場合に、検索条件を 無効化する場合、以下のようなSQL で実現できます。 select * from tablea 　where a=1 and b=decode(v1, -1, b, v1) and 　　c=decode(v2, -1, c, v2) and 　　d=decode(v3, -1, d, v3); こうすると、例えばv1変数に-1 が設定されている時の検索条件は 「b=b」となり常に真となるので、実質検索条件を指定していない 場合と同じ事になります。
(3) はい，version名です。11gでよいでしょう。 (1) Bが先でAが後でもかまわないでしょう。 ただおそらくほぼすべての受験者が， 基本的な内容であるAのオンライン試験（13,600円＋税）を先に合格した後， Bの会場試験（21,200円＋税）を受験しているはずです。 (2) 1Z0-017（ 90分，40問，合格ライン70%）の出題の方が市販問題集の内容に似ているという口コミもありますけれど， 新刊の市販問題集はほとんど1Z0-051（120分，55問，合格ライン60%）対応をうたっているんじゃないでしょうか。 1Z0-051の受験でいいんじゃないかと思いますけれど。 (5) Amazon.co.jpのカスタマーレビューを参考にしてください。 (4) 転職でしたら，ペーパードライバーじゃダメでしょう。 実務経験はなくても，実際にOracleDBを操作できる実機経験をアピールできないと評価されないと思います。実機でOracleDBを扱うことができるなら，Bronzeでも評価されるんじゃないですか。 Oracle 11gのトライアル版を収録した参考書も出版されていますし， http://www.amazon.co.jp/dp/4797359293/ 無償版の XE(Express Edition) を試してみてもよいでしょう。 http://www.oracle.com/technetwork/database/express-edition/overview/index.html
こんにちわ。 > 「ORA-12514: TNS: リスナーは接続記述子でリクエストされた > サービスを現在認識していません」 > どのようにすれば復旧・接続できるようになるのでしょうか？ Server 側のListener/Instance とClient 側の設定が合っていない 可能性が高いです。 恐らく以前は接続できていたと思うのですが、その時から サーバのホスト名, IP Address 等、network の構成は変更しました でしょうか？ 以下の情報を確認して見て下さい。 ※ サーバ側 1) lsnrctl status <Listener 名> の結果 2) service_names, local_listener, instance_name, db_name, db_domain 初期化パラメータの設定内容 3) listener.ora, sqlnet.ora の内容 4) /etc/hosts の内容 ※ クライアント側 1) sqlnet.ora, tnsnames.ora の内容 2) 接続失敗している接続文字列の内容 3) /etc/hosts の内容
効率的なSELECT文を書くコツは、 SELECT句に必要のないテーブルはFROM句に書かない、 です。 最初の例は、TABLE1はSELECT句にありますが、TABLE2は無いですよね？ この場合、TABLE1のみのSELECT句・FROM句を書いて、 WHERE句にTABLE2を書いたほうが良いです。 WHERE句に別のテーブルを「引っ掛けたい」場合は、EXISTSやINを利用してください。 一般的にはEXISTSの方が早いです。 二番目の例は。そもそも、TABLE1,2,3がSELECT句にあるので「変換」は出来ませんし そもそも、EXISTSとDISTINCTは変換可能な関係性にありません。 ところで、この外部結合は古い（確かOracle方言？）書き方です。 SELECT DISTINCT a.ID1,a.NAME1,b.ID2,b.NAME2,c.ID3,c.NAME3 　　　FROM TABLE1 a 　LEFT OUTER JOIN TABLE2 b ON a.ID1 = b.ID1 　LEFT OUTER JOIN TABLE3 c ON a.ID1 = c.ID1 がお勧めです。
こんにちわ。 > 桁数を増やすとか、・・・ v$sysstat をSelect する前に、以下の何れかを実行して下さい。 SQL> col value format 999999999999999 又は、 SQL> set numwidth 15
以下のコマンドを実行すれば確認できます。 "$ORACLE_HOME/OPatch/opatch" lsinvetory
> この時、実行計画が > HASH JOIN RIGHT OUTER > TABLE ACCESS FULL TABLE-B > > のように出ましたが、どのように解釈すれば良いのでしょう？ AAとBBをハッシュ外部結合した。 > TABLE-Bは件数が少ないのでACCESS FULLでも問題ないでしょうか？ たかが30件ですからね。。 > たとえば、この場合のより適切な実行計画ってありますか？ 「*」の部分が本当に「*」で、AAの件数（条件色々で絞り込んだ結果）が 極めて大きいなら、他の実行計画は考えにくいです。 # TABLE-Aの件数は非常に多く（例100万)、条件は複雑です。 従って、この部分をなるべく高速に返せるようにすることが重要です。
こんにちわ。 > 何回のFullScanの結果として読み込んだ行数が > 「table scan rows gotten 151275758」で、 > Full Scanの総数 ＝ table scans (short tables) + > table scans (long tabels)と考えて良いのでしょうか？ Oracle のマニュアル (9.2 リファレンス) を見るとその解釈で良さそうです。 以下のURL で、9.2 リファレンスが参照できます。 http://otndnld.oracle.co.jp/document/oracle9i/920/generic/server/J06256-02.pdf
こんにちわ > そのSQLでどの程度PGAメモリを消費するか・・・ http://docs.oracle.com/cd/E16338_01/server.112/b56301/memory004.htm#BGBICAGE 上記、管理者ガイド (11.2) のメモリ管理に以下のように記載されています。 > PGAメモリーの使用統計を提供する動的なパフォーマンス・ビューが > 用意されています。これらの統計のほとんどは、PGA_AGGREGATE_TARGETが > 設定されると使用可能になります。 > 作業領域メモリーの割当ておよび使用に関する統計は、次の動的 > パフォーマンス・ビューで表示できます。 > V$SYSSTAT > V$SESSTAT > V$PGASTAT > V$SQL_WORKAREA > V$SQL_WORKAREA_ACTIVE > V$PROCESSビューの次の3つの列では、Oracle Databaseプロセスによって > 割り当てられ使用されているPGAメモリーがレポートされます。 > PGA_USED_MEM > PGA_ALLOCATED_MEM > PGA_MAX_MEM SQL と紐付けるなら、V$SQL_WORKAREA かV$SQL_WORKAREA_ACTIVE を使用 する事となります。 ※ V$SQL_WORKAREA_ACTIVE の場合、現在アクティブなものしか出力 　 されませんが。 現在のPGA の使用量であれば、V$PROCESS かV$SESSTAT を集計するのが 簡単だと思います。 ※ V$SESSTAT で、統計名 "session pga memory" と "session pga memory max" 　 でセッション毎のPGA メモリ量が確認できます。 　 こちらは、PGA_AGGREGATE_TARGET とは関係なく取得できます。 > PGAメモリを消費しやすいSQLとは・・・ http://docs.oracle.com/cd/E16338_01/server.112/b56312/memory.htm#i49320 上記チューニングガイドには、以下のように記載されています。 > 複雑な問合せ(たとえば、意思決定支援の問合せ)の場合、ランタイム領域の > 大部分が、次のようなメモリー集約型演算子で割り当てられた作業領域に > 使用されます。 > ・ソート・ベース演算子(たとえば、ORDER BY、GROUP BY、ROLLUP > およびウィンドウ・ファンクション) > ・ハッシュ結合 > ・ビットマップ・マージ > ・ビットマップ作成 > ・一括ロード操作で使用される書込みバッファ それと、In-Memory Parallel Query を使っていなければ Parallel Query の場合もPGA に直接読込みます。
OEMは恐らくAWRという機能を利用して負荷の高いSQLの情報を出力しているのでしょう。 AWRは負荷が高いSQLの情報のみを取得しているようなので、負荷が少ないSQLの実行計画を 見るにはSQLトレースを取得するしかないように思います。 SQLトレースは非常に負荷がかかる処理なので、AWRで負荷少ないSQLの情報まで取得すると 普通にシステムが動かなくなってしまいますからね。。
ん？ > CREATE OR REPLACE PROCEDURE A.P930 > ( > varCD IN VARCHAR2, > varDate IN VARCHAR2 > ) は procedure (function じゃない)だし、out の引数もないから、 > Set myRs = .Execute ではなにもかえってこないんではないですか?? function の戻り値を ADO で得るためには、なんかくふうが要るようだ。 http://homepage2.nifty.com/sak/w_sak3/doc/sysbrd/as_s04.htm out で戻すなら、 http://www.progress-japan.co.jp/support/SupportLink/faq/technical/ProgrammingTips/programming/ ADODB.Command.Execute の戻り値は Command が SQL であるときのレコードセットじゃないかな?? ADOのしがらみがめんどうならば、ストアードで、ワークテーブルに書き込んで、 execute の戻り値をとらずに、ワークテーブルを直接見に行くかしたらいいんじゃないですかね? 　 　 　
SELECT TB1.name FROM TB1 INNER JOIN TB2 ON TB2.id=TB1.id INNER JOIN TB3 ON TB3.id=TB1.id WHERE TB2.keyno=100 AND TB3.data LIKE '%,0.1,%' でどうでしょうか。
失礼しました、「T_在庫日次」のテーブル名の右です。（質問の１行目が２行で表示されていたので２行目のと書いてしまいました）
こんにちわ。 > 階層化が無い分、速いのでしょうか？ この程度であれば、あまり違いは無いと思います。 違うのは、実行計画をたてるとこだけですし。
こんにちわ。 > パッケージ、パッケージボディ、ファンクション、プロシージャーに関して > 全て取得する方法をご教授おねがいします。 取出したいオブジェクト・タイプによって、object_type (第1パラメータ) に以下の値を指定してGET_DDL をCALL すれば良いだけです。 Package (仕様部) : 'PACKAGE_SPEC' Package Body : 'PACLAGE_BODY' Function : 'FUNCTION' Procedure : 'ROCEDURE' 後は、user_objects と組み合わせてやればOk です。 GET_DDL のschema (第3パラメータ) を省略すると現行ユーザの オブジェクトが対象になります。dba_objects と組み合わせる場合は owner を指定し下さい。 詳細はマニュアルで確認して下さい。 以下のURL からDBMS_METADATA のマニュアルを確認できます。 http://docs.oracle.com/cd/E16338_01/appdev.112/b56262/d_metada.htm#i1015856
ちょっと大変ですが。。。 ＜TABLE顧客＞ CREATE TABLE RMS01.AA_KOKYAKU ( KOKYAKU_ID NUMBER(10,0) NOT NULL, KOKYAKU_NAME_KANA VARCHAR2(20 CHAR) , KOKYAKU_NAME VARCHAR2(50 CHAR) , KOKYAKU_ADD VARCHAR2(100 CHAR) , CONSTRAINT PK_AA_KOKYAKU PRIMARY KEY (KOKYAKU_ID) USING INDEX; ＜TABLE顧客データ＞ 1000000アオキAOKI神奈川県横浜市都筑区１－１－１ 1000001オリヒカORIHICA神奈川県横浜市都筑区１－１－２ ＜TABLE受付＞ CREATE TABLE RMS01.AA_UKETUKE ( KOKYAKU_ID NUMBER(10,0) NOT NULL, UKETUKE_DATE DATE NOT NULL, UKETUKE_TIME VARCHAR2(8 CHAR) NOT NULL, UKETUKE_NAIYO VARCHAR2(100 CHAR) , CONSTRAINT AA_UKETUKE PRIMARY KEY (KOKYAKU_ID, UKETUKE_DATE, UKETUKE_TIME) USING INDEX; ＜TABLE受付データ＞ 10000002012/05/15　09:00:00 訪問１ 10000002012/05/14　09:00:00 訪問２ 10000012012/05/13　08:00:00 訪問３ 10000002012/05/10　09:00:00 訪問４ 10000012012/05/10　09:00:00 訪問５ 10000002012/05/01　09:00:00 訪問６ 10000012012/05/01　09:00:00 訪問７ 10000012012/04/30　09:00:00 訪問８ の場合で。。 ＜VIEW顧客＞の作成(顧客ごとで日付のデータ) CREATE OR REPLACE VIEW AA_KOKYAKU_V (UKETUKE_DATE,UKETUKE_TIME,KOKYAKU_ID,KOKYAKU_NAME_KANA,KOKYAKU_NAME, KOKYAKU_ADD,UKETUKE_NAIYO) AS SELECT AAU.UKETUKE_DATE, AAU.UKETUKE_TIME, AAK.KOKYAKU_ID, AAK.KOKYAKU_NAME_KANA, AAK.KOKYAKU_NAME, AAK.KOKYAKU_ADD, AAU.UKETUKE_NAIYO FROM AA_KOKYAKU AAK /* 顧客マスタ */ ,AA_UKETUKE AAU /* 受付 */ where AAK.KOKYAKU_ID = AAU.KOKYAKU_ID order by AAK.KOKYAKU_ID,AAU.UKETUKE_DATE desc,AAU.UKETUKE_TIME desc / ＜VIEW顧客＞のデータ 2012/05/1509:00:001000000アオキAOKI神奈川県横浜市都筑区１－１－１訪問１ 2012/05/1409:00:001000000アオキAOKI神奈川県横浜市都筑区１－１－１訪問２ 2012/05/1009:00:001000000アオキAOKI神奈川県横浜市都筑区１－１－１訪問４ 2012/05/0109:00:001000000アオキAOKI神奈川県横浜市都筑区１－１－１訪問６ 2012/05/1308:00:001000001オリヒカORIHICA神奈川県横浜市都筑区１－１－２訪問３ 2012/05/1009:00:001000001オリヒカORIHICA神奈川県横浜市都筑区１－１－２訪問５ 2012/05/0109:00:001000001オリヒカORIHICA神奈川県横浜市都筑区１－１－２訪問７ 2012/04/3009:00:001000001オリヒカORIHICA神奈川県横浜市都筑区１－１－２訪問８ ＜VIEW日付１＞（最新以外のデータ） CREATE OR REPLACE VIEW AA_DATE_V01 (UKETUKE_DATE,KOKYAKU_ID) AS select UKETUKE_DATE, KOKYAKU_ID from AA_KOKYAKU_V minus (select max(UKETUKE_DATE), KOKYAKU_ID from AA_KOKYAKU_V group by KOKYAKU_ID) order by KOKYAKU_ID, UKETUKE_DATE desc / ＜VIEW日付１＞（最新以外のデータ） 2012/05/141000000 2012/05/101000000 2012/05/011000000 2012/05/101000001 2012/05/011000001 2012/04/301000001 ＜VIEW日付２＞（前回受付日以外のデータ） CREATE OR REPLACE VIEW AA_DATE_V02 (UKETUKE_DATE,KOKYAKU_ID) AS select UKETUKE_DATE, KOKYAKU_ID from AA_DATE_V01 minus (select max(UKETUKE_DATE), KOKYAKU_ID from AA_DATE_V01 group by KOKYAKU_ID) order by KOKYAKU_ID, UKETUKE_DATE desc / ＜VIEW日付２＞（前回受付日以外のデータ） 2012/05/101000000 2012/05/011000000 2012/05/011000001 2012/04/301000001 ＜最新の日付、前回の受付日、前々回の受付日の取得ルーチン＞ CREATE OR REPLACE FUNCTION AA_GET_DATE (I_ID IN NUMBER, I_NO IN NUMBER) RETURN DATE IS -- -- I_NO = 1 (最新の受付日) -- I_NO = 2 (前回受付日) -- I_NO = 3 (前々回受付日) L_date DATE; L_id NUMBER; BEGIN -- if I_NO = 1 then select max(UKETUKE_DATE), KOKYAKU_ID into L_date, L_id from AA_KOKYAKU_V where KOKYAKU_ID = I_id group by KOKYAKU_ID; elsif I_NO = 2 then select max(UKETUKE_DATE), KOKYAKU_ID into L_date, L_id from AA_DATE_V01 where KOKYAKU_ID = I_id group by KOKYAKU_ID; elsif I_NO = 3 then select max(UKETUKE_DATE), KOKYAKU_ID into L_date, L_id from AA_DATE_V02 where KOKYAKU_ID = I_id group by KOKYAKU_ID; end if; RETURN L_date; EXCEPTION when OTHERS then return NULL; END AA_GET_DATE; / 回答は２回に分けます
対応OS調べればわかることでは？ https://blogs.oracle.com/oracle4engineer/entry/oracle_10gr2windows_2008r2windows_7
最初は、なんでもいいのではないでしょうか？ 本屋で立ち読みして、自分が理解できる 解りやすいって思ったもので！ 本格的に勉強するんでした、お金はかかりますけど それ相応のＳＰＥＣのマシンとＯＲＡＣＬＥの正式 ユーザーとなりマニュアルを取りそろえることに なりますね！ ちなみに本家マニュアルって、本にして厚さが ２Ｍぐらいあったような気がした。 最近はＰＤＦ化になったかな？？ 何にしてもプロフェッショナルになろうとしたら 何年もかかると思いますけど！ 普段の積み重ねが大事ですね！
こんにちわ。 Create DDL については、dbms_metadata を使うと簡単に取得できます。 以下のようにすると、HOGEHOGE が所有者になっているView のCreate DDL を纏めて取得する事ができます。 後は、出力されたSQL をCopy&Paste すればOk です。 詳細は、PL/SQL Package Reference を参照して下さい。 sqlplus system/manager SQL> set pages 10000 SQL> set lines 200 SQL> set long 999999 SQL> set longchunk 999999 SQL> col sql_txt format a200 SQL> exec DBMS_METADATA.SET_FILTER(DBMS_METADATA.SESSION_TRANSFORM, SQLTERMINATOR, true); SQL> select DBMS_METADATA.GET_DDL('VIEW', view_name, owner) as sql_txt from dba_views where owner = 'HOGEHOGE'; 2 については、DB Link を作って、 Create table <Tab名> as select * from <Tab名>@dblink where rownum <= 1000 又は、Insert into <Tab名> select * from <Tab名>@dblink where rownum <= 1000 で最大1000件移行できます。 但し、LONG データ型を含んでいるテーブルについては、使用できません。 マスキングについては、Oracle Masking Pack なる製品がありますが、 有償だし、事前にマスキングパターンを登録しておくものなので お探しの者ではないと思います。 https://blogs.oracle.com/oracle4engineer/entry/post_57 データのカーディナリティ等を無視して、単純にランダムな数値/文字列 が欲しいだけであれば、dbms_random Package が使えます。 ダミーデータを大量に登録する場合は、私も良く使います。
> １．検索条件が複数ある場合、もっとも絞れる物から検索するのが早いのでしょうか？ 記述の順序には関係ありません。どれか一項目に絞るなら「X」に索引を貼るのが有効です。 > ２．文字列で検索する場合、以下は同じ結果でしょうか。そしてパターン２の方が早いでしょうか そもそも「X <> 'Z'」と「X > 'Z' and X < 'Z'」は同一条件ではありません。後者は常にFALSEです。 > ３．条件式にTO_CHARが入った場合、indexカラムの場合、遅くなるでしょうか？ 一般的に関数を用いた項目については索引を使用しません。 しかし、 SELECT * from X,Y where TO_CHAR(X.DATE,'YYYYMM') = Y.DATE2(+) とは SELECT * FROM X LEFT JOIN Y ON TO_CHAR(X.DATE,'YYYYMM') = Y.DATE2 の意味ですから、X側のレコードは索引の有無に限らず全件アクセスされます。 逆にYのDATE2に索引があれば高速化できる余地があります。
こんにちわ。 > SQL-PLUSも動くようになりました。 > しかし、PHPとの連動は未だに出来ません。 SQL*Plus が動いているなら、Oracle Client の設定は大丈夫な筈です。 恐らくは、PHP の設定に漏れがある可能性が高いです。 Oracle のバージョン, PHP の設定手順も分からないので何とも 言えませんが、この変が参考になるかと思います。 http://board.phpbuilder.com/board/showthread.php?t=10373067
connect_by_root演算子が使えるのでは？ （例） select connect_by_root ename as rootname from emp where ename = 'SCOTT' start with mgr is null connect by prior empno = mgr ; 詳しくはgoogle先生に聞いてください。
確証はありませんが、特殊記号などを含む名前には 引用符とか、カッコなどで囲んで、予約語や特定の 機能を示すものではないことを知らせます。 よって、SELECT "番号","メーカー名"・・・ とすべき ではないでしょうか。 PostgreSQLでは英大文字でも引用符が要ります。
こんにちわ。 > 名前解決がうまくいってない気がしますが、どこを修正すれば良いでしょうか、、、 TNS_ADMIN 環境変数に、tnsnames.ora が置いてあるフォルダを指定してみては いかがでしょう？
「Application Expressを用いて作成したユーザでSqlPlusからログインできない」 ということなのでしたら、作成したユーザーにconnect権限を持たせてありますか？
こんにちわ。 > SQL*PLUSで CONNECT　AA/AA＠ORCL > とやっても、ORA-12154エラーがでてしまうのですが・・・。 そうすると、SQL*Plus がtnsnames.ora をきちんとみつけられて いないようですね。 tnsping ORCL を実行して見てください。 --> tnsnames.ora をどこから探しているか分かると思います。 TNS_ADMIN 環境変数にtnsnames.ora が置いてあるディレクトリを 指定してから再度確認して見てください。
こんにちわ。 > 今までは他のWindows7のＰＣ複数にインストールして、 > 正常に動いているので大丈夫かと思ったのですが、 > なんかしらの支障があるのでしょうか？ 正式にWIndows7 に対応したのが、Oracle10.2.0.5 と言う事になります。 ですので、10.2.0.4 以下のSoftware をWindows7 で使用した場合、 正常に動作しない可能性があります。 US OTN に行くと、Windows7 用のOracle10.2.0.3/Oracle10.2.0.4 が公開 されていますが、Windows7 で使う場合にはPSR 10.2.0.5 以上をInstall するように記載があります。 http://www.oracle.com/technetwork/database/enterprise-edition/downloads/index.html
RAID1+0（ミラーリング＋ストライピング）でも、構成が1つならパーティションを分けても同一のRAIDにアクセスに行くので物理アクセスは離しません。 パフォーマンス的にはパーティションを分ける意味はありません。
こんにちわ。 > データファイルをどのように纏めるかについて、ご教授ねがいます。 データファイルを配置する物理Disk が分かれていないのであれば、 データファイルを分割する意味は余り無いです。 領域管理を簡略化するため、テーブルと索引を配置する表領域を 分ける事は良くありますが、データファイルを配置する物理Disk が 分かれていないのであれば、パフォーマンス上は表領域/データファイル を分けるメリットは余りありません。 物理Disk が複数ある場合は、パフォーマンスとDisk 障害時の リカバリの事を考えて物理配置を決定します。 > レコード数が単調に増加する場合、 データファイルを拡張するのはコストが高いので、事前にある程度 大きなデータファイルを割当てておく事が多いです。 定期的に表領域の空き容量を監視して、空き容量が少なくなったら データファイルを追加する運用にしている場合が多いです。 データファイルのサイズも、あまりバラバラにしない方が管理は 楽かと思います。
文字コードには古い歴史がありますので、まだ過渡期ですが、最終的にはUNICODE（プログラム内部では１６ビットの純正のUNICODE、インターネット等はUNICODEを１バイト変換したUTF-8）に集約されて行くと考えて下さい。 シフトJISの場合は日本語しか対応できませんが、UNICODEであれば世界中の文字を混在させる事ができます。OracleはNCHARも１バイト単位で記憶しているようですが、SQL　Server等のNCHARは２バイト（１６ビット）のUNICODEで記憶しているようです、他のデータベースはUTF-8を使用している物もありますが、こちらは、日本語がほぼ３バイトで表現されるので、DB2等は文字数に影響します。尚、PostgreSQL等はUNICODE変換時の文字数で計算してUTF-8で登録出来るようです。（NCHARが無いRDBMSも有ります） どちらにしても、８ビットのACSIIコードのみ登録する場合はCHARで、以外はNCHARとされると良いです。
>> SQL/PLUS から実行しても、 ODP.NET 経由で実施しても同様の結果になります。 SQL/PLUSがハングするのでしたら、少なくともORACLEのタイムアウトが検知されていないので、別の原因だと思います。 >> 仮に、通信速度不足が原因とした場合、そのタイムアウトまでの時間を伸ばすことは可能でしょうか？ ORACLEのセッションについては可能です。VPNのセッションについてはその構造によります。 今回の場合、通常の通信よりも特定が困難なので切り分けが大事です。 「ハングしてしまう」というのが少し曖昧なので、状況をもう少し詳しく教えてください。 エラーが出るとか、ログに何か出力されるとか。
どの文字コードからどの文字コードに変換するのでしょうか？ Oracleデータベースの文字コードは何でしょうか。
１）多数の表の特定の列名を対象にALTER文をつくる select 'ALTER TABLE '|| table_name ||' MODIFY '|| column_name || ' VARCHAR2(500);' from user_tab_columns where column_name='BIKOU'; ２）特定の表の多数の列を対象にALTER文をつくる select 'ALTER TABLE '|| table_name ||' MODIFY '|| column_name || ' VARCHAR2(500);' from user_tab_columns where table_name='TB01' and data_length=250; 質問の内容からすると２）でしょうか。
> １．degree句を設定すると対象テーブルの統計情報取得処理がn並列で > 　　稼働し、処理時間の短縮が図れるということでしょうか。 その認識で間違いないと思います。 > ２．適切な並列数はどのように設定すればよいでしょうか。 > 　　多ければいいというものではないですよね。 10g以上で特に理由がなければ、DBMS_STATS.AUTO_DEGREEやDBMS_STATS.DEFAULT_DEGREEを 指定することで、CPU数や初期化パラメータの設定値から適切な多重度を自動的に設定して くれるかと思います。 多重度を設定するとパラレル・クエリと同様にパラレル・スレーブ・プロセスが生成する ため、極端に大きくするとオーバーヘッド（複数のスレーブ・プロセス間の同期など）が 大きくなるかと思います。
SELECT E_Code ,SUM(CASE K_Code WHEN 1 THEN 1 ELSE 0 END) AS "1の個数" ,SUM(CASE K_Code WHEN 2 THEN 1 ELSE 0 END) AS "2の個数" FROM tableA GROUP BY E_Code ORDER BY 1 です。
追加の情報です。 はてなbookmarkもmySQLです。 またOKWEBもmySQLだったと思います。 下記は2006年、はてなbookmarkが45000人だったときのサーバー構成です。 45000人でサーバー：17台!! OSやSQL代金は無料ですが、サーバー代金が累積的に掛かってきますね。 ユーザー10万人程度なら個人でもできますが、5000万人にもなるとスポンサーは必要かと思います。 http://thinkit.co.jp/free/article/0610/1/1/ ユーザー：45,000人 ブックマーク数：535万件 ページビュー：5,000万/月 サーバー：17台 サーバーの内訳は、次の通りです。 リバースproxy×1 mod_perlを組み込んだWebサーバー（アプリケーションサーバー）×9 DBサーバー×7台（マスター×1、スレーブ×6） ハードウェアは、はてなブックマークに限らずはてなのサービスでは基本的にすべて自作のPCサーバーを利用しています。はてなブックマークで利用している17 台もすべて自作のPC サーバーで、基本的なスペックは、次のようにごく普通なものです。 CPU：Pentium 4 3.2GHz メモリ：Webサーバーには1GB／DBには4GB ディスク：IDE（SCSIは使っていない）／DBはRAID LinuxのディストリビューションにはFedora Core Apache 2.0＋mod_perl 2.0／Apache 2.2 MySQL 4.0 Perl 5.8 といった構成です。
参照先のページにもある通り、ほとんどのSQLの実行実装では相関副問合せは 「ループ処理隠し」です。 外側のテーブルのレコードを順に参照し、それに対して相関副問合せを実行しています。 ORACLEやPostgreSQLなどでEXPLAINを行えばそれは確認できます。 ただ、意味論的には「集合の切り分け」でも間違いではありません。例示されたSQLでは 副問合せの側から「性別が同一で最大の年齢を求め、等しいレコードを抽出している」 ともとれます。
カラムＢ～カラムＤがＣＨＡＲなのがちと面倒ですね。 select カラムＡ, カラムＢ, カラムＣ,　カラムＤ from 表１ where (カラムＡ, カラムＢ||right('0'||rtrim(カラムＣ), 2)||right('0'||rtrim(カラムＤ), 2)) in ( 　select カラムＡ, max(カラムＢ||right('0'||rtrim(カラムＣ), 2)||right('0'||rtrim(カラムＤ), 2)) 　from 表１ 　group by カラムＡ ) / ですかね
> この復元方法は正しいのでしょうか？また問題はないでしょうか？ 正しいです。問題もありません。 > PFILEからSPFILEを作成しなおす方法もあると思いますが・・・ PFILEからSPFILEを再作成すると、自動メモリ管理で内部的に チューニングされた情報が失われてしまいます。 もちろん、起動後に再度チューニングされるため、それほど問題には ならないでしょうが、SPFILEをバックアップする方法が最善であるため、 PFILEからSPFILEを再作成する方法は次善でしょう。
こんばんは。 同じになるとは限りません・・・。 それよりも、10gでANALYZEするのはやめましょう・・・。 DBMS_STATSを使ってください。 まぁ、どっちにしても、同じとは限りません・・・。 固定したければ、アウトラインを使いましょう。
>過去分の検索処理を作ろうとしているのですが >「主キーがあるのだから問題あるはずはない」という意見が出ていました。 そんなことはありえません。 オペレータは何をするかわかりません。 例えば、検索条件なしで検索してしまって、500万件全部を画面上に表示しようとしてしまったら、 どんな高速なＤＢサーバを使っていても、高速のLAN回線を使っていても、 回線がパンクしておだんまりになってしまうでしょうから、 やっぱり、検索画面に制限をいれるほうがいいと考えるのが普通と思います。 （何で画面を作るか、あるいは画面の作り方にもよりますが、Out Of Memoryとかでるのかも。） 但し、サイズや件数の制限というのがいいのか、条件を必ず入力させて、この条件で間接的に、 検索結果の制限をかけるのがいいのか、は考え方しだいです。 例えば、1万件以下という件数制限がいいのか、検索する期間を1ヶ月以内にして、 1ヶ月間で検索対象となるのは多い月でも1万件以下であるとするのがいいのか、 は決め事の話になります。
OracleCommand.Parametersが空かどうかなら「count」で、特定のパラメータがあるかどうか「IndexOf」が-1かどうかで判定できるのでは。
＞番号をインクリメントさせたいと思っております の部分を除いて、このスクリプトまともに動いています？　動いていないように見えるんだが・・・・ このような場合、OSなんで、バージョンは何で、と書かないとだめ。B-Shellを指定しているようだが、Linuxだと違うものにエイアスされている場合もある。とりあず イングリメントは http://search.yahoo.co.jp/search?b=1&n=10&ei=UTF-8&fr=ie8sc&p=B-Shell+%22%E6%BC%94%E7%AE%97%E5%AD%90%22 演算子ですよね。０に関しては、数字を文字列で扱い、MAX桁数がが２なら、００を足して、 １　＋　００　－　[イングリメントした数字の桁数分の０の数＝０が一個]　＝０１ １１　＋　００　－　[イングリメントした数字の桁数分の０の数＝０が０個]　＝１１ なんていう、単純な物。割り算をしてもいい。まあやり方はたくさんあるね。awk, naswk ,sed を使うのが通例。
異なるバージョンがあるように見えますね。 10gがインストールされている環境に、11gを載せた？ はどうだったんですか？ > 上記にある、c:\oracle\product\10.1.0\がＰＣのCドライブには > 見当たりませんでした。 > フォルダが作られていないようです。 EMも、「フォルダが無いから起動できない」でしょうね。 > 一度、11gからインストールしなおした方がいいでしょうか 10gの件を整理できないままでは、同じ結果のような気がします。 試すだけ試してみて、それでもダメなら一度すべてのOracle関連ファイルを 削除でしょうね、レジストリも含めて。 方法はキーワードを「oracle 環境　レジストリ　クリーン」にしてググってみてください。
SELECT 型番,COUNT(*) AS 件数 FROM テーブル WHERE オプション NOT IN (2,3) GROUP BY 型番;
本来、IMP、EXPコマンドは、簡易的であり、PL/SQLなど、スキーマと組み合わせて使用します。 行単位のリカバーは、DBクライアントまたはDBアプリによって、システムとして設計されるべき話です。 単純に考えないように。 http://search.yahoo.co.jp/search?b=1&n=10&ei=UTF-8&fr=ie8sc&p=Oracle+%22imp%22+%22%E8%A1%8C%E5%8D%98%E4%BD%8D%22 http://www.oracle.co.jp/forum/thread.jspa?threadID=8005943 この続きでしょうかね？？？ そこにもあるように、ちゃんとしたロジックを考えて、クライアントシステムとあわせた事を考えないと、なにが適当なのか判断がつきません。 例えば、クライアントから削除したとすると、その行は別テーブルにバックアップされるとか、トランザクションそのものをバックアップするとか・・・ いくつもロジックが考えられます。 http://otndnld.oracle.co.jp/document/products/oracle10g/102/doc_cd/server.102/B19211-01/exp_imp.html なんて読めば、アイディアが沢山出ると思いますよ。
「仕事でOracleを使うことになりました」の中身によりますね。プログラミングでOracleに接続するということなのか、データベースの運用管理を行うのか、開発プロジェクトでデータベース設計を行うのか。 使うEditionは何なのか。 もう少し補足が欲しいですね。
lag関数使えば出来ないことはないと思うけど、列はすべてto_charで文字列にしなければいけないのが面倒くさそう。 http://oracle.se-free.com/dml/0601_lag.html
queryオプションというのはあります。 ただ、速度を向上させたいならdirectモードを使用したほうがいいと思います。 索引も外しておき、インポートしてから作成することをおすすめします。
No.2です。 ＞Excelで[データ]-[外部データの取り込み]-[データの取り込み]-[新しいソース] ＞-「ODBC DSN」-「接続するODBCデータソース」-「OracleDNS」 ＞-「Oracle ODBCドライバ接続」ではＯｒａｃｌｅに接続する事は出来、データも ＞Excel上に表示する事が出来ました。 なのだから、DSNはあるのですよね。すみません。 実を言うと、私は通常ADO＋OLE DBを使っているのでODBCに関しては良くわかりません。 ・・・申し訳ありません ADO＋OLE DB　は特にソフトをインストールなどは必要ありません。 （「ADOの参照設定とかしていないのですが」とありますが、そのエラーならばActiveX Data Objects に参照設定されていると思います。それ以外の設定は特にありません） こちらの方が（oo4oよりは劣るにしても）パフォーマンスが多少良いとのことですし、一度試されてはいかがでしょうか。
各テーブルの件数、主キー、索引の有無、SELECT文の実行計画がわからないのでなんとも言えませんが、何らかの理由でSELECTとDELETEで異なる実行計画が採用されている可能性があります。 もし、tableaに主キーがあるなら、そのデータを抽出し、IN句を使ってDELETEを実行してみてください。
select key, ltrim(sys_connect_by_path(col, ','),',') as cols from ( select key, col, row_number() over (partition by key order by col) as num, count(*) over (partition by key) as cnt from tab) where level = cnt start with num = 1 connect by prior key = key and prior num = num - 1;
回答がつかないようなので、根本解決にはならないでしょうが、参考までに。 私自身、Oracelを管理していないので、Oracleのどこを見れば良いか、は分かりませんが、Oracleのデータを利用できるならOracel自体を操作しなくても、Excelで見てみることはできます。 以下Excel2003を使用した場合です。 使っていないシートを表示しておいて、 [データ]-[外部データの取り込み]-[データの取り込み]-[新しいソース]ボタンクリックで「データ接続ウィザード」が表示されます。 接続するデータソースの種類で「ODBC DSN」を選択し[次へ]ボタンをクリック 「接続するODBCデータソース」で「OracleDNS」を選択し[次へ]ボタンをクリック すると「Oracle ODBCドライバ接続」が表示されます。 ここに表示されるサービス名が今接続できるOracleのデータソース名（CONNECTSTRINGに代入する値）です。 ここで実際にユーザー名とパスワードを入力してデータを取得することが出来るかテストできるので、ユーザー名とパスワードが有効か確認することが出来ますよ。 Excel2007以降ではメニューが変わってきますが、外部データの取り込みは出来るはずなので、同様に見ることはできると思います。
http://itref.fc2web.com/technology/entity_relationship_diagram.html のIDEF1X (Integration Definition)記法 の「IDEF1X記法によるER図の多重度」を確認してください。
delete from a where rounum < 5000 commit; この処理を実行すると、一件目～5千件が削除され、元々あった5千1件目から一万件目が上に詰まります。 ですから、２日目も同じコマンドによって、元々あった5千1件目から一万件目が削除されます。
たまにあります。 「Oracle in XE」の最新Versionを入手して試してみてください。 それでだめならサポート行きなんだけど、XEってサポートなかったはずなので・・・。 かつて、変な現象がでたので、「Microsoft ODBC for Oracle」を利用して回避したことあります。
たぶん、SQL*PLUSでログインしているユーザーに必要な権限が不足しているのでしょう。 GRANTコマンドで権限を付与するか、一時的にSYSDBAユーザーで接続するかすれば見えるでしょう。
> 何故かうまくデータが抽出できません。 どうなるのでしょうか？（エラーが出る、期待されない結果になる、処理が終わらないなど） 文字列中にシングルクウォート(')を含めるにはシングルクウォートを2つ並べて書けばよいです。 http://www.shift-the-oracle.com/element/literal-string-number.html 日付に関しては TO_CHAR 関数を使って文字列に変換すれば大丈夫だと思いますが。 http://www.shift-the-oracle.com/sql/functions/to_char-datetime.html 例)------------------------------------------ 'これは、''' || T.T1 || '''の''' || T.T2 || '''の結果です。' || '期間は、' || TO_CHAR (T.T3, 'YYYY/MM/DD') || 'までです' ↓↓↓↓↓↓ 「これは、'○○○'の'×××'の結果です。期間は、2012/01/15までです' --------------------------------------------- なお、手元に Oracle が無いため、実行確認はしていません。
こんにちわ。 > execute immediate内で変数は使えないのでしょうか？ execute immediate に指定するSQL 文(文字列)にプレースホルダを指定して、 USING で対応プレースホルダに対応する変数を指定してやれば可能です。 詳細は、以下のURL (PL/SQL 言語リファレンス) を確認して下さい。 http://docs.oracle.com/cd/E16338_01/appdev.112/b56260/dynamic.htm#BHCEBBAI
こんにちわ。 > 下記エラーが発生してしまいます。 エラーメッセージを見る限り、独自型の問題ではないように見えます。 exp した時に設定されていた、NLS_LANG, NLS_DATE_FORMAT 環境変数を imp する環境でも同じ設定にして確認してみて下さい。
こんにちわ。 > sqlplus testuser/passwd@TESTの形式ではログインできますが、・・・ @で指定しているのは、接続文字列で$ORACLE_HOME/network/admin/tnsnames.ora に設定されています。 この値を、ORACLE_SID に設定してもOracle には接続できません。 先ずは、tnsnames.ora を確認してどこのDatabase に接続しようとしている のか確認して下さい。 ローカル環境のDatabase であれば、そのSID をORACLE_SID に設定 して下さい。
こんにちわ。 > コンパイルエラーになってしまいます PL/SQL のコンパイル時に「1.」で作成しているテーブルが存在しないために エラーになっています。 「2.」をExecute immediate を使って動的SQL にする事でコンパイルエラーを 回避できます。 後は、#1 の方の言うように、事前にテーブルを作成しておくかですね。
発注がなければ仕入がないんですから、 SELECT 　　　 発注データ.発注番号, 　　　 発注データ.数量 - (SELECT NVL(SUM(仕入データ.数量), 0) FROM 仕入データ 　　　　　　　　　　　　　WHERE 仕入データ.発注番号 = 発注データ.発注番号) FROM 　　　 発注データ とかすればいいんじゃないですかね。
こんにちは。 シングルコーテーションは、2つ書けば1つのシングルコーテーションとして認識されます。 エスケープのようなもの？ 例えば、あるカラムに対して「'」を一つだけINSERTしたい場合などは、 INSERT INTO TABLE VALUES(''''); となります。
ご質問の内容が良くわからないですが、Oracleはデーターベースマネージメントシステム（DBMS)の名前。それが会社名にもなっていて、Oracle社はこのDBMSを中核としてパッケージ製品を作ってます。またOracleはかってSUNマイクロシステムズが開発したJAVA言語を買収して今は提供してます。つまり言語も作ってます。 またOracle社のパッケージ製品は多岐にわたり企業がこれを購入し、カスタマイズすることで自社にあったシステムを早く作ることが出来るようにして有ります。 その中核はOracleDBであり言語はJAVAです。一部の命令にはPLSQLというOracleDBをハンドリングする言語もつかわれています。 つまり自社パッケージというのではなく。この場合Oracleの業務パッケージを使った自社システムになります。 当然マイクロソフトでもSQLサーバーや,NET言語で作られたパッケージなど同じような製品があります。
こんにちわ。 >どこに問題があったものでしょうか。 Oracle のマニュアル (SQL リファレンス) には、以下のように記載されています。 > 表を以前のSCNまたはタイムスタンプまでフラッシュバックするには、 > その表に対するFLASHBACKオブジェクト権限か、FLASHBACK ANY TABLE > システム権限が必要です。 また、その表に対するSELECT、INSERT、DELETE > およびALTERオブジェクト権限が必要です。
> １０ｇの導入を進めていますが、なんとかオラクルのライセンスコストをカットするいい方法はないでしょうか？ こんなところでしょうか・・・ - No.4の方が回答されているように、開発ライセンスを使用する。 - 開発環境ライセンスをプロセッサではなく、指名ユーザにする。（既にされていると思いますが） - 本番開始時に開発環境を潰す（本番ライセンスで開発し、本番開始時に切り替え） - SE, SEOneでよいところは切り替える > また、上司の意見は有りでしょうか？？？ なくはないですが、開発環境がおかしくなった時に、間違えて本番プロセスをkillしてしまうリスクは回避できないでしょうね。あと、開発環境は手荒に使うでしょうから、暴走してしまい、本番運用に悪影響を及ぼすリスクも拭えないでしょうね。 まあ、やるなら少なくともOracleホームは別にするべきでしょう。
下記でどうでしょう ただ、T_REQUESTの100S0003は削除対象ではないですか？ ---- SELECT * FROM dbo.T_REQUEST a WHERE (NOT EXISTS (SELECT 'X' FROM T_ORDER b WHERE a.商品番号 = b.商品番号)) AND (NOT EXISTS (SELECT 'X' FROM T_REQUEST c GROUP BY c.商品番号 HAVING MAX(c.更新年月日) > '20111031' AND MAX(c.依頼) = '1' AND a.商品番号 = c.商品番号)) それとも (SELECT 'X' FROM T_REQUEST c WHERE c.依頼 = '1' GROUP BY c.商品番号 HAVING MAX(c.更新年月日) > '20111031' AND a.商品番号 = c.商品番号) SELECT * FROM dbo.T_REPLY a WHERE (NOT EXISTS (SELECT 'X' FROM T_REPLY b GROUP BY b.商品番号 HAVING MAX(b.回答年月日) > '20111031' AND b.商品番号 = a.商品番号))
変数Iが宣言されていないですし、代入文もおかしいです。 元のプログラムを極力変えずにいくと、 DECLARE CURSOR KEKKA IS SELECT BUMON_CD,COUNT(*) RCNT FROM BUHYO GROUP BY BUMON_CD ORDER BY BUMON_CD; TYPE BUMON_TAB IS TABLE OF KEKKA%ROWTYPE INDEX BY PLS_INTEGER; WK_ARRAY BUMON_TAB; I PLS_INTEGER := 0; --追加 BEGIN FOR WK_BUMON IN KEKKA LOOP I := I + 1; WK_ARRAY(I).BUMON_CD := WK_BUMON.BUMON_CD; -- = を := に修正 WK_ARRAY(I).RCNT := WK_BUMON.RCNT;-- = を := に修正 DBMS_OUTPUT.PUT_LINE(WK_ARRAY(I).BUMON_CD || ',' || WK_ARRAY(I).RCNT); END LOOP; END; / こんな感じでしょうか。 この場合、添え字は1から始まることになります。
INSERT INTO 新テーブル SELECT 項目1, ... TO_CHAR（項目n,'FM999...'.), ... FROM 旧テーブル; の要領でやればいいのでは。 ただし、制約、インデックスはいったん外してINSERTしてから、ALTER SESSION SET SORT_AREA_SIZE = ... でソートエリアを拡大してから再作成したほうがいいと思います。
インターネットで検索できる、Oracleのエラーリファレンスは、見られましたか？ （”明白”としかかかれていませんが） 2つのテーブルには、すでにレコードがそんざいしますよね。 テーブル２に、ゴミレコードが存在するのでは？ つまり、テーブル１には存在しない、ID1,ID2の組み合わせを持つレコードが存在しませんか？ NOT　IN　で、対象となるレコードを検索されては？
＃２です。 update test set tel_no = substr('##########',1,length(tel_no)); のほうがよいかも
基本的にファイルシステムベースなら大丈夫そうですが、WindowsのOracleのサービス停止はデフォルトはSHUTODOWNモードが規定されていないので、一抹の不安はあります。 http://otndnld.oracle.co.jp/document/products/oracle10g/102/windows/B25695-04.pdf の「5.3 サービスを使用したデータベースの起動および停止」を参考に、「サービス停止時にインスタンスを停止」する状態になっている状態にが望ましいと思います。
> 上記で作成した関数を，別に作成したプロセスから呼び出しているのですが これが良く変わらないので何ともいえませんが Pro*Cでシグナルを扱ったことがありますが普通に処理できましたよ 書き方も特に変わったことはいていませんでした。 DB関数のライブラリの部分をスタブにして普通のCで書いてみたら ちゃんと動きますか? 以降の動作をしない というあたり割り込みが割り込みをよんでませんかね? ちなみに、扱ったことがあるのは SIGINT, SIGTERM, SIGCHLD, SIGUSER1 SIGUSER2です。
エラーの通りです。 >insert into テーブルA (K1) >select K1|| ' ' ||K2|| ' '||K3　 >from テーブルB; >指定していないMIDが何故でてくるのでしょう？ テーブルAのK1にテーブルBのK1+K2+K3のみを インサートしようとしてます。 つまり主キーを指定していないから出てくるんです。 INSERT INTO テーブルA SELECT MID,K1|| ' ' ||K2|| ' '||K3　 FROM テーブルB;
ご質問の内容から性能要件などが全く読み取れません。 2万件程度であればdelete文で全く問題がないように思います。 いずれにしても、削除する方法となれば delete, truncate, drop くらいしか解がありません。さらに、全権削除しちゃダメで、 パーティションも使えないとなれば where 句を指定した delete 文 しかありません。 ただ、2万件程度であればdelete文で全く問題がないと思います。
こういう指摘がありますけど http://www.confrage.com/oracle/oracle_sql/tips/group_func_nest_limit/group_func_nest_limit.html
>上記の2つがありますが、どう違うのでしょうか？ 公式情報の上では、試験問題数/試験時間やその合格ラインが異なります。 上記の違いから、試験問題の難易度も異なっているのが実情のようです。 （(1)11g SQL基礎I の方が、各問題の難易度が高い。） 合格だけを目指すなら、 試験問題が簡単な(2)の方が手抜き勉強で合格できると思います。 >できれば、将来性のある方を受けたいのですが SQL試験の技術的な内容そのものは、1990年代の技術的内容から変わっていないので、 将来性は気にする必要がないと思います。 >(1)が11g、(2)がが10g、11gに共通すると思って良いのでしょうか？ >それであれば(1)の方が将来性があるのでしょうか？ (1)の試験内容も10gで普通に動きます。 >12gが出る頃にはSillverやGoldを受けたいのですが、 もしDBA資格のことをおっしゃっているなら、 SQL試験があるのはBronzeだけなので、気にする必要ありません。 （Silver/GoldはDBA試験のみです）
１．高速リフレッシュしているなら、マスターサイトにマテリアライズド・ビュー・ログが いるはずなので ALL_MVIEW_LOGSか、DBA_MVIEW_LOGSから、 LAST_PURGE_DATE DATE 前回の消去が実行された日付 LAST_PURGE_STATUS NUMBER 前回の消去の状態（エラー・コード、または正常終了を示す0） あたりをSelectでみてみたらいいのでは？ （ただし、遅延消去している場合なら検知までにタイムラグがでると思いますが。） ２．上記で無理があるなら、DBLINKを利用して、相手側の ALL_MVIEWSか、DBA_MVIEWSを参照して、 LAST_REFRESH_DATE DATE マテリアライズド・ビューがリフレッシュされた最新の日付 （まだ移入されていない場合は空白） STALE_SINCE DATE マテリアライズド・ビューが失効した時刻 他をSelectでみてみるとか。 ３．DBLINKを利用して、相手側のDBA_JOBSやDBA_JOBS_RUNNINGを見てもいいかも。 いずれも、selectする項目の詳細はマニュアル見てみて。 http://docs.oracle.com/cd/E16338_01/server.112/b56311/toc.htm 第II部 静的データ・ディクショナリ・ビュー に全部ありますから。
複合トリガーについては理解できていないのですが、質問の内容でも必要なのでしょうか。 >あるTBL１のフィールド：[氏名]を入力すると同テーブルのフィールド：[社員番号]が自動でセットされるようなトリガー だけなら、普通のトリガーでいいと思うのですが。 たとえば、 CREATE OR REPLACE TRIGGER TRG_SET_AUTO_SHAIN_NO BEFORE INSERT ON CM_PORTAL_SHAIN FOR EACH ROW WHEN (NEW.DATA_KBN in (2,3)) DECLARE GRP_CD VARCHAR2(3); SEQ_NO NUMBER(4); NEW_SET_NO VARCHAR2(7); BEGIN IF :NEW.DATA_KBN = 2 THEN GRP_CD := '999'; ELSE GRP_CD := '888'; END IF; --社員番号はグループごとに連番で振りたいということですよね？ --質問文のコードでは連番取得後にテーブルの更新処理をしていないですが必要じゃないですか？ --実際にはSEQUENCEを使った方がいいような気がします select SQ.GROUP_CD,SQ.SEQUENCE_NO + 1 into GRP_CD,SEQ_NO from CM_HAKEN_GROUP_SEQUENCE_MT SQ where SQ.GROUP_CD = GRP_CD for update; update CM_HAKEN_GROUP_SEQUENCE_MT set sequence_no = seq_no where GROUP_CD = GRP_CD; --SHAIN_NOに値を設定するだけで、トリガー内でINSERTやUPDATEを発行する必要はない --質問では、NEW_SET_NO := substr(GRP_CD,LPAD(SEQ_NO,4,0)); となっていましたが --本当は連結するのだろうと勝手に想像しました。 :new.SHAIN_NO := GRP_CD || LPAD(SEQ_NO,4,'0'); end; / こんな感じでも。
No.4の方の回答を補足すると、 >　2.アーカイブ、オンラインREDOログでロールフォワード するときに、REDOログに記録されたトランザクションが再実行されます。 　「更新トランザクションが再実行される」＝「更新に伴うUNDOデータが再生成される」 となるので、「2.」が完了した時点で、 　「ロールバックに必要なUNDOデータはREDOログを元に再生成済み」 の状態になっています。 従って > 3.UNDOでロールバック は、「2.」で再生成済みのUNDOデータを使ってロールバックすることになります。 余談ですが、この挙動はOracleだけの話であり、他のDBMSソフトウェアでは また異なる動きをしているので注意してください。
データベース・コンフィギュレーション・アシスタント（dbca）では、最後のステップで実行コマンドをスクリプトに保存する選択肢が出てくるので、ここのみにチェックを付けて終了すると、指定したディレクトリにシェル（Windowsの場合はバッチ・ファイル）とSQLスクリプトが出力されます。 制御ファイルのパスは、初期化パラメータ・ファイル、system、temp、undoなどのパスはCreateDB.sqlに出力されるので、そこをエディタで編集し、手動でDBを作成するのが簡単だと思います。 というか、GUIだけでやってしまうと何も残らないので、「DBを再作成してください」と言われたりすると困っちゃうんですよね。。
「英字を含まない」ですよね？ select * from table_a where length(translate(upper(item_a), '9ABCDEFGHIJKLMNOPQRSTUVWXYZ', '9')) = length(item_a);
#1です。 勘違いしてました。 select B.ID from table_B B WHERE EXISTS ( SELECT 1 FROM table_A WHERE A.ID = B.ID ) AND NOT EXISTS ( SEleCT 1 FROM table_A WHERE A.ID = B.ID AND A.ATAI = 'AAA' )
賛成。 length( regexp_substr(ADATA,"^\d*") )
こんにちわ。 > なんとか、現在のPC（Vista Home Premium SP2）で試験勉強を出来る環境を Oracle はVista Home Premium に対応していませんので、このままでは Oracle を動かす事はできません。 対応策ですが、Vista Home Premium にVMware Server を導入して その上にCent OS 等でGuest OS を立ててやれば、仮想環境上で Oracle を動かす事も可能かと思います。
select case when count(*) > 0 then '1つでも登録されていない' else 'すべて登録済み' end 登録状況 from ( select a.SHOHIN_CODE from T_SHOHIN a where not exists ( select * from T_KAKAKU b where a.SHOHIN_CODE = b.SHOHIN_CODE and b.KIJUN_DATE = 20111104)); でどうでしょうか。
バイナリというか、XMLデータならCLOBで扱ってはどうですか。 http://ameblo.jp/archive-redo-blog/entry-10035717134.html こちらの関連リンクなども参考にすると、かなりためになると思います。 Javaは基本的に無償でダウンロード、インストールできます。 http://java.sun.com/javase/ja/6/download.html
一言で言えば貧弱だからです。 Oracleサイトにはこう書いてあります http://www.oracle.com/technetwork/database/express-edition/overview/index.html Oracle Database XE can be installed on any size host machine with any number of CPUs (one database per machine), but XE will store up to 11GB of user data, use up to 1GB of memory, and use one CPU on the host machine. 「use one CPU on the host machine.」 つまりXEは1つの「CPU」しか使えないと。ここでいう「CPU」とはコアも含みますので、4コアCPU1個の場合でも1コアしか使ってくれないということです。(というかマルチスレッドで動かせないということです) いまどきそんなレベルのものを商用システムには使用できません。よって常識的には勉強用にしか使えないということです。100歩譲っても超小規模システムにしか使えません。 どうせ使えないものだから知らなくてもいい、そんな理由でシステム開発を行う人の間では知名度も低いのだと思います。 ※OracleMasterを受験しようと思っている人の勉強用に提供しているという点では親切だと思います。
３個のテーブルを結合して不具合があるなら、２個ずつ結合してunionして集計すると 大抵、大丈夫なはずです。 例)タブンこれでいいと思うけど（未検証です） select CODE,SHOZOKU,sum(JISSEKISHUKEI),count(NAME) from ( select sha.S_CODE CODE,sha.S_SHOZOKU SHOZOKU,gak.G_JISSEKISHUKEI JISSEKISHUKEI,Null NAME from SHAIN sha,GAKUREKI gak where sha.S_CODE = gak.S_CODE union all select sha.S_CODE CODE,sha.S_SHOZOKU SHOZOKU,0 JISSEKISHUKEI,jis.J_NAME NAME from SHAIN sha,JISSEKI jis where sha.S_CODE = jis.S_CODE ) group by CODE,SHOZOKU order by sha.S_CODE,sha.S_SHOZOKU ※count(NAME)で、NAMEがNULLのデータも計算されてしまうＤＢなら sum(case when NAME is null then 0 else 1 end) とすれば大丈夫。 ※最新バージョンなら大抵のＤＢは動くと思うけど。 でも、質問にある場合なら、 SHAINテーブルとGAKUREKIテーブルは１：１のようなので、 結合した結果とJISSEKIテーブルを結合してcountとって問題ないのでは？ (SHAINテーブルとGAKUREKIテーブルが1:1でなければダメです。) 例） select sha.S_CODE,sha.S_SHOZOKU,gak.G_JISSEKISHUKEI,count(*) from SHAIN sha,GAKUREKI gak,JISSEKI jis where sha.S_CODE = gak.S_CODE and sha.S_CODE = jis.S_CODE group by sha.S_CODE,sha.S_SHOZOKU,gak.G_JISSEKISHUKEI order by sha.S_CODE,sha.S_SHOZOKU ＞最新版のSQLserver、MySQL、DB2、HiRDBを使ってみています。構文も変わりますか？ 通常、関数を使っているとまず動きません！ ただ、今回の場合は、union all や case くらいなので動くんじゃないかな。
nora1962さんのSQLを拝借 下記でどうでしょう。 ---- SELECT Aテーブル.*, CASE WHEN T.CNT IS NULL THEN XXXXX ELSE T.CNT END AS 比較 FROM Aテーブル LEFT JOIN ( SELECT Bテーブル.KEY1,Bテーブル.KEY2,COUNT(*) CNT FROM Bテーブル GROUP BY Bテーブル.KEY1,Bテーブル.KEY2 ) T ON Aテーブル.KEY1=T.KEY1 AND Aテーブル.KEY2=T.KEY2
　前後の処理があるとは思いますが、もし、コピー前にＢテープルのデータを削除しているなら、いったんその処理だけ止めておきます。コメントアウトするも良し、デバッグモードを組み込んでおくもよし。 　Ｂテーブルに事前にＡテーブルにあるデータとユニークキーが同じデータを一つ登録しておきます。 　後は、プログラムを実行してみればＯＫ。 　Ａテーブルの内容を事前にＢテーブルにコピーしておいても可ですが、途中でエラーになった時の挙動の確認が出来なくなるかな。まぁ、エラーになった時の処理内容によりますが。
SELECT Aテーブル.*,T.CNT FROM Aテーブル LEFT JOIN ( SELECT Bテーブル.KEY1,Bテーブル.KEY2,COUNT(*) CNT FROM Bテーブル GROUP BY Bテーブル.KEY1,Bテーブル.KEY2 ) T ON Aテーブル.KEY1=T.KEY1 AND Aテーブル.KEY2=T.KEY2 とりあえず、Aテーブル全部のレコードを出力するようにしました。 件数が一致するものは出力しないなら WHERE Aテーブル.Int型データ2 <> T.CNT OR T.KEY1 IS NULL を追加してください。
SQLDeveloperではダメなのですか？ http://www.oracle.com/technetwork/jp/developer-tools/sql-developer/overview/index.html
UNION ALL にしてみてはどうでしょうか？
後,「column」を追加する alter table VISITOR_SCHDULE drop column "総務部.受付ID-1"
UPDATE テーブル SET 日付 = NULL WHERE 日付 = TRUNC(SYSDATE) - CASE TO_C HAR(日付, 'DAY') WHEN '土曜日' THEN 9 WHEN '日曜日' THEN 8 ELSE 7 END かな？ > あと余談ですが・・・例えば企業の休み > （お盆、正月、もしくは祝日など）を考慮 > したい場合、休みのデータを持ったテー > ブルを作るほうが無難ですか？それと > もSQL単文でも可能でしょうか？（長い > 文かつ効率が悪くても・・・） 普通は全日を持ったカレンダーマスタを持つかな。
ログインしようとしているユーザーは作成されたのでしょうか？ ログイン時に sqlplus ユーザー名/パスワード としてみてください。 もし、ユーザーを作成していないのならOracleをインストールしたユーザーでログインして sqlplus / as sysdba で接続し、 create user ユーザー名 identified by パスワード; で作成してください。
No1ですが、追加。 いい忘れたが、コマンドオプションも正確に理解してください。 http://ext.omo3.com/oracle/sqlplus_command.html#sqlplus このサイトはただの参考例です（正しいとは限らない）。 この手の事はユーザーガイド、ヘルプに記載されています。 それぞれ何をどのように指定したのか理解しましょう。ただ、羅列されているわけではありません（スペースとか名前、接続詞にご注意）。 ちなみに、システムユーザーと管理ユーザーと、DBユーザーとは全て別です。それぞれログインの仕方はコマンドベースとだとしきたりがあります。またさらにUNIX系、Linux系だと起動ユーザーとうのも意識しないとだめですね。 起動ユーザーとDBA権限を持つDBユーザーとを混合してしまう方が多いようです。それは名前を同じにしてしまうからです。
SELECT COALESCE(T1.品番,T2.品番) 品番, T1.全長, T2.入数 FROM テーブル１ T1 FULL JOIN テーブル２ T2 ON T1..品番=T2.品番
create view 商品サイズ as select 商品ID, sys_connect_by_path(サイズ名,',') as サイズ名 from (select 商品マスタ.商品ID,商品マスタ.商品名,サイズマスタ.サイズ名, Row_Number() over(partition by 商品マスタ.商品ID order by 商品サイズマスタ.サイズID) as Rank, count(商品マスタ.商品ID) over(partition by 商品マスタ.商品ID) as MaxLevel from 商品マスタ join 商品サイズマスタ on 商品マスタ.商品ID = 商品サイズマスタ.商品ID join サイズマスタ on 商品サイズマスタ.サイズID = サイズマスタ.サイズID ) where Level = MaxLevel start with Rank = 1 connect by Prior 商品ID = 商品ID and Prior Rank = Rank-1; create view 商品カラー as select 商品ID,商品名, sys_connect_by_path(カラー名,',') as カラー名 from (select 商品マスタ.商品ID,商品マスタ.商品名,カラーマスタ.カラー名, Row_Number() over(partition by 商品マスタ.商品ID order by 商品カラーマスタ.カラーID) as Rank, count(商品マスタ.商品ID) over(partition by 商品マスタ.商品ID) as MaxLevel from 商品マスタ join 商品カラーマスタ on 商品マスタ.商品ID = 商品カラーマスタ.商品ID join カラーマスタ on 商品カラーマスタ.カラーID = カラーマスタ.カラーID ) where Level = MaxLevel start with Rank = 1 connect by Prior 商品ID = 商品ID and Prior Rank = Rank-1; で select 商品カラー.*,商品サイズ.サイズ名 from 商品カラー join 商品サイズ on 商品カラー.商品ID = 商品サイズ.商品ID; まあ、かなり無理やりですね。一旦VIEWにしないとOracleの構文解析のバグなのか一発で通らないし、階層別問合せの結果はINDEXが使えないので負荷が高いです。
＞上記サイトでダウンロードすれば、その時点の最新版が手に入るので、 この手のツールを個人で使用する方は少ないので、一応ヒントを書いたつもりなんですが、 http://www.oracle.com/jp/support/faq/index.html http://www.oracle.com/jp/support/faq/faq-contact-079338-ja.html#01 http://www.oracle.com/jp/support/faq/faq-contact-079338-ja.html#01-1 http://www.oracle.com/jp/support/support-index-025997-ja.html http://www.oracle.com/technetwork/jp/topics/security/alerts-082677-ja.html?ssSourceSiteId=ocomjp などをみれば、サポート契約と言うのがキーである事をおわかりかと、 業務用では（そうでなくても）特に、全国展開向け（一般向け）、個別向け（サポート契約顧客向け）用、 パッチに区分けされる事はご存知かと思います。メーカーによっては、どちらもDLできる状態の場合もありますが、個別パッチは通常、パスワードやIDが必要になることがほとんどです。 ただし、マイクロソフトでもそうですが、そのほとんどの場合、公開される時期の問題で、”サービスパック”、”アップデーター（マイナーバージョンアップ or リビジョンアップ<=不具合修正＜＝３桁目のバージョンが上がる）”などで、その修正が、セキュリティー対策が施されます。 つまり、契約していれば、その都度不具合修正版が入手でき、即応できます。していなければ、半年とか、１年単位でリリースされるアップデートバージョンでの入手しかありません。 これは大抵、公開されている場合が多く、契約していなくてもDLできるケースがほとんどです（ここ１０年くらいで、マイクロソフト等の大手がそのようにしてきたので業界自体が、右ならえですね）。 抜粋： 「このページに掲載された内容は、オラクル製品のセキュリティ対策のために自由にお使いになることができます。セキュリティに関するパッチは、My Oracle Supportからダウンロードすることができます（My Oracle Supportのご利用にはメンテナンスサポート契約が必要です）。また、米国での情報公開時に、電子メール（英語）にて」 「一般公開されている脆弱性の修正情報 一般に公開されている脆弱性に関する問題で、Critical Patch UpdateとSecurity Alertで修正が提供されている問題の情報です。下記ページの一覧からご確認ください」 なんて上記に掲載されていますよ。 これ以外のところからは、代理店などのデベロッパーです。開発等のデベロッパー契約していれば、ほとんどの場合入手かのうです。 この手の仕組みは、業務用ソフトではどこも同じだと思うのですが・・・
select 年,品番,品名 from 商品マスタ a where 年 = '2010' and not exists ( select * from 商品マスタ b where a.品番 = b.品番 and b.年 = '2011'); でどうでしょうか。
ううむ、一般的に謂われるOracleMaster資格は、 　DB管理者（DBの作成/メンテナンスをする人）向けであり、 　DB利用者（DBへアクセスする人）向けではないんですよね。 DB利用者としての立場だと、下記のアプリ開発者向け試験の方が良いかもしれません。 ORACLE MASTER Silver Oracle PL/SQL Developer http://www.oracle.com/jp/education/certification/plsql-dev-172058-ja.html#Silver Oracleバージョンとの対応付けは、9i~11gまで、ひとつの資格で対応しています。
> ちなみにupdateやdeleteをした後にselectとすると処理が反映されたのが表示されますか？ UPDATEやDELETEしたセッション（トランザクション）であれば処理が反映されたものが表示されます。 他のセッションからはCOMMIT後でないと反映されません。
こんにちわ。 > DROPしようとすると、使用できない旨のエラーがでます。 一時表領域に紐付いている一時ファイルが削除された状態から問題の 一時表領域を削除したいと言う事でしょうか？ 私は同様な状況に陥った事はありませんが、対応方法としては 以下のようになると思います。 1) 一時表領域と一時ファイルの対応を確認する。 　% sqlplus "/ as sysdba" 　SQL> select tablespace_name, file_name from dba_temp_files order by 1,2; 2) 削除する一時表領域に紐付く一時ファイルをOffline 化する。 　 (エラーとなるかもしれません) 　 SQL> alter database tempfile '一時ファイル名' offline; 3) 削除する一時表領域に紐付く一時ファイルに削除マークを付ける 　 SQL> alter database tempfile '一時ファイル名' drop: 4) 問題の一時表領域を 　 SQL> drop tablespace temp01;
こんにちわ。 > Oracleの公式なページやマニュアルに書かれているのでしょうか？ 特にマニュアルに記載は無かったかと思います。 以前に、サポートに確認した事があったので、憶えていただけです。 > 該当システムは本番機しかなく検証できる環境がないのため、 ユーザ登録が必要ですが、以下のサイト (US OTN) から開発ライセンスを Download する事ができるので、検証環境を作成する事は可能です。 http://www.oracle.com/technetwork/database/enterprise-edition/downloads/index.html
強いて上げればOracle Enterprise Managerでしょうか。 ただし、パフォーマンス監視などもできるのですが、テキストのインポート、エクスポートなどはできないし、かなり使い勝手は違います。
「入出力バウンド」とは処理の中で入出力の割合が多いものを言います。他に「CPUバウンド」と言えば、CPU使用率が高く、I/Oの占める割合が低いものです。 非同期I/Oが効果的な場合は多量のランダムアクセスでのREAD、WRITEだと思うので例えば複数インデックスの更新を伴う挿入・更新・削除処理でしょうか。
これから買おうというのではなくて ７インチのモニタを今現在お使いなのですよね？ 定規で計ってみては？？？ ちなみに、モニタサイズは対角線の長さを表しています。 １インチは約2.54センチですから７インチのモニタならば対角線の長さが 7ｘ2.54≒17.8センチということになります。
具体的じゃないけど閏年の判定と年月日の月が大月かどうか、それとadd_monthsの一ヶ月後の日付と一致するかで日付を加算するかどうか判断すればよいのでは。 自分でやるならPL/SQLでストアドファンクションにしますね。その方が後々保守が楽な気がするので。
こんにちわ。 > delete from > ( > select 受注NO from T受注明細 > where T受注明細.受注NO = D売上.受注NO) こう言う事でしょうか？ delete from T受注明細 where 受注NO in (select 受注NO from D売上); 又は delete from T受注明細 T1 where exists (select null from D売上 T2 where T1.受注NO = T2.受注NO); 削除する件数と索引の有無によって、どちらのSQL が高速化は異なりますので ご注意下さい。
こんにちわ。 > 各クライアントも11gをインストールする必要がありますでしょうか？ 一口に10g, 11g と言っても様々なバージョンがありますので 詳細は以下のURL で確認して下さい。 http://www.oracle.com/jp/system-requirement/interoperability-support-195844-ja.html
こんにちわ。 > ストアド、ファンクション、viewをあるスキーマ丸ごとエクスポートするのを > バッチで（手順化）したいのですが、どのようにすれば可能でしょうか。 9i 以上であれば、dbms_metadata.get_ddl を使うのはどうでしょう？ 現在の定義からCreate 文を作成してくれます。 SQL*Plus からこんな感じ (確認はしていませんが) のスクリプトを 実行すれば、良いかと思います。 ------------------------------------------------------------------- set trimspool on set echo off set pages 0 set lines 1000 set long 99999999 spool view_define.sql select dbms_metadata.get_ddl('VIEW', view_name, owner) as create_ddl from dba_views where owner = 'エクスポートするView の所有者' order by view_name; spool off exit ------------------------------------------------------------------- dba_views ではなく、dba_object を使用すれば複数のオブジェクトを 作成するDDL を一発で取得できます。 詳細が、PL/SQL パッケージ・リファレンス を確認して下さい。
こんな感じではだめですか？ begin loop update テーブルA set カラム3 = ( select カラムc from B where テーブルA.カラム2=テーブルB.カラムB ) where exists ( select 1 from テーブルB where テーブルA.カラム2=テーブルB.カラムB ) and rownum <= 5000; commit; exit when (sql%rowcount < 5000); end loop; end; /
ログインシェルでNLS_LANGに「JAPANESE_JAPAN.UTF８」を設定してください。
シンプルじゃないか。 select t0.a1 as a1, t0.b1 as b1, t1.e1 as e1 from ( select a1 as a1, b1 as b1 from a_tbl where c=1 ) t0 join ( select a1 as a1, e1 as e1 from b_tbl where rowid in (select min(rowid) from ee group by a1) and a1 is not null and a1 !=' ' ) t1 on t0.a1=t1.a1
●がNull（あるいは空文字）も、%や?等の特殊記号も入力できないという条件ならば （この条件でなければ、a1もb1もnullのレコードを除く全レコードが取得されるのでそれが最大） select x.Moji,count(*) cnt from ( select substr(A.a1,1,1) Moji from A where a1 is not null union select substr(A.b1,1,1) from A where b1 is not null and ( a1 is null or substr(A.a1,1,1) <> substr(A.b1,1,1) ) ) x where x.Moji is not null group by Moji order by cnt desc の1行目に出てくる文字が最大件数。 （SQLは未検証なので多少間違えているかもしれません。）
#1 のmuyoshid です。 > もう少し簡単な方法はありますでしょうか 先ずは、こちらをご覧下さい。 http://www.oracle.com/technetwork/jp/content/flashback-250772-ja.pdf Oracle8i/9i と言う条件ではこの中で使用できるのはFlashback Query (Oracle9i) のみです。 つまり、Oracle8i 環境ではLogMiner を使用しなければ (Trigger や監査を使って変更履歴を取得していなければ) 更新履歴を取得する事は できません。 [注] Flushback Query は、現在のデータにUndo 情報を適用する事によって、過去のある時点に 遡ってデータを取得するものです。 そのため、更新履歴を取得すると言う質問者様の要件とは若干異なります。 上記PDF では、Select 文にAS OF 句を指定する事でFlashback Query が使用できるように 記載されていますが、Oracle9i ではDBMS_FLASHBACK パッケージを使用します。 詳細は、アプリケーション開発者ガイドを参照して下さい。
2件目以降とはどういう条件で判断するのでしょうか。 >K=2または3と、K=6または7 とありますが、Sが重複しているレコードのうちどれでもいいということですか？ とりあえず、Sが重複していてKが一番小さいレコードのみを残すSQLであれば delete from T a where exists ( select * from T b where a.S = b.S and a.K > b.K); という感じになると思います。 提示のデータであれば、Kが3、7のレコードを削除します。 やりたいことと違うようであれば、もう少し具体的に条件を提示してください。
SQLを少し直せば、質問に記載の考え方でもいいと思います。 select data from (select data from t where key < '003' order by key desc) where rownum = 1 union all select data from (select data from t where key >= '003' order by key) where rownum <= 2; もしくはnot existsを使って、 select data from t a where key = '003' or not exists ( select * from t b where (a.key < '003' and b.key < '003' and a.key < b.key) or (a.key > '003' and b.key > '003' and a.key > b.key) ); とかでもいいかもしれません。
すべてのソフトウェアは無償でダウンロード可能で、それらには「開発者ライセンス」が付属していて自己学習の目的に限り使用可能と記載されています。 http://www.oracle.com/technetwork/jp/indexes/downloads/index.html ですので、試験対策の学習ということであれば問題無いと思います。
select コード,SEQ, ( select flg from tbl t2 where t1.コード=t2.コード and t2.SEQ=1 ) FLG from tbl t1 の要領でいけると思います。 (コード,SEQ,)で一意になるのなら主キー設定したほうがいいでしょう。
connect_by_root演算子で最上位の値を取得できます。 SELECT CASE WHEN LEVEL = 1 THEN OYACD ELSE CONNECT_BY_ROOT KOCD END OYACD ,KOCD FROM TBL1 START WITH OYACD = 0 CONNECT BY PRIOR KOCD = OYACD; としてみてください。 最上位の場合はOYACDをそのまま出力するようにするために、LEVELを使って判断しています。 すでに読んでいらっしゃるかもしれませんが、こちらが分かりやすく解説してくれていると思います。 http://codezine.jp/article/corner/301
実行はできますが ・更新（コミット）以前の古い統計情報を取得することになる。 ・更新処理が書き込んでいるUNDO表領域を読み取りにいくのでI/Oの競合が発生する。 ので、注意が必要です。
ここに投稿する意味がわかりません。 さっさとサポートに連絡すれば？ 向こうで調べてくれます。
下記の手順でよいのでは。 ---- [コンパネ]-[管理ツール]-[データソース(ODBC)]からODBCの設定 （ドライバの選択で"Oracle in instantclient10_2"を選択) AccessにてODBCを使用
Oracle9iには32bit版と64bit版があります。32bit版をインストールするなら変更なしですが64bit版をインストールするなら変更が必要です。 以下を確認してください。 【現行リリースのワード・サイズの変更】97P http://otndnld.oracle.co.jp/document/oracle9i/920/generic/server/J06260-02.pdf 移行ガイドは見ておきましょう。
ノーアーカイブモード前提ですみませんが ・移行先サーバーにダミーのデータベースを構築（データベース名は同一にする） ・移行先サーバーにsql*plusでsysdbaでログインしShutdown ・現行のOracle停止 ・制御ファイル（通常、*.CTL）、データベースファイル（通常、*.DBF）、REDOログ（通常、*.LOG）、初期化パラメータファイルをすべて移行先にコピー ・移行先サーバーでsql*plusから「STARTUP」で起動。エラーメッセージがでたら「RECOVER」を実行。
to_char(to_date('9999/01/15', 'YYYY-MM-DD'), 'YYYY/MM/') でもいいですが、 substr('9999/01/15', 1, 8) の方がオーバーヘッドが軽そうですね。 性能も含めて両方試してみると良いでしょう。
こんな感じじゃダメですか？ （formatの部分はDATE型を6桁または4桁文字列に変換するための書式） update table_b b set 到着日 = TO_CHAR(SYSDATE + 1, 'format') where exists (select * from table_a a where a.伝票No = b.伝票No and a.発送日 = TO_CHAR(SYSDATE, 'format')); update table_a set 到着日 = TO_CHAR(SYSDATE + 1, 'format') where 発送日 = TO_CHAR(SYSDATE, 'format') and exists (select * from table_a a where a.伝票No = b.伝票No); commit/rollback; 何らかの理由で冗長なレコードを持っているなら トリガーを実装すべきだとは思いますけどね。
SPOOLは、SQL*Plusの命令なので SQL*Plusを使わずに実行している >Ａｃｃｅｓｓからコール のときは使えません。 >UTL_FILEを使うしかないのでしょうか？ その通り、UTL_FILEを使ってください。
「複数のキーの中でひとつだけ違うレコード」 これはどういう意味でしょうか？ 複合キーを構成する列のうち一つだけ違うというものでしょうか？ 出来ないことはないと思いますが4列でも ( A.フィールド１=B.フィールド１ AND A.フィールド2=B.フィールド2 AND A.フィールド3=B.フィールド3 AND A.フィールド4<>B.フィールド4 ) OR ( A.フィールド１=B.フィールド１ AND A.フィールド2=B.フィールド2 AND A.フィールド3<>B.フィールド3 AND A.フィールド4=B.フィールド4 ) OR ( A.フィールド１=B.フィールド１ AND A.フィールド2<>B.フィールド2 AND A.フィールド3=B.フィールド3 AND A.フィールド4=B.フィールド4 ) OR ( A.フィールド１<>B.フィールド１ AND A.フィールド2=B.フィールド2 AND A.フィールド3=B.フィールド3 AND A.フィールド4=B.フィールド4 ) のような述語が必要になりますね。 あと、「あ」「」い」「う」で「あ」「い」だけ抽出するという基準はなんなのでしょうか？（抽出するレコードの優先順位）
> 同じタイトル・同じバージョンのOracle University Live Virtual Classも対象となります。 http://education.oracle.com/pls/web_prod-plq-dad/db_pages.getpage?page_id=244&p_org_id=70&lang=JA#5 > Oracle University eKit は、iPad でも閲覧可能です。 http://education.oracle.co.uk/html/oracle/70JA/ILO.htm とのこと。 希望の時間帯で実施されているコースをご自身で探したり，Oracle側に問い合わせてみてはいかがですか。 ---------------- 以下，直接の回答ではありません，悪しからず。 私個人の考えですが，Oracle MASTER Gold の履修コース修了要件を会社補助金なしでクリアしようなんて，酔狂な人だと思います。Bronze合格の段階ですでに知識レベルはクリアしている「入門 SQL基礎 I」だって履修コースとして認められるのですよ。ですから，コース受講料として支払われる20万円以上のカネは，Goldレベルの技術知識の持ち主であることを示すために必要なのではなく，Oracleブランドで商売をしたい者に対するミカジメ料・Oracleに対する忠誠心を示すための貢物だとでも捉えた方がいいでしょう。 企業がそのブランド価値をカネで買おうとするのは分かります。でも，個人が技術者としてそれをするのは解せません（20万円が小遣い金程度に思えるお金持ちなら話は別ですが）。 別の言い方をしてみます。 もしも私の会社に，Gold履修コース修了要件の20万円以上のカネを自分のポケットマネーで出しました，という人が入社応募してきたなら，その人にPCと Oracle Databaseを与えて実機でのOracle管理の実力を試したくなります。もっとありていに言うと，資格マニアか経験豊富な実力者か，20万円以上を注ぎ込んだGold様の実力を見せていただきましょうか，といったところです。 個人で勉強しているのなら，そんなことに20万円以上のカネを注ぎ込むのは無駄，もっと有意義な勉強のために20万円が使えるはず，というのが正常の感覚なはずです。 私は，「Gold DBA科目には合格していますが，個人受験なので履修コースに20万円以上のカネを注ぎ込めず，資格としてはSilverです」と堂々と言える人の方が，その金銭感覚を信用できますし，資格を神格視しないビジネス感覚も信頼できます。
キーボードの左上の半角キーを押す 戻すときはキーボード中央の変革キーの 右隣を押す
テスト環境が手元にあるようなら実際に試した方が話が早いでしょう。 SELECT COUNT(*) FROM テーブルA,テーブルB WHERE テーブルA.会社ＣＤ = テーブルB.会社ＣＤ AND テーブルA.型式ＣＤ = テーブルB.型式ＣＤ AND テーブルA.区分 = '1' AND テーブルB.種別 = ' ' ;
記載のテーブルと質問内容の関連がわかりづらいのですが・・・ 月売上TRは稼働区分が設定されていますが、すでに存在するテーブルなのですか？ それとも別のテーブルを基にこのデータを抽出したいということですか？ >・休業MTの休業区分 = 09 且つ その休業日合計が同月内で7日以内場合に稼動タイプにフルを適用。 >・休業MTの休業区分 = 03 である限り、同月に何回休業してもフルを適用 これらはどちらが優先されるのでしょうか？ 記載の休業MTを、店舗CD：AAA・年月：201103で見ると 休業区分：03で休業日数：14、休業区分：09で休業日数：1 のデータが取得できることになります。 この場合はどうなるのでしょうか？記載の月売上TRでは"特殊"となっていますけど。 また、休業MTの開始日と終了日が月またぎになっていることはないのでしょうか。 それによって休業日の計算のしかたが全然ちがってくると思います。 もうちょっと正確な情報を教えていただけますか？ また、CASEやEXISTSをどこでどう使おうとしているのでしょうか。 うまくいかないというSQLも記載できますか？
＃１ですが、実務で実際に行ってること（考え方）を回答したんだけど。 レスが何もないということはあまりお困りではなかったのかな？ selectの結果が１０００行なら、hogehoge.sqlの中身に１０００行のUpdate文が作成されるんですよ。 update 会員マスタ set flg = '1' where 会員ID ='0001'; update 会員マスタ set flg = '1' where 会員ID ='0002'; update 会員マスタ set flg = '1' where 会員ID ='0003'; のように。
OS、Oracleのバージョンが分かりませんが11ｇなら Oracleを再インストールして起動します。 sysdba権限のユーザー（sysとか）でログインし「SHUTDOWN IMMEDIATE」し、元のOradata\インスタンス名内にある*.CTL,*.DBF,*.LOGファイルをコピーして、「STARTUP」で起動出来れば成功です。 11gR2だとflash_recovery_area\インスタンス名\内にもCTLファイルがありますのでこれもコピーすればいいと思います。
Updateしてないようですけど。 CURSOR CURSOR1 IS SELECT * FROM T_テーブル FOR UPDATE; として、 REC_CURSOR1.カラム := HIGH_VALUE_WORK; ではなく、 UPDATE T_テーブル SET .カラム = HIGH_VALUE_WORK WHERE CURRENT OF CURSOR1 ; では
>>１．オラクルマスターブロンズは短期間集中的に勉強すれば合格する資格なのか。 人によるでしょうが、データベースと言う単語を知ったというレベルなら、半年くらい勉強が必要かもしれません。もちろん記憶力が強くて、試験勉強（一夜漬け？）が得意な方であれば、もっと早いかもしれません。ただ、オラクルの試験は、「単なる試験勉強が上手なだけの人は合格させない」という方針だと推測していますので、短期集中の試験勉強ではなかなか合格できないようにしていると思います。 >>２．合格するためには、どの程度の知識を身につけなければならないのか。 黒本に書かれたレベル＋アルファではないでしょうか？実際の試験では、「こんなの黒本の問題になかったよ！」という問題が出ると思いますからね。 >>（３．会社の意図は何か・・・） そりゃあ、質問者さんの会社が他社から仕事を獲得するとき「当社にはオラクルマスターが○○人います。技術力については安心して仕事をまかせてください。（そのかわり単価はちょっと高いですよ！）」とアピールできるようにするためでしょう。 ただ、昔に比べて、オラクルもＳＱＬＳｅｒｖｅｒのように、とりあえず簡単に使えるように改善されてきていますし、ＭｙＳＱＬなど他のフリーなデータベースも十分に使えるレベルになってきてますから、オラクルマスタに対する市場評価は、昔ほどは高くないかもしれません。 データベースの専門月刊誌であったＤＢマガジンもしばらく前に休刊になりましたし・・・。
こんにちわ > コラムのタイトルが表示されなくなってしまいます。 $ORCLE_HOME/sqlplus/admin/login.sql でPAGESIZE が0 に 設定されていませんか？ PAGESIZE が0に設定されている場合、ヘッダ情報は出力されなかった 筈です。 PAGESIZE が0に設定されていない状態でタイトルが表示されない 状況が再現するのであれば、show allの結果を教えて下さい。
こんな感じですかね。 SELECT A.ID, A.Name AS レストラン名, A.ZipCode AS 郵便番号, A.Prefecture AS 都道府県, A.City AS 市区町村, A.StreetAddress AS 町名番地, A.PhoneNumber AS 電話番号, B.Name AS 最寄駅, C.平均評価 FROM tbl_restaurant A LEFT JOIN tbl_station B ON A.NearestStation = B.ID LEFT JOIN (SELECT RestaurantID, AVG(Gradings) AS 平均評価 FROM tbl_gradings GROUP BY RestaurantID) C ON A.ID = C.RestaurantID;
>最新の日付が当月の場合はデータを残す。 >つまり、前月以前のデータは除外となります。 別に最新にこだわる必要はなく（当月のデータが１件でもあれば最新じゃなくても条件成立のため） 補足の Select ＊ from aテーブル a where not exists (select 'X' from bテーブル b where a.商品番号 = b.商品番号) and not exists (select 'X' from cテーブル where (a.商品番号 = c.商品番号) and /* ここから */ (select to_char(to_date(max(c.日付),'YYYYMM'),'YYYYMM') ,'YYYYMM') < to_char(to_date(to_char(sysdate,'YYYYMM'),'YYYYMM')-1 ,'YYYYMM') の /* ここから */以下を、 to_char(to_date(c.日付,'YYYYMM'),'YYYYMM') < to_char(to_date(to_char(sysdate,'YYYYMM'),'YYYYMM')-1,'YYYYMM') ) としても取得できます。但し、負荷が高い、レスポンスが悪いかな。 and a.商品番号 not in (select distinct 商品番号 from cテーブル where trunc(日付,'MM')>=trunc(sysdate,'MM') ) か and not exists (select 'X' from cテーブル where c.商品番号 = a.商品番号 and c.日付 = (select max(c2.日付) from cテーブル c2 where c2.商品番号 = c.商品番号) and trunc(c.日付,'MM')>=trunc(sysdate,'MM') ) あるいは and not exists (select 'X' from cテーブル where c.商品番号 = a.商品番号 and c.日付 = (select max(c2.日付) from cテーブル c2 where c2.商品番号 = c.商品番号 and trunc(c2.日付,'MM')>=trunc(sysdate,'MM') ) か。 どれが早いかは、抽出された結果の商品番号の件数やaテーブルの件数等に依存しますので 良く分かりませんが。
基本は次のとおりです。 レストランテーブル （レストランID，レストラン名，住所，電話番号，営業時間） ユーザテーブル （ユーザID，ユーザ名） 評価テーブル （レストランID，ユーザID，評価） 平均値はDBに格納せず，SELECT検索のたびに AVG(評価) 集約関数で計算させて出力します。ユーザは特定の３人に限定せず，多数のユーザが投票してもその評価の平均を出力することができます。 この設計で運用を進めてみて，「使用しているサーバの性能があまり高くなく，テーブルを結合したり AVG(評価) 計算していると時間がかかることが分かった」ということが判明したのであれば，この基本の正規形をあえて崩すことは検討するかもしれません。
いまいちルールがわかんないんだけど、 > ２．次に、取得したF_2のXXX・DDDを条件に、F_1のDDD、F_2のYYYを取得します。 XXXはどう条件に絡めてるの？？ 末端が欲しいなら select F_1, F_2 from ( select F_1, F_2, Level, connect_by_IsLeaf as isLeaf from TBL start with F_1 = 'AAA' connect by F_1 = prior F_2 ) where isLeaf=1 一番深いとこが知りたいなら select F_1, F_2 from ( select F_1, F_2, Level from TBL start with F_1 = 'AAA' connect by F_1 = prior F_2 order by Level desc ) where rownum=1 かな？
補足を読んだ感じですと 履修したものがどのような期間と順番で進んでいくのかが はっきりわかりませんが もしデータベースに関するプログラミングの修得も見据えて 履修課目を考えるならば どんなプログラミング言語でも 先にデータベースに関する知識をもったうえで履修するほうが 圧倒的に理解しやすいです わたしの場合はデータベースの知識があまりない状態で データベース系のプログラミングをさせられ あわてて勉強をして苦労をした経験があります 一応参考までに・・・
インラインビュー（サブクエリ）を作り別名を付ければ通りますよ。
「CREATE DATABASE LINK」でデータベースリンクを作成すれば可能だと思います サーバー1上で 「CREATE DATABASE LINK link2 CONNECT TO ユーザー名 IDENTIFIED BY password USING 'サービス名' 」 を実行しデータベースリンクを作成し http://download.oracle.com/docs/cd/E16338_01/server.112/b56299/statements_5005.htm FROM テーブル名 INNER JOIN テーブル名2@link2 on テーブル名.項目名 = テーブル名2@link2.項目名 でJOINできます。
なぜPL/SQLでやろうとしたのでしょうか？ UPDATE トランT SET 店舗区分１ = 2 WHERE EXISTS ( SELECT 1 FROM マスタT WHERE トランT.取引先=マスタT.取引先 AND トランT.年月 BETWEEN SUBSTR(マスタT.開始日,1,6) AND SUBSTR(マスタT.終了日,1,6) ) ではダメですか。
前方一致ならインデックスが効くと思います。 当然、DBMSがそのインデックスを使用する実行計画を選択した場合ですが。 2回SELECTした場合はディスク走査が2回になりそうです。 厳密に言えば、クエリーのパース時間も2回分になるでしょう。 LIKE 'A%' OR LIKE 'B%'の場合はディスク走査はおそらく1回で済みそうです。 キャッシュやバッファ等もあるので、2回実行するからといって、純粋に時間も2倍とはならないでしょうが、LIKE条件をORで結合したほうが速そうな印象はあります。 いずれにしても、現在のサーバー性能で数万件程度のデータ操作なら、大差はないと思います。 ただし、ループ内で実行する等、高頻度で実行するのなら、小さな差も無視できません。 どうしても白黒つけたい場合、想定データ量も分かっているようですし、自分ならテストデータを作って試してみます。一応の根拠にはなりますよね。
VB6を使って、ということではないのですが以下のSQLを実行すればいいのではないかと思います。 UPDATE Aテーブル A SET ｃｄ３ = 0 WHERE NOT EXISTS ( SELECT * FROM Bテーブル B WHERE A.ｃｄ１ = B.ｃｄ１ AND A.ｃｄ２ = B.ｃｄ２);
SELECT ... FROM ... GROUP BY ... ORDER BY ... ; といったSQL文が、Oracle9i の場合には ORDER BY 句を省略していてもそれなりに動いていました。 Oracle10g では ORDER BY 句を省略すると並び順が異なります。
PL/SQLプログラムを解析する時点で テーブルが存在しないからエラーになります。 （エラーメッセージのとおりです） INSERT文も動的SQLにしてください。
set define off とりあえずですが。 http://www.google.co.jp/search?hl=ja&q=sqlplus+%E7%BD%AE%E6%8F%9B%E5%A4%89%E6%95%B0+%26%26&lr=lang_ja#hl=ja&lr=lang_ja&tbs=lr:lang_1ja&q=sqlplus+%E7%BD%AE%E6%8F%9B%E5%A4%89%E6%95%B0+%26%26+define&aq=f&aqi=&aql=&oq=&pbx=1&bav=on.2,or.r_gc.r_pw.&fp=5f1bf2a137025a2&biw=985&bih=941
WINDOW関数が使えるなら SELECT 社員番号, 社員名, 日付, 順序 FROM ( SELECT *, ROW_NUMBER() OVER( PARTITION BY 社員番号 ORDER BY 順序 DESC ) RN FROM テーブル ) WHERE RN = 1 ORDER BY 社員番号;
select max(case when rnum = 1 then キー番号 else null end) キー番号1 ,max(case when rnum = 1 then 内容 else null end) 内容1 ,max(case when rnum = 2 then キー番号 else null end) キー番号2 ,max(case when rnum = 2 then 内容 else null end) 内容2 ,max(case when rnum = 3 then キー番号 else null end) キー番号3 ,max(case when rnum = 3 then 内容 else null end) 内容3 from ( select キー番号,内容, row_number() over(order by キー番号) rnum from テーブルＡ where 利用フラグ = 1); みたいなことでしょうか？ 質問の際にOracleのバージョンも書いたほうがいいですよ。 このSQLも古いバージョンでは動かないので。
osamuyさんの回答のとおり、まず提示のSQL自体が期待する結果にならないですよね。 「T1」＆「OP123」と「T5」＆「A7777」を抽出する条件を再度明確にしてもらえますか？ >棚コードが主キー、商品コードが副キーとしたときこの組み合わせ 明らかにこれは違いますよね。
エスケープ文字を ^ にしたら 文字の ＾ は ^^ で表現します。 <例> ＾で前方一致検索 SELECT NAME FROM EMPLOYEE WHERE NAME LIKE '^^%' ESCAPE '^'
#2 です。 因みに、そのPL/SQLから切り出す（実行計画を取りたい）対象のクエリが沢山あるなら、SQLトレースの方が遥かに楽です。 autotraceと同様に、ただ単に、実行するだけなので。 そして正確です。 PL/SQLからクエリを切り出すと言う事は、バインド変数・置換変数（リテラル）による実行計画の差異を気にかけて実行計画を取る必要があります。 （そこをカバーできるようにSQLを書き換える必要がある） SQLトレースは、PL/SQL内で実際に実行されたクエリ、そのものの実行計画なので、正確、と言うわけです。 サーバー側での作業が必須であり、そこの工数（ってほどでもないけど）とのトレードオフですね。 一回、定常的なスキームにしてしまえば、それほど手間ではありません。
Chronos198さんの回答以外のやり方も。 not existsを使って select 品目,番号,日時,数量 from 作業 a where a.番号 >= 17000 and not exists( select * from 作業 b where a.番号 > b.番号 and b.番号 >= 17000); とか、バージョンが明記されていませんが、row_number関数が使えるなら select 品目,番号,日時,数量 from ( select a.*, row_number() over(order by 番号) rnum f rom 作業 a where 番号 >= 17000) where rnum = 1; というのもありますね。
見やすいように、1バイト空白2個を2バイト空白に変換しました。 【9i】 SELECT STATEMENT REMOTE　 Cost = 2933 　SORT UNIQUE　 　　FILTER　　 　　　NESTED LOOPS　　 　　　　NESTED LOOPS　　 　　　　　HASH JOIN　　 　　　　　　TABLE ACCESS FULL テーブルA　 　　　　　　INDEX FAST FULL SCAN PK_テーブルB UNIQUE 　　　　　TABLE ACCESS FULL テーブルA　←　問題はここ 　　　　INDEX UNIQUE SCAN PK_テーブルB UNIQUE 　　　INDEX UNIQUE SCAN PK_テーブルB UNIQUE 【10g】 SELECT STATEMENT REMOTE Cost = 180 　SORT UNIQUE 　　TABLE ACCESS BY INDEX ROWID テーブルA TABLE 　　　NESTED LOOPS 　　　　NESTED LOOPS 　　　　　NESTED LOOPS ANTI 　　　　　　HASH JOIN 　　　　　　　TABLE ACCESS FULL テーブルA TABLE 　　　　　　　INDEX FULL SCAN PK_テーブルB INDEX (UNIQUE) 　　　　　　INDEX UNIQUE SCAN PK_テーブルB INDEX (UNIQUE) 　　　　　INDEX RANGE SCAN PK_テーブルB INDEX (UNIQUE) 　　　　INDEX RANGE SCAN テーブルA_IDX01 INDEX NESTED LOOP JOINの中にテーブルAのFULL SCANが入っています。 これではコストが高くなって当然です。(テーブルAがかなり小さいなら別ですが） 疑問なのは10gで該当する部分が「INDEX UNIQUE SCAN PK_テーブルB INDEX (UNIQUE)」になっていてテーブル名も違います。 失礼ですがコピーする際にミスはありませんでしたでしょうか。 解決の方向としては、実行計画の「TABLE ACCESS FULL テーブルA」を「INDEX SCAN」に変えることです。 これ以上は実際のSQLと作成されているINDEXの情報がないと困難です。 情報の補足をお願いします。
書けなくはないですが…… SELECT YMD, LTRIM(SYS_CONNECT_BY_PATH(HIN, ' '), ' ') AS HIN FROM ( SELECT YMD, HIN, COUNT(*) OVER (PARTITION BY YMD) AS cnt, ROW_NUMBER() OVER (PARTITION BY YMD ORDER BY HIN) AS rn FROM TBL ) WHERE LEVEL = cnt START WITH rn = 1 CONNECT BY PRIOR YMD = YMD AND PRIOR rn = rn - 1
http://download.oracle.com/docs/cd/E16338_01/server.112/b56311/toc.htm にある各種パラメータを定義するファイルです。 ただ、多くが既定値で動作しますし、現在はSPFILEでの運用の方が普通だと思います。 静的な初期化パラメータファイルはSPFILEのバックアップ用に作成したりしてます。
こんなのはどうでしょうか？ select a.bangou || '-' || b.bangou from(select a.bangou,row_number() over(order by a.bangou) rbangou from tbl a where not exists(select * from tbl b where a.bangou - 1 = b.bangou)) a left join (select a.bangou,row_number() over(order by a.bangou) rbangou from tbl a where not exists(select * from tbl b where a.bangou + 1 = b.bangou)) b on (a.rbangou = b.rbangou);
SQLServerのテーブル変数をよく分かっていないので外れているかもしれませんが、 コレクション http://download.oracle.com/docs/cd/E16338_01/appdev.112/b56260/composites.htm や カーソル変数 http://download.oracle.com/docs/cd/E16338_01/appdev.112/b56260/static.htm#i7106 ではダメでしょうか？
こんにちわ。 > Windowsの標準機能のバックアップ(バックアップデータには、system stateも > 含んでいます。)からバックアップしておいたデータを復元させました。 このバックアップが、データベースのバックアップとして使用できない方法で 取得された可能性があります。 このバックアップはどのように取得されましたか？ データベースのバックアップ方法は、大きく以下の2通りです。 ・DB を停止して全データファイル, 制御ファイル, Redo Log ファイルをバックアップする。 ・アーカイブ運用している前提で、Alter tablespace ～ begin backup を行い 　対象表領域をOS コマンドでコピーする。 OS コマンドでのコピーが完了したら、Alter tablespace ～ end backup を行う。 こういった事をせずに、データベース運用中にデータファイル等を単にコピー しただけでは、バックアップとして使用できません。 D ドライブに、全てのデータファイル, 制御ファイル, Redo Log ファイルが格納 されていて、C ドライブ障害時のD ドライブの内容が全てのこっているのであれば、 それらを全て復元してインスタンスを再起動すれば、インスタンス・リカバリが 行われてデータベースがオープンできる可能性があります。
現在のシェルがsh,bsh,bashのborn shell系でしょう。シェルプロンプトが$なので。 実行しようとしているget_daisya.cshは名前からしてcshの記述なのでしょう。 get_daisya.cshの先頭が #!/bin/csh となっていますか？ま、実行するときに csh ./get_daisya.csh としてみてください。 /bin/lsはbsh系とcsh系で動きが違いますから 現在のシェルと違うシェルを前提にしたシェルスクリプトの実行は気をつけてください。 私の回答が何のことか理解できないなら、まず、シェルの違いから勉強してください。
> このレジストリの設定を変更できない場合は権限の問題でしょうか? そうだと思います。
SELECT BLOCKS * BLOCK_SIZE /1024/1024/1024 GB_SIZE FROM V$ARCHIVED_LOG; ですかね
startup upgrade で起動するとどうでしょうか。 また、alert.logは確認されましたか？
インストーラーのエラーメッセージやエラーログを確認してはいかがですか。
データの内容がわからないのではっきりとはいえませんが、 データの内容によっては、質問のSQLはまずいです。 商品コード,日付 101,5/5 102,5/6 103,5/4 とあると、102しかとってこないのでは？ 普通は、 SELECT 商品コード FROM 商品テーブル X WHERE 商品コード IN (101, 102, 103) AND 在庫区分 = '0' AND 日付 = (SELECT MAX(日付) FROM 商品テーブル Y WHERE X.商品コード = Y.商品コード AND Y.在庫区分 = '0' ) とします。 で、もう１点問題があって ランク の部分です。 商品コード,日付,ランク 101,5/5,3 101,5/6,2 とあるとどちらを優先ですか？ このパターンがないとして、 商品コード,日付,ランク 101,5/5,3 101,5/5,2 101,5/5,1 のようなデータが入っているので、 最大の日付を優先とすると、 AND X.ランク = (SELECT MAX(ランク) FROM 商品テーブル Z WHERE X.商品コード = Z.商品コード AND Z.在庫区分 = '0' AND Z.日付 = (SELECT MAX(日付) FROM 商品テーブル Q WHERE Q.商品コード = Z.商品コード AND Q.在庫区分 = '0' ) ) とでもしますか。 別の方法 SELECT X.商品コード FROM 商品テーブル X, ( SELECT 商品コード,MAX(日付) as 日付 FROM 商品テーブル WHERE 商品コード IN (101, 102, 103) AND 在庫区分 = '0' group by 商品コード) Y, ( SELECT 商品コード,日付,MAX(ランク) as ランク FROM 商品テーブル WHERE 商品コード IN (101, 102, 103) AND 在庫区分 = '0' group by 商品コード,日付) Z WHERE x.商品コード IN (101, 102, 103) AND x.在庫区分 = '0' AND x.商品コード = Y.商品コード AND x.日付 = Y.日付 AND x.商品コード = Z.商品コード AND Y.日付 = Z.日付 AMD x.ランク = Z.ランク という方法もあります。 （副問い合わせで抽出された結果のデータ量が多いとリソースを食うし、レスポンスは悪いですが。）
可能かどうか、で言えば可能だと思います。 MDBファイルに書き込む方法については、おそらく質問者様が既にお調べになったのは Oracle Generic Connectivity（ODBC、OLE DBでの異機種接続）を使用する方法だと思います。 この場合、構文は ORACLE の構文になりますが、実行できるのは SELECT/INSERT/DELETE/UPDATE だけです（だったと思います）。 DDLすら実行できないので、当然データベースを作る（新規MDB作成）などは Generic Connectivity ではできません。 PL/SQLで（と言うかストアドで）MDBを作成する方法としては、 (1)Javaストアド (2)COM Automation呼び出し (3)外部プロシージャ呼び出し などが考えられます。 (1)はJava＋JDBCでソースを書く必要があります。 (3)はC/C++でソースを書く必要があります。 VB、VBA、VBSなどで CreateObjectを使った事があるなら、(2)のCOM Automation呼び出し（ORDCOMパッケージを使用）が一番やりやすいと思いますね、個人的には。 と、ここまで読んで何となく、おわかりかと思いますが、かなーり大変です。 異機種接続やCOM呼び出しでハマッた私が言うのですから、間違いありません。 単体テストレベルまで行き着くのもそれなりに大変ですが、仮にできたとしても、運用フェーズで、おそらくゲッソリするようなトラブルに見舞われる可能性が高いです。 しかもサポート（に入っていたとして）に聞いても、余り正確な解答が得られない事も考えられます。 ODBC、OLE DBでの異機種接続やCOM呼び出しなんて、実のところ、ORACLEにしてみたら「そんなのスコープ外です！」と言いたいところでしょう。 と、言う事でお薦めのソリューションは、PL/SQLからMDBを作成したり、更新したりはしない、別のアプローチを考える、と言う事です。 そもそも、ORACLEからMDBに書くのではなく、ODBC、OLE DBアプリケーションからORACLE向きとMDB向きの2コネクションを用意して書き込むスタイルなら（つまり逆向きにすれば）何ぼでもサンプルがありますよね。 どうしても、「ORACLEから」にするなら、最悪でも Generic Connectivity までにしておくべきでしょう。 PL/SQLを考えている、と言う事は、その無名PL/SQLなりストアドなりを実行するアプリケーションがあるわけですよね？ 例えば、それがWindowsのバッチであれば、MDBの雛形をコピーするようなバッチなどを用意しておき、PL/SQLの前に実行すればいいわけです。
SQL はSQL_ID とHASH_VALUE でユニークになっていたと思いますが。 HASH_VALUE だけでは衝突の可能性が全くないとは言えないことはご認識の 通りだと思います。 もっとも、そんな簡単に衝突するのであればSHA1やMD5などが役に立たないと いうことにも繋がってくるので、故意に衝突させることは不可能なレベルではありますが。
No.3です。 > Oracle関連の或る入門書の中で、何故か1521番のポート開放の必要性が強調されていました その入門書にどのように書かれているのかわかりませんが、それは「ルーターやファイアーウォールの外からアクセスする場合」という前提条件の上での説明ではないですか? http://otndnld.oracle.co.jp/document/products/as10g/1012/nongeneric/B15831-02/B15831-02.pdf にある正式なインストーレーションガイドでは、「4.7.6 ループバック・アダプタのインストール」にてループバックアダプタのことが書いてありますが、そこにはポート開放が必要だとは書かれていません。また、「付録D ファイアウォール内で開くポート」にて開放すべきポート番号が書かれていますが、そこの図D-1にあるように、ポート1521の開放はLANの外から内部にアクセスする場合に必要となるものです。
一般的に、ループバックとは自分自身に対して接続することを言います。 自分自身に対して接続するので、自分以外の機器(＝外部)と通信することはないかと。 QNo.6710494からの質問っぽいですけど、多分「Microsoft loopback Adapter」についての理解が必要と思います。 http://www.google.co.jp/search?hl=ja&lr=lang_ja&tbs=lr%3Alang_1ja&q=microsoft+loopback+adapter&aq=0c&aqi=g-c10&aql=&oq=micro+loopback 要はDHCPなネットワークだと後でまずいことが起きるかもしれないから、固定的に使えるネットワークを仮想でもいいから準備しておけと。
＞そうです、このポートを使って 誤解をあたえますね。デフォルトでは（インストーラーでは）このポートが指定されている。これは長い間つかわれているので、ほぼ、他の通信ソフトとかぶりません。 かぶる事もあるので、インストールする時に、当然 10101（本当は１万以内、７千以内だっけ？）なんてポートにも変更できます。通常２つのポートを使うので、変えたければ、使用しているポートを netstat , services(file)で確認して、設置するとき又は、管理ツールで変更してください。 まあ、ある意味、永久欠番になっているみたいですね。ほかのソフトで使われている（デフォルト指定）のを見たことがありません（２０年間）。
参考は下記で
存在するかどうかでいいんですね？ SELECT COALESCE(SUM(CASE WHEN 項目名 = C THEN 1 ELSE 0 END), 0) AS ANSWER_1, COUNT(*) AS ANSWER_2 FROM TEST WHERE 項目名 IN (A, B, C) いずれも1以上ならば存在する、0ならば存在しない。
無理です。 業務で、Ｏｒａｃｌｅを使用しています。 Windows７は　ｖｅｒｓｉｏｎ１１しか対応していません。 サーバーが１０ｇでも、クライアントが１１ならば接続可能です。 しいて言えば、バーチャルＰＣで、ＷｉｎｄｏｗｓＸＰなどをセットアップした後、１０ｇクライアントを インストールしてください。 Ｏｒａｃｌｅに関しては、ＯＴＮ－Ｊａｐａｎで、公式ＱＡサイトがありますので、そちらで、情報収集して ください。
環境が無いので試してませんが、こんな感じかな。 SELECT A.キー, 'テーブルＡ' AS フラグ, A.項目1, NULL AS 項目2, NULL AS 項目3, NULL AS 同じキー, NULL AS 同じ値 FROM テーブルＡ AS A UNION ALL SELECT B.キー, 'テーブルＢ' AS フラグ, NULL AS 項目1, , B.項目2, B.項目3, C.キー AS 同じキー, C.項目3 AS 同じ値 FROM テーブルＢ AS B LEFT JOIN テーブルＢ AS C ON B.項目2 = C.項目2 AND B.キー <> C.キー ORDER BY 1, 2, 4 ※テーブルＢにあってテーブルＡに無いものをどうするかは考慮してません。
そのインストーラをどこから入手されたのですか？ インストールガイドなどは付いていませんでしたか？ ちなみにHPのサイトには http://h50146.www5.hp.com/products/software/oe/hpux/developer/setup/oracle.html#10g という文書がありますが。
というか、言われている通り実行パーミッションが無いんじゃないですか？ HP-UXは触ったことないですが、chmodとかで実行パーミッション付けてもダメですかね。
＞Oracleを学ぶ前に何かするべきなのでしょうか RDBMSの意味から調べましょう。 それでわかった事を、同じく、調査しましょう。期限としては１週間ぐらいでわかるような本を借りてくるか、買う。その程度の読み物を読むべきです。 ちなみに”I／O”とはオラクルとは直接関係がありません。IT関連用語です。 と言うことは、他の方もきにしていましたが　SE　なのか？　と言う疑問。とすれば、まずIT関連の用語集を勉強して、IT関連のパスポートを取るのが先。 実は、私も業務用DBの世界に突然入った人間ですが、リレーショナルDBから入るのが、最も懸命であるこは、先んじてわかっていましたが、DB設計者になるわけではないし・・・ と思ったら、たぶん一生理解できません。
SIDはインスタンスの識別子、service_nameはサービス名。 インスタンスとサービスの違いはRAC を勉強されるとよくわかると思います。 サービス名は初期化パラメータのservice_namesで設定します。 設定されていない場合は先述のとおりdb_unuque_name.db_domainになります。 （これが同義と誤解されやすい原因となっているわけですが） ところで、service_namesパラメータですが、複数形になっていることからもわかるように、複数のサービス名をコンマ区切りで指定できるようになっています。 これをこのように使います。 ２ノードＲＡＣ環境で、インスタンス１（SID=hoge1）、インスタンス２（SID=hoge2）があったとします。 ノードを意識することなく接続できるようにするためにクライアント側のtnsnames.oraにはこんな設定を追加します。 HOGE.EXAMPLE.COM (DESCRIPTION = (LOAD_BALANCE = ON) (ADDRESS = (PROTOCOL = TCP)(HOST = host1)(PORT = 1521)) (ADDRESS = (PROTOCOL = TCP)(HOST = host2)(PORT = 1521)) (CONNECT_DATA = (SERVER = DECIDATED)(SERVICE_NAME = hoge.example.com)) ) インスタンス１とインスタンス２のservice_namesパラメータにhoge.example.comを追加します。すると、インスタンス１とインスタンス２にラウンドロビンで接続できるようになります。 ここで、もしtnsnames.oraのservice_name=...がSID=hoge1だったらどうなるでしょう？ インスタンス２のSIDはhoge2ですから一致せず、インスタンス２には接続できず、いつもインスタンス１に繋がってしまいます。 次に、一時的にメンテナンスのためにインスタンス２にアクセスしてほしくないケースを考えます。service_nameであれば、インスタンス２のservice_namesパラメータからhoge.example.comを削除することで（動的に変更できます）直ちにインスタンス１にのみ接続されるようにできます。 ここで、もしORACLE_SIDだったら・・・変更のためにインスタンスの再起動が必要になってしまいますね？ 最後にservice_namesは複数登録できます。３ノードRAC環境において、オンライン処理（service_name=ONLINE）、バッチ処理（service_name=BATCH）があったとします。 バッチ処理は１つのノード（インスタンス１）でのみ処理したいとします。オンライン処理は３つのノードでしたいとします。 そんなとき、service_nameであれば、 ＜＜サーバ側の初期化パラメータ＞＞ 1:service_names = online, batch 2:service_names = online 3.service_names = online ＜＜クライアント側のtnsnames.ora＞＞ オンライン処理 ONLINE.EXAMPLE.COM (DESCRIPTION = (LOAD_BALANCE = ON) (ADDRESS = (PROTOCOL = TCP)(HOST = host1)(PORT = 1521)) (ADDRESS = (PROTOCOL = TCP)(HOST = host2)(PORT = 1521)) (CONNECT_DATA = (SERVER = DECIDATED)(SERVICE_NAME = online.example.com)) ) BATCH.EXAMPLE.COM (DESCRIPTION = (LOAD_BALANCE = ON) (ADDRESS = (PROTOCOL = TCP)(HOST = host1)(PORT = 1521)) (ADDRESS = (PROTOCOL = TCP)(HOST = host2)(PORT = 1521)) (CONNECT_DATA = (SERVER = DECIDATED)(SERVICE_NAME = batch.example.com)) ) と、クライアント側では接続先サーバを気にすることなく構成できますね？ BATCHのノードを１から２にしたい場合の変更はサーバ側のみでできますよね？ serivce_namesの"batch"設定をノード２に移すだけです。
こんにちわ。 > これって両方設定しなくてはいけないのでしょうか？ 接続する対象が特定できれば良いので、どちらか一方で構わないです。 SID指定/SERVICE_NAME 指定でつながったり、つながらなかったりとの 事ですが、つながらない時ってどんなエラーが出ているのでしょう？
Oracle Instant Client を使ってみてはいかがですか。 http://billyboy.blog81.fc2.com/blog-entry-164.html を参考に。 ファイルは予めダウンロードして同じ位置にコピーすれば レジストリのバックアップファイル（*.reg）をダブルクリックすることでODBC設定を読み込むことが可能です。
DATE型ではミリ秒を保持しないので、TO_DATE関数では変換できません。 ですので、TO_TIMESTAMP関数を使えばいいです。 >to_char(to_date(:DENPYO_DATE,'YYYY-MM-DD HH24:MI:SS.000'),'YYYYMMDD') to_char(to_timestamp(:DENPYO_DATE,'YYYY-MM-DD HH24:MI:SS.FF3'),'YYYYMMDD') もしくはSUBSTR関数を使って".000"を除外してもいいと思います。 to_char(to_date(substr(:DENPYO_DATE,1,19),'YYYY-MM-DD HH24:MI:SS'),'YYYYMMDD')
こんにちわ。 >おすすめのツールを教えていただけないでしょうか。 Transaction Generator がお手軽で良いと思います。
可能です。 フィールドリストを ( DENPYO_NO, SALES_QTY, PRICE, SECTION "substr(:DENPYO_NO,1,4)" ) このように定義すればいいです。
長い間使っていますが、出た事ありませんのでわかりませんが、 http://search.yahoo.co.jp/search?b=1&n=10&ei=UTF-8&fr=ie8sc&p=%22Oracle+ODBC%22+%E3%83%9D%E3%83%83%E3%83%97%E3%82%A2%E3%83%83%E3%83%97%E3%81%8C%E5%87%BA%E3%82%8B など、出てくる場合は、初期設定か、エラーの場合ですよね。 違いは、ODBCドライバーが違うのでは？ ユーザーの権利が違うのでは？　（OSでのグループ設定） OSのパッチや、ベンダー製のドライバーなら、バージョンが違うとか、 その辺調べてみましたか？ 同じマシンでおくるなら、タイムアウトなど接続先の問題かと。
こんにちわ。 > 以下のSQLで確認した結果、PCT_USED等が表示されませんでした。 自動空きセグメント管理 (DBA_TABLESPACES.SEGMENT_SPACE_MANAGEMENT='AUTO') の表領域では、PCT_FREE, FREELIST, FREELIST GROUPS は無視されます。 ※ Oracle がビットマップで勝手に管理します。 詳細は、SQL リファレンスでCreate Tablespace を確認して下さい。
#1 のmuyoshidです。 補足＆訂正です。 access のProgram 名は、access.exe じゃなくてMSACCESS.EXE でした。 自セッションのProgram 列の取得は、こんな感じでできます。 select lower(program) from v$session where audsid=userenv('SESSIONID'); 後は、raise_application_error で例外を発生させればOk です。
> Indexを考慮して どのようにというのが欲しかったのかもしれませんね。 例を出して説明してあげるとか。 例えば、列に関数を適用すると索引が使われないとかあるじゃないですか。
>件数が多いとちょっと重くなりそうな気がするのですが 『鈴木（空）』を取得するのが表示上の問題だとすると、 SQLとして本質的なことではないでしょう。 （人間様には必要でも、DBではあずかり知らぬこと） そんな場合、DBには SELECT A.名前, B.所持品 FROM A, B WHERE A.ID = B.ID(+) だけ投げておいて、『鈴木（空）』はフロントエンド側で 何とかする……というのも一つの方法だと思います。 今回は、面白そうなSQLだったので参加しました（笑）。
>Oracleデータベースのパフォーマンスが悪いと相談を受けましたがどういった手順調査 コンピュータが遅い　と言われた時も同じですが・・・・ 基本は下記の２点を「遅い」と発言したユーザに確認し、解決したことを確認させることです。 １．何が遅いのか？ ２．どうなれば満足するのか？ この時クレームを行ったユーザが満足すれば、本当にクレームが解消することになるかということを必ず確認することが必要です。　よくある話は、クレームを言った本人は納得したが・・・実は本当のクレームを言い出した人が裏に居て　その人が満足しないために、上記の１＆２を「ちゃぶ台返し」されることです ^ ^; Oracleなので「xxxという処理が５秒以内」で終了すればOKとか、「xxxというSQLが５秒以内」という感じで誰でも確認できることが重要です。　またネット経由で確認する場合は、ネット環境( 接続速度は100Mbps以上などなど )も明確にすべきです。
ご質問の意図は、単純に SQL Developer や MS-Access や ObjectBrowser 以外のツールを求めている、と言う事でしょうか？ それとも、クライアントのみインストールした状態で使える SQL*Plus 以外のツールと言う事でしょうか？ 前者でしたら、私自身は、SQL Developer か ObjectBrowser、それにSQL*Plusがあれば十分だと思っているので、ピンと来るお薦めは特にないのですが、後者であれば、WEBベースの Enterprise Manager（XEであれば「WEB管理ツール」）が使えます。 ＞OpenOffice（のデータベース）が Oracle社のものになってから結構使えるようになっていたりするでしょうか。 いいえ。Oracleのものになったとは言え、OpenOfficeのデータベース（Base）は原則、HSQLDB です。 XEでもLiteでもありません。 （使う事はできますが）
QNo.6667204の方に回答しましたのでご確認ください。
echo select 'AAA' from dual; | sqlplus -l -s USER/PASS@SID | find "AAA" if %ERRORLEVEL% == 0 ( ～～～ ) かな。
いまいち条件がきちんと理解できていないのですが。 A・Bは全レコード、Cは最大値ということは、取得した全レコードはCの値は同一になるということでいいですか？ それなら、 SELECT A, B, MAX(C) OVER() C FROM TEST WHERE Z = 'xxxxx' AND Y = 'x' AND X = 'Y'; でいいと思います。
制御ファイルのWHEN句では < というオペレータは使えないようですね。 フィールドリストでCASE式を使ってはどうでしょうか。 No_colum "CASE WHEN LENGTH(:No_colum) < 5 THEN LPAD(:No_colum,5,'0') ELSE :No_colum END" という感じです。 桁数オーバーになるレコードはエラーになるので取込まれないと思います。
DBA_TABLES 及び DBA_INDEXES の NUM_ROWS、LAST_ANALYZED の確認でよいと思います。
プロシージャ内でも動的SQLを使えばDDLの実行はできます。試してみてください。 set serveroutput on declare w_str varchar2(1000); begin --TABLE作成 execute immediate 'create table test_table(val varchar2(100))'; --データ投入 execute immediate 'insert into test_table values (:val)' using 'テスト'; --VIEW作成 execute immediate 'create view test_view as select * from test_table'; --VIEWからSELECT execute immediate 'select val from test_view' into w_str; --結果出力 dbms_output.put_line(w_str); --TABLE,VIEW削除 execute immediate 'drop table test_table purge'; execute immediate 'drop view test_view'; exception when others then raise; end; / set serveroutput off ただ、今回の質問はkouta77さんのおっしゃるとおりVIEW動的に作成する意味がよくわかりませんね。 やりたいこと、目的を明確にしてもらうと何かアドバイスできるかもしれません。
「USER_TABLES」「DBA_USERS」にあります。
ORACLEのデータはDB->表領域->データファイル(TEMPファイル)という形で構成されます。 表領域は複数のデータファイルを含むことができ、それぞれ異なる目的に使用されます。 SYSTEM表領域->Oracleの各種オブジェクトを管理するデータが格納される SYSAUX表領域->SYSTEM表領域の補助領域 UNDO表領域->更新処理時の更新前イメージを格納する。表領域内はUNDOセグメントという単位で管理される。 一時表領域->DISKソートなどに使われる。この表領域はDATAFILEではなくTEMPFILEとして作成する。 ユーザー表領域->ここに一般のユーザーデータ、索引データが格納される。格納単位はセグメント（表・索引）->エクステント->ブロックのようになる。 ・PCTFREE ブロックに大してデータが最初に挿入されるときの空き領域の割合。挿入後、UPDATEでデータ長が増える分の余裕が主な用途。これが小さすぎてUPDATEによるレコード長の増加が大きいと別ブロックにデータを移しポインタのみ残す行移行が多発し、アクセスのパフォーマンスが劣化する。 大きすぎても、領域に無駄が生じる（フルスキャン時にはアクセス時間が増大する）。 ・PCTUSED DELETEやUPDATEでブロック内の領域の使用割合が指定された値を下回った場合、INSERT処理の対象ブロックとなる。 大きすぎると実際にはレコードを挿入できないのに、挿入可能対象リスト内に含めて管理しなければならないので負荷が増大する。 PCTFREE+PCTUSED≒100は禁忌。 ・INITTRANS ブロックに対して同時にトランザクションが発生する場合に確保する領域の初期値。 詳しくはこちら http://www.insight-tec.com/mailmagazine/ora3/vol143.html ・SORAGE 記憶特性の記述 INITIAL 表領域内に一つのセグメントが最初にアロケートするエクステントのサイズ。 NEXT INITIALエクステントを使い切った時に次にアロケートするエクステントのサイズ。 MAXEXTENT UNLIMITED 使用するエクステントの数に制限をもたせない（一応2Gだったかの上限はあるけど、事実上無制限） PCTINCREASE 0 NEXTのエクステントを使い切った時にもエクステントサイズを増やさない。NEXTで指定したサイズでアロケートを続ける。 ただし、ここで取り上げられているのはディクショナリ管理方式と呼ばれ、エクステント管理情報を一括してSYSTE表領域で管理される。 そのためSYSEM表領域の肥大やアクセスの集中が起こりやすいので今はローカル管理方式が推奨されている。 CREATE TABLESPACE XXX DATAFILE 'file_2.dbf' SIZE 1G EXTENT MANAGEMENT LOCAL SEGMENT SPACE MANAGEMENT AUTO;
こんな感じでどうですか？ BEGIN 　　　INSERT INTO 　　　　　　M商品単価(品番,商品分類,売上単価,単価実行日,登録日時,登録者) 　　　SELECT 　　　　　　A.品番,A.商品分類,A.売上単価,A.単価実行日,A.登録日時,A.登録者 　　　FROM 　　　　　　tmpM商品単価 A, 　　　　　　(SELECT 品番,MAX(単価実行日) AS MAX_単価実行日 FROM tmpM商品単価 GROUP BY 品番) B, 　　　　　　(SELECT DISTINCT 品番 FROM M商品単価) C 　　　WHERE 　　　　　　A.品番 = B.品番 AND 　　　　　　A.単価実行日 = B.MAX_単価実行日 AND 　　　　　　A.品番 = C.品番 (+) 　　　　　　C.品番 IS NULL; 　　out_val := SQL%ROWCOUNT; END;
気になったので見直してみたら、微妙に違っていました。すみませんでした。 ・LEFT OUTER JOIN は、左から右に評価されるようです。 ・ON の結合条件は、 ( ) で囲みます。（データベースソフトのＳＱＬ解析器によっては省略しても動作することが期待できますが、 ( ) で囲むのが可読性的にもいいと思います） というわけで、 FROM 句を修正するとうまくいくかもしれません。 FROM [p].[Price] TABLE1 LEFT OUTER JOIN [p].[Receive] TABLE2 ON (TABLE2.[Code]=TABLE1.[Code]) LEFT OUTER JOIN [p].[Product] TABLE3 ON (TABLE1.[Code]=TABLE3.[Code]) ところで、なぜ下のように結合しているのですか？ Price -< Receive -< Product 下のようになる気がするのですが・・・？ 私の勘違いでしょうか？ Receive -< Product -< Price
Pieere85さんの回答にあるとおり、バターを取得する条件が不明なのですが、 Bテーブルのseqが一番大きいものと勝手に妄想しました。 select A.品目, B.子品目 from Aテーブル A left join ( select 品目, 子品目 from Bテーブル where seq = (select max(seq) from Bテーブル group by 品目)) B on (A.品目 = B.品目); とか select A.品目, B.子品目 from Aテーブル A left join ( select 品目, 子品目 from ( select 品目,子品目,row_number() over(partition by 品目 order by seq desc) rnum from Bテーブル) where rnum = 1) B on (A.品目 = B.品目); こんな感じでどうでしょうか。 質問の際には使用しているOracleのバージョンを記載した方がいいと思いますよ。
左に文字列を追加するLPAD関数があります。 http://download.oracle.com/docs/cd/E16338_01/server.112/b56299/functions095.htm#sthref1253 SQL*Loaderの制御ファイルのフィールドリストでは関数を使用することができます。 http://download.oracle.com/docs/cd/E16338_01/server.112/b56303/ldr_field_list.htm#i1008150 ですので、 項目名 "LPAD(:項目名,5,'0')" と記述すればいいです。
アクセル・アイと読みます。が、意味は無いのでアクセライでも ライラライでも何でもいいです。 個人的には、うえおあい方が面白かったですね。 あなたの仮の名前をそう付けてるという解が思い浮かびます。 グラフィックが生成された理由は思うがままに書いた。 という想像が出来ました。 うえおいあなら、暗号か何かかなと。 あなたの中でこんにちは、と言う意味なのかもしれません。 グラフィックが生成された理由は、こんにちはのお辞儀を している様子を図示化したものというところでしょうか？
>あれから自分なりに調べたのですが、10g XEで使用できるキャラクタセットは西ヨーロッパ（WE8MSWIN1252）とユニバーサル（ALL32UTF8）の２つだけのようです。 参考までに、SJISで作成することもできますよ。 http://www.betatechnology.jp/pp/index.php?Oracle%20XE ですので、当初はデータベースの文字コードはSJISなのだろうと思ってしまいました。 もう少し早く気づければよかったです。
こちらは参考にならないでしょうか。 http://www.dba-oracle.com/oracle_tips_db_copy.htm imp/expも必要なく、ファイルをコピーするだけで済むので簡単でした。
TESTしてませんが。 --SQL*PlusをSpoolする場合のおまじない set linesize 30000 set heading off set pagesize 0 set trimspool on set colsep | --SQL本体 select a.年度, a.月, a.部署コード, a.商品コード, a.金額, b.累計金額 from 　　( 　　　　select 年度, 月, 部署コード, 商品コード, sum(金額) 金額 　　　　from テーブル 　　　　group by 年度, 月, 部署コード, 商品コード 　　) a, 　　( 　　　　select 年度, 部署コード, 商品コード, sum(金額) 累計金額 　　　　from テーブル 　　　　group by 年度, 部署コード, 商品コード 　　) b where a.年度= b.年度 and a.部署コード = b.部署コード and a.商品コード = b.商品コード order by a.年度, a.月, a.部署コード, a.商品コード ;
UTL_RAW.CAST_TO_RAW関数を調べましょう。
> できれば、Oracle 11gがインストールされた仮想マシンなどが配布されていると > 嬉しいのですが、そういったものは手に入りませんでしょうか？？ そんな便利なものは聞いたことがないです。 > 何度も失敗していますので、確実に構築できる方法があれば、教えていただけます > でしょうか？？ $ORACLE_BASE/oraInventory/logsの中にインストール時のログがあると思うので すが、参照されましたでしょう？　原因を特定でき内容を理解していれば、イン ストール自体は以前のリリースから見ればそれほど難しくないので確実にインス トールできると思います。 11gR1 http://otndnld.oracle.co.jp/document/products/oracle11g/111/linux/E05717-04/toc.htm 11gR2 http://download.oracle.com/docs/cd/E16338_01/install.112/b56275/toc.htm Windowsの場合は Administrator でインストーラを起動して指示に従うだけで問 題ないと思います。仮に前提条件のチェックで引っかかっても無視して進めるこ とができる場合があります。 Linux の場合は結構いろいろやるべきことがあります。 - /etc/redhat-release の書き換え（※） 　OracleはCentOSに対応していないので、インストーラを騙す必要があるかもし 　れません。CentOSのバージョンに応じて以下のように書き換えます。 　Red Hat Enterprise Linux Server release 5.6 (Tikanga) 　Red Hat Enterprise Linux AS release 4 (Nahant Update 9) - ユーザの作成 　マニュアルにも記述がありますがこんな感じ。 　# groupadd oinstall 　# groupadd dba 　# groupadd oper 　# useradd -g oinstall -G dba,oper oracle - ハードウェア要件 　メモリ1GB 以上、ディスク空き容量5GB 程度はないと厳しいと思います。前提 　条件でメモリ、swap要件は無視するにチェックして進めてもインストールでき 　るはずです。 - ソフトウェア要件 　rpm -qa | grep パッケージ名 　でマニュアルに書かれている全てのパッケージがインストールされていること 　を確認します。CentOSインストール時に「今すぐパッケージのカスタマイズ」 　をチェックし、「開発ツール」、「システムツール」-「sysstat」を選択して、 　他のチェックを外さなければ、必要パッケージのほとんどがインストールされ 　ているはずです。 　※開発ツールを後からインストールするのはかなり面倒です。 - カーネルパラメータの構成 　マニュアルの設定例をコピって /etc/sysctl.conf に書き、sysctl -p すれば 　反映されます。 - oracleユーザのシェルの制限 　やらなくても（デフォルト状態で）とりあえずインストールはできると思います。 ざっと書いたので抜けているところがあるかもしれません。詳細はリンクしたマ ニュアルを確認してみてください。
確かに、MySQL にも PostgreSQL にも DBLink に似た機能はあります。 ポスグレは、その名もdblink、MySQLの場合は、ストレージエンジン・・・かなぁ？ （詳しい方は突っ込みよろしく） ですが、ORACLEやMS SQL Serverのように異機種間でのリンクは自分の知る限り、不可だったように思います。 因みに、（こちらはご存知かもしれませんが）ORACLEの場合は、Generic Connectivityと言う機能で、MySQL や ポスグレへのリンクが可能です。 Windowsの場合は比較的簡単に設定できますが、Unix/Linuxの場合は、unixODBCなどを使うのでハマると思います。 （実用的には？？？） ＞また、MｙSQL や PostgreSQL から Oracle へ DBLink する場合、 ＞Oracle のライセンスなどが必要になったりはしないでしょうか？ もし可能だったとしても JDBC thinドライバなど、クライアントライセンスが発生しないミドルウェアでない限り、ORACLEクライアントライセンスが発生します。
なんの問題もなく動きます。 動作保証されていないため、サポート契約を結ぶ場合にはNGですが、その必要性 がない環境の場合はよくつかわれる手段ですし、自分もよくやります。 ただ、最近ではOracle Enterprise Linux が無償で入手できます。OSパッチを当 てる必要がない場合は検討されるとよいでしょう。
No.2です。 2個目のSQLを訂正します。 select テーブルA.区分, テーブルA.コード, 得意先マスタ.名称 from テーブルA --left join 得意先マスタ on テーブルA.コード = 得意先マスタ.コード inner join 得意先マスタ on テーブルA.コード = 得意先マスタ.コード where テーブルA.区分 = 0 union all select テーブルA.区分, テーブルA.コード, 商品マスタ.名称 from テーブルA --left join 商品マスタ on テーブルA.コード = 商品マスタ.コード inner join 商品マスタ on テーブルA.コード = 商品マスタ.コード where テーブルA.区分 = 1; ですね。確認不足で申し訳ありません。
12迄は残すアナウンスが出ているはず。 今現在は動作しているが、～JOINでの記述に切り替える方が良い。
気をつける点を簡単に記載すると、おおよそ以下の項目があります。 (1)ライセンスの確認 　サポートに入っていればバージョンアップは無料です。 　現状を確認しましょう。※購入時の代理店や営業に確認しましょう。 　またバージョンアップパスも確認しましょう。 　8iから10gへ直接アップデート可能か等。 (2)バージョン違いによる動作確認 　バージョンによって動いていたものが動かなくなるケースはあるので、ひと通り動作確認を行う必要があります。 　※バグで動いていたのが、バグが直ってしまい動かなくなることもあります。 　 　クライアントアプリが該当DBバージョンに対応しているかも確認する必要があります。 (3)オブジェクト・データ移行 　ユーザー、テーブル、ビュー、ストアドなどのCreate文の有無。 　※残っていればスクリプトから作成。なければexpでスクリプトを抜き出し。 　データ量と移行に使える時間との兼ね合い。 　データ量から移行時間を計算し、使用できる時間内で移行できるかを計算する。 　出来ない場合はシステム停止時間をのばすなど調整が必要。 　データ移行方法の決定 　・exp/imp 　・CSV等のファイルに落としてからSQL*Loaderで取り込む。 　・DBリンク経由で直接Insertする。 (4)並行稼働の方法 　新旧を比較するため並行稼働を行うことが可能か、また、その方法の決定。 　※そもそも並行稼働が可能か？ 　　ハード購入が出来なくて、同一筐体にインストール？ 　 (5)オプティマイザの違いによるレスポンスの違い 　オプティマイザのバージョン違いにより、レスポンスが低下する可能性があります。 　レスポンスがでなくてロジック自体の見直しが必要になる可能性もあります。 (6)戻し計画 　新環境にしてから業務を行ったがバグ等で旧環境に戻す必要がある際の手順。 ざっと考えただけでこれだけあります。
> ハイパーリンク HTTP経由なら、Tomcatとかのコネクションプーリングとタイムアウト設定を併用するのが普通でしょうか。 後は、Oracle側では共有サーバー構成にして同時接続セッション数を上げておくとか。
NOT EXISTSを使えばいいと思います。 select 営業所,支店,コード,品番 from Table2 where not exists ( select * from Table1 where Table1.営業所=Table2.営業所 and Table1.支店=Table2.支店 and Table1.コード=Table2.コード and Table1.品番=Table2.品番); という感じでどうでしょうか。
SELECT SAGYO_NO,SAGYO_DT,TANTO,NAIYO FROM ( SELECT U.*, RANK() OVER( ORDER BY SAGYO_DT DESC) RNK FROM ( SELECT * FROM (SELECT * FROM テーブルA WHERE SAGYO_NO = '01' UNION ALL SELECT * FROM テーブルB WHERE SAGYO_NO = '01') UNION ALL SELECT * FROM テーブルC WHERE SAGYO_NO = '01' ) U ) WHERE RNK=1;
Viewを作るか、PL/SQLでファンクション作ってSELECT時に使うかですね。 一応、VIEW例 CREATE VIEW 製造VW as SELECT a.日付,b.コード,a.数量 　FROM 製造 a, (SELECT 名前,MAX(コード) コード FROM 品目 group by 名前)　b WHERE a.コード = b.名前
そのデータを1回のSQLで取得するのは不可能に近いと思います。 現実的なやり方としては、 一旦普通に取得したレコードセットを1件ずつ読み、 NULL判定をしながら配列もしくは構造体に入れる方法になるでしょう。 そして出来上がった配列もしくは構造体を基に、 スプレッドに値を出力していけば良いでしょう。
oracleの場合、シーケンスの払い出しはセッション単位に行います。 テーブルのcreate時にデフォルト値に指定は出来ないようです。
batファイルとsqlファイルを作成すればいいと思います。 たとえば、 [test.bat] @echo off rem データベースに接続 sqlplus -l username/password @test.sql rem エラー判定 if %errorlevel% EQU 0 ( echo "OK" ) else ( echo "NG" ) [test.sql] --エラーコード設定 whenever oserror exit -1 whenever sqlerror exit -1 --select実行 select sysdate from dual; --sqlplusを抜ける quit というようなファイルを作って、test.batを実行します。
雰囲気としては merge into table_A dest using ( 　select table_B.col1, table_C.col2 　from table_B 　inner join table_C 　on table_B.col1 = teble_C.col1) src on (dest.col1 = src.col1) when matched then 　--更新処理 when not matched then 　--挿入処理 ; のような感じで出来ます。
まず、クライアントからSQL*Plusなどでサーバー側に接続できている状態である、と仮定します。 （つまり、tnsnames.oraに接続識別子が記載されている状態と言う事です） 接続識別子が TESTDB だとしたらリスナーの稼動確認は、 tnsping.exe TESTDB これでエラーが無ければリスナーはOK。 でもDBサーバーの（インスタンスの正常稼動も含めて）稼動を確認するなら、普通にSQL*Plusで、接続して、 SELECT SYSDATE FROM DUAL; 程度の1文を投げてエラーが無ければＯＫとする、みないな感じでよいと思いますが。
> 昨年実績 NULLIF 昨年実績=BLANKS の項目長の指定がないためです。 CSVデータの場合は「TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'」の指定は項目単位に行う必要はあまりありません。 制御ファイルの内容を OPTIONS(ROWS=500,BINDSIZE=700000) LOAD DATA INFILE '/home/oracle/TEST/00_BIN/YOSAN.csv' TRUNCATE INTO TABLE MT_YOSAN FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"' ( 日付, 店舗コード, 予算 NULLIF 昨年実績=BLANKS, 昨年実績 NULLIF 昨年実績=BLANKS ) にすればロードできます。
こんばんは。 単純に、Oracleが起動していない状態では？ エラーメッセージの内容どおりです。 nolog接続で正常終了させ、起動しなおしてみては？ それでもダメな場合は、オープンできない原因があるはずです。 ディスク領域不足とか・・・。
主キーに重複があるレコードの登録は不可能です。 修正方法としては一番普通なのは、今の主キーに別の列を 追加して複合キーにすることですかね。 CREATE TABLE <表名> ( 列名1 データ型, 列名2 データ型, ... CONSTRAINT [インデックス名] PRIMARY KEY(列名1, 列名2) ); ※列名1：今の主キー ※列名2：今の主キーとセットにすることで、重複をなくすことができるキー 『複合キー』が良くわからない、という場合は、 Google 等でしっかり調べられることをお勧めします。
いきなり出てきたtable_Bが問題ではないかと。 table_Aとtable_BのAddが同じで、かつtable_Bのname=3の条件であれば、 Update table_A Set name=2 Where Add In ( Select Add From table_B Where name=3 ); のような記述になります。
BBBを含むCol1を求めて、そのCol1をふくまない条件を指定すればよいです。 create table TableName ( col1 varchar2(3), col2 varchar2(3) ); insert into TableName values('001', 'AAA'); insert into TableName values('001', 'BBB'); insert into TableName values('001', 'CCC'); insert into TableName values('002', 'AAA'); insert into TableName values('002', 'CCC'); insert into TableName values('003', 'BBB'); insert into TableName values('003', 'CCC'); insert into TableName values('004', 'AAA'); select distinct col1 from TableName where col1 not in ( select col1 from TableName where col2 = 'BBB' ) order by col1; COL1 ---- 002 004
書式 MON はNLS_DATE_LANGUAGEやNLS_LANGUAGEに依存します。 下記のやり方でTO_DATEしてみて変換できるか試してください。 TO_DATE('28-Jul-1948 12:00:00 AM', 'dd-Mon-yyyy HH:MI:SS AM','NLS_DATE_LANGUAGE = American')
select テーブル１.A from テーブル１ where not exists ( select * from テーブル２ where テーブル１.A = テーブル２.A); とか select テーブル１.A from テーブル１ minus select テーブル２.A from テーブル２; という感じでしょうか。
set autotrace on; select /*+ index( sold sold_dateについて作成した降順索引 ) */ sold.* from ( select 検索項目... from sold order by sold_date desc ) where rownum<20; を実行してみてください。通常ならば、ORACLEがどのようにデータを取得しているかが示されます。 ここで、「INDEX FULL SCAN DESCENDING」と出れば、降順索引が使われているという証拠です。 これならば、索引順にデータを取得し20件でSELECT文は終了します。 しつこいようですが、Oracleは通常の「Create INDEX」は昇順で作成され、降順ソートには使われません。索引が降順「CREATE INDEX テーブル名 （ 項目名 desc）」で作成されているか確認してください。
Oracle Database 10g であれば、ON COMMITでの索引同期化が使えるのではないでしょうか。 ON COMMIT での索引同期化は、CREATE INDEX の PARAMETERS 句の SYNC オプションで指定できます。 既存の索引に対しては、 ALTER INDEX <索引名> REBUILD PARAMETERS ('REPLACE METADATA SYNC (ON COMMIT)'); で、同期化モードを変更できます。 これで、元表に対する更新処理が COMMIT されたタイミングで、索引情報も更新されるようになります。 同期化モードを、元の手動に戻すには、 ALTER INDEX <索引名> REBUILD PARAMETERS ('REPLACE METADATA SYNC (MANUAL)'); とします。 ただし、ON COMMIT での索引同期化では、索引が極端に断片化する可能性があります。 Oracle Text では、$I と呼ばれる内部表を用いて索引情報を管理しています。 新規に追加・更新されたレコードの索引情報は、この $I 表に新規に INSERT されます。(UPDATE ではなく、INSERT です。) このため、索引の同期化を繰り返すうちに、索引が次第に断片化していきます。 このあたりの動作は、OTNオンデマンドの「Oracle Text 概要」という資料で説明されています。 http://www.oracle.com/technetwork/jp/content/index-154756-ja.html → http://www.oracle.com/technetwork/jp/content/oracle-text-100927-251051-ja.pdf → p.9「索引メンテナンス ～ 新規文書情報の追加」 索引が断片化すると、検索パフォーマンスが劣化するため、索引の同期化処理は、要件が許す限り、頻度を低くすることが望ましいと考えられます。 また、索引が断片化してしまった場合には、索引を最適化すれば、検索パフォーマンスを回復させることができます。(同 p.10、p.12) テスト環境が無いとのことですが、その気になれば、手元のパソコンにWindows版のOracle Databaseをインストールすることもできるのではないでしょうか。テスト環境であれば、物理メモリが 1 GB もあれば十分です。 なお、テスト目的でのインストールであれば、ライセンス上の問題はありません。実際、「Oracle Technology Network Developer License Terms」には以下のように記載されています。 We grant you a nonexclusive, nontransferable limited license to use the programs only for the purpose of developing, testing, prototyping and demonstrating your application, and not for any other purpose. http://www.oracle.com/technetwork/licenses/standard-license-152015.html 以上、ご参考になれば幸いです。
Windows32bit版 11gR1で 「Provider=OraOLEDB.Oracle」「Provider=MSDAORA」 両方試してみましたが、再現しませんでした（EXCEL2000 VBAからテスト）。 エラーになるSQLは、SQL*PLUSからでもエラーになるのでしょうか？
「BEGIN」はPL/SQLブロックを記述する際の処理の始まりを表すキーワードです。 このキーワードでなにかが出来るということではありません。 Oracleでは「CREATE_FUNCTION」ではなく「CREATE FUNCTION」ですね。 （他のデータベースではそう記述するものがあるのかもしれませんが） これはストアドファンクションを作成する際のキーワードです。 他にもストアドプロシージャがあります。 ファンクションは単一の戻り値があり、プロシージャは戻り値がないという違いがあります。 また、ファンクションやプロシージャをまとめたパッケージというものもあります。 あらかじめデータベースに複数の処理を記述したファンクションなりを保存しておくことで、 クライアントからSQLを何回も発行する必要がなくなりパフォーマンスが上がるなどの利点があります。 SQLファイルに記述してもいいですし、SQL*Plusなどで直接コードを記述することもできます。 >例えば上記のものを使って・・・できますでしょうか？ できます。 簡単なことしか書けませんが、「ストアドファンクション」や「ストアドプロシージャ」などで 検索すると参考になるページが沢山あると思いますので、そちらを見てみてください。
当該エラーメッセージは32ビットアプリケーションから64ビットのODBCドライバを使用した際に 表示される内容ではないでしょうか？ DSNの定義を32ビットのODBCドライバで行う必要があります。 ODBC設定GUIは、スタートメニューにはないので%WINDOWS%Syswow64配下の「odbcad32.exe」を 使用して登録してみてください。
ヒットした順です。ただし、WHERE 句で指定するため、適用される のは ORDER BY 句や GROUP BY 句を適用する前です。 全表走査の場合はブロックの先頭から検索されるのでその順という ことになるでしょうが、結合がある場合は実行計画により内部的に ソートされたり、順不定になるものもあるので、一概には言えませ ん。
以前は63ノードという制限があったと記憶していますが、 最新のリリース（11gR2）ではそれ以上可能になっているかもしれません。
autotrace あたりで自分の意図したとおりのものになっているか確認してみてはどうでしょう? WHERE句が指定されているので、実行計画が等価結合に書き換わっちゃっている可能性があります。 昔、これではまったことがあるので 僕は外部結合するときはWHEREは指定しないようにして ON句で条件を指定するようにしています。 # 個人的にはバグじゃないかと思うんだけど仕様らしい。 たとえば、 WHERE句の条件を(1)あたりに追加してみてうまくいくようならこのケースかなと。
■APPENDで主キー重複が起きるか？ ダイレクトパスロードか否かで、結果が変わります。 LoaderのオプションがDIRECT = TRUE、かつダイレクトモード可能な条件を満たしている場合、ダイレクトパスロードとになります（素晴らしく速い）が、APPENDモードで主キー重複のレコードができてしまいます。 主キーが重複した場合、主キー制約/インデックスが無効状態になっており、INSERT/DELETE/主キーのUPDATEがエラーになってしまいますので、ご注意ください。 その場合は、TRUNCATE　TABLEでいったんデータを消してしまえば、復活できます。 ダイレクトパスロードでない場合のAPPENDモードでは、主キー重複はエラーではじかれます。 ■REPLACEの動き PKが重複するものの入れ替えではなく、まるっと削除してからの追加になります。 TRUNCATEとの違いは、途中でエラーが発生したときにレコードが削除する前の状態に戻る点です。 レコードが消えて良いならTRUNCATEモードのほうが速いですね
>for r_emp in c_1 loop の前で、 out_val := 0; として、 INSERT文の後で out_val := out_val + 1 ; とします。
ちょっと原因が分からないので、 sqlplus接続後のところで、 set echo on spool ログファイル名 を追加して実行して、ログファイルに何が出るか見てみていただけますか？ また、truncate文の後ろに、 select 'OK' from dual; quit; を入れておけば、途中で切断されたのか最後までいったのか分かるかと思います。
どうしても今のストアドプロシジャでしたいなら、 seqD売上台帳 number; と定義して、 fetch cur into cur_rec; exit when cur%notfound; の次に select seqD売上台帳ID.nextval into seqD売上台帳 from dual ; を実行して、 INSERT INTO D売上見通台帳 ( ID,注文主,受注NO,売上日,品番,品名,数量, 登録日時,登録者,更新日時,更新者 ) VALUES ( seqD売上台帳,cur_rec.注文主,cur_rec.受注NO,cur_rec.品番,cur_rec.品名, cur_rec.数量,cur_rec.登録日時,cur_rec.登録者,cur_rec.更新日時,cur_rec.更新者 ) ; としてください。
既に確認されている4 項目の認識で問題ありません。 > ここまでは分かったのですが、主キーとは別で、明示的にユニークインデックスを > 指定する必要性とはなんなのでしょうか？ ユニークインデックスとは制約と思っていただいて構いません。 一意でないデータが入らないことを保証するためのものであり、 索引を付与することではありません。 なので、これは「NOT NULL 制約をなぜ追加しますか？」と いう質問の回答と同じようなことです。 > 主キーとは別で明示的に指定した方が良い場合と、その実例をどなたか > 教えて頂けないでしょうか？ 整合性のチェックをアプリ側で実装するのではなく、DB側にあらかじめ用意された 機能を使うことで開発コストやバグを抑えるといった利点があるでしょう。 ただ、暗黙的に索引が追加されてしまうため、更新時のパフォーマンスが悪くなるとか そういった問題も発生しえるわけです。 これは「参照制約をつけるべきか否か」という質問と同じようなことでしょう。 正規化やDOA の観点からはきっちりと制約を付けることは望ましいけど、 パフォーマンスやメンテナンスの容易さ（※）の兼ね合いが大事ということに なるかと思います。 ※制約がビッシリ存在するとデータを手修正するのが大変ですよね？
大外のSQLのFrom対象は副問い合わせの結果だけなので、そちらです 「内部SQL実行結果を指すemp」ですね というか、外側のSQLから副問い合わせに使用したテーブルの値を指定する事は出来ません from employee emp を emp1、 from ( select name,・・・ ) emp を emp2とした場合、 大外のSQLでemp1.nameやemp1.yearと指定するとエラーが発生します
VIEW同士のUNIONは可能です データ型が一致していない列があるとUNION出来ない、これは書かれている通りです そのようなエラーが発生していたのであれば、そのような理由であると思われます View作成時にデータ型を設定する方法ということですが、 これは普通に明示的に型をキャストすることで可能です 例(NUMBER→VARCHAR2) Create Table TBL_NUM( NUM NUMBER ); Create View VIEW_NUM1 As Select NUM From TBL_NUM; Create View VIEW_NUM2 As Select To_Char( NUM ) As "NUM" From TBL_NUM; Desc TBL_NUM Desc VIEW_NUM1 Desc VIEW_NUM2 VIEW_NUM2.NUM は VARCHAR2型辺りになっているはずです
質問内容に記載の >NOTNULLが”YES”になってしまっています。 この箇所に関しても NULLABLEが”YES”に・・ということだったのですね。 うまくいかないマテビューですが、”AMV_TENCD”と”AMV_WARCD”以外の項目は 外部結合しているテーブルの項目ではないでしょうか？ 該当テーブルがNULLABLE="NO"になっているとしても、 外部結合なのでレコードが取得できないときは当然NULLになってしまいますよね。 ですので、むしろNULLABLE="NO"になっていたら困ってしまいます。 INSERTできなくなってしまいますので。 原因が外部結合であるということを確認するために、いったん全てのテーブルを内部結合にして試してみてはいかがでしょうか。 >昨日は体調不良で昼から寝込んでおり 私も先日インフルエンザにかかってしまいました。 どうぞご自愛ください。
LIKE '0%'とするかSUBSTR(MAIN.店舗コード,1,1) = '0'とか つまり CASE WHEN MAIN.店舗コード LIKE '0%' THEN MAIN.在庫数 　　　 ELSE 0 END as 店舗在庫数, CASE WHEN MAIN.店舗コード NOT LIKE '0%' THEN MAIN.在庫数 ELSE 0 END 倉庫在庫数 か CASE WHEN SUBSTR(MAIN.店舗コード,1,1) = '0' THEN MAIN.在庫数 　　　 ELSE 0 END as 店舗在庫数, CASE WHEN SUBSTR(MAIN.店舗コード,1,1) NOT = '0' THEN MAIN.在庫数 ELSE 0 END 倉庫在庫数
#1です。 OracleConnectionを使うとしてそれが正しいのなら、「Provider=OraOLEDB.Oracle」は不要のようですね。 接続方法は、おそらく、間接的な「Oracle Net Service」経由です。 となると、「tnsname.ora」が怪しいことになります。 「data source=orcl」とされていますが、「orcl」は「tnsname.ora」で「SERVICE_NAME」で定義されていますか。 確認願います。
　ううむ。Windowsなのかな。できればOSの名前（XP Pro、Vista Business、2003 Standard、7 Ultimate x64、2008 R2 Standardなど）と、 http://localhost:8080/apex (127.0.0.1にしてもダメでした。）←localhost:8080にすると「どうなったのか」 という事を書いていただけるとありがたい。 さて、私はOracle 10g Database Express Edition（以下Ora10gXE）をWindowsにインストールした事は無い（←今したけど）ので的はずれな部分があるかもしれないが基本的にfor Linuxと同じだと思うのでチェックするポイントを説明してみたいと思う。 １．Oracle君は8080を待ち受けているか。 コマンドプロンプトを立ち上げて C:\>netstat -anb とするとポート番号8080で待ち受けているプログラムのプロセスID(PID)がわかる。今実際にまっさらなWindows Server 2003 Standard上にインストールしてみるとoracleが127.0.0.1:8080で待ち受けていた。しかもoracle.exeじゃなくてtnslsnr.exeだね。上のコマンドで何も表示されずにC:\>に戻ってくるようであれば8080で待ち受けているプログラムが無いという事だ。さて、今度はタスクマネージャーを開いてプロセスタブにPID列を表示させると先ほど調べた8080を使っているPIDを探す。これがoracle.exeになっていれば問題は別にある事になるが、たとえばtomcat.exeとかそんな風になっていればポート番号の調整を行わなければいけない。 ２．tnslsnr.exeだった場合、または8080を待ち受けているプログラムが無かった場合。 Ora10gXEはapex 2.2というものを内包しており、そいつが8080番でHTTPを待ち受ける訳だが、本当にそうなっているかは以下の方法で調べる事ができる。SQL*PlusなどでOracleにログインし（sysかsystemで入るのが良いかも）、 > select dbms_xdb.gethttpport from dual; 8081 これで上のように8081とか返ってきたら8080の代わりにhttp://localhost:8081/apexもアクセスすれば良い。これで0が返ってきたら、待ち受けを行っていないという事だ。待ち受けさせよう。 > exec dbms_xdb.sethttpport(8081); ３．tnslsnr.exeだった場合、その２。 上の２が全く問題なければそれ以外の要因で繋がらないのだ。たとえばWindows Server 2003などでは規定でInternet Explorerのセキュリティ設定が最高になっており、localhostでさえ（ゾーンがイントラネット）信用しない。まぁここにたどり着いたらかなり症状は重いのでまた質問を投げる方が良いだろう。 ４．tomcat.exeとかだった場合。 上の２の方法でgethttpportを調べ、対処しよう。 　ところで、あまり関係ないがOra10gXEは基本的にOracleServiceXEとOracleXETNSListenerの２つだけで動作するので他のOracle関係は停止しておいた方が問題の切り分けが簡単かもしれない。
(1)と(2)でGROUP BY に入庫数、出庫数まで含めているのは正しいのでしょうか？ 具体的なデータが分からないのでかなり妄想入っていますが、こんな感じのことでしょうか。 SELECT 在庫情報.ID,なんらかのマスタ？？.品番,なんらかのマスタ？？.品名,在庫情報.現在庫数 FROM (SELECT ID,sum(入庫数) - sum(出庫数) 現在庫数 FROM 入庫台帳 INNER JOIN 出庫台帳 ON (入庫台帳.ID = 出庫台帳.ID) GROUP BY ID) 在庫情報 INNER JOIN なんらかのマスタ？？ ON (在庫情報.ID ＝ なんらかのマスタ？？.ID); もうちょっと具体的なデータを書いた方がちゃんとした回答が付くと思いますよ。
oracleのデータベースリンクは「create database link」時点ではユーザー、パスワードの妥当性をチェックしません。 ローカルホストからSQL*PLUSでデータベースリンク作成時のSQL文で使ったユーザ名、パスワード、接続文字列でつながるか確認してみてください。 11gから認証の際の大文字小文字を区別するようになっているみたいですから注意してください。 > なんでSnapshotやマテリアライズドビューなどが存在しているのでしょうか？ Snapshotやマテリアライズドビューはローカルホストにデータがありますから、SQL発行のたびにネットワーク経由でのアクセスが発生しません。 当然、パフォーマンスも向上します。
それは１行だけですか？複数の行でその状態になりますか？ CSVの項目の数だけSQL*Loaderの項目定義がありますか？ 可能ならSQL*Loaderの定義を見せてください。
Windows なら、まずはイベントビューアを確認してください。 http://journal.mycom.co.jp/special/2001/windowsxp-sp/03/005.html
検証できる環境が今ないのですが、カーソルを使わず外部結合を使えばいいのではないでしょうか。 SELECT A.ENCD, NVL(View_GRPCD,0), A.SYOCD, A.URI FROM (SELECT TENCD,SYOCD,SUM(URIAGE) URI FROM TBL_A GROUP BY TENCD,SYOCD ORDER BY TENCD,SYOCD) A left join ( select View_TENCD,View_WRICD,View_GRPCD from (SELECT View_TENCD,View_WRICD,View_GRPCD, RANK()　OVER(PARTITION BY View_TENCD ORDER BY View_YMD DESC, View_GRPCD DESC) w_RANK FROM View ) where w_RANK = 1 ) on View_TENCD = w_TENCD
test01.sqlの最初に set echo on を書いてください。
CREATE DIRECTORY でディレクトリを作成し、GRANTで読み込み権限をユーザーに付与していれば、ディレクトリ名は大文字で格納されているではないでしょうか。 後、CREATE DIRECTORY で作成したのならディレクトリの指定は作成した名前で行います（実ディレクトリィではなく） バイナリファイルをテーブルに格納する例が下記のURLにありました。参考にしてみてください。 http://www.atmarkit.co.jp/fdb/rensai/sqlclinic07/sqlclinic07_1.html
記載されている記述で問題ないように思うのですけどね。 当方の環境（10.2.0.1.0）では正常にロードが完了しました。 データに数字ではない文字列が含まれていたりしませんか？ 質問する際はエラーになった具体的なデータを書いたほうがいいと思います。 回答者が余計な想像をしなくてすみますので。
こういうことでしょうか？ "to_char(to_date(:売上日付,'yyyy/mm/dd hh24:mi'),'yyyy/mm/dd')"
UPDATE文のWHERE句（WHERE文ではなく句です）のEXISTSでSET句と同様のSELECT文を記述するのは、 その条件がないとSET句のSELECT文で取得できるデータがないときに値がNULLになってしまうからです。 今回の場合であれば、WHERE句にはSET句のSELECT文をそのまま記述しなくても WHERE EXISTS( SELECT 'TRUE' FROM TBL02 WHERE TBL02_OKFLG = 1 AND TBL02_TENCD = TBL01_TENCD AND TBL02_REN = TBL01_REN AND TBL02_UPDKBN = 2 ); で大丈夫だと思います。 要はSET句に書くSELECT文で必ず値が取得できる条件を書けばいいです。 >（SELECTの結果をWHERE文の中で簡単に呼び出して使えないのでしょうか？） そういうことは出来ないです。
Oracleにはサーバ版とクライアント版があって、 サーバ版をインストールしたPCとは別のPCからネットワーク経由でOracleを使う場合にクライアント版をインストールします。 あなたのPCが1台だけでOracleを使うなら問題ないです。 CSEもどきなら http://www.oracle.com/technetwork/jp/developer-tools/sql-developer/downloads/index.html
CSV（TSVでも同様）をSQL*Plusでspoolするのに必須と言えるSET文が足らないですね。 set linesize 1000 ライン長を指定しないと、デフォルトでは適当なところで折り返されてしまいます。 1000は1000バイトです。 普通、とりあえず5000くらいにしておきますが、業務要件に則して想定される最大のバイト数を指定してください。 それと、正直、colsep をカンマにしてCSVを作るのはお薦めできません。 （多分、仕事で使っている人は殆どやらないと思います） 面倒くさいけど、カラムを連結する方法が確実です。 ↓ SELECT COL1 || CHR(9) || COL2 || CHR(9) || COL3 || CHR(9)... FROM T_JUTYU; CHR(9) はタブです。 また、上記は、カラムがすべて文字列の場合の例です。 数値や日付がある時は明示的にTO_CHARでキャストしてください。 ↓ TO_CHAR(数値型カラム) TO_CHAR(日付型カラム, 'YYYY-MM-DD HH24:MI:SS')
>・Oracle Database 10g Release 2 (10.2.0.1) >Express Edition for Microsoft Windows をダウンロードするとファイル名が「OracleXE」になってますね。 .exeがないファイル名でダウンしてしまいます。 ダウンロード時にファイル名を「OracleXE.exe」にするか、 ダウンロード後に「OracleXE」を「OracleXE.exe」にRENAMEしてください。
パスワードは２カ所に同じのを入力しますが、間違ってないですか？
No.1です。先ほどのSQLについて少し説明しますね。 1.一番内側のselect文（トランを直接参照していることろ）で、 　「直近３日分を予定欄へセットする」を満たすために、店ＣＤ・区分ごとに日付順でならべた行番号を振ります。 　このとき、実績データ（区分='1'）には1件しかない前提なので必ず1が振られます。 　 2.その一つ外のselect文では、1.で振った行番号が3以下という条件で抽出します。 　これにより、実績データと予定データの直近3件が取れます。 　ここで、区分と1.で振った行番号を使って実績と予定１～３を取得します。 3.そして一番外側のselect文で、マスタと結合して各項目に設定する値を取得しています。 　「実績２を実績３へ、実績１を実績２へ移してから、トランの日付を実績１欄にセットする」とあるので、 　実績１は、2.で実績が取得できていればその値を設定し、取得できていなければ現在の値を再設定(=更新しない）。 　実績２・３は、2.で実績が取得できていればそれぞれ実績１・２を設定し、取得できていなければ現在の値を再設定(=更新しない）。 　予定に関しては、2.で取得した予定１～３をそのまま設定。 という感じです。 内側からひとつずつselect文を実行していくと、やっていることが分かると思います。 もちろん、もっといいやり方もあると思いますが参考にしてみてください。
通常のビューは実態ではなく、データベースからの検索結果を データテーブルのように見せているだけです。当然、全ての参照は 可能であり、１対１でテーブルが結合されたビューならば、ほとんど テーブルと同じ操作ができ、更新や削除、挿入も可能です。 ビューのデータというのは置いてあるものではなく、参照に行ってから 始めて作成されるものです。そのため、パフォーマンスは遅くなります が、常に最新のものが参照されます。 マテリアルビューは実体のあるビューです。これは検索のスピードを 上げるために開発されました。ビューはどうしても複数テーブルを クロス参照するためにアクセスが遅いのです。マテリアルビューは、 ビューで定義されているカラムのデータをキャッシュに書き込むのです。 元のテーブルに変更があるたび、マテリアルビューも更新されていきますが、 そこには遅延が発生することもあります。検索データが最新では無い 可能性もあります。
>UPDATEの方は、UPDATE文を除いてSELECT文では店コードは各１件しか表示されない とのことですが、 最後のWHERE句のところで、トラン.店ＣＤ=マスタ.店ＣＤ　が必要なような気がするのですが。
insert into 売上台帳 (支店コード,受注No,伝票No,品番,品名,数量,オーダー宛先,売上日, 住所,電話番号,更新日時,更新者) select支店コード,受注No,伝票No,品番,品名,数量,オーダー宛先,売上日, 住所,電話番号,更新日時,更新者 from T受信データ where 支店コード = 002 and not exists ( select 1 from 売上台帳 U where T受信データ.受注No=U.受注No) って書けませんでしたっけ。
11gR2は64BitWindowsに対応してますよ
Insert Into TBLA ( Select TBLB.ID, To_Char( ( ( Select NVL( Max( TBLA.SEQ ), 0 ) From TBLA Where TBLA.ID=TBLB.ID ) + Rank() Over( Partition By ID Order By YMD, DATA ) ), 'Fm000' ), TBLB.DATA From TBLB ); キモは矢鱈と長い2行目です。 Select YMD, ID, DATA, Rank() Over( Partition By ID Order By YMD, DATA ) As RANK From TBLB Order By YMD, ID, DATA; を実行してみると、何をしているのか分かり易いかも。 こちら10gの環境しか無かったので9iでは未確認。
こんばんは。 単純に文字列結合して、小さいものを取ればいいのでは？ DATEカラムがDATE型、GYOカラムがNUMBER型と仮定します。 違ってたら、適当に型変換してください・・・。 SELECT * FROM テーブルA WHERE TO_CHAR(DATE,'YYYYMMDD')||RPAD(TO_CHAR(GYO),3,'0') < 同じように変換した、対象データ やってる事は一緒です。 ただ、SQLでやってるだけ・・・。
> CSVの取得はDOSバッチとTeratermのマクロで取得しようと思っています。 windows標準添付のfpコマンドは転送エラーを拾えません。ftpgetとかPerlのNET::ftpかrubyのnet/ftpなら拾えた気がします。 > CSVファイルのInsert処理はPL/SQLで開発を行おうと考えています。 Sql*Loaderを使用しない理由が理解出来ません。Insert処理はSql*Loaderの方が圧倒的に高速です。特に全件置き換えの場合はDirectモードが使用可能です。 > PL/SQLで他のサーバーのテーブルとリレーション 「他のサーバーのテーブル」がOracleならデータベースリンクで参照が可能です。ただし、リモートテーブルとのJOINはINDEXを使用できません。パフォーマンス的にかなり苦しいことが予想されます。 REMOTEテーブルのデータ量が少なければHashJoinを利用できる可能性もありますが。 データベースリンクについてはマニュアルを参照してください。 http://download.oracle.com/docs/cd/E16338_01/server.112/b56299/statements_5005.htm
まずはOracleのアーキテクチャーの理解から始めてはどうでしょう。 マニュアルなら「概要」 http://otndnld.oracle.co.jp/document/products/oracle11g/111/doc_dvd/server.111/E05765-03.pdf と「管理者ガイド」 http://otndnld.oracle.co.jp/document/products/oracle11g/111/doc_dvd/server.111/E05760-03.pdf 市販本なら http://www.bk1.jp/product/03027349 問題集なら http://books.shoeisha.co.jp/book/b73545.html http://testij.ccr-j.net/books/2599 あたりはどうですか。 SQLも 「SQL言語リファレンス」 http://otndnld.oracle.co.jp/document/products/oracle11g/111/doc_dvd/server.111/E05750-03.pdf を見ながら http://www.bk1.jp/product/02522885?icid=T あたりを探ってみては。 ただ、SQLは出来れば標準規格についても把握しておいた方が後々いいと思います。 その点では 「プログラマのためのSQL」はおすすめです。 http://www.bk1.jp/product/02007879
インデックスの事でしょう。 インデックスを1から10個まで定義可能にして、それぞれのインデックスを構成する項目に並び順の数字を記入するのでしょう。
圧縮して保存すればいいのでは。
>検索結果はAテーブルに存在しているが、BテーブルまたはCテーブルには存在していないデータ。 というのは、 ・BとCのどちらかに存在していれば検索対象外 ・BとCの両方に存在していれば検索対象外 の2つの意味に取れますよね。 前者なら SELECT * FROM テーブルA WHERE (NOT EXISTS(SELECT * FROM Bテーブル WHERE Bテーブル.CODE=Aテーブル.CODE AND Bテーブル.NAME=Aテーブル.NAME) AND NOT EXISTS(SELECT * FROM Cテーブル WHERE Cテーブル.CODE=Aテーブル.CODE AND Cテーブル.NAME=Aテーブル.NAME)) 後者なら SELECT * FROM テーブルA WHERE (NOT EXISTS(SELECT * FROM Bテーブル WHERE Bテーブル.CODE=Aテーブル.CODE AND Bテーブル.NAME=Aテーブル.NAME) OR NOT EXISTS(SELECT * FROM Cテーブル WHERE Cテーブル.CODE=Aテーブル.CODE AND Cテーブル.NAME=Aテーブル.NAME)) でしょうか。
Oracle11g Client Release 2はOSがXP以降しか対応していません。 残念ながらWindows2000 sp1にインストールできません。
Oracle８Client（Application User）だと SQL Loaderはインストールされないのではないでしょうか？ Clientのインストール時に選択肢があって、 管理者用（正確な名称は覚えていない）でインストールする必要があったと思います。
サーバのlistener.oraと クライアントのtnsnames.oraとhosts を見せてください。サーバ名やサービス名はxxxx,yyyyとかにして。 あとサーバ側でlsnrctl statusってやった結果も
>ＰＬ/ＳＱＬを想定しています の意味がちょっとわからないのですが、ひとつのSQLで書いてみました。 売上Tの売上区分='2'・予定日が指定日以降のレコードを 店舗ごとに日付順に番号付けして、番号で設定項目を振り分けます。 --全角でインデントしています update tenpo_t set (plan1,plan2,plan3,plan4,plan5) 　= (select max(plan1),max(plan2),max(plan3),max(plan4),max(plan5) 　　from 　　　(select 　　　　tenpo 　　　　,case when recnum = 1 then yotei else null end plan1 　　　　,case when recnum = 2 then yotei else null end plan2 　　　　,case when recnum = 3 then yotei else null end plan3 　　　　,case when recnum = 4 then yotei else null end plan4 　　　　,case when recnum = 5 then yotei else null end plan5 　　　from 　　　　(select 　　　　　tenpo,yotei,row_number() over(partition by tenpo order by yotei) recnum 　　　　from uriage_t 　　　　where kbn = '2' 　　　　and yotei >= /* 指定日 */ date'2010-12-11') 　　　where recnum <= 5) src 　　where tenpo_t.tenpo = src.tenpo 　　group by tenpo); ORACLE10g XEでの確認なので9iではうまくいかないかもしれませんが参考までに。
No.1です。 すみません、質問をきちんと読めていませんでした。 >UPDATE、INSERTをそれぞれ一回で完了させるＳＱＬ UPDATEとINSERTは別々のSQLで処理したいのですね。 なら、それぞれ --UPDATE update yosan_t target set yosan = ( select g_yosan.yosan from tenpo_m inner join gyoumu on tenpo_m.kbn = gyoumu.kbn inner join g_yosan on gyoumu.yosan_g = g_yosan.yosan_g where target.tenpo = tenpo_m.tenpo ) where yosan = 0 and exists ( select g_yosan.yosan from tenpo_m inner join gyoumu on tenpo_m.kbn = gyoumu.kbn inner join g_yosan on gyoumu.yosan_g = g_yosan.yosan_g where target.tenpo = tenpo_m.tenpo ); --INSERT insert into yosan_t target select tenpo_m.tenpo,g_yosan.yosan from tenpo_m inner join gyoumu on tenpo_m.kbn = gyoumu.kbn inner join g_yosan on gyoumu.yosan_g = g_yosan.yosan_g where not exists ( select * from yosan_t where yosan_t.tenpo = tenpo_m.tenpo); こんな感じでいけると思いますがどうでしょう？ 先ほども書きましたがoracle10g XE での確認なので9iでは上手くいかない所があるかもしれません。
そのセッション内であれば、コミットしてるしてないに関わらず参照可能です。 データはそもそもUNDO領域に格納されていますので、コミット前のデータはそこを参照することで取り出すことができます。
こんばんは。 単純にくっつければいいだけだと思うのですが・・・。 SELECT 店舗Ｍ.店舗, ＧＰＭ.ナンバ, ＧＰＭ.大分類 FROM 店舗Ｍ, ＧＰＭ WHERE ＧＰＭ.大分類 = 'B' AND ＧＰＭ.分類 = 店舗Ｍ.分類 1対多の結合は、勝手に行が増えるので、ご希望通りの結果になりますが・・・。
検証してみました。 いいと思います。
t1.num1=3 の kinagku と、t2.num1=3 の kinagku2 を足すとした場合 t1 と t2 を union で結合したものを作り、num1 でグループ化します。 SELECT num1,SUM(kingaku) AS kingaku FROM (SELECT num1,kingaku FROM t1 UNION ALL SELECT num1,kingaku2 AS kingaku FROM t2) GROUP BY num1 ORDER BY num1
実機がないので試してませんが。 B.*ではなく、列を列挙しNVLで囲むとどうなります？ select A.列1, A.列2, nvl(B.列1, 0), nvl(B.列2, 0) from のように。
> PL/SQLにて、SELECTした複数件のデータ全てを一括して別テーブルに出力する方法は、 > バルグ！？といった方法を使用しないと出来ないのでしょうか？ 　質問の意図が正確には測りかねますが、言葉どおりに受け取るならば、回答は「そうです。」になります。 　SELECTした複数件のデータ全てを1件1件別テーブルに出力（単純なINSERT）するのではなく、一括で、という事なので、それはバルク（bulk）インサートを使う事になります。 　ところで、質問文の最後の行は単なるSELECT INSERTであってOracleにおけるPL/SQLのバルクインサート（FORALL INSERT）とは別物ですけど、SELECT INSERTで良いのならわざわざバルクインサートを使う必要は無いように思います。それとも、今はSELECT INSERTでやっているけど、それをバルク化したら速くなる事が期待できるかというご質問なのでしょうか。
多分、グレゴリオ暦の扱いが違うんだと思います。 ・Ruby require 'date' hoge = Date.new(2010,12,1) piyo = Date.new(1,1,1.) puts (hoge-piyo).to_i → 734108 hoge = Date.new(2010,12,1) piyo = hoge = Date.new(1582,10,15) #グレゴリオ暦開始日 puts (hoge-piyo).to_i →156371 ・Python import datetime hoge = datetime.datetime(2010,12,1) piyo = datetime.datetime(1,1,1) print hoge - piyo →734106 hoge = datetime.datetime(2010,12,1) piyo = datetime.datetime(1582,10,15) print hoge - piyo →156371 ・Oracle select to_date('2010-12-01','yy-mm-dd') - to_date('0001-01-01','yyyy-mm-dd') from dual →734108 select to_date('2010-12-01','yy-mm-dd') - to_date('1582-10-15','yyyy-mm-dd') from dual →156371
できなかったSQLを見せてください。 SELECT B.部署コード ,SUM(A.金額) FROM A,B WHERE A.社員番号=B.社員番号 group by B.部署コード もしくは SELECT 部署コード ,SUM(金額) FROM ( SELECT B.部署コード ,A.金額 FROM A,B WHERE A.社員番号=B.社員番号 ) group by 部署コード
運用系のようですね。たぶん、何らかの理由でＧＵＩ画面が使えないので、コマンドで実行することになるのでしょう。 いきなり黒本はどうかなと思いますけどね。 ま、手当たり次第に本を読むことですね。 ここに登録して質問する方が、ここよりいい回答が得られると思うけど。 http://otn.oracle.co.jp/forum/index.jspa?categoryID=2
インストールメディアはどこから入手しました？ ダウンロードなら、もう一度ダウンロードしてトライしてみてください。 メモリやHDD,DVDの不具合も疑われますけど。
DBの起動/停止とサービスの起動/停止は別物です。 サービスの「OracleServiceSID」と「OracleOraDb11g_home1TNSListener」は、それぞれDBとリスナーのためのもので、DBやリスナーそのものではありません。 サービスの「OracleServiceSID」と「OracleOraDb11g_home1TNSListener」を起動状態にした後で DBやリスナを起動します。 以下を参考にしてください。 http://www.shift-the-oracle.com/config/startup-oracle.html http://otndnld.oracle.co.jp/beginner/oracle10g/1st/windows/index.html#configuration
物理ファイルが何を指しているのかわかりませんが、 SELECT COL1 ,COL2 ,1 ,'X' FROM xxxx とか書けますよ。1,'X'が無い列ですね
実際に working_date に格納されている値に時刻が含まれているのですか？ > TO_DATE(working_date,'YYYY/MM/DD') = '2010/11/26' これは、文字列である working_date を date型に変換して、文字列と比較という奇妙なことになります。 本当に working_date が date型で、ファンクションインデックスを張るなら、 TRUNC(working_date） がよろしいかと。
スキーマA君がDBLINK(B)を使える権限さえあれば、問題ないように思いますが、 何か発生しましたかね？ なお、そもそもDBリンクオブジェクトはDBインスタンスに帰属するもので、スキーマの所有物のイメージではないと思います（＾＾）
comboBox1、comboBox2 は必ず'YYYY-MM-DD'形式で入力されてますか？ ＃１さんのご指摘の通り、シングルクォートで囲まないまま入力が'YYYY/MM/DD'形式だと、 /を実行指令と解釈しておかしくなるかも。 先頭１行目は、右辺のstrSQLを省略しておかないと、何があるかわからないので注意されたほうが良いですよ。 strSQL = "select K.Hiduke 日付, S.Syouhinmei 商品名, S.Tanka 単価, K.Suryou 数量, (S.Tanka * K.Suryou) 金額"; strSQL = strSQL + " from SyohinHyo S, Kounyurireki K"; strSQL = strSQL + " where K.Syouhinbangou = S.Syouhinbangou"; strSQL = strSQL + " and to_char(K.Hiduke, 'YYYY-MM-DD') "; strSQL = strSQL + " between '" + comboBox1 + "' and '" + comboBox2 + "'"; 'ここでMessage Box でも用いて組み立てたstrSQLの中身を確認する
STATSPACKレポートで、2倍かかる処理時間のうち、何にそんなに費やしているのかを調べてみるとよいです。 しかし、「再起動すると速くなる」というところから、他のサービスなどにCPUやメモリを奪われている可能性があると思いました。（WINDOWSですかね） であれば、DBサーバでタスクマネージャを表示し、遅くなったときにCPU利用とメモリ利用の上位プロセスに変化がないか見張ってみてください。WINDOWS UPDATEやウイルス対策ソフトのパターン更新とかによる負荷、ということもありえるかもです。 一般的には、再起動するとDBキャッシュがまっさらになるため、DBの処理はいったん遅くなるもので、速くなるというのは考えにくいです。 ちなみに、DB以外の処理に負荷を持っていかれている場合、STATSPACKレポートでは、「1時間経過したのに、DB処理時間は30分だけ」というふうに見えたりします。 （DB処理効率自体は悪くなく、サーバのリソース不足の場合）
＞ ストアドプロシージャを出力したいと思っているのですが ＞ オブジェクトブラウザからですと、対象のSPを選択し、スクリプト出力することで 出力と言っているのが、「ソースの出力」なのか「実行結果の出力」なのかが不明ですが、「オブジェクトブラウザのスクリプト出力」なので前者であろうと想定して回答します。 ＞ sqlplusなどから、同様にファイル出力を行うことは可能でしょうか？ はい。可能です。 オブジェクトブラウザも内部的には、ALL_SOURCEやDBA_SOURCEなどのディクショナリからソースを取得していると思われますので、同じ事をすればよいだけです。 以下のSQLを実行して SPOOL すればテキストに保存できます。 実行時のSET文にはちょっと工夫が必要です。 SET HEAD OFF; SET PAGES 0; SET LINES 300; SET TRIMS OFF; --↑他にもあったかもしれませんが、とりあえずこんな感じで。 ACCEPT TARGET_SP_NM PROMPT ストアドプロシージャ名入力： ACCEPT TARGET_SP_OWNER PROMPT 所有スキーマ名入力： SPOOL &TARGET_SP_NM..sql -- &TARGET_SP_NM SELECT TEXT FROM ALL_SOURCE WHERE NAME = UPPER('&TARGET_SP_NM') AND OWNER = UPPER('&TARGET_SP_OWNER') ORDER BY LINE; SPOOL OFF; 「ソースの出力」ではなく「実行結果の出力」であれば、 EXECUTE SP_XXXX(&引数 ...); などで実行できます。 （※OUTパラメータを使う場合は、無名PL/SQLブロックを使う必要があります） SPOOL の方法は同様なので、上記を参考にしてください。
INSERT INTO 別テーブル (列名) SELECT COUNT( * ) FROM テーブル１ または UPDATE 別テーブル SET 列名 = ( SELECT COUNT( * ) FROM テーブル１ ) WHERE 条件
1文ずつのSQLではこの機構の大事さがピンと来ないかも知れませんね。 (1)のユーザが、updt_flagを1にした後、コミットされるまでに1になっていることを前提に 実施される処理を考えてみてください。 つまり、「updt_flag」を1にするSQLを実施している最中とか直後に、0に戻されている 可能性があるとしたら、 「updt_flag」を1にupdateする 行為そのものが信用出来なくなりませんか？ 「1にしたけど、もしかしたら同時に0にされてるかもしれない」 「1にしたけど、もしかしたら同時に10にされてるかもしれない」 ： 一々、Select文で「1のままだよね？」って確認したとしても、その確認の最中とか直後に また同じ心配が発生しちゃいます。 常時監視するしかないですかね？変更があったら自動的に通知されるような仕組みを作る？ その通知を受け取ったら、「1にする処理が信用出来なくなった」として処理を変更？ ・・めんどくさいというよりナンセンスですよね。 一連の処理（＝「トランザクション」と言います）が完了して、じゃ、次の処理で「updt_flag」 （在庫数かもしれないし、許可フラグかも知れないし）を操作して良いよ、というところまで、 データは不変でなければいけません。 ＝「データの一貫性」が守られないとＤＢを使ったプログラム・操作が出来ませんのでデータを ロックする（守る）必要がある、ということです。 ちなみに、ロックされているデータを使いたい方から見れば、ロックされてるか（フリーズした みたいになっちゃいますから）知りたいって時は、(2)の update dept set updt_flag=0 where id=1111; のときに、 select updt_flag from dept where id=1111 for update nowait; とすると、前の処理の完了（commitか、rollback）を待たずに、「ロックされてたよ」とエラー を出して制御が戻ってきます。（試してみてください） ORA-00054:リソース・ビジー、NOWAITが指定されていました。 10秒だけ待つ、なんて書き方も出来ます。 select updt_flag from dept where id=1111 for update wait 10; 一連の処理同士が開放を待ち合ったまま動けなくなるデッドロックや、ロックされている行数が 増えたら表全体のロックにエスカレーションしたり、Insert・Deleteの場合はとか・・ロック戦略 は奥が深いです。 ↓この辺の用語を理解出来ると、その制御を実現するために不可欠な仕組みだという事が 理解出来るでしょう。 排他制御、ダーティ・リード、ファントム・リード、ACID特性 当然、これらの概念はＤＢ共通です。 ※すいませんがSQLは（合ってると思いますが）実際に検証してません。 　SQLのマニュアル参照してください。
LONGROWが不要ならSELECTで列名を列挙してください。 とりあえず表を作りたいなら create table 新TABLE as select * from コピー元TABLE WHERE ROWNUM < 0
＞sqlplusに接続後、 ＃１の方の回答の通りです。 が、expdp/impdp は、sqlplusのコマンドではありません。 なので、sqlplusで実施されても出来ません。OSから起動します。 従来のエクスポート・インポートをどのように実施されていたか判りませんが、 sqlplusをタイプ（実行）するところでexpdp～を実行して下さい。 tool等お使いの場合は、エクスポートのオプション設定が出来ないか、 確認されると良いでしょう。 （大抵はGUIにしているだけで、裏ではexpdp/impdpが動いてますから）
SET TRANSACTION USE ROLLBACK SEGMENT ロールバックセグメント名; ですか？これは外から書けないですけど。SQL*Plusなら何とかなると思うけど。
あなたのエラーはexp/impの前にネットワーク接続の問題ですね。 imp時のコマンドラインを提示してください。
肝は「注文オプション表」ですよね。 「注文オプション表」を「tb1」で読み替えて 以下SQLを見てください。 uff-n さんが期待する 結果にはさらに副問い合わせを使って注文表と 結合する必要がありますが、まぁなんとか１SQLで書けると 思います。 同一注文番号のデータがあまりにも多い場合は以下SQLは少し苦しいですね。 あと、Oracleに限定したSQLであることも少し不満が残りますが参考にどうぞ。 ---検証データ作成---- create table tb1(c1 number,c2 varchar2(10)); insert all into tb1 (c1,c2) values(111,'aa3') into tb1 (c1,c2) values(111,'aa2') into tb1 (c1,c2) values(222,'aa1') into tb1 (c1,c2) values(333,'aa1') into tb1 (c1,c2) values(333,'aa2') into tb1 (c1,c2) values(333,'aa3') into tb1 (c1,c2) values(444,'aa5') into tb1 (c1,c2) values(444,'aa5') select * from dual ; ---縦を横に展開するSQL select c1,max(c2_1) n01,max(c2_2) n02,max(c2_3) n03,max(c2_4) n04 from ( select t.c1, decode(rk,1,c2,null) c2_1, decode(rk,2,c2,null) c2_2, decode(rk,3,c2,null) c2_3, decode(rk,4,c2,null) c2_4 from ( select c1,c2,row_number() over(partition by c1 order by c2 ) rk from tb1 )t ) group by c1 --結果 C1　　N01　N02　N03　N04 ---　　---　---　---　--- 111　　aa2　aa3　　 222　　aa1　　　　 333　　aa1　aa2　aa3 444　　aa5　aa5　　 どうでしょうか？期待した結果でしたか？
ま、とりあえずやってみるとしたら、Oracle Clientのアンインストールと再インストールくらいです。 Oracle DataBaseはインストールしてないですか？ 両方が入っていて、バージョンが違うとトラブルのもとです。
基本的なところは同じですが、OracleMasterならOracle特有のところをマスターしないとだめですからね。 ま、なれる意味もあるからOracleをダウンロードして勉強してはいかがですか。 http://www.oracle.com/technology/global/jp/software/products/database/xe/index.html
　話が抽象的すぎて何を答えれば良いのか分からない・・・・　「エラーになってしまいます。」が指す意味が分かりづらいですね。ORA-xxxxxが発生するのか、意図したレコードが抽出されないのか。もう少し具体的に書くと良いでしょう。また、その際に2テーブルの列定義（抜粋でも）やSQLのON句などは書かないと回答はつかないでしょうね。 　Oracleの10g以降を使用しているのであればもはや(+)を使う理由はありません。LEFT JOINを使うべきです。 　ところで、外部結合において良くある間違いとして以下のようなSQLがあります。ID列とNAME列があるテーブルA、Bがあり、 SELECT A.ID, B.ID, B.NAME FROM A LEFT JOIN B ON A.ID = B.ID AND B.NAME = 'テスト' というSQLを発行するとします。これは外部結合が全く意味をなさないSQLになります。これは SELECT A.ID, B.ID, B.NAME FROM A LEFT JOIN B ON A.ID = B.ID AND 'テスト' = B.NAME というSQLでないといけません。つまり、LEFT JOINのON句に指定される結合条件は、外部結合されるBが全て右側に来なくてはいけません。初歩的ですがありがちなミスなので覚えておくと良いでしょう。また、場合によってはB側をサブクエリーにするというテクニックが適用できる事もあります。 SELECT A.ID, B.ID, B.NAME FROM A LEFT JOIN (SELECT * FROM B WHERE NAME = 'テスト') B ON A.ID = B.ID
＞日付型（yyMMdd）にした変数を引数にして 日付型（yyyyMMdd）にしてみては？
IBM DB2の書籍が電子書籍として翔泳社から無償公開されております ・DB2 9.7 エバリュエーション・ガイドブック（書籍版（翔泳社刊：書籍版￥2,310）と同等の内容） ・DB2 9.7 & Oracle 11g 比較ハンドブック ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ・共有ディスク型クラスタ「DB2 pureScale」の実力 ・DB2 徹底使いこなし講座 Oracleとの比較もダウンロードできるようなので、この機会にユーザー登録してみては いかがでしょうか？ ご確認ください
排他制御ができるかどうかではなく、あなたの目的とする論理を明らかにしてください。 トリガーとかＳＱＬではなくどんなことをしたいのかを。 Oracleの掲示板に質問した方がいいです http://otn.oracle.co.jp/forum/index.jspa?categoryID=2
No1さんも言っていますが、対象のデータがわからないと何が回答しずらいです。 対象データと、抽出する仕様を具体的に教えてください。 また、記載のSQLと現在の表示の整合性がないです。 受信日はどこにいってしまったのでしょう・・ 具体的かつ正確に質問内容を書いた方が回答も付きやすいと思いますよ。
確認ですが、その項目はdate型ですか。それともcharやdateがたですか。 data型なら単純に、to_char(項目,'yyyy/mm/dd')　でOKですが、 文字型に、そのままいれてるだけだと一工夫が必要です。 日付に変換してからフォーマットを指定するとか。 to_char(to_date(項目),'yyyy/mm/dd') データ型を気にする癖をつけたほうが良いですよ。
> set Colsep を指定するときに''の中でTABを押すと出力されるファイルもTAB区切りになるのでしょうか? Yes > また、出力ファイルの最後に「～行選択されました。」の文字は消すことは出来ないのでしょうか? こちらをどうぞ。 http://oracle.se-free.com/utl/C1_csv.html
同じことを昔、調べました。 10gR1はVIPをひとつしかもてないですが、10gR2からはユーザ定義でVIPを設定できるので対応できるはずです。 各VIPのフェイルオーバー、テイクバックの検証・運用が面倒なのでやりませんでしたが。 なので負荷分散ならAPサーバでやった方が良いと思いますよ。 複数のAPサーバの経路を分散し、APサーバからDBサーバは同じVIPを使うほうが良い気がします。
たとえば select col,sum(col2) from table1 having col3 = 10 group by col1 having sum(col2) > 10 こんなSQLを書くってことでしょうか？ 自分的にはわかりずらいです・・
>WHERE句 → 表から取り出す行の条件を指定 その通りです。 >GROUP BY句 → グループ化した結果から取り出す行の条件を指定 ちょっと違います。WHERE句(無い場合も含めて)取り出された行を集約する条件です。 行を取り出す条件ではなく、取り出した行をどうするかの条件指定です。
>DBMS_SQL.PARSE(v_CursorID, v_sql, DBMS_SQL.NATIVE); の後に DBMS_SQL.DEFINE_COLUMN( v_CursorID, 1, v_val,1000) ; が必要では？
　普通に利用すること（データを登録したり、検索したり）に関しては、各データベース ソフト間の差は、ほとんど無いといっても過言ではないでしょう。 　しかし、異常状態になった場合（コンピュータのシステムダウン、ＨＤＤの故障、 操作ミス等々）に、どれだけ短時間で復旧させることができるか、が非常に重要です。 　オラクルには、さまざまな機能が提供されているので、非常に短時間で、あまり人の 手をわずらわせることなく、復旧させる（通常運用が行える状態にする）ことができます。 　普通に使えれば良ければ、（異常事態になったら、数日利用できなくなっても） フリーで十分です。
問題ありません。 >オラクルではキャラクタセットでAL16UTF16を指定しています。 これはデータベースに格納される際の文字コードを指定しています。 Oracleではデータベースの格納文字コードと取り出した後の文字コードはデータベースサーバで変換 します。 ODP.NETやOO4Oの場合プラットホームがWindowsとわかっているので、取り出しはUTF-8と決まってます。 このAL16UTF16からUTF-8への変換は自動で行われます。 何に変換するかは指定しますが、ODP.NETやOO4Oは変換する文字コードの指定が自動的にUTF-8になっているのです。
こんな感じ？ CREATE OR REPLACE PROCEDURE query_invoice (p_month VARCHAR2, p_year VARCHAR2) IS TYPE cur_typ IS REF CURSOR; v_inv_cursor cur_typ; -- Declare a cursor variable v_inv_query VARCHAR2(200); v_inv_num NUMBER; v_inv_cust VARCHAR2(20); v_inv_amt NUMBER; BEGIN -- Write dynamic query receiving month and year as parameters -- and using these values to form the table name, for example, inv_APR_2004 v_inv_query := 'SELECT num, cust, amt FROM inv_' || p_month || '_' || p_year || ' WHERE v_inv_num = :g_id'; -- Open a cursor variable OPEN v_inv_cursor FOR v_inv_query USING v_inv_num; -- Fetch row into variables LOOP FETCH v_inv_cursor INTO v_inv_num, v_inv_cust, v_inv_amt; EXIT WHEN v_inv_cursor%NOTFOUND; -- process row here END LOOP; CLOSE v_inv_cursor; END; / マニュアル「アプリケーション開発者ガイド」の「動的SQLのコーディング」を参照してください。
動的SQLを使えばいいです。 動作確認はしていませんが、 declare cdata varchar2(20); testrec test%rowtype; begin cdata:='sample'; execute immediate 'select * from test where testcolum=' || cdata into testrec; end; / みたいな感じです。 http://otndnld.oracle.co.jp/document/products/oracle10g/102/doc_cd/appdev.102/B19248-02/adfns_dynamic_sql.htm
以下の点で、不備がある可能性がありますね。 ・Oracleの初期化パラメータ ・ディレクトリの権限 参考ＵＲＬを参考に試してみることをオススメします。 参考になれば幸いです。
> ・空きメモリ不足によりデッドロックが発生する可能性があると考えられるでしょうか。 　　空きメモリ不足云々は、物理的な要因であり、デッドロック　とはまったく 　関係ありません。 > ・デッドロックが発生したことにより、空きメモリが消費されてしまうと考えられる でしょうか。 　　ありません。 　　ただし、デッドロックにより、データベース関連の処理がスムースに行われなくなり、 　システム全体としてのスループットが落ちます。 　　そうすると、システムの中に滞留している状態の情報が増加するので、それらを保持 　すのために　メモリが消費されることはあります。
テーブル1のレコードが、キーと値Aで一意である前提ですが insert into テーブル2 select キー,金額1,金額2,金額3 from (select キー, max(case when 値A = 1 then 金額 else 0 end) 金額1, max(case when 値A = 2 then 金額 else 0 end) 金額2, max(case when 値A = 3 then 金額 else 0 end) 金額3 from テーブル1 group by キー); ではどうでしょう？
for update nowait としたらどうでしょうか？
NULLが入りうるカラムはNVLで括った方が安全です。 SELECT SUM(NVL(項目,0)) from テーブル WHERE 条件 SUMの場合は、変わりないですが、AVGだと結果が違ったりします。 件名を見て、SUM以外の関数についても含むようだったので一応。
絶対に無理とは言えないと・・・思いますが、それなりに制約が発生するはずです。 簡単な話、OracleとMySQLでタイプの違う値があれば、それを変換する必要があるし、その変換が１００％確実に行われる保証がないと、マスター/スレーブの関係が構築できないと思います。 そこまでして「マスタをOracle、スレーブをMySQL」を構築する必要があるのでしょうか？ Ｏｒａｃｌｅ・ライセンスが高額 ＭｙＳＱＬ・無償ライセンスがある！　という発送なら、ＭｙＳＱＬ無償ライセンスで、Ｏｒａｃｌｅに匹敵するようにｄｂ構造を見直すとか、チューニングに費用を掛けるなどが有効なお金の使い方のような気がします。
手法としては、昔からよくある手法だとは思います。 デメリットとしては、扱うデータ数が増えた時に、検索の性能劣化が起きる可能性が高くなる事ですね。 不要なテーブルもすべて結合していてWHERE条件の増減で結果を絞るとなると、カーディナリティの低い項目同士の結合などにより、索引を使用しない実行計画となり、結果として性能劣化する場合があります。 「条件無しでも駆動表の全表走査＋α程度の劣化しかない」 「条件無しはエラーとして弾いている」 「条件無しはROWNUMで絞っている」 などの対処を行なっていれば、性能障害の可能性を低くする事はできます。 但し、その場合でも定期的な監視は必要だと思います。
SELECT * from Hin Where ( not Flg = 1 ) or ( flg is null ) nullは値がないってことだから,何かの値と比較ができないのでis nullとして比較するしかないです。
このあたりを参考に http://d.hatena.ne.jp/mokkouyou2001/20080305/1204713509 http://d.hatena.ne.jp/srkzhr/20090617/1245254444 http://www.oracle.co.jp/forum/thread.jspa?messageID=11006912
今回に限ったことではないのですが、質問は1カ所だけにしておいた方がいいと思いますけど。。 回答する人は別の掲示板で既に書かれていることを知らずに書いてしまうこともありますよね。 そうするとお互いに時間の無駄になるのではないでしょうか。 ですので、merge文についてはあちらに書かせてもらいますね。
Nullを01と同等とみなして、Nullを01以外も含めて日付とブランドコードをキーに集計したいのですか？ それとも、Nullを01のみを対象とし、日付をキーに集計したいのですか？ いずれにしても、確定しているのは、 group byに日付 sumは金額 です。 後者の場合、条件としては ブランドコード IsNull or ブランドコード = '01' まとめると、 select 日付 ,sum(金額) from tbl where ブランドコード IsNull or ブランドコード = '01' group by 日付 前者の場合は少しやっかいです。 tblの部分にselect句を書く事ができるタイプなら、一旦加工した状態を再selectしてやる事で実現できます。 select tmp.日付 ,tmp.ブランドコードＸ ,sum(tmp.金額) from ( select 日付 ,店舗コード ,ブランドコード ,金額 ,(if ブランドコード IsNull then '01' else ブランドコード) as ブランドコードＸ from tbl ) tmp group by tmp.日付 ,tmp.ブランドコードＸ ※ifの部分など、細かい構文はSqlに合わせて下さい。 ※fromにselect句を書く事ができないタイプの場合、また違った書き方になります。
DBConsoleプロセス（Windowsならサービス）が上がってないんじゃないでしょうか。
NULL文字はX'00'ではありませんから、お間違えの無いように。 その、エラーになるUPDATE文を提示可能ですか？ CHAR属性のフィールドをWHERE句に記述してませんか？
欠点は高価なこと。 採用しないことを決めた人に理由を聞くと、大体が「予算がない」と言います。 高いものがなぜ売れてるか、言わなくても分かりますよね。
Patchが入手可能と言うことはサポート契約してるはずだから、サポートに聞けばいいのでは。
CASE式を利用すればいいです。 SELECT a.USER_ID, a.TYPE, a COUNTRY, CASE WHEN b.STATUS = 'Z' THEN '999' ELSE b.STATUS END STATUS FROM TABLE1 a LEFT JOIN TABLE2 b ON a.COUNTRY=b.COUNTRY
NWなのであれば60MB/secは最低速度ではなく、最高速度と捕らえたほうがいいでしょうね。 60MB/sec出れば万々歳だと思います。 NW経由でテープライブラリに直結することはできないので、 LANフリーバックアップ（LANを経由しないバックアップ）にしてはいかがでしょうか。 DBサーバにNetVaultサーバを入れてDBサーバにSCSI経由でLTOドライブをつなげば もう少しスピードは出ると思います。 NetVault自体の負荷は微々たるものですし、 バックアップの負荷も結局はDBサーバを経由しますので DBサーバがNW経由でバックアップサーバにデータを送るか、SCSI経由で テープに送るかの違いです。 バックアップ専用LANを用意していないのであればSCSI経由で直接 LTOにDBサーバがバックアップした方が負荷が少なくて済むと思いますよ。
ループを二つに分ける必要ってありますか？ この処理であれば一回のSQLで欲しいデータが取得できそうな気がしますが。 create or replace procedure hoge ( 　sItemClass in コード表.品番%type, 　out_val out pls_integer, 　out_cursor out sys_refcursor ) is begin 　open out_cursor for 　　'select b.資材名,b.色,b.種類,b.サイズ,b.棚番号' 　　|| ' FROM 部材表 a,資材項目 b,コード表 c' 　　|| ' WHERE a.ID = b.資材ID' 　　|| ' AND a.入数 = c.入数 AND a.重量 = c.重量 AND a.才数 = c.才数 AND a.ロケーション = c.ロケーション ' 　　|| case when sItemClass is null then '' else 'AND c.品番 = ' || sItemClass end; 　out_val := 1; end; /
＞「バッチ処理によるバックアップ」は必要ないのではないでしょうか？ どこまでが「バッチ処理によるバックアップ」なのかな？ HD破損などでREDログ（アーカイブログ）をも失われる事態だとどうなると思います？
バックアップ方法はどうしますか？ そもそも、アーカイブログモードなのかノンアーカイブログモードのどちらですか？ バックアップ先は？
テーブル数・列数が多いと面倒ですが、列名をDump関数で文字列化して、like検索しては？ 実機テストしてませんが。 TableA( Col1, Col2 )として。||は連結です。 select '|'||dump(Col1,16)||'|'||dump(Col2,16)||'|' dcstring from TableA where dcstring like '%|0|%' --（もしかしたら　where dcstring like '%|00|%' 　かも）
前回に引き続きまたまた、回答させていただきます。 まず期限ですが http://item.rakuten.co.jp/it-test/c/0000000127 のような受験チケットを9/30までに購入すれば来年の8月までは1.5万 （楽天で買えば1枚1.3万ほど）で受験できます。 次に勉強ですが、厳しいことを言うといくら問題集を解いても教科書本を理解しても これ以上は合格率は上がらないと思います。過去のOracle Masterはそうではありませんでしたが 最近ではOracle Masterの資格者も十分増えてきて日本オラクルも合格者を増やそうという 動きからOracle Masterの価値を維持しようといった形にシフトしているように思えます。 なので実践的な問題や応用力を試すような問題が実際には数多く出題されます。 試験対策本、教科書本はオラクルと共同で出版しているので、試験に出る問題をそのまま 対策本に掲載するようなことは期待できません。 あくまで試験対策本などは範囲や出題傾向を知る参考であって試験本を完全に理解しても すぐに受かるということは難しいのが現状です。 幸いOracle Databaseは日本オラクルのHPから無料でダウンロードして XPマシンなどにインストールすることができるため、実践的な力をつけるためにも 実際の環境を作って色々と試してみることが合格への一番の近道かと思われます。 机上の勉強だけで合格できたのは、もう昔の話だと思ってもらえればと思います．．．
もちろん書いてあると思いますよ。 読んでみてください。
batのリダイレクト>>を使わず、SQL*Plus（@ではなく*です）のspoolを使ってはいかがでしょう？ set NLS_DATE_FORMAT='YYYY/MM/DD HH24:MI:SS' sqlplus -S USER/PASS@TNSNAME @data_delete.sql data_delete.sqlの中身 -------------------------- whenever sqlerror exit failer set echo off spool log.txt select sysdate||' データ削除開始' delete from table where flg = 1; select sysdate||' データ削除終了' -------------------------- ご希望のように yyyy/mm/dd hh:nn:ss.xx データ削除開始 yyyy/mm/dd hh:nn:ss.xx データ削除終了 XXX行が削除されました。 とするためにはちょっとSQLだけではできないのでPL/SQLを使う必要があります。
・・・ご自身で少しは考えていらっしゃいますか？ やりたいことはそういうことなのだろうと思っていましたが敢えて書きませんでした。 CHANGENAMEが変更されたら、というIF文を書けばいいだけなのではないですか？ if :old.CHANGENAME != :new.CHANGENAME THEN --insert end if; CHANGENAMEにnullが入る場合は上記の条件では足りないと思いますが、 そこはご自身で書いてください。
監査証跡の出力先に空き領域がないとか
おはようございます。 (1)11gのBronzeを取得するには 　DBA：「1Z0-018」の取得 　SQL基礎I：「1Z0-051」、又は「1Z0-017」の どちらかを取得 (2)1Z0-051-JPN 11g SQLI　は何の試験なのでしょうか？ 　Bronzeでは今のところ11gにのみ有効です。 　「1Z0-017」だと10gと11gに有効となります。 参照URLを読んで下さい。 　
ExportファイルのサイズとImport後のサイズは同期しません。よくある誤解です。 ExportファイルにはCreate文とInsert文が書かれています。 Create文にテーブルの初期サイズが設定されてます。初期サイズはCreate時に確保されます。データが少なくても（＝Insert文が少ない）初期サイズが大きければテーブルのサイズも大きくなってしまいます。 もちろん、索引のサイズが大きい可能性はあります。 ただ、索引がデータ量の4倍のサイズになるとは思えません。 show=yでインポートを行うと、Create文が表示されるので、そこの初期エクステントを調べればわかると思います。 ＞インデックスをインポートしないようにすると ＞DBへデータを入れたあとにインデックスがきかなくならないのでしょうか？ 索引が存在しないので当然、索引検索は行われません。 ＞それともインポート後に検索したときに自動で ＞つくものなのでしょうか？ 明示的に作成しない限り自動で作成はされません。
Oracleのテーブルの種類（？）でトランやワークなどといったものはないのですが…。 単にテーブル名に～トラン，～ワークとついてるだけですよね？ それぞれ、使い方が違うテーブルなのだと思います。 ～トランは、トランザクションの略。 日々の業務上発生するトランザクション（一連の処理）から出力するデータのことで、何かの処理の都度、追加・更新されていくテーブルに付けられることが多いです。 ～ワークは、作業用。 何かの処理で一時的にデータを保存し、処理が終われば削除するようなテーブルに付けられることが多いです。 ただ、これらはあくまで僕が経験した業務で使われてた名前で、作った人によって微妙に異なることがあります。 プログラムからの使われ方を調べるか、テーブルの設計者に確認されてください。
>57行が作成されました。 >INSERT INTO コピー先テーブル名 ( >* >行1でエラーが発生しました。: >ORA-00001: 一意制約(コピー先テーブル名_PK)に反しています 57行が作成されて、その後にINSERTですから、 >FROM コピー元テーブル名; >/ を FROM コピー元テーブル名 / のようにコピー元テーブル名のあとの;を削除してください。 SQL*Plusは文中の;で文を実行して、空白無しの/だけの行で、現在のSQLバッファの文を実行します。 つまり、あなたのCOPY_テーブル名.sqlではINSERT文が;で一度実行されて、/でもう一度実行されるのでPK違反になるのです。 COPY_テーブル名.sql の先頭に set echo on を書いて実行すると、2回実行していることがわかると思います。
>03 FILLER PIC X(35) VALUE ' WHERE M.BCODE = ? 　 '. を 03 FILLER PIC X(35) VALUE ' WHERE M.BCODE = :V1 　 '. つまり、置き換える値の指定を?ではなく:V1にしてみてください。
ま、このくらいできるようになると http://www.insight-tec.com/mailmagazine/ora3/vol291.html 新人教育以外でも面白い連載なので一読あれ
■oracle10g サーバのIPアドレスを変更した場合の対処 (1)oracle\product\10.2.0\db_1\NETWORK\ADMIN配下の以下のファイルにIPが記載されているためそのIPアドレスを変更し、サーバ再起動 【ファイル名】 listener.ora tnsnames.ora http://sememo790.blog71.fc2.com/blog-entry-23.html
select テーブルA.x ,( select b.y from ( select テーブルB.x, テーブルB.y, row_number() over( partition by テーブルB.x order by テーブルB.y desc nulls last ) rn from テーブルB ) b where テーブルA.x = b.x and b.rn = 1 ) y from テーブルA;
http://www.shift-the-oracle.com/sql/national-language-compare.html ここを参考に、to_multi_byteとnlssortを使えばいけるかなと思ったのですが、 半角カナで濁点があったりするとダメでした・・ ORACLE TEXT を使ってみてはどうでしょうか？ http://www.esco-sb.jp/blog/roughjustice/archives/2008/04/oracle_text.php http://www.okisoft.co.jp/esc/ora.html#ora01 を参考に。
Not In を使えばいいと思いますよ。
オラクルは、受け取ったデータを登録するだけですので、どのような値になるかは、登録する側次第です。 コンパイル時点のメモリ上のゴミだったり、実行時のメモリ上のゴミだったりすると思いますよ。
単純に、Where条件付けてSelectすれば良いと思いますが、 それじゃだめなんですか？
oracleのバージョンが書いていないので使えるか分かりませんが。 階層問合せを無理やり使ってみました。 with t1 as ( select 1 key,'テスト１' 項目 from dual union all select 2,'テスト２' from dual union all select 3,'テスト３' from dual ) ,t2 as ( select 1 CD, 'か' 名称 from dual union all select 1,'き' from dual union all select 2,'さ' from dual union all select 2,'し' from dual union all select 2,'す' from dual union all select 3,'た' from dual ) select 　t1.key, t2.名称 from 　t1 　inner join 　(select 　　cd, substr(名称,2) 名称, lev, 　　--最下層を取得するためのCD毎の最大のLEVEL 　　max(lev) over(partition by CD) max_level 　from 　　(select 　　　cd, sys_connect_by_path(名称,'/') 名称, level lev 　　from 　　　(select 　　　　t2.*, 　　　　--階層問合せをするためにコード毎に順序付け 　　　　row_number() over(partition by CD order by 名称) recnum from t2) 　　start with recnum = 1 　　connect by prior cd = cd 　　　　　　and prior recnum = recnum - 1)) t2 　on t1.key = t2.cd 　and t2.lev = t2.max_level; oracle10.2.0.1.0では期待結果が取得できました。
＞カラム IS NOT NULL と言う事は、別の方法と言うのは カラム <> '’ ですよね。 多分、空文字が入っていると思われるので、 カラム IS NOT NULL AND カラム <> CHR(0) では、どうでしょう。 それでも除外できないのであれば、NULLでも空文字でもない値、例えばスペースとかが入ってるのでは？ そのカラムを DUMP関数か RAWTOHEX で表示してみてください。 何か入っていると思います。
ただのコピペのミスかもしれませんが、とりあえず1行目のBEGINはいらないです。 と言うかあるとエラーになって実行できないですよね。 プログラム的には間違ってないと思います。 ORDER_NOが一致するデータがないか、KANRYO_DAYの値が同一とかですかね。 LOOP内でdbms_outputなどをつかってデバッグしてみては？
こういうことでしょうか。 select 　DB2.区分1,DB2.フラグ1,M1.名称 　,DB2.区分2,DB2.フラグ2,M2.名称 　,DB2.区分3,DB2.フラグ3,M3.名称 　,DB2.区分4,DB2.フラグ4,M4.名称 from 　DB2 　　inner join DB1 M1 on M1.区分 = DB2.区分1 and M1.フラグ = DB2.フラグ1 　　inner join DB1 M2 on M2.区分 = DB2.区分2 and M2.フラグ = DB2.フラグ2 　　inner join DB1 M3 on M3.区分 = DB2.区分3 and M3.フラグ = DB2.フラグ3 　　inner join DB1 M4 on M4.区分 = DB2.区分4 and M4.フラグ = DB2.フラグ4;
>ためしに　SELECT 文を実行したところ　参照できてしまったのです そうですか。DBの内容やそのSQLが分からないので確認方法として正しいのかはこちらで判断できませんね。 システム権限やロール、個別にオブジェクト権限が付与されていないかを確認してみて、 なぜ参照できているのかの原因をはっきりさせるところからですね。
まず、回答としては、実行の仕方は合っています。 わざわざプロシージャを作る必要はありません。 質問者様の習熟度合いがわからないので一応書きますが、上記の無名PL/SQLブロックをSQL*Plus上にペーストした、と言う事でよろしいでしょうか？ この状態だとバッファに読み込まれただけで実行はされていないので、最後にスラッシュが無いと実行されません。 BEGEN … END; / そうではなくて、既に実行したのが結果が返って来ないと言う意味でしたら、GATHER_DATABASE_STATSで、GATHER CASCADE だと、相当時間が掛かるはずです。 普通は、cronかタスクスケジューラで仕掛けて夜間に走らせるような処理ですので
SELECT A.* FROM Ａテーブル A INNER JOIN TABLE(SELECT B1,B2,COUNT(*) SU FROM Ｂテーブル GROUP BY B1,B2) B ON A.A1=B.B1 AND A.A2=B.B2 AND A.A4<>B.SU または WITH B(B1,B2,SU) AS (SELECT B1,B2,COUNT(*) SU FROM Ｂテーブル GROUP BY B1,B2) SELECT A.* FROM Ａテーブル A INNER JOIN B ON A.A1=B.B1 AND A.A2=B.B2 AND A.A4<>B.SU こんなのでどうでしょうか？ 後者の方が標準的（他のDBシステムでも 使える可能性が高い）かと思います。
こんにちは。 うーん・・・、 INDEX BY表を使って添え字検索するか、 初めから動的SQLで発行して、dbms_sql.column_value使うとか・・・。 「列名||添え字」は無理ですね。
>Oracleは、時刻をHH:MI:SSの24時間形式で格納します。 デフォルトでは、時刻部分に何も指定しない場合、日付フィールドの時刻部分は00:00:00 A.M. （真夜中）になります。 とマニュアルにありますね。
対象のDB、バージョン、テーブル構造、インデックスの有無くらいは最低限書きましょう。 また、どれくらいの件数でどれくらいの時間がかかっているのかも書くといいと思います。 下記のSQLがそちらの環境で使えるかわかりませんが、テーブルの読み込みが1回で済むので 最初のSQLよりは早いのではないかなと思います。 SELECT * FROM (SELECT 商品コード,COUNT(*) OVER(PARTITION BY 商品コード) X, カテゴリー FROM テーブルA WHERE 追加年月 = 201008) WHERE X >= 2;
10g（R2？）以降、GROUP BYではソートはおこなわれず HASHを使うようにアルゴリズムが変更されましたが、 そのことでは？
select * from DB a where 'フラグ'=1 and 　　　'金額'=(select max('金額') from DB b where a.No = b.No and 'フラグ'=1) くらいでよいですか？ 質問に書いてある以上のフィールドがあって、ちゃんとレコードを選択する必要があるなら、こうなると思います。 本当に、質問に書いてあるだけのフィールドで、金額の数字さえ解ればよいのであれば、Ｎｏ．１さんの解答の方が、シンプルですね。
このあたりを参考にしてください。 COSTはデータ量だけではなく、その表やViewのアクセスに要する時間やSortや結合が必要なら、そのために必要なCPU時間等も考慮されています。 表があるHDDのアクセス速度なんかも考慮されているし、表のエクステントが複数になっているかとかも考慮されています。 書籍はわかりにくいかもしれませんが、嘘は少ないと思います。著者が思い違いをしてないとは言い切れませんが。
＞一行目：履歴番号がNULLのときは変更回数0とする。 ＞二行目：履歴番号が他レコードの番号と一致する場合、1を持つ。そのレコードの履歴回数がNULLなら判定終わり。 ＞三行目：履歴番号が他レコードの番号と一致する場合、1を持つ。そのレコードの履歴番号が更に他レコードと一致する場合、2を持つ。そのレコードの履歴回数がNULLなら判定終わり。 と言うこと前提に結論です。ＳＱＬでは書けません。フロントエンドでの処理が必要です。 つまり、一行しかヒットしなかった場合は当然履歴番号はＮＵＬＬですね。でそのＩＤのレコード取得は終了ですね。 二行ヒットした場合は、ＮＵＬＬデータの処理と履歴を持つレコードの処理が必要になりますね。つまりここで二重作業（レコードの再検索）が必要になります。 さらに三行ヒットした場合、上記に加えて三行目の処理も必要になります。（再度のレコードの再検索） しかしレコード数は一定ではないと推察しますので、一回のＳＱＬ文でこの様な全データを取得するのは不可能と考えます。 また常に３レコードあるとすれば何とかなりそうですが３レコード以上の場合もあるとすれば１回のＳＱＬ文でこのようなデータを取得するは不可能です。 行うとすれば、ＩＤ毎に必要な処理をさせてワークテーブルにＩＮＳＥＲＴし、更新回数を設定する。出力結果としてワークテーブルの内容を出力するという方法しか今の私には思いつきません。
