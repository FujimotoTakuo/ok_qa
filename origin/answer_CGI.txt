１．キーボードのWindowsマーク(田)を押したまま、キーボードの R を押し、名前欄に netplwiz を入力してOK。 ２．ユーザーを選択し「ユーザーがこのコンピューターを使うには、ユーザー名とパスワードの入力が必要」のチェックを外してOK。 ３．自動ログインさせるユーザのパスワードを保存してOK。 以下のサイトで、1番をご覧ください。 https://sites.google.com/site/windows10wokanntannnitsukau/ Windows 10を簡単に使う １．電源スイッチを押したら、パスワードを入れなくても、すぐにデスクトップ画面が表示されるようにする
試していないのでわかりませんが <!-- TMPL_IF NAME=cbx-1 -->チェックボックスの内容1<!-- /TMPL_IF --><!-- TMPL_IF NAME=cbx-2--> チェックボックスの内容2<!-- /TMPL_IF --><!-- TMPL_IF NAME=cbx-3 --> チェックボックスの内容3<!-- /TMPL_IF --><!-- TMPL_IF NAME=cbx-3 --> チェックボックスの内容4<!-- /TMPL_IF --> として改行をTMPL_IF～/TMPL_IF間に入れてあげたらどうでしょうか？
例えば問い合わせフォームの場合、htmlで入力画面は作成出来ても、 メールを送信する処理はhtmlでは作成出来ません。 (精々 mailto でメールソフトを起動するのみ) 「cgi サンプル」などのキーワードでgoogle検索してみてください。 そこに出てくるような事が可能です。 webページの作成経験はおありでしょうか？ htmlだけではサンプルに出てきたような事は出来ないはずです。
ご確認頂きありがとうございます。 -- は不要です。 度々すみません、RewriteRuleが誤っておりました。 最後の行は以下が正しいと思います。 RewriteRule ^/sp/(.*)$ /$1 [R,L]
サーバー環境によってCGI設置の方法が違うし、 CGIについてレクチャーすることになるようなので、 また、CGIのDEBUGの必要があると考えると、 ネットサーバーがダウンする危険性があるので、 ここで回答するのはたぶん無理。 最悪の場合、間違えて無限ループなんか作ってしまうと、停止できなくなって迷惑をかける。 手始めには、画面に数文字を表示させるのも難しいんじゃないだろうか。 CGIはプログラムだと言うことを認識してください。失敗するとサーバーに迷惑がかかります。 あるサーバーは、CGIの長時間動作(無限ループ等)で強制停止するし、多重動作はできないので、初心者にも安心して使えるんだけどねぇ。 ここで紹介するCGIは、すべてPerl(パールと読む)で書いています。 CGIの設置。 ネットーサーバーでperlが使えることを規約で確認。 CGIネットサーバーを使うための使用登録、FTPサーバーログインネームとパスワードの取得。 アドレスネームの決定。FTPアドレスの確認。 FTPソフト(必要ない場合がある)をPCにインストールと、FTPアドレス、FTPサーバーログインネームとパスワードの登録。 CGIファイルのヘッダ＝perlのパス名と改行１行を確認。 テキストファイルとHTMLファイルの文字コード形式の決定。 HTMLファイルへのヘッダの１行目に文字コード形式の記述が必須。 テキストファイルのヘッダの３行目以降に文字コード形式の記述が必須。 テキストエディタから保存するときに、先に決めておいた文字コード形式で保存することが必須。 ファイル名は英文字小文字でないと動作しない。（ピリオドが複数あると削除不能になる可能性がある－おかしな記号は使わない） サーバーで決められた改行コードに自動変換されるようにFTPソフトを設定。 サーバーへのファイル保存のためのフォルダ構造の決定。 アップロードしたフォルダと各種ファイルのパーミッションの決定。 簡易に作成したり上級者である場合以外では、CGIのDEBUG環境をPCに設置して、バーチャル環境で作成＆テストしないと、おそらく失敗してサーバー全体に迷惑をかけることになる。 末尾のセミコロン「;」(文末記号)を忘れないこと ここまできて、やっとCGIを作成する環境が整ったことになります。 以下は、基本を飛び越えて中級になっています。 htmlをCGIで書き直しただけです。 かなり盛り込んでありますが大丈夫でしょうか。 ユーザーhtml部分に下のhtmlをprint文で書き直して配置してください。 受け取りスクリプトはほかに必要です。 「初めて書いたCGI」を表示するスクリプト。 ＝＝＝ここから　テキストがUTF8でHTMLがCP932(拡張Shift-JISのこと)で保存の場合のCGI記述 #!/usr/local/bin/perl #2行目は改行のみ use utf8;#これ以下の記述はUTF8である宣言：基本これじゃないと文字化けする # use ～:モジュールを組み込む use Encode;#文字コード変換を組み込み use CGI;#htmlのフォームが読み込める $q= new CGI;#htmlオブジェクトを $q->～ で呼び出し #以下cp932<＝>utf8 の自動文字コード変換のための記述 use open IN => ":encoding(cp932)";#ファイル操作の自動文字コード変換の記述 use open OUT => ":encoding(cp932)"; use open IO => ":encoding(cp932)"; binmode STDIN, ":encoding(cp932)";#print文の自動文字コード変換の記述 binmode STDOUT, ":encoding(cp932)"; #－－－HTMLヘッダ print "Content-type: text/html\n\n"; print "<!DOCTYPE html>\n"; print "<html>\n"; print "<head>\n"; print "<meta http-equiv='Content-Type' content='text/html; charset=shift_jis'>\n"; print "<meta http-equiv='Content-Language' content='ja'>\n"; print "<title>初めてのCGI</title>\n";#htmlのタイトル print "</head>\n"; print "<body>\n"; #ここから　ユーザーhtmlの書き出しスクリプトを記述 $txt = "初めて書いたCGI"; #$txt = $q->param("status");#記述例　htmlフォーム(submit)のname=statusの読み出し　：htmlからこのCGIを呼び出したときにのみ使用 print "<p align=center>$txt</p>\n";#変数の文字列内記述 #print "<div class=\"cl\">";#記述例　ダブルコーテーション #ユーザーhtml　ここまで print "</body>\n"; print "</html>\n"; ＝＝＝ここまで 下のhtmlはcssのclassや画像ファイルを呼び出していますのでエラーになります。 そのままでは表示が崩れるでしょう。 ＝＝＝フォームのhtmlは上のprint文に組み込みます。 <div class="cl"> <div> <p> <img src="item1.gif" width="221" height="31" alt="「基本的なフォーム」のナビゲーションバー" class="space_top"> </p> <form method="post" action="#"> <p> お名前：<input type="text" name="name">(テキスト入力) </p> <input type="password" name="pass">　(パスワード入力) <p> 性別： <input type="radio" name="seibetu" value="man" checked> 男　 <input type="radio" name="seibetu" value="woman"> 女(ラジオボタン) </p> <p> 趣味： <input type="checkbox" name="pc" value="pasokon" checked> パソコン <input type="checkbox" name="golf" value="golf"> ゴルフ <input type="checkbox" name="garden" value="gardening "> ガーデニング(チェックボックス ) </p> <p>　 好きな色： <select name="color"> <option>赤</option> <option selected>青</option> <option>緑</option> <option>黄色</option> </select>(選択メニュー) </p> <p> <textarea name="message" rows="4" cols="40">自由にご意見をお書きください</textarea>(複数行のテキスト入力) </p> <p> <input type="submit" value="送信">　 <input type="reset" value="取り消し">(送信とリセットボタン) </p> <p class="font4"> サンプルのため送信はできません </p> </form> </div> </div>
>Windows10にしてからCGIプログラムが作れなくなり CGIの環境は構築したのですか？ Apach？IIS？ 言語はナニを使用しているのですか？ Perl？Ruby？PHP？ HTTPサーバーのログになにか出てませんか？ >いつもの通りの手順でやってますが✖です。。 具体的にどういう手順なんですか？ 初めて入る回らないお寿司屋さんで「いつもの！」といっているのと同じなんですがww
> 「Realmの部分を設置する環境に合わせて書きかえる必要はある」ということですが、どう書き換えればよいでしょうか？ 自身の　.htaccessで指定したBASIC認証の設定中の AuthName で指定した文字列と同じにすればよいです。 > 「ログアウトしました」というようなメッセージにしたいのですが、可能でしょうか？ 通常のログイン処理でのログイン失敗と同じ状態をわざと作っているのですから、 この擬似ログアウト処理のときだけ、メッセージを変更することはできないはずです。 もし、ログアウト処理やそのメッセージを綺麗に作りたければ、ログアウト処理ができる認証方法 （CGI上でセッションを使った認証等でHTMLを毎回動的に生成）を使うしかないでしょう。 ただし、これに変更した場合は、 CGI経由で生成されない静的コンテンツ（画像ファイルや固定ファイルのjsやcssファイル）は 認証なしでアクセスできるようになってしまうという弊害が発生してしまいますが。
＞　メール上のリンクをクリックしたら、WEBページが開き、該当の文書がCGIフォームで開くということをしたいです。 ＞　こちらもできないのでしょうか。 ＞　教えていただけましたら大変助かります。 メール上のリンクは普通にURLを書けばいいので http://example.com/hoge.cgi?fuga=xxx といった感じで、GETメソッドを使って必要なパラメータを渡すだけでいいんじゃないでしょうか。
「init.cgiというファイルをダウンロードされてしまうと」とありますが、これはどういう意味で書かれていますか？ サーバーのセキュリティホールなどでサーバ上のcgiファイルの内容を読み取られるような状況を想定していますか？ そうであれば「web からアクセスできるので」というのはほとんど関係ないかと思います。 そうではなく、漠然と「普通のファイル(htmlとかzipとか)をサーバからダウンロードするみたいにCGIファイルそのものもダウンロードされたら。。。」と考えているならば、それは単に知識が不足していることかと思います。 (Web関連を学び初めた頃の私自身がそんなかんじでしたが) 後者だとして続きを書きますが、 HTTPでクライアントからサーバにクリエストが行われる際、クライアントは基本的にはパスと要求方式(GET/POSTなど)をサーバに送ります。 (リクエストヘッダはその他いろいろありますが、この話の中ではあまり重要でありません。) 要は、クライアントは「ダウンロードアクセスする」とか「実行を要求する」とかを指定する要求の方法はありません。 サーバはリクエストを受けたら指定されたパスによって何を行うかを決定します。 (必ずしもサーバがそのパスをファイルパスとして解釈する限りません。解釈はサーバソフトウェア次第です。通常はいろいろ設定出来るようになっています) パスをファイルパスとして解釈する場合、多くのサーバソフトでは拡張子によって何をするかを決定します。 たとえばhtmlやzipであればファイルの内容を読み取ってクライアントに転送するとか、cgiであればそれを実行した結果(GCIからの標準出力への出力内容)をクライアントに転送するとか、です。 (いちおう補足を行って起きますが、JavaScriptの場合であればjsファイルをそのままダウンロードしてクライアントのブラウザ上で実行が行われますが、GCIはサーバ上で実行が行われてその出力結果をクライアントに転送します) 拡張子がcgiでも実行を行わずにそのファイル内容(ソースコード)をクライアントに転送するよう設定を行うこともできますが、あくまでサーバ側での話です。 cgiの内容が転送されるような設定ならば、そもそも誰も(管理者も)管理用CGIを実行出来ないでしょう。 (requireされるファイルの拡張子がcgiである必要はありませんが、参考にされているGCIのサイトの例でcgiとしているのはこのことが要因かと思います。つまり、cgiが実行出来る環境であればinit.cgiの場所に直接アクセスされても実行されてエラーになるだけですむ、ということでしょう) このあたりは、自分でApacheなどのサーバソフトをローカルPCにインストールして動かしてみると理解が深まるかと思います。 上記のことを理解した上でも、管理CGIを保護された場所に置くことは意味があると思います。 BASIC/Digest認証を通過したひとしかアクセスできなくすれば推測によるログイン試行されることもかなり減るでしょうし、2段構えになりますので。
　ＧＭＯペパボ社のロリポップレンタルサーバーは如何でしょうか。 　有料ですが、機能、セキュリティーもよく、.htaccess　や　perl cgi　、最近主流となったＣＭＳも使えます。 　ＦＴＰセキュリティ、ＷＡＦ等も備えています。 　マニュアルも完全に公開されており使いやすいと思います。 　　マニュアル　→　https://lolipop.jp/manual/#p-mail 　 　ご参考まで。
クライアントサイドはJavaScriptを使うしかないでしょうから、Ajaxを利用すると言う事になるでしょうね。
「ファイルが新規作成可能な場所」で実行しましょう。 SORT ソートしたいファイル.txt > ソート済み.txt とやった時、カレントディレクトリが「ファイルが新規作成できない場所」だと「アクセスが拒否されました」になります。 ですので SORT ソートしたいファイル.txt > C:\ファイルが新規作成できる場所\ソート済み.txt と、出力先を、フルパスで「ファイルが作れる場所」で指定するか CD C:\ファイルが新規作成できる場所 とやって、カレントディレクトリを移動してから SORT C:\ファイルがあるフォルダ\ソートしたいファイル.txt > ソート済み.txt のように、読み込むファイルの方をフルパスで指定しましょう。
迷惑メールには2種類あります。 １．詐欺目的 ワンクリック詐欺というのが有名になりましたが、それ以外にも、通販と偽ってお金だけ取るとか、賞品を送るが偽物とか、いろんなケースが考えられます。 こんな物に引っかかる人がいるのかと思いますが、1万人に1人でも引っかかれば、100万通送れば100人引っかかるわけです。 アダルト系、ブランド品、不正BCASカード、英会話、健康食品、お金上げます(笑)、とか、いろいろ。 ２．広告目的 出す方は真剣に広告目的で送っているのですが、受け取り者のニーズに合わないケース。
>入力→DBオープン→処理→処理・・・→出力→後処理・DBクローズ→return ユーザーに求める動作がないなら 出力より先に後処理とDBクローズをしたほうが良いですね 不具合の原因になります
ご希望の方法かどうかは分かりませんが A1、　B1、　C1、　D1　の表示形式を　標準　から　ユーザー定義　に変更し、ユーザ＾定義の　内容は　[h]:mm を選ぶか、自分で設定します。（A1～D1すべてをこの形式に） 次にA1からC1にデータを入れます。 最後に　D1をクリックして　∑　を選んであげれば　回答が出ます。（もちろん　= A1+B1+C1　の式でもOKです。）
if(訪問回数 >= 11){ location.href="認証案内するページ"; } javascriptで
どのような系統（画像とか何かのアプリケーションのデータとか）かもわかりませんか？ .target という拡張子は一般的ではないので、それすらも判らなければ何ともならないと思います。 とりあえず、まずはメモ帳で開いてみることをお勧めします。メモ帳で開いて、意味不明な文字の羅列になったならば、先ほど書いたように何らかのヒントがないと無理です。
こんにちは。 「Content-Type: text/html」を書いた後に二行目を空白にして三行目からスクリプトを書いたということですが、この時改行(\n)は出力されましたでしょうか。 以下、参考までに例を記載します。 ------------------------------------------------- #!/usr/bin/perl print "Content-type: text/html\n"; print "\n"; print "Hello World!"; ------------------------------------------------- ご参考になりましたら、幸いです。
＞どのようにしてその問題を回避するか。 問題は「回避」するものではなくて、「解消」するものです。 いろいろな原因が考えられます。原因を突き止めてそれを解消してください。 １．言語の理解が足りていない⇒ちゃんとした入門書で入門し直す ２．HTMLの理解が足りていない⇒ちゃんとした入門書で入門し直す ３．プログラミングスキルが低い⇒入門レベルをクリアしているのであれば、数をこなす
こんにちわ。 一応ですが、お使いになられているWindowsは64bitの8.1であっているでしょうか？ #念のため、64bit版は64bitのWindowsにしかインストールできませんので…。 どちらも64bit版でしたら、一度ActivePerlをダウンロードし直して実行するとどうでしょうか？
phpが主流だからといってperlを使っちゃダメというわけではありません。 Perlで作ったものがあり、HTTPDサーバーでPerlが使えるのならそれでいいんじゃないんですか？ 人に言われたから変えるというのは違うと思います。 Perlからphpに変えるとしても、サーバーでPerlが使えなくなった代わりにphpが使えるようになるとか、ソースを弄る人がPerlがわからないとか、Perlが使えるのが貴方だけで他の人はphpしか使えないのであればphpで書きなおしたほうがいいですけど… 私もPerlはCGI以外でも便利に使ってますよ。 ちょっとした文字列操作ではC言語でプログラム作るより手軽だし激速だし！
＞これの意味がよく分かりませんでしたが ＞～.cgiに起動をかけると えっ？ アドレスもわからずにどうやって起動を？ こちらは独自ドメイン取得をした場合のサブドメイン http://cgi.[サブドメイン].geocities.jp/[Yahoo! JAPAN IDまたはニックネーム]/ こちらは標準ドメイン http://cgi.geocities.jp/[Yahoo! JAPAN IDまたはニックネーム]/ どちらでしょう？？？
具体的なアドバイスが欲しいのであれば、 まずは、そのページのHTMLの内容と、CGIプログラムの内容を書いてください。
サーバOSが何かにもよると思いますが、一般的にWindows上でIISが動作しているとしてIISの設定からCGIを有効にすればEXEのCGIでも動くと思います(設定は面倒でしたが、少なくともIIS６のころは動いてました)。 ただ開発プラットフォームが異なると、ログインなんかのセッション情報などは共有が困難ではないかと思いますが大丈夫でしょうか？ ちなみにはじめにサーバ云々という注釈をつけたのは、Linux上のMonoなんかで.NETが動作していたりするとWindow上では開発されたEXEファイルは動作しませんので念のために付けました・・・蛇足でしたね
%7B0%7Dは、 {0} の意味ですよ。URLエンコードされている。 URLに使える文字は、 unreserved = alphanum | mark mark = "-" | "_" | "." | "!" | "~" | "*" | "'" | "(" | ")" ですから、{と}は、%で始まるコードに変換されている。 ＞URLの本来であれば～～.pyと表示される部分が ではなくて、{0}が、%7B0%7D となっている。 .py は多分pythonのファイルだと思いますが、それがそきにでしたら、単純に実行権限を与えて、.htaccessに、CGIだと指定してやればよい。Windowsじゃなければ、ファイルの最初に書かれているパスでどのプログラム化はOSが判断する。 　もちろん、Windowsじゃなければ、拡張子はファイル名以上の意味は持たないので、拡張子は.cgiだろうが、htmlであろうが関係ありません。
内部仕様書と外部仕様書が有ると思います。 内部仕様書は、 RDBを使っているのなら、各テーブル間の関係は、ER図が良いと思います。 CGIのモジュール一覧表を作ると後で、直す箇所が分かります。 関数一覧表も後々便利です。 モジュール遷移図を作り、画面パラメータを書いて置くと、便利です。 各CGI毎の細かい処理は、PAD図で記述するのが良いと思いますが、 時間がもったいないので、止めましょう。 それより、ソースに処理内容をコメントととして、たくさん書いたほうが実用的です。 外部仕様書は、 運用部署に入出力データと処理の関連を理解してもらうためには、業務フロー図が良いと思います。 http://itpro.nikkeibp.co.jp/article/COLUMN/20080619/308731/ 操作説明書は、各画面毎に作れば良いと思います。 A3用紙に各画面を矢印で並べて繋げて、画面遷移図を作ると良いです。
つ LINQ の OrderBy & ThenBy http://www.atmarkit.co.jp/fdotnet/dotnettips/880orderby/orderby.html
これはブラウザの機能です。 フォームで入力された文字は、URLエンコードされた状態でサーバーに送信され、サーバーはそれを元の文字列に戻して処理し、その結果を表示しますが、URL欄には ・firefoxは元の文字 ・IEはエンコードされたもの ・Chromeはエンコードされたもの ・Operaは表示されない ・Safariは元の文字 　これは当然でしてURL欄には送信した時点のURLが表示され、それをどのように表示するかはブラウザ開発側のスタンスによります。 　URLエンコードされた文字よりは本来のキーワードが表示されるほうが便利だと思いますが？？？ 　PATH_INFOを使用するWikiなどでは実感されるかと ブラウザ - Wikipedia( http://ja.wikipedia.org/wiki/%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6 ) 　どうせ、Ctrl + Ｌ → Ctrl + Ｃ　でコピーすればよいし、firefoxならMaikeLinkアドオン使うし・・ ※方法はあります。 　一旦、redirectするページを表示させてから、本来のページにリダイレクトさせる。その場合もブラウザの機能で元の文字列に返すことがあるかも
ん～。ANo.3の結果を見るとやっぱりHeaderを指定するのがダメっぽいですな。 とするとこれはもうどうしょうもないかな。 OCNにこだわりやお付き合いや政治的な圧力が無ければさっさと別の場所に移るのが吉かと。 どーーーーーしてもこのまま運用してかつno-cacheしたいんだい、となると・・・・例えばPHPとRewriteが使えるのであれば（←OCN メール＆ウェブ ビジネスの説明を見るとWordPressが使えるらしいのでこれはOKなはず）、no-cacheヘッダーを返した後ファイルを読んでその中身を返すようなphpを書き、それを.nocache.phpなどという名前でサーバーのドキュメントルートにアップロードする。 そしてドキュメントルートの.htaccessには以下のような設定を書く。以下の内容はFilesディレクティブの中に入れなくていいというか入れちゃいけない。 RewriteEngine On RewriteBase / RewriteCond %{REQUEST_FILENAME} -f RewriteCond %{REQUEST_FILENAME} \.(html|pdf)$ RewriteRule . /.nocache.php [L] これで.htaccessにHeaderディレクティブを書けなくてもあなたがやりたい事は実現可能だ。
同じデータ（assdata）を使っているからでしょう。 ディレクトリを分ければいいだけです。 |-index.html |-ass1 |　|-assdata |　|-ass10.cgi |　|-cgi-lib.pl |-ass2 |　|-assdata |　|-ass10.cgi |　|-cgi-lib.pl cgi-lib.plは１つにして共有してもいいです。
簡単に動作確認をしていますが、改造は、自己責任でお願いします。 動作がおかしいと思ったら、元に戻してください。 > という箇所があるのを見つけたのでここをいじれば何とかなるのかな ご質問に記述されている箇所の修正のみで出来ると思います。 larry.cgiの222行目付近と232行目付近にある &html_checkindi("user_alcheck.html","sitename"); と &html_checkindi("user_linkck.html","sitename"); のそれぞれ "sitename" の後に ,"banner" を追加して下さい。 &html_checkindi("user_linkck.html","sitename","banner"); このように。 204行目付近にある $sitename = $y3[5]; の前の行に、以下のどちらかを記述します。 （[サイトバナーの登録がない時]の対処方法の選択） ・仮バナーを表示する $banner = $y3[7] ? qq|<img src="$y3[7]">| : qq|<img src="仮バナーのアドレスを記述">|; ・仮バナーは表示しない $banner = $y3[7] ? qq|<img src="$y3[7]">| : ''; --------- そして、user_alcheck.htmlとuser_linkck.htmlをテキストエディタで開き <!--BANNER--> を好きな場所に記述してください。 これで多分、大丈夫だと思います。
　回答に自信が無い。 　検索結果によると過去にこういう事例が存在したらしい。 ＞Yahoo!ジオプラスで送信フォームが動かない ＞http://webdirector.livedoor.biz/archives/51965748.html 　送信ができたつもりで実はできていなかったか、意図せず設定を変更してしまったのか？ ＞Re:cmfmailのFromについて ＞http://cmf.ohtanz.com/cgi-bin/sbbs/supportbbs.cgi?GetMode=DelForm&GetANum=R:5514&GetLNum=5519 　説明では動けるように見えてなにか制限が設定をされているような？
普通にリストとしてマークアップして、スタイルシートでフロートさせれば良いです。 文書の整形のためにtableを使用するのは禁忌でもあるし・・ 『単に文書内容を整形する目的だけで表を用いるべきでない。( http://www.asahi-net.or.jp/%7Esd5a-ucd/rec-html401j/struct/tables.html#h-11.1 )』 『ページレイアウトの目的で表を用いる。( http://www.asahi-net.or.jp/%7Esd5a-ucd/rec-html401j/present/styles.html#h-14.1 )』 　それを、ウィンドウ幅に合わせて伸縮させれば良いです。mediaquery使ってウィンドウ幅で列数を変更することも可能になります。 [例] <ol id="PartyList"> 　<li>内容</li> 　<li>内容</li> ・・・ ol#PartyList,ol#PartyList li{list-style:none;margin:0;padding:position:relative;} ol#PartyList li{width:19%;float:left;}
＞mod_rewriteのリダイレクト機能を紹介されたのですが リダイレクト機能を使わずに、rewriteだけすればいいです。 R=301 と書いたと思うので、それだけを削除。
HTML::Entities の encode と decode 、もしくは CGI.pm の escapeHTML と unescapeHTML use HTML::Entities; use CGI qw(escapeHTML unescapeHTML); my $unescape = qq(<h2>"hoge"&' bar &lt;'</h2>); print "--- use HTML::Entities::encode ---\n"; my $escape1 = HTML::Entities::encode($unescape); print $escape1, "\n"; print HTML::Entities::decode($escape1), "\n"; print "\n"; print "--- use CGI escapeHTML ---\n"; my $escape2 = escapeHTML($unescape); print $escape2, "\n"; print unescapeHTML($escape2), "\n"; --- $ perl -w foo.pl --- use HTML::Entities::encode --- &lt;h2&gt;&quot;hoge&quot;&amp;' bar &amp;lt;'&lt;/h2&gt; <h2>"hoge"&' bar &lt;'</h2> --- use CGI escapeHTML --- &lt;h2&gt;&quot;hoge&quot;&amp;' bar &amp;lt;'&lt;/h2&gt; <h2>"hoge"&' bar &lt;'</h2>
> popupもどきというのは、お客さんはポップアップを望んでいるのですが、 > 既存システムのweb画面上に追加してpopupするのは難しい、、、ということ。 うーん。よく分からんけど最近のWebメールやOffice Web Appsなどのように、ブラウザ上で画面ががんがん分割されたりブラウザウィンドウの画面の中でダイアログのようなUIが出てくる奴のことを言っているのかな？ あれならjQuery＋jQuery UI プラグインで速攻できるよ。まぁ、ブラウザウィンドウの画面の上に動的に移動できるDIVのようなものを追加しているだけなのでリンクとかFORMポストとかで画面遷移があると消えてしまうけど。 だから現在のWebシステムに追加するのが難しいと言っているのかな？　それなら確かに難しそうだ。 > ここが良くわからないです。 > レスポンスボディというのは、cgiのexeがprintfで出力したhtmlのコードとは違うのでしょうか？ いや、それでいい。cgiのexeがprintfで出力したhtmlのコードがそのままレスポンスボディになる。 「レスポンスボディ」という言葉が指す意味が分からなければHTTPというプロトコルそのものを一度調べてみるといい。cgiをやるならHTTPがどういうものかというのはぜひ知っておくべきだ。 > urlで指定したCGIのEXEは状態を判断してその結果をhtml出力（printf）しようと思ってまして、 > それではダメですか？ ばっちぐー。 > それでOKの場合、 >> htmlなので、AJAXでリクエストしたレスポンスを >> そのままHTMLとして扱う。 > ここはcgiの戻りがhtmlそのものなのでＯＫ？ いえーす。 > もし違うとしたら、exeで何を返せばいいのか？ > printfで出力して（返して）いいのか？ jQueryのajax関数でつっつくexeは普通にHTMLを返す普通のCGIでOKよ。 ～～～～ さて、ANo.1でも言ったけど、javascript:window:open()で小ウィンドウを開くなら、そしてその小ウィンドウの中を定期的に全部リフレッシュするならAJAXは後回し（というか最終的に要らないかも）にして何秒かおきにリフレッシュさせるだけでいい。AJAXがー同期がー非同期がーごにょごにょーとか一切関係なしにjavascriptのsetTimeout()というのを使ってもいいし<meta http-equiv="refresh" content="60;URL=serverinfo.exe">でもいい。
CGI.pmのマニュアルに書いてあると思います。 http://search.cpan.org/dist/CGI/lib/CGI.pm#Processing_a_file_upload_field 和訳: http://perldoc.jp/docs/modules/CGI-3.49/CGI.pod#PROCESSING32A32FILE32UPLOAD32FIELD CGI.pmはアップロードされたファイルを一時的にファイルに保存し、$q->uploadでそのファイルのハンドルを取れるようにするようです。
ユーザーエージェント（HTTP_USER_AGENT）の値で判別できますが。 http://html-coding.co.jp/knowhow/tips/000218/
??? 二つ書けばいいんじゃない? <VirtualHost *:80> ServerName www.example.jp DocumentRoot /home/foo/htdocs </VirtualHost> <VirtualHost *:80> ServerName sub.example.jp DocumentRoot /home/foo/htdocs/sub </VirtualHost>
拡張子の.はあってもなくても同じです。 さくらは制約が多く使ったことありませんが、ひょっとしてhttp.confの LoadModule include_module modules/mod_include.so の行がコメントアウトされているとか。 option のoverwriteが、制約されているとか <Directory *****> AllowOverride All </Directory> ユーザーディレクトリでincludeが許可されていないとか そのうえで.htaccessにて、 Option +Includes 通常のサーバーは、それでSSI有効になるはずですが・・ 　さくら自身に聞いて見るしかないかと
これだけの情報ですと、あまりに漠然としすぎていて、回答のしようがないと思います。 まず、プログラミング言語は何が使えますか。CGIとありますが、ということはPerlで作りたい、ということでしょうか。それともPHPなどですか。また、どの程度、言語は使えますか。そのあたりがわからないとなんとも説明のしょうがないでしょう。 また、ショッピングカートのプログラムの骨格を誰か書いて掲載してくれ、ということではあまりに膨大な手間がかかるので誰もやってくれないでしょう。 とりあえずの手段として、フリーで配布されているプログラムをダウンロードして、それを解析しながらどうやって動くかを調べていく、というのがよいと思います。検索すれば、フリーのショッピングカートはいくつも見つかります。それをダウンロードしてプログラムを見てみれば、どのぐらいの技術が必要か漠然とわかってくるでしょう。
ハッシュに代入するのですから、キーが同じでしたら値は上書きされてしまいます。 $hash{key} .= $value として追加するか、あらかじめ複数の値があるとわかっている場合はハッシュではなく、リストに入れるとかすると良いです。 送信先(actiom)を、 http://hpcgi1.nifty.com/Iruka/ENV_FORM.cgi#form_check にして確認する。 　ここで分かるように、すべてのチェックボックスのnameを替えてしまうというのも手です。
サイトミックスがおすすめです。 僕も現在これを使っています。 http://sitemix.jp/
本当に基本的な事ですが・・ HTTPプロトコルでの通信は GET /cgi-bin/form/contact/app.cgi?contact=01 以下省略 とGETで、サーバーに要求します。(POSTなどもある) ※#以下はブラウザ側に必要な情報なのでサーバーには送られません。 1) サーバーは、その要求・・に、?があればそれ以下の文字列をQUERY_STRINGという環境変数に格納します。CGIはそれを利用できます。$ENV{'QUERY_STRING'}ですね。 2) ついで、指定されたパスに従って 　/ 　|-- cgi-bin/ 　　　　|-- form/ 　　　　　　　|-- contact/ 　　　　　　　　　　|-- app.cgi 　というファイルを探します。 ※ここからがWindowsと大きく異なる部分 　app.cgiがファイルだったら、それを提供します。 　app.cgiが実行ファイルでしたら、実行権限があれば実行します。 　　実行するプログラムはファイルの最初に書いてあるか、サーバーの指定 　　すべて、サーバー側の設定です。Windowsのように拡張子もレジストリは使わない。 　app.cgiがディレクトリでしたら、それを開いてみる。 　　・内部にDIRECTRY_INDEXで指定されたファイルがあるとそれを提供、 　　　または上記の通り実行する。 　　・なければ、NOT FOUNDを返す。 　app.cgiがなければ、/appcgiは環境変数PATH_INFOに格納して上位のcontactを調べる。 　これを/cgi-binまで繰り返します。 　　極めて単純な文字通り機械的処理で/ルートまで進みます。 ＞app.cgiが実態っぽいという場合は、/form/contactは何のためにあるのでしょうか。 　どれが実体であるかは、ユーザーにはわかりませんし、知る必要もないです。 　たぶん、ディレクトリ(Windowsではフォルダー)を示しているものだと思われます。 　ひょっとして実体は/cgi-bin/form/contact、/cgi-bin/form、あるいは/cgi-binかもわかりませんし、/cgi-bin/form/contact/index.cgi、/cgi-bin/form/index.cgi、あるいは/cgi-bin/index.cgi、はたまた/cgi-bin/abc.php かも知れません。 ＞contactが実態っぽいという場合は、単に拡張子を消しているだけでしょうか。 　拡張子はWindows以外のOSでは一切関係ありません。contactが実行ファイルかもしれませんし、それはディレクトリかもしれません。 　このページのURLが http://oshiete.goo.ne.jp/qa/8588097.html 　であっても、8588097.htmlというファイルは実在しません。
MAIL も他のHTTPなどの通信と同じようにヘッダ部分と、空行を置いて本文になります。 ヘッダ部分に To: Subject: From: Reply-To: Content-Transfer-Encoding: 7bit Content-Type: text/plain; charset=ISO-2022-JP は揃ってますか？？？受信メールのソースを確認すること なお、基本的にiso-2022-jpで送信されますから、Subjectや差出人、あて先に日本語を含む場合は、Base64エンコードが必要です。それには、 MIME::Base64 モジュールの encode_base64を使用すると簡単で良いでしょう。 　ちゃんとしたフォームメールCGIには、これらはすべて含まれているはずです。また、上記のスクリプトでは同名のハッシュは上書きされてしまいますよ。 　ヘッダのSubject:については、カテゴリーを選択させて自動的にタイトルをつけさせるほうが良いです。CGIを使いまわし出来ますし、受信側で振り分けも出来ます。
そのサーバのマニュアルをお読みなさい。 そのサーバーを借りている貴方にしかわからないです。 　たぶんプレインストール済みのCGI用---あくまで推測
＞＞ホスト側にあるファイルとサーバー側にあるファイルが「同じ大きさ」の場合、 ＞　逆に、じゃないといけないですよね。 いいえ。「同じサイズだとNG」です。 .htaccessファイルは「テキストモードで転送」しなければなりません。 何故なら「転送元の端末と、サーバーで、改行コードが同じだと言う保証が、どこにもない」からです。 テキストモードで転送した場合、改行は「サーバー側が改行として解釈する文字コード」に変換されてサーバーに置かれます。 通常、サーバーが「LINUX系」で、端末側が「Windows系」の場合、テキストモードで転送すると、ファイルの行数と同じだけ、ファイルが小さくなります。 これは「Windows系の改行が２バイト、LINUX系の改行が１バイト」だからです。 例えば「５行のファイル」は、5個の改行が「２バイト×５個」から「１バイト×５個」になるので、５バイト短いファイルになってアップロードされます。 ＞　テキストでアップされなければならないから、同じでないと。 逆です。 テキストでアップされた場合は、端末とサーバーでサイズが変わります。 同じサイズで送られているなら、バイナリで転送されてしまっています。 ＞　実際には同じになっていますし、自分のサイトをdenyに入れてやってみましたが、 ＞　チャンと拒否されます。 その「自分のサイトの指定」は「一番最後の行」に書いてませんか？ 以下のようなファイルをバイナリ転送した場合を考えます。 order allow,deny<CR><LF> allow from all<CR><LF> deny from .microad.jp<CR><LF> deny from .amazonaws.com<CR><LF> deny from 自分のサイト[EOF]　　　←この「最後の行」の末尾は、改行していません。 このような「改行が<CR><LF>になっているテキストファイル」は「Windowsのメモ帖」でテキストファイルを保存した時に作成されます。 HTTPサーバーは order allow,deny<CR> を評価します。末尾に「<CR>」が付いているため order allow と解釈し「,deny<CR>」をエラーで無視します。 次に allow from all<CR> を評価します。末尾に「<CR>」が付いているため「all<CR>というサイトをアクセス許可」します。「すべてのサイトをアクセス許可」にはなりません。 次に deny from .microad.jp<CR> deny from .amazonaws.com<CR> をそれぞれ評価します。末尾に「<CR>」が付いているため「.microad.jp<CR>」と「.amazonaws.com<CR>」がアクセス拒否されます。 この時「.microad.jp」と「.amazonaws.com」は、一致しないため、アクセス拒否されません。 次に deny from 自分のサイト を評価します。一番最後の行で、末尾で「ファイルが終わった」ため、末尾に余計な「<CR>」は付着していません。正しく「自分のサイト」がアクセス拒否されます。 どうです？「間違ってバイナリで転送しちゃったけど、自分のサイトだけはちゃんとアクセス拒否された」でしょう？ そういう訳なので、ちゃんと「テキストモードで転送」して「サーバー側のファイルのファイルサイズが数バイト小さくなったのを確認」しましょう。 ちゃんと「テキストモード」で転送すれば、サーバーに order allow,deny<LF> allow from all<LF> deny from .microad.jp<LF> deny from .amazonaws.com<LF> deny from 自分のサイト[EOF] と言うファイルが送られ、それぞれの行が、ちゃんと order allow,deny allow from all deny from .microad.jp deny from .amazonaws.com deny from 自分のサイト と評価されます。 なお「転送元の端末も、サーバーも、どちらもLINUX系」であったり「転送元の端末も、サーバーも、どちらもWindows系」であった場合、どちらも「改行コードは同一」ですから、テキスト転送でもバイナリ転送でもサイズは変わりません。 但し、テキストファイルで漢字を使った場合は、テキストとバイナリで「大違い」ですから、漢字混じりのテキストは必ずテキストモードで転送しなければなりません。
(for /r /d %i in (*) do for %j in (%i\*.html) do echo Filename:%j & type "%j") > "C:\hoge\combine.html" もしくは(普通は)、 (for /r %i in (*.html) do echo Filename:%i & type "%i") > "C:\hoge\combine.html"
点（モノ）の数だけ処理するのを避けたいなら、 R木のように事前にデータを整理する必要があります。 いきなり探索するとしたら、総当りしかないでしょう。 また、「距離」は一般にはユークリッド距離を指します。 二つの点 (x1,y1) と (x2,y2) のユークリッド距離は 　√((x1-x2)^2 + (y1 - y2)^2) で求まります。 例として点(0,0)と(9,9)の距離は、約12.7になります。 つまり、(0,0)と(9,9)の距離は10を大きく超えています。 > ｘ+10, x-10,y+10,y-10を境界にifで処理すると とのことですが、それでは正しい判定はできません。 No.2さんの言うように、2点間の距離を計算して 2点間の距離をif文一回で判定すべきでしょう。 ユークリッド距離でなく、市街地距離やチェス盤距離で 内外判定したいなら、上の境界とif文ででもできますが。
　文字をあらわすコードは、長さが一律でないですから単純に数では切れません。文字と文字の境界を知らないとなりません。 　また、URLを含むと言うことで、事前に他のキーワードに変換しておかなければなりません。具体的には 【引用】＿＿＿＿＿＿＿＿＿＿＿＿ここから $http_URL_regex = q{\b(?:https?|shttp)://(?:(?:[-_.!~*'()a-zA-Z0-9;:&=+$,]|%[0-9A-Fa-f} . q{][0-9A-Fa-f])*@)?(?:(?:[a-zA-Z0-9](?:[-a-zA-Z0-9]*[a-zA-Z0-9])?\.)} . q{*[a-zA-Z](?:[-a-zA-Z0-9]*[a-zA-Z0-9])?\.?|[0-9]+\.[0-9]+\.[0-9]+\.} . q{[0-9]+)(?::[0-9]*)?(?:/(?:[-_.!~*'()a-zA-Z0-9:@&=+$,]|%[0-9A-Fa-f]} . q{[0-9A-Fa-f])*(?:;(?:[-_.!~*'()a-zA-Z0-9:@&=+$,]|%[0-9A-Fa-f][0-9A-} . q{Fa-f])*)*(?:/(?:[-_.!~*'()a-zA-Z0-9:@&=+$,]|%[0-9A-Fa-f][0-9A-Fa-f} . q{])*(?:;(?:[-_.!~*'()a-zA-Z0-9:@&=+$,]|%[0-9A-Fa-f][0-9A-Fa-f])*)*)} . q{*)?(?:\?(?:[-_.!~*'()a-zA-Z0-9;/?:@&=+$,]|%[0-9A-Fa-f][0-9A-Fa-f])} . q{*)?(?:#(?:[-_.!~*'()a-zA-Z0-9;/?:@&=+$,]|%[0-9A-Fa-f][0-9A-Fa-f])*} . q{)?}; 　さて，ここまで長々と書いてきましたが，正確に正規表現を書くことを あきらめて，もっと簡単でいいやという人のための http URL の正規表現が以下になります． 　 s?https?://[-_.!~*'()a-zA-Z0-9;/?:@&=+$,%#]+ ￣￣￣￣￣￣￣￣￣￣￣￣￣ここまで［Perlメモ( http://www.din.or.jp/~ohzaki/perl.htm#URI )］より 　いったんこれでURLを見つけて、他のキーワードに変更しておきます。 　そのうえで、 ⇒特定の長さで折り返す( http://www.din.or.jp/~ohzaki/perl.htm#JP_Fold ) 　を行いますが、先のキーワードの問題がありますから、キーワードの前後で改行を入れておいたほうが良いでしょう。 　なお、フォームメールでしたら<textarea>をheardにしておいて、入力時に改行させて改行コードどもに受信するほうが楽かと思います。<TEXTAREA wrap="hard">
No.2,4,5,6です。 > 因みにnameの数もそうですが、当然渡すデータサイズも関係しますよね？ > max、20byteのパラメータが3個は・・・全行にあり、ここも不要な場合、削除しました。これは大きいですよね？(^^; もちろん渡すデータサイズがPOSTのサイズに関わってきますが、 max20バイトだったら、200行×8チェックボックス×20バイト=32Kバイト 程度のものですよ。POSTデータとしてはたいしたことないサイズだと思います。 (画像のアップロードにもPOSTを使いますが、そんなのは数メガ行く場合もあります) 追加の観点としては、そのCGIのパラメータ解析処理に問題がないかも 見た方がよいと思います。もしかして32Kの固定バッファを使って POSTデータを読み込んでいて、32Kバイト以上のPOSTデータを受信すると バッファオーバーフローでメモリ破壊してしまい、DBオープン処理や GetPrivateProfileStringが正常に実行できなくなっているという可能性は ないでしょうか?ということです。
IEはXmlHttpRequestの結果をキャッシュするみたいですね。 ・cacheオプションをfalseに設定する 　$.ajax({ 　　url : "http://hogehoge/ajax", 　　cache : false, 　　data : {...}, 　　... 　}); こうすると"http://hogehoge/ajax?_=(ミリ秒単位の現在時刻)"というURLでリクエストが投げられるため、 毎回違うURLを生成することができ、キャッシュのデータは使われなくなります。 ・キャッシュが使われないようにヘッダをセットする 　$.ajax({ 　　url : "http://hogehoge/ajax", 　　data : {...}, 　　beforeSend : function(xhr){ 　　　xhr.setRequestHeader("If-Modified-Since", "Thu, 01 Jun 1970 00:00:00 GMT"); 　　}, 　　... 　}); このヘッダをセットすることで、常に最新のデータを取得することができます。
Image::Magickは、Imagemagickという画像処理ツール群をPerlから利用するためのものです。 また、ただサーバーにアップしただけでは使えません。インストール手順にしたがって、コンパイルする必要があります。 レンタルサーバーを借りているのなら、管理者に確認してください。 ImageMagickを使えるようにしているなら、Image::Magickもインストールされていることが多いです。 あなたにインストールする権限があるのなら、インストール作業を行いましょう。 imagemagick-perl, per-Magick等といったパッケージになっていて、yum等の管理ツールからインストールできるはずです。 そうでなくても、ソースからコンパイルしてインストールできます。 あとは、本当に原因がImage::Magickによるものか、確認しましょう。 Inrenal Error 500 だけでは、別の原因も考えられます。
いくつも方法がありますが、リンクにQUERY_STRINGを含めるか 例: https://www.google.co.jp/search?q=CGI%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6&ie=utf-8&hl=ja か、HTTP_REFERERの値でCGI側で判断させるか フォームを普通のAリンクの様にプレゼンテーションで表現する。 <form action="hoge.cgi"> 　<input type="submit" value="質問はこちら" style="border:none;background-color:transparent;text-decoration:underline;color:blue;"> 　<input type="hidden" name="category" value="keizai"> </form> とかね。 　もちろんPATH_INFOを使っても良いです。 　ただし、いずれにしても質問フォームはCGIから出力することになります。__END__を使用すると良いでしょう。 スクリプト if($FORM{'category'} eq "keizay"){ $CATEGORY = '経済";} ・・・・ ・・・・ while(<DATA>){ s/__CATEGORY__/$CATEGORY/; print $_; } ・・・ ・・・ __END__ <html> <head> ・・・ </body> </html>
＞一つのチェックボックスでは同じ番号が入ります。 　意味が分かりません。radioではないのですから、ひとつのcheckboxには個別のnameが入ります。「一つに同じ」では、日本語として成立しません。 　複数のcheckboxに同じ名前のnameを持つことは出来ますが、其の場合は use CGI; &ReadParse(*in); my @files = split(/\0/,$in{'files'}); として、\0でくぎって、改めてjoinなどで連結する。 それかcheckbokの名前を個別にして、 <input type="checkbox" name="■-01" value="jpn" />日本 <input type="checkbox" name="■-02" value="usa" />米国 として、頭に■がついているnameと値のセットからデータを作るとか・・
もともと、 <br>→改行 は動作していたのでしょうか? 提示された中に、上記変換している部分が無いようですが
そのログからすると, スクリプトのファイル名は /home/httpd/cgi-bin/test.py でいいのかな? od -xc /home/httpd/cgi-bin/test.py ってできますか?
＞既にあるフォームを複製して内容を変更し新しく作る際の起きるであろう問題点。 ・入力項目数の増減にどう対応するのか？ ・変数名を勝手に変更してきちんと動かなくなるかも。 ・フォームの内容をどうするのか（メールで送るとかDBに格納するとか）が不明ですが、そのあたりの動作を既存の物とどう分離するのか。 ・「Thankyou」ページは同じでいいのか。 などなど。他にもいろいろ。 ＞他に素人の私でもできるフォーム作成方法がありましたら教えて頂けないでしょうか。 既存の物がベースとして良さそうなら、そのソースコードを徹底的に読むのが手っ取り早いと思いますよ。 当然そのcgiで使われている言語（perlとかshとか）の参考書と首っ引きで。 私も最初は数千行のperlのコードを追いかけてカスタマイズしましたが、エンジニアになった今でもその時の経験は役に立っています。 （まぁ15年以上前には参考書も先人も身近にないからそうするしかなかったんですけどね）
詳しく見ていませんが、 <img src="daycount.cgi?gif"> ではなく <img src="daycount/daycount.cgi?gif"> ではないですか？
とりあーえず、他の人から回答を得られていないところだけ担当しよう。 > それとwindowsなのでパーミッションは関係ないですよね？ 「読み込み権限」という意味では関係がある。Linuxでは755とかの昔ながらのパーミッションやSELinuxによって読み込み権限が制御されるが、Windows（Windows NT系＋NTFS）ではファイルやフォルダを右クリックしてプロパティを見た時のセキュリティタブがパーミッションの代わりとなる。Windows方式のアクセス制御は「パーミッション」の変わりに「ACL」という言葉を使うのが一般的だ。これを、CGIを動かすApacheがCGIを読み込めるようにしてやる必要がある。ローカルで開発をしている時はxampはあなたの権限で動くだろうし、本番環境では（おそらくデフォルトでは）LocalSystemアカウントの権限で動作する事であろう。Apacheを動かす時にapacheユーザーを作ってそちらでサービスを開始している、という場合にはCGIファイルに対してapacheユーザーの読み取り権限、ログ（カウンターのカウント）に対して書き込み権限を付与してあげる必要があるな。 動いている時には気にしなくていい事だが、いざ動かないという時にチェックするポイントの一つにはなるだろう。
メールは、iso-2022-jp で送信しないと・・ 　MTAや経路のルーター(さーばー)がUTF-8に対応しているとは限りません。 　CGIの処理自体は、UTFで構いませんが、メール自体はiso-2022-jpが無難です。 　　へッダーのデーターは、BASE64エンコードします。 　⇒ ( http://www.akanko.net/marimo/data/rfc/rfc2045-jp.txt ) 　　本文はiso-2022-jpにします。
詰まっちゃってて分かりにくいので、若干推測が混じります。 ＞これは、/は例えばlightというフォルダにlight.cgi、admin.cgi、regist.cgi、 ＞init.cgiを入れなさい、という解釈でよろしいのでしょうか？ スペースをアンダースコアに置き換えます。 +-- light / light.cgi [705] |_______________admin.cgi [705] |_______________regist.cgi [705] |_______________captcha.cgi [705] |_______________init.cgi [604] おそらくこうですね？ならば、その解釈で合っています。 ＞それと+と/ *.*はどう解釈すればよいのでしょうか？ 「+」は単に罫線でいう「├」「└」の代わりです。 「*.*」（や「*.html」など)は、アスタリスクによる「ワイルドカード」という表現法。 「何らかの文字」を意味するので、 「*.*」は「何かのファイル」、「*.html」は「何かのHTMLファイル」ということになります。 よく「○○.html」とか「ほにゃらら.html」なんて表現をしますが、この「ほにゃらら」と同じ意味です。 libディレクトリには「○○.pl」や「○○.cgi」などのライブラリファイル、「○○.ttf」というフォントファイルを入れることになるものと思われるのでそのような記載、tmplディレクトリにはテンプレート用HTMLファイルを入れることになると思われるのでそのような記載になります。
ちょっと手を加えてみた。 1) ./html/NQ3.htmlは./html/FQ3.htmlに名称変更 2) ERRORを補足するためBIGIN{}を加えた。 3) きちんとHTMLが出力されることを確認したら必ず削除 #!/usr/local/bin/perl BEGIN{ $| = 1; print "Content-type: text/plain\n\n"; open(STDERR, ">&STDOUT"); } use strict; my $SECTION = "\t<section>\n"; read(STDIN, my $buffer, $ENV{'CONTENT_LENGTH'}); my $HTML ="/index.html"; my $PATH = '/Q1.html'; my @pairs = split(/&/,$buffer); my $meter_value ="1"; my %FORM = (); my ($pair,$STYLE,$MESSAGE,$INFORM); foreach $pair (@pairs) { ＿my ($name, $value) = split(/=/, $pair); ＿$FORM{$name}=$value; ＿$INFORM .= "\t\t\t<input type=\"hidden\" name=\"$name\" value=\"$value\">\n"; } if($FORM{'Q3'} && $FORM{'Q2'} && $FORM{'Q1'}){ ＿$MESSAGE="回答です。"; ＿$STYLE = "section p{font-size:2em;text-indent:1em;padding:0.5em 1em;"; } else{ ＿$MESSAGE="下記の質問にお答えください。"; ＿$STYLE = "section{background-color:silver;"; } if($FORM{'Q3'} eq "W"){ ＿if($FORM{'Q2'} eq "M"){ ＿＿$SECTION .=qq^\t\t<p>あなたは、西日本生まれの既婚男性です。</p>\n^; ＿＿$STYLE .= "background-color:blue;color:white;}"; ＿} ＿else{$SECTION .= qq^\t\t<p>あなたは、西日本生まれ未婚男性です。</p>\n^; ＿＿$STYLE .= "background-color:aqua;"; ＿} } elsif($FORM{'Q3'} eq "E"){ ＿if($FORM{'Q2'} eq "M"){ ＿＿$SECTION .=qq^\t\t<p>あなたは、東日本生まれの既婚男性です。</p>\n^; ＿＿$STYLE .= "background-color:green;"; ＿} ＿else{ ＿＿$SECTION .= qq^\t\t<p>あなたは、東日本生まれ未婚男性です。</p>\n^; ＿＿$STYLE .= "background-color:lime;"; ＿} } elsif($FORM{'Q3'} eq "F"){ ＿if($FORM{'Q2'} eq "M"){ ＿＿$SECTION .=qq^\t\t<p>あなたは、太った既婚女性です。</p>\n^; ＿＿$STYLE .= "background-color:yellow;"; ＿} ＿else{ ＿＿$SECTION .= qq^\t\t<p>あなたは、太った未婚女性です。</p>\n^; ＿＿$STYLE .= "background-color:orange;"; ＿} } elsif($FORM{'Q3'} eq "S"){ ＿if($FORM{'Q2'} eq "M"){ ＿＿$SECTION .=qq^\t\t<p>あなたは、痩せた既婚女性です。</p>\n^; ＿＿$STYLE .= "background-color:red;"; ＿} ＿else{ ＿＿$SECTION .=qq^\t\t<p>あなたは、痩せた未婚女性です。</p>\n^; ＿＿$STYLE .= "background-color:fuchsia;"; ＿} } else{ ＿if($FORM{'Q2'} eq "M" || $FORM{'Q2'} eq 'N'){ ＿＿$meter_value = '0.67'; ＿＿$PATH = '/answer.html'; ＿＿if($FORM{'Q1'} eq 'M'){$HTML = 'MQ3.html';} ＿＿else{$HTML = 'FQ3.html';} ＿} ＿elsif($FORM{'Q1'} eq "M" || $FORM{'Q1'} eq "F"){ ＿＿$meter_value = '0.33'; ＿＿$HTML = 'Q2.html';$PATH = '/Q3.html'; ＿} ＿elsif($FORM{'Q0'} eq "ok"){ ＿＿$meter_value = '0.2'; ＿＿$HTML = 'Q1.html';$PATH = '/Q2.html'; ＿} ＿else{ ＿＿if($FORM{'Q1'} eq ""){$MESSAGE .= "</p>\n\t\t\t<p>データがありません\n";} ＿＿$meter_value ="0"; ＿＿$PATH = '/Q1.html'; ＿} } my $FORM = "\t\t\t<form action=\"$ENV{'SCRIPT_NAME'}$PATH\" method=\"post\">\n$INFORM"; open(IN,"<./html/$HTML"); while(my $line = <IN>){$FORM .= "$line";} close IN; if($FORM{'Q0'} eq ""){$FORM .= "\t\t\t<p><input type=\"submit\" value=\"つづける\"></p>\n\t\t</form>\n";} elsif($FORM{'Q3'} ne ""){$FORM ="";} else{$FORM .= "\t\t\t<p><input type=\"submit\" value=\"送信\"></p>\n\t\t</form>\n";} $SECTION .= $FORM."\t\t</section>\n"; my $METER = "\t\t\t<p class=\"meter\"><meter value=\"$meter_value\">$meter_value</meter></p>"; print "content-type:text/html\n\n"; while(<DATA>){ ＿s/<!-- meter -->/$METER/; ＿s/\/\* style \*\//$STYLE/; ＿s/<!-- Message -->/$MESSAGE/; ＿s/<!-- Section -->/$SECTION/; ＿print; } __END__ <!doctype html> <html> <head> <meta charset="utf-8"> <title>サンプル</title> <style media="screen"> <!-- html,body{margin:0;padding:0;background-color:gray;} header,section,footer{width:50%;margin:0 auto;padding:5px 10px;background-color:white;} p.meter{font-size:2em;text-align:center;} /* style */ --> </style> </head> <body> ＿<header> ＿＿<h1 id="title">Your title</h1> ＿＿<p><!-- Message --></p> <!-- meter --> ＿</header> <!-- Section --> ＿<footer> ＿＿<h3>A nice footer</h3> ＿</footer> </body> </html>
CGIは全てソフトJISで書かれています。 しかし、commander.plと言うファイル321行目を見て見てください。 「STRING::etc2sjis」と言うルーチン名が使われています。 str.pl ファイルを見ますと「文字コードをＥＵＣに変換」と書かれています。 perlのシフトJISは、半角カナに弱い問題がありますので、EUCで処理をしているようです。 最近開発するならUTF-8を使えば、この手の問題は改善されていますが、EUCを使っているので、長い歴史のあるCGIなのですね。 コードを見ていて楽しかったです。
sendmailのログはroot権限を使えないと見れないとは思います。 一般的には/var/log/の下にあると思いますが、なければお使いのMTAの起動スクリプトや設定ファイルを見ればどこにログを出しているか調べは付くはずです。 察するにcgiスクリプトがsendmailに渡すまでは正常に動いている可能性が高いので、sendmailがリレーする際にエラーが出ていないか調べた方がよいと思います。
foreachを1からはじめてるからじゃなくてですか？
前にも説明しましたが・・ CGIであることと、それがHTMLであることは、全く無関係です。 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 　頭がWindowsに汚染されていると、よく間違われます。CGIはHTMLを出力します。拡張子は.cgiであろうが.plであろうが、.htmlであろうが、.jpgであろうが一切関係なく、サーバーの応答ヘッダにcontent-type="text/html"とあれば、HTMLとしてブラウザは受け取ります。 　単純にテンプレートとなるHTMLを用意して、該当する部分だけ書き換えては次に進めば簡単です。HTMLがたとえいくつあろうと・・ 極簡単な例です。 1) 一行目のPerlへのパスは適当に書き換えてください。 2) 質問や回答の文字列を直接記述していますが、変更部分だけのHTMLを記述したテキストファイルをopenしてprintで出力すれば良いでしょう。 　テキストファイルのファイル名を、送信された回答から算出できる文字列にしておくと分かりやすいでしょう。 ★文字コードはutf-8です。 ★タブは＿に置換してあるので戻すこと。 ★エラー処理も何もしていない本体だけです。このままでは実用にはなりません。 #!/usr/local/bin/perl my $ANS = ""; my $Que = "<form action=\"$ENV{'SCRIPT_NAME'}\">"; my $HIDDEN = ""; my @pairs = split(/&/,$ENV{'QUERY_STRING'}); foreach $pair (@pairs) { ＿my ($name, $value) = split(/=/, $pair); ＿$value =~ tr/+/ /; ＿$value =~ s/%([a-fA-F0-9][a-fA-F0-9])/pack("C", hex($1))/eg; ＿$name =~ tr/+/ /; ＿$name =~ s/%([a-fA-F0-9][a-fA-F0-9])/pack("C", hex($1))/eg; ＿if ($value =~ /\r\n/) { $value =~ s/\r//g; } ＿elsif ($value =~ /\r/) { $value =~ s/\r/\n/g; } ＿$FORM{$name}=$value; } my @keylist = keys(%FORM); my $keycount = keys(%FORM); my $inData = "<dl><dt>要素数は $keycount です。</dt>"; for (my $i = 0; $i < $keycount; $i++){ $inData .="<dd>$keylist[$i]:$FORM{$keylist[$i]}</dd>"; } $inData .="</dt>"; if($FORM{'Q3'} ne ""){ ＿$MESSAGE="質問です。"; } elsif($FORM{'Q2'} ne ""){ ＿$MESSAGE="質問です。"; } elsif($FORM{'Q1'} ne ""){ ＿$MESSAGE="質問です。"; } else{ ＿$MESSAGE="回答です"; } if($FORM{'Q3'} eq "W"){ ＿if($FORM{'Q2'} eq "M"){$ANS =qq^<p>あなたは西日本生まれの既婚男性です。</p>^;} ＿else{$ANS =qq^<p>あなたは西日本生まれの未婚男性です。</p>^;} } elsif($FORM{'Q3'} eq "E"){ ＿if($FORM{'Q2'} eq "M"){$ANS =qq^<p>あなたは東日本生まれの既婚男性です。</p>^;} ＿else{$ANS =qq^<p>あなたは東日本生まれの未婚男性です。</p>^;} } elsif($FORM{'Q3'} eq "F"){ ＿if($FORM{'Q2'} eq "M"){$ANS =qq^<p>あなたは太った既婚女性です。</p>^;} ＿else{$ANS =qq^<p>あなたは太った未婚女性です。</p>^;} } elsif($FORM{'Q3'} eq "S"){ ＿if($FORM{'Q2'} eq "M"){$ANS =qq^<p>あなたは痩せた既婚女性です。</p>^;} ＿else{$ANS =qq^<p>あなたは痩せた未婚女性です。</p>^;} } else{ ＿if($FORM{'Q2'} eq "M"){ ＿＿$Que .= qq~\t\t\t<p>あなたは西日本出身？それとも東日本出身？</p>\n\t\t\t<p>西日本：<input type="radio" name="Q3" value="W"></p>\n\t\t\t<p>東日本：<input type="radio" name="Q3" value="E">\n\t\t\t</p>~; ＿＿$HIDDEN .="<input type=\"hidden\" name=\"Q2\" value=\"$FORM{'Q2'}\"><input type=\"hidden\" name=\"Q1\" value=\"$FORM{'Q1'}\">"; ＿} ＿elsif($FORM{'Q2'} eq "N"){ ＿＿$Que .= qq~\t\t\t<p>あなたは太っている？それとも痩せてる？</p>\n\t\t\t<p>太っている：<input type="radio" name="Q3" value="F"></p>\n\t\t\t<p>痩せている：<input type="radio" name="Q3" value="S">\n\t\t\t</p>~; ＿＿$HIDDEN .="<input type=\"hidden\" name=\"Q2\" value=\"$FORM{'Q2'}\"><input type=\"hidden\" name=\"Q1\" value=\"$FORM{'Q1'}\">"; ＿} ＿else{ ＿＿if($FORM{'Q1'} eq "M" || $FORM{'Q1'} eq "F"){ ＿＿＿$Que .= qq~\t\t\t<p>あなたは未婚？それとも既婚？</p>\n\t\t\t<p>未婚：<input type="radio" name="Q2" value="M"></p>\n\t\t\t<p>未婚：<input type="radio" name="Q2" value="N">\n\t\t\t</p>~; ＿＿＿$HIDDEN .="<input type=\"hidden\" name=\"Q1\" value=\"$FORM{'Q1'}\">"; ＿＿} ＿＿else{ ＿＿＿$Que .= qq~\t\t\t<p>あなたは男？それとも女？</p>\n\t\t\t<p>男：<input type="radio" name="Q1" value="M"></p>\n\t\t\t<p>女：<input type="radio" name="Q1" value="F">\n\t\t\t</p>~; ＿＿} ＿} } $Que .= "$HIDDEN <input type=\"submit\" value=\"送信\">"; $COMMENT = qq~<div class="section">$ANS</div>~; print "content-type:text/html\n\n"; while(<DATA>){ ＿s/<!--Message-->/$MESSAGE/; ＿s/<!--inData!-->/$inData/; ＿if($ANS ne ""){ ＿＿s/<!--Comment-->/$COMMENT/; ＿} ＿else{ ＿＿s/<!--Question-->/$Que/; ＿} ＿print; } __END__ <!doctype html> <html> <head> <meta charset="utf-8"> <title>サンプル</title> <style media="screen"> <!-- --> </style> </head> <body> ＿<header> ＿＿<h1 id="title">Your title</h1> ＿＿<p><!--Message--></p> ＿</header> ＿<section> <!--inData!--> <!--Question--> ＿＿</form> ＿</section> <!--Comment--> ＿<footer> ＿＿<h3>A nice footer</h3> ＿</footer> </body> </html>
なぜわざわざiframeを使うのですか？ それぞれの質問を書いた部分以外は共通なのですから、最初の質問ページも含めて、すべてCGIで出力させるほうが楽ですよ。 　CGIにデータが渡される都度、それまでのデータはhiddenで保持しておけば良いです。 　そうすると、問題のあるiframeも使わなくてすみます。
> ひとつのCGIファイルに、 > 複数のページの条件分岐をまとめて書くことは出来ないのでしょうか？ できますよ。 > ページごとに別々のCGIファイルを作成しなければならないですか？ その必要はありません。 現状のプログラムをざっと見ましたが、これじゃずっとgo2.htmlにしか行かないですよね。 > ・ > else { > print "Location: ./go2.html\n\n"; > } 多かれ少なかれこのelseに引っかかると思うので。 この方式で行くとしたら、自分だったら今どの質問にいるかをフォームで送りますね。 <input type="hidden" name="stage" value="1" />のような感じで今どこの質問にいるのかを送ってもらい、それぞれの問いへ振り分けるための条件分岐を作るでしょうね。 if ($stage == 1) { # q1のための処理 #===================変数の設定=================== $q11 = $FORM{'q11'}; $q12 = $FORM{'q12'}; #=================条件分岐_質問１================= if ($q11 eq "q11_a") { print "Location: ./ba1.html\n\n"; } elsif ($q11 eq "q11_c") { print "Location: ./ba2.html\n\n"; } ・ ・ ・ else { print "Location: ./go2.html\n\n"; } } elsif ($stage == 2) { # q2のための処理 } elsif ($stage == 3) { ... } else { print "Location: ./unknown.html\n\n"; } 一応気になるところとしては、CGI.pmにパラメーターの解釈をさせたらどうかとか、いちいちq12などを手書きで取ってこずにfor文で回すなりすればどうかとか (例えば、$form{'q' . $stage . $idx}のような感じで) とか、テンプレートエンジン使ったらとか思うところはありますが。 まあ、そういうのは別途いろんな人のプログラムを読んで勉強してみてください。
エラーログを読むとか、CGI::Carpを使うとかして、エラーの内容を確認してください。 http://perldoc.jp/docs/modules/CGI-2.89/CGI/Carp.pod おそらく elsif ($q1 eq "" || $q2 eq "") { &error($error = "すべての項目に回答して下さい"); } のelsifが成立して、「&error($error = "すべての項目に回答して下さい");」を実行する際になんらかのエラーが発生したと思われます。
リンククリックカウンターとかクリックログとかのアルゴリズムで出来そうですけど。 ボタン別：ボタン名を変えて、どのボタンをクリックしたのかをチェック。 ログ記録：日付時刻とボタン名だけ記録で良さそうですが、アクセス数が増えると一つのcsv では集計が大変なので、ボタン名別ファイルにしたり、日付別とか月別ファイルにするとか 配布されてるのは、機能盛りだくさん（アクセスログとしていろいろ記録していろいろ解析）か、簡単なのは、cgi入門のカウンター作成で解説されてるような総数しか保持しないもの、だろうから、そのまま使えるのって少ないかな。 以下で配布されてるダウンロードカウンターなどは参考になりませんか？ http://www.cgi-search.info/search/category110-070.html
$q1 = $FORM{'radio'}; if ($q1 eq "A") { print "Location: http://www.a.html\n\n"; } else { print "Location: http://www.b.html\n\n"; } exit;
書かれているプログラムだと $FORM の中身は空っぽです。 まずはフォームから送られてきたデータを変数に入れましょう。 下記のようなプログラムで変数に入れることができます。 if ($ENV{'REQUEST_METHOD'} eq "POST") { read(STDIN, $str, $ENV{'CONTENT_LENGTH'}); } else { $str = $ENV{'QUERY_STRING'}; } foreach $i (split('&', $str)) { $i =~ tr/+/ /; $i =~ s/%([0-9a-fA-F][0-9a-fA-F])/pack("C", hex($1))/eg; ($t1, $t2) = split('=', $i); $FORM{"$t1"} = $t2; }
問題が「はい」か「いいえ」などの単純な選択式ならプログラムは不要でリンクのみで実現できるはずです 問題数分のページを用意して > 1問目で生年月日が○年×月以前だったら2問目はこの問題、 > 2問目で回答がはいだったら3問目はこの問題・・・ １問目のページには「○年×月以前」のボタンに２問目のリンク、そうでないならそのボタンに自分の進ませたいページへのリンク ２問目のページには「はい」のボタンに３問目のページ、「いいえ」なら自分の進ませたいページへのリンク ということではないでしょうか？ 問題ページのMAPを作って、実際の各問題ページに「はい」か「いいえ」に対するリンクを張ってゆくだけかと思います ５問というか５階層を目途として、問題が２択とするなら最大３１問（ページ）ほど用意すれば良いわけです 問題がかなりたくさんあってランダムに表示して得点などを記録し競うようなものならプログラムを利用するという話はわかります。 ただしこれもCGIは不要でサーバに負担をかけないJavaScriptなんかで実現可能です。 CGIでなければいけないという理由を強いて見出すならば、問題解答の記録・集計結果などをサーバ上で一元管理するようなそこそこの機能を持ったものになってくるかと・・・そうなると趣味の域とは言い難く、管理者の趣味趣向によって管理機能が多彩となり得るものがフリーであるかどうかというのは疑問です。 問題ページや正解DBや判定、利用者管理などちょっとしたCMS規模なんじゃないかと感じますが・・・。 もう少しビジョンを具体的にした方が、フリーのサンプルを検索するにしろ参考サイトを探すにしろアクションが容易になると思います。
実際にやってみたこともないしPythonは門外漢ですが普通に考えると CGIっていうのはWebサーバの持つユーザ権限で通常のプログラムを実行して、実行結果を標準出力でブラウザに橋渡しするだけの仕組みなので、普通のソケットを利用したプログラムでも単体動作するものなら動作はすると思います。 ただ、深く追ってはいませんがサンプルのプログラムをざっと見る限りサーバとしてのプロセスを発生させようとしているのでこれは無理かと思います。 なぜなら、CGIで呼び出されるプロセスはWebサーバの子として呼ばれるためWebサーバの設定であらかじめタイムアウトの時間が設定されているからです。 たとえばApacheならデフォルトで300秒が設定されますので５分たてば切り捨てられます。 サーバ機能と兼任するようなプロセスはシステム上で実行させる以外ないと思います。 クライアント機能のみで短時間で処理が終了するものならOKかと思います。 この手のプログラムはJavaアプレットでならできるかもしれません（昔チャット用のクライアントサーバをブラウザ上で動かすものを作りましたが、CGIではありません）
テーブルで定義している列と、INSERTしようとしているデータの列の数が食い違っているからかと。 処理ごとの戻り値や例外を確認するコードを組み込むと、いろいろ理解が深まりやすいと思います。
・利用者側がActiveDirectory環境にある ・ユーザープロファイルのリダイレクトがされている ・同じユーザーIDを使い回してログオンしている この条件が成立すれば、Cookieも同期されるかもしれません。 ---- Cookieの焼き方の問題な気がします。
メールは、必ずiso-2022jpで送信しましょう。 print MAIL "Content-Type: text/plain; charset=\"iso-2022-jp\"\n"; となっているのに、内容はutf-8に変換してる。 メールにはルールがあります。 ・iso-2022jpで本文は送ること ・一行は76文字以下(返信を考えるとさらに少なくすること)で折り返すこと ・ヘッダーに含まれる日本語は、必ずbase64エンコードすること 　以上の対応が一切されていません。
エクスプローラーの表示設定で、拡張子の表示がオフになっているだけではないでしょうか？ 「登録されている拡張子は表示しない」のチェックを外してみて下さい。
URLを相対パスで記載しているか？ よくある話が、画像用のサーバを分けていたりすると、 これらのURLが絶対パスで記述されていることがあります。 formのactionにGETを使用していないか？ 通信内容はSSLで暗号化されますが、送信先のURLは暗号化されません。 暗号化したい場合は、POSTなどへ変更した方が良いです。 そしてActionをGETから変更した場合、ログの出力に影響する場合があります。 アプリ自身としてはこんなトコロかな。
>うんともすんとも～ ということはjavascriptの問題ではありませんか? onsubmit="return sitesearch(this);" とありますが、必要なJavaScriptファイルは取り込んでいますか? Ajaxモードであれば、検索結果を表示するための <div id="search_result"></div> はHTMLのどこかに記入されていますか? あるいは onsubmit="return sitesearch(this);" を削除して送信すると結果はちゃんと表示されますか? (あるいは直接 http://～/index.cgi?q=aaaなどでアクセスしてみる)
500 Internal server Error ということは、admin.cgi実行時に問題があった場合に出るものです。 その理由は次の2つが主です。 ・admin.cgiが正常に実行できない。エラーになる。 ・CGIとしてのプログラムが正しくない。HTTPヘッダが無い、ヘッダが不正、出力自体が無い、等 まず、何が起こっているのか調べましょう。 そのためには、エラーログを調べます。 http://www.adexd.net/support/log/index.html
> あと、( 前の人の間違いなのですが) 一応弁解させていただくと、誤差が大きいことを承知した上で手を抜いたのです。プログラムが動く方が重要だと思ったので。 前の回答は、厳密さという点では、そもそも画像の端っこで値をいくつ合計するかカウントしていません。また計算誤差を問題視するなら、実数で求めて最後に四捨五入するべきでしょうね。 > ＋がokで、＊はだめ、それはなぜですか。 表示結果は確認されましたか。おそらく＋も期待される結果ではないのでは。 OpenCVの実装までは確認していないので推測ですが、Vec3bクラスを作った方が＊演算子を実装しなかったのでコンパイルエラーになり、＋演算子もベクトルの各要素の和を求めるようにはなっていないのでしょう。これは画像処理ではなくC++に関することですね。 上に限らず、この質問はCGIではなくC・C++カテゴリでされた方がよいでしょう。 グレー用に直したコードを載せます。 #include <opencv.hpp> #include <climits> #include <cmath> using namespace cv; int main( int argc, char** argv ) { 　Mat image = imread("test.png", 0); 　Mat new_image = Mat::zeros( image.size(), image.type() ); 　for( int y = 0; y < image.rows; y++ ) 　{ 　　for( int x = 0; x < image.cols; x++ ) 　　{ 　　　double count = 0.0; 　　　double ff1 = 0.0; 　　　for( int ll = -1; ll <= 1; ll++ ) 　　　{ 　　　　for( int mm = -1; mm <= 1; mm++ ) 　　　　{ 　　　　　if (x+ll >= 0 && x+ll < image.cols && 　　　　　　　y+mm >= 0 && y+mm < image.rows) 　　　　　{ 　　　　　　ff1 += static_cast<double> (image.at<uchar>(y+mm, x+ll)); 　　　　　　count += 1.0; 　　　　　} 　　　　} 　　　} 　　　ff1 = round(ff1 / count); 　　　ff1 = (ff1 > UCHAR_MAX) ? UCHAR_MAX : ff1; 　　　new_image.at<uchar>(y,x) = ff1; 　　} 　} 　namedWindow("Original Image", CV_WINDOW_AUTOSIZE); 　namedWindow("New Image", CV_WINDOW_AUTOSIZE); 　imshow("Original Image", image); 　imshow("New Image", new_image); 　 　waitKey(); 　return 0; }
> ご回答ありがとうございます。 > なれど、実行の結果は > Unhandled exception at at 0x76C8C41F in ConsoleApplication9.exe: Microsoft C++ exception: > cv::Exception at memory location 0x0016F1D8. メモリ関係の例外であることは分かりますが、アドレスの情報は他の人には無意味ですし、これ以上のアドバイスは難しいです。一応、わたしの手元の環境では正常に動作していますし。 それと基本的なことですが、まず全てを確認をされた方がよいでしょう。マニュアルなどをきちんと見て。at()の引数のような単純ミスが他にありませんか？ それでも分からなければ、デバッグモードでコンパイルしてどこで例外が起きているか、その時の座標値がどうなっているか、デバッガで追跡されるのがよいでしょう。
Perlのプログラムとしては間違いはないけれど、CGIとして間違っています。 CGIで期待される出力は ヘッダ(複数行の場合あり、空行不可) 空行 本体 という形式です。 Perlのprintは、明示的に改行コードを指定しなければ、改行しません。 本体にあたるHTML部分は改行が無くても問題ありませんが、ヘッダと区切りの改行は必須です。
メール本文は、iso-2022-jpでなければなりません。 ヘッダー内に 　日本語などを含む場合は、Base64エンコードをします。 　一行の文字数は、 75バイト以内です。 　他にも沢山、mailに対しては規定があります。これを守らないと・・
「Web Memory」 http://www.web-liberty.net/download/memory/index.html など如何でしょうか？ 新着何件かをjsファイルに書き出せるので、それをJavaScriptで呼び出せば、更新履歴として使えると思います。
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> <html><head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <title>Page-Jump-PHP</title></head><body> <form method="GET" action="page-jump.php"> <p> <input type="text" name="myID" width="50"> <input type="submit" value="Submit"> </p> <?php if (isset($_GET["myID"])) { if ($_GET["myID"] == "111") { header("Location: " ."http://www.yahoo.co.jp/"); } else if ($_GET["myID"] == "222") { header("Location: " ."http://www.google.co.jp/"); } else if ($_GET["myID"] == "333") { header("Location: " ."http://okwave.jp/"); } } ?> </form> </body></html> 上記をコピーして　メモ帳に貼り付けて　page-jump.php　という名前で保存　(文字コードをUTF-8) サーバにアップして　パーミッションを設定 http://aoyama984.sitemix.jp/page-jump.php 111　222　333　の3つがあり　別々のページにジャンプする 不明な点は　補足を　　(安全上は追加処理が必要)
必須ライブラリー(jcode.pl)が正しく組み込まれている 想定で話を進めます。 cgi本体が見られないので、何とも言えませんが、 表示や取り込み自体はうまくいっているようなので、 日本語コード変換の時に、自作ファイル内のデータに 不備があり、うまく変換できていないと推測されます。 この場合… バイナリとか、テキストのモードを変えてアップし直すと 文字化けしなくなる可能性はあります。 あとは… perlのバージョンによっては、EUCコードに変換する際の 記述が異なることもあると思うので、「yoyaku_1_e.cgi」の 中身を確認して変更する必要が出てくるかも知れません。 &jcode'convert(*○○,'euc');→jcode'convert(*○○,'euc');
パスワードのword verificationですか？ 　自身で行わず、ImageMagick( http://ja.wikipedia.org/wiki/ImageMagick )などを、外部コマンドで呼び出して行いますが？？？Ｃ言語からだと、MagickCore MagickWand、C++からだと、Magick++ですかね。 　しかし、メールフォームでしたら、圧倒的にPerlのほうが良いでしょう。なんと言ってもテキスト処理がメインの作業ですから、餅は餅屋・・。極端にC系統と異なるわけじゃないですし・・ 　
さらっと見ただけなので外しているかもしれませんが... 受信したメールの本文が文字化けしているということでよろしいでしょうか。 sendMailサブルーチンでbodyをUTF-8にしているのは理由があるのでしょうか？ これをjisにしてみたらどうなるでしょうか。
＞メールフォームのCGIを、知人のホームページの掲示板にHTMLで書き込み、送信先を私のメールアドレスにしたい場合 見当はずれの解凍でしたらごめんなさい。 つまりタグが許可されている掲示板にCGIを貼り付けるという意味ですか？ それならまったく不可能です。 通常タグが許可されていても種類が限られています。 特にCGIはBBSに貼り付けるどころか、レンタルのサーバーでも制限されている場合があります。 CGIを張り付けられる条件 FTPなどでサバーに直接アクセスできること もちろん自分のホームページなら可能です CGIが許可されていること perlのパス、sendmailのパスがわかっていること が必要です。 掲示板への書き込みなら、メールで返事をもらう迄に留めるべきです
当方、PHPはまったく触れたことがありませんが、 一般的な観点からの回答をさせて頂きます。 まず、戻り値 $num とif文の件からですが、 $db がどんな型のオブジェクトなのか質問文からわかりませんので executeが何を返すのかを調べて見れませんが、 変数名から推測すると追加された行(レコード)数を返すのではないでしょうか？ 通常、だいたいのプログラミング言語では 数値の場合 0 が 偽 でそれ以外が 真、 オブジェクトなどであれば空やnullが 偽 でなにかあれば 真、 と評価されるかと思います。 if文はnotで真偽を反転していますので、 $numが偽であればif文内を実行することになりますね。 # とはいえ、表示しても空だったということですので、 # 追加行数では無くて別のオブジェクトかもしれませんが。 次に、DBサーバーでSQLを実行して問題なく追加されたとのことですが、 これは、実行前には行が存在せず、SQL実行後に行追加されたことが確実でしょうか？ または、複数回実行することでエラーが起きるなどはないでしょうか？ # たとえば、SELECTの結果レコードが無く、0行追加で正常に実行終了した、 # というようなことは起きていないでしょうか。 # もしくはSQLでデータを追加済みのためプログラムでは # 一意制約や主キー制約によってエラーが出てしまう、などないでしょうか。 そのあたりも特に問題なければ、 質問文に引用されている箇所のSQL文を、 たとえばSELECT以降のみを含む内容で実行してみてexecuteの戻りに抽出結果が戻るかどうかを見てみるとか、 (SELECTを含まない)定型のINSERTを行わせてみて行追加出来るかなど、 領域を絞って問題を特定していくしかないのではないでしょうか。 ちなみに、質問分に記載のコードで、SQL文が括弧で囲んでありますが これは元コードそのままなのでしょうか？ 括弧が文字列の引用符になるんでしょうか？ # $sql を出力してみると意図したとおりの内容でしょうか。
CGIが入っているディレクトリを　hoge と名づけた場合、以下のような設定をトップディレクトリの.htaccessに書けばいいと思います。 RewriteEngine on RewriteCond %{REQUEST_URI} ^.*/index.html RewriteCond %{REQUEST_URI} !^/hoge/.* RewriteRule ^(.*)index.html$ http://scinex-fw.co.jp/$1 [R=301,L]
最初にフォームを表示するページのファイル名が　index.html　だったりしませんか。 入力された内容を処理するCGIで遷移元のURLから不正アクセスで無いかチェックしていると、index.html　じゃ無いページから遷移してきたので403エラーを出力しているという事が考えられます。 CGIの設定で遷移元のURLを変更できるのであれば、設定を見直すと直る可能性があります。
http://cc-room.net/cc/y4-2.html ↑ こちらをどうぞ。 頑張ってくださいね。
CSVというのはCSVファイルと予想しますが、ファイルからとフォームからでそんなに違わないと思うのですが。 ファイルは簡単に行ごとにわかれた配列として読み込むことができますよね。 フォームからデータを受け取って、行ごとの配列にするのもsplitを使えば簡単でしょう。 そうすると、行ごとの配列を受け取って集計するサブルーチンを作ればどちらにも使えると思いませんか？ あとは#1さんのおっしゃるとおりやると良いでしょう。 連想配列だけでやると整列して出てこないので、ちょっと工夫が必要です。 というわけで、ちょっと書いてみました。 use strict; sub aggregate { my $csvp = shift; my @csv = @$csvp; my %subtotal; my @order; foreach (@csv) { chomp; my ($id, $num) = split(/,/); if (!exists $subtotal{$id}) { push(@order, $id); } $subtotal{$id} += $num; } my $ret = ""; foreach my $key (@order) { my $value = $subtotal{$key}; $ret .= "$key,$value\n"; } return $ret; } use CGI; my $q = new CGI; my $csv = $q->param('csv'); if ($csv) { my @csv_array = split('\n', $csv); print $q->header('text/plain'); print &aggregate(\@csv_array); } else { print $q->header; print $q->start_html; print $q->start_form(-action=>$q->url, -method=>'post'); print $q->textarea(-name=>'csv'); print $q->submit; print $q->end_form; print $q->end_html; } まず、まじめにCSVを解釈するつもりがなかったのでCSVの値には英数字しか来ないと持っています。本気でCSVを解釈するなら、"の取り扱いを真面目にやる必要があるでしょう。あるいは、Text::CSVなどのモジュールを使ったほうが良いかもしれません。 ちなみに、このプログラムでは入力で出てきた順序を保って出力するようにしています。 例えば、 a,1 c,2 b,3 c,3 と入力すると、 a,1 c,5 b,3 と出します。 先に述べたように、aggregateサブルーチンに与えるデータは行ごとに分けて配列に入れたものであれば良いので、ファイルの場合はもっと単純なコードで使うことができます。 open(my $f, "example.csv"); my @c = <$f>; close($f); print &aggregate(\@c); 実際に使う場合はtext/plainでの出力ではなくpreあたりで出力して、下にフォームを表示するくらいしないと不便だと思いますが、そこは自分でやってみてください。
要するに、そのネットショップ管理のCGIは、改行やHTMLタグ(<br>等)を 入力できないようになっている仕様なんです。 ("<"や">"はタグの開始/終了ではなく、単なる文字記号と認識する仕様) 解決するには、そのCGIを改造するしかないと思いますが、 ここで質問しても、あなたがどんなCGIを使っているか わからないので、適切なアドバイスができるわけありません。 前回の質問は、あてずっぽうのアドバイスが運よく当たったようですが、 今回の質問のように処理方法が異なるところには適用できません。 また、元の処理構造をよく理解しないまま改造すると副作用が出るかも しれません。 前回の質問の解決方法の場合、変換した$lineを表示だけに使ってるなら 大丈夫だと思いますが、他の処理にも使ってたり、表示結果をどこかで 再利用されてたりするならそこに悪影響を及ぼさないか確認する必要あります。 あなたが今使っているネットショップ用CGIが一般に公開されている ものなら、その名前を開示すれば、そのCGIのことを知っている人が 適切なアドバイスをくれるかもしれません。 あなたのショップ用に誰かが作ってくれたものなら、その作成者に 相談するべきです。
HTML出力する部分で $line =~ s/&lt;br&gt;/<br>/g; print OUT $line; とか・・・
書かれている内容は　 仕掛けを設置することについて　相手がOKなら可能です 他の制作会社のアフィリエイトとは ｈttp://○○.com/new?id=12345 このようなアドレスがボタンに組み込まれているようですが たとえば　 申し込み画面の送信ボタンをクリックして 確認画面が表示され　確定ボタンをクリックする この確定ボタンに　こういう機能を組み込んでほしい というお願いが可能ならできます 2パターンあって　ひとつはクリック時に　 申し込みデータの送信と　アフィリエイトデータの送信を両方行うものと もうひとつは　クリックして　データが送信されたら　サーバで アフィリエイトデータを送信するものです 前者は設置可能ですが　 後者は相手のサーバプログラムの改変が必要なので普通は無理です もし後者なら　制作会社の用意したサイトでしょう 希望の形が決まっているなら　 そのページを見せてもらう方が早いと思います もしよければサイトを見せてください CGIについては　基本的に　 自サイトに来てもらう　 訪問時に　紹介者IDなどがわかるようにする という条件でシステムを組むのが普通です このタイプのシステムは既製品でもあると思いますが これ以外は新規に作成となるのでは
Googleドライブを使えば楽だよ https://drive.google.com/
こんにちは。 クライアント側での入力チェック等はJavaScriptを利用します。 サーバサイドの処理はperl,PHP,JavaServlet,JSP,Ruby等々いろいろな言語で処理が可能です。 >システム的な部分でCGI以外 CGIって仕組みの総称みたいなものです。 http://ja.wikipedia.org/wiki/Common_Gateway_Interface ほとんどのサーバで利用でき、書籍やwebのサンプル等の多さから サーバ側の処理はPHPを勉強すれば良いと思います。 実運用するにはセキュリティ関連も勉強すると良いです。 さらに望むのであればデータベースについても勉強すると作れるものの幅が広がります。 (応募されたデータ、質問をデータベースに保存する等)
>javascriptを利用すると、何か問題があるのでしょうか？ JavaScriptはあくまでもおまけ、無いよりはいいという程度のものです。 全体の流れとしては、 FORM入力 >> 送信 >> CGI側でチェック >> メール送信 となるのですが、送信前にJavaScriptチェックがあれば、 ・ユーザにとっては、送信した後にエラーとかいろいろ言われなくて済む ・サーバ側にとっては、無駄な処理回数が減る と両者にとってメリットがあります。 ただJavaScriptは閲覧者がOffにしていることがあるので、最終的にはCGI側での入力チェックは必須です。(JavaScriptはあくまでも予備車検のようなもの、とお考え下さい) サーバがCGIも許可していれば、以下のような必須項目機能がついた無料のCGI + JavaScript という手もあります。 http://www.kent-web.com/mail/postmail.html
使用したことはないですが、こういうものですか？ ▼サービス http://www.cubequery.jp/ http://www.efeel.to/survey/ ▼CGI http://www.qnaire.org/ http://cgikon.com/free_sample/sample_308.html
IPアドレスが入っているか、ホスト名が得られるかは、Apacheの設定によります。 ホスト名を得る設定になっていてもDNSの逆引きがその時たまたま失敗すると、IPアドレスのまま設定されます。 なので、「ホスト名が入っていたら儲けもの」くらいの感覚で扱うのがよいかと。
「ＫＥＮＴさんで配布されている「Honey Board」という掲示板を使っているのですが、書き込みの削除の仕方がわかりません。」 　私は「Joyful Note」を使っていますが、掲示板への投稿時に「削除キー」を設定していなければ、削除はできない仕様だと思います。 　あなたがその掲示板を運用しているのであれば、「管理用」をクリックして、管理権限で書き込みを消すことができます。あなたが管理者でなければ、掲示板の管理人にお願いして、削除してらうしかないでしょう。
■各データーを受け取ってからどのようにしたいかの処理 そういえば使い方を聞かれはしたけどどのように使いたいのかは聞いてないわ まあいいやそれでも説明はできるしね 先っきの書き込みで chek_name[3],*chek_value[3]; の中身はこんな感じになってるはず chek_name[0]==sel chek_name[1]==sel chek_name[2]==NULL chek_value[0]==Sel21 chek_value[1]==Sel23 chek_value[2]==NULL そしてさっきの分解法は チェックを全部ONにしようが一つだけONにしようがONにした数だけ配列に値がはいるようにしてるの そして次 while(chek_value[i]!=NULL){ check(&chek_value[i],&b,&c);//NO3で作ったHTMLの表示を変える関数 if(strcmp(chek_value[i],"Sel21")==0){ //やっぱりチェックボックスのvalueは数字がいいよ処理がめんどいswichもつかえないし //sel21がON担ったときどう処理したいかここに記述する //って言うか処理させたい事の関数を作ってまとめて処理するといいかも //失敗失敗 } if(strcmp(chek_value[i],"Sel22")==0){ //sel22がONになったときどう処理したいかここに記述する } if(strcmp(chek_value[i],"Sel23")==0){ //sel23がONになったときどう処理したいかここに記述する } i++; } 大体こんな感じだね まとめると ・チェックがonのとき（offでも処理できるならどうぞ）情報を送信してもらう ・送られてくる情報を分解して各配列に入れる（順番がバラバラでも内容にNUULが入っててもＯＫな用に） ・onの情報が送られてきたときようの表示変換関数と動作処理関数を作っておく ・HTMLのcheakのvalueは数字のほうが処理しやすい //・説明する時に作ったソースは私が作ったソースをアレンジして作ったけれどアレンジしたのはコンパイルして動作を確認していないからちゃんと動くか分からない上にバグがあるか分からない //・たぶんあってるけれど、多少書き間違えてるかもしれないから質問者さんが自分でどこがミスってるか考えてね　ミスがあっても本の少しだろうからね　アレンジしていない私のソースはバグなし、書き間違えなし ・C言語でCGI作ってる人少ないみたいだから同じC言語使い同士仲良くやろうね。また質問やききたい事があったらよろしくね 疲れました。 手が冷たいです。 今日は寝ます。
詳しい説明は省きますが、結論だけ言うと不可能です。 　簡単に言うと、ホスト名はIPアドレスと1:1で対応するネットワーク上のリストだと思っていれば良いです。ひとつのIPアドレスを使いまわしているに過ぎませんからね。 　そもそも「特定の個人をはじく」という考え方自体がウェブには存在しません。 【引用】＿＿＿＿＿＿＿＿＿＿＿＿ここから Webの背景をなす基本的な原理は次のようなものである。どこかの誰かが、 ひとたび文書、データベース、画像、音声、動画あるいはある程度まで インタラクティブな画面を準備したなら、もちろん使用許諾の範囲内のことだが、 いかなる国のどのようなコンピュータを使っている誰もが、この画面に対して アクセス可能でなければならない。そして、ほかの人たちが見つけることができる ように、リファレンスすなわちリンクをつくれるようにしなければいけない。 ￣￣￣￣￣￣￣￣￣￣￣￣￣ここまで［よいウェブページを書こうとする人のためのヒント( http://www.sal.tohoku.ac.jp/~gothit/webauthoring2.html )］より 　もしも、あるデータを特定の(複数の)限定された人々にのみ利用させたいのでしたら、パスワードをかけるなりして閲覧制限をかけるしか方法はありません。HTTPサーバーにはbasic認証と言う手段がありますし、cookie、CGIなどを利用した様々な方法があります。 　発想を逆にして、「許可された人だけが閲覧できる」方法を考えてください。（--ウェブの本来の目的とは外れますが）
その問題を聞いて自分が考えたのは、速さ = 距離 / 時間 でした。 言い換えると、瞬間アクセス数 = 一定時間のアクセス数 / 時間 とやっているのではないかと推測しました。 実際に検索してみると、 http://www.ziyu.net/counter.htmだと、"今現在（正確には過去90秒間）"と書いていますので、自分の推測は正しいことが裏付けられました。 また、一定時間に一定数しか処理を受け付けないようなCGIはファイルにアクセスがあったときのタイムスタンプを書いておき、それを比べることで行います。たとえば、こんな手順です。 1. タイムスタンプを入れたファイルを読み書きロックした状態で開く 2. 一定時間に入っているタイムスタンプだけをタイムスタンプの配列に取り込む 3. 配列の長さが一定数を超えるなら、一定数 - 1に変更 4. 現在の時刻のタイムスタンプを配列の先頭に追加 5. ファイルの先頭にseekして、truncateした上で、配列をファイルに書き戻し、ファイルを閉じる 6. 3で配列の長さが一定数を超えていたら、処理の受け入れを拒否、そうでない場合は許可 あとはこの組み合わせですね。 上記の3の処理を省き、6の処理で配列の長さを返すようにすれば、一定時間に何人アクセスしているかがわかります。つまり、一定時間以内にアクセスした人のタイムスタンプを書いておくファイルを作り、それをCGIが実行されるたびに新しくしつつ、ファイルに入っているタイムスタンプの数を表示するということです。この一定の時間として1分など適当な時間を使えば、「現在 (というか過去1分以内だけど) ○人がアクセスしています」というのはすぐできると思います。 質問をされている方は以前C言語でCGIを作りたいという話をされていたので一応書きますが、 ファイルのロックはシステムコールの呼び出しが必要になりますし、現時刻の取得についてもマイクロ秒単位の時刻がほしいならシステムコールの呼び出しになりますので、書き方はOSによって異なります。 Unixだとそれぞれ、flock、gettimeofday (あるいは秒単位ならtime)について使い方を調べておくと良いでしょう。 まあ、がんばって。
表示がくずれるの空白2文字を全角空白にしていることに注意。 #include <stdio.h> #include <stdlib.h> #include <string.h> #include <unistd.h> #include <sys/types.h> #include <sys/socket.h> #include <netinet/in.h> #include <arpa/inet.h> #include <netdb.h> #include <errno.h> void die(char *message) { 　　if (errno) { 　　　　perror(message); 　　　　exit(errno); 　　} 　　fprintf(stderr, "%s\n", message); 　　exit(1); } int creat_socket(char *proto, char *host) { 　　struct addrinfo hints, *res0, *res; 　　int　　　　　　 sock; 　　int　　　　　　 err; 　　memset(&hints, 0, sizeof(hints)); 　　hints.ai_socktype = SOCK_STREAM; 　　hints.ai_family　 = PF_UNSPEC; 　　err = getaddrinfo(host, proto, &hints, &res0); 　　if (0 != err) { 　　　　die("gai_strerror(err)"); 　　} 　　for (res = res0; res != NULL; res = res->ai_next) { 　　　　/* printf("%d\n", res->ai_family); */ 　　　　sock = socket(res->ai_family, res->ai_socktype, res->ai_protocol); 　　　　if (sock < 0) { 　　　　　　continue; 　　　　} 　　　　if (connect(sock, res->ai_addr, res->ai_addrlen) != 0) { 　　　　　　close(sock); 　　　　　　continue; 　　　　} 　　　　break; 　　} 　　freeaddrinfo(res0); 　　if (NULL == res) { 　　　　/* 有効な接続ができなかった */ 　　　　die("failed"); 　　} 　　return sock; } void recv_http_response(int sock) { 　　int　n; 　　char buf[32]; 　　n = 1; 　　/* サーバからのHTTPメッセージ受信 */ 　　while (n > 0) { 　　　　n = read(sock, buf, sizeof(buf)); 　　　　if (n < 0) { 　　　　　　die("read"); 　　　　} 　　　　/* 受信結果を標準出力へ表示(ファイルディスクリプタ1は標準出力) */ 　　　　write(fileno(stdout), buf, n); 　　} } void send_http_request_by_get(int sock, char *path, char *query) { 　　char buf[128]; 　　int　n; 　　/* リクエスト文字列を生成 */ 　　snprintf(buf, sizeof(buf), "GET %s?%s HTTP/1.0\r\n\r\n", path, query); 　　/* HTTPリクエスト送信 */ 　　n = write(sock, buf, (int)strlen(buf)); 　　if (n < 0) { 　　　　die("write"); 　　} } void send_http_request_by_post(int sock, char *path, char *query) { 　　char buf[128]; 　　char line[128]; 　　int　n; 　　/* リクエスト文字列を生成 */ 　　buf[0] = '\0'; 　　snprintf(line, sizeof(line), "POST %s HTTP/1.0\r\n", path); 　　strncat(buf, line, sizeof(buf)); 　　snprintf(line, sizeof(line), "Content-type: application/x-www-form-urlencoded\r\n"); 　　strncat(buf, line, sizeof(buf)); 　　snprintf(line, sizeof(line), "Content-Length: %d\r\n", strnlen(query, 128)); 　　strncat(buf, line, sizeof(buf)); 　　snprintf(line, sizeof(line), "\r\n"); 　　strncat(buf, line, sizeof(buf)); 　　snprintf(line, sizeof(line), "%s\r\n", query); 　　strncat(buf, line, sizeof(buf)); 　　/* HTTPリクエスト送信 */ 　　n = write(sock, buf, (int)strlen(buf)); 　　if (n < 0) { 　　　　die("write"); 　　} } int main(int argc, char *argv[]) { 　　int　 sock; 　　char *host,　*proto, *path, *query; 　　int　 n; 　　/* example */ 　　/* ./a.out http localhost / a=1 */ 　　if (5 != argc) { 　　　　die("Usage : prog proto dest"); 　　} 　　proto = argv[1]; 　　host　= argv[2]; 　　path　= argv[3]; 　　query = argv[4]; 　　/* GET */ 　　printf("--- GET\n"); 　　sock = creat_socket(proto, host); 　　send_http_request_by_get(sock, path, query); 　　recv_http_response(sock); 　　if ( 0 > close(sock)) { 　　　　die("close"); 　　} 　　/* POST */ 　　printf("\n--- POST\n"); 　　sock = creat_socket(proto, host); 　　send_http_request_by_post(sock, path, query); 　　recv_http_response(sock); 　　if ( 0 > close(sock)) { 　　　　die("close"); 　　} 　　return 0; } --- $ ./a.out 5000 localhost / foo=1 --- GET HTTP/1.0 200 OK Date: Sun, 16 Dec 2012 04:50:23 GMT Server: HTTP::Server::PSGI Content-Type: text/plain Content-Length: 21 Method : GET foo : 1 --- POST HTTP/1.0 200 OK Date: Sun, 16 Dec 2012 04:50:23 GMT Server: HTTP::Server::PSGI Content-Type: text/plain Content-Length: 22 Method : POST foo : 1
なんか的はずれなことを悩んでいるような気がします。 たとえこれを解決しても、この実装では次にモード0からモード1に移行するときに設定されたユーザー名が使えないという問題に直面するでしょう。なぜなら、これまでに何が行われたか (状態と言います) を覚えておくような処理があるように見えないから。 HTTPで状態を持った処理をさせたい場合、セッションを使います。 HTTPの特徴のひとつは状態を持たないこと(ステートレス)で、いつ、何度アクセスしても同じものが得られるというのが特徴です。しかし、会員向けページのようにログインした時にユーザー名や認証したという情報を維持しておきたい場合、ログイン時に割符のような値をユーザーに渡し、割符 (セッションID) を持っていることで本人だと確認するということをします。これをセッションといいます。例えば、ショッピングサイトなどではログインしなくても最初からセッションIDを渡しておき、そのセッションIDのユーザーが購入ボタンを押したものを覚えておくことでショッピングカートを実現します。 セッションではユーザーとセッションIDとなる乱数 (あるいはその他の値) を共有しますが、ブラウザにセッションIDを設定する方法として、おおまかに3つの方法が使われます。1つ目はURLに含める方法、2つ目はフォームのhiddenパラメーターに常に入れておく方法、3つ目はクッキーを設定する方法。どれにも利点欠点がありますが、今時は3つ目のクッキーを使う方法を使い、Cross Site Scripting (XSSと略される)やCross site request forgeries (XSRFと略される) 対策を十分に施します。 > どのようにしたらチャット画面から入れるのを防ぐ事が出来ますか？ モード0からモード1に移行した際にセッションIDをクッキーなどで渡すとよいでしょう。そして、モード1からモード2に移行した時に「退室しました」という画面を表示しつつ、セッションIDが入ったクッキーを破棄しましょう。 自分だったら次のようなロジックで作りますね。 クッキーからセッションIDを取得し、有効なものか判定 if (セッションIDが送られてきた) { if (退室ボタンが押されている) { モード2の処理 (クッキーを破棄するようHTTPヘッダで指示) } else { モード1の処理 } } else { if (入室に必要な条件が整っている) { モード0からモード1に移行し、セッションIDが入ったクッキーを設定 同じページにリダイレクトする返事をする } else { モード0の処理 } } これまでセッションIDとずっと言って来ましたが、お金のやり取りをするわけでもなし、セッションIDの代わりにモード0からモード1に移行するときに送ってもらった"名前"を設定しても問題無いですね。 日本語の文字をセットされる可能性があり、エンコードが気になる場合は16進数表示にして設定しておくとよいでしょう。(当然、送られてきたものは16進数表示から元に戻して表示します) > ドメインという物があればHPのアドレスがどこを見ても同じになると聞きましたがドメインはCでどのようにすれば、作れますか？ ドメインというのはDomain Name Systemのドメインのことでしょうか？ドメイン名を得て、適切に設定してあれば、プロバイダーが変わっても同じURLでアクセスできるという話ではないでしょうか。 今回の問題の解決とは全く関係がないと思います。 HTTPサーバーに接続するときはそのサーバーのIPアドレスを指定してつなぎますが、普段はだれもIPアドレスを直に指定しません。URLは大抵http://www.example.com/example/example.htmlのような感じだと思いますが、www.example.comというドメイン名からIPアドレスに変換するサービスをDNSといいます。ドメインを取得するというのは例えばこのwww.example.comのIPアドレスを自由に設定する権利を得るということで、サーバーのIPアドレスが変わってもそのIPアドレスを指すように変更しておけばIPアドレスが変わっても同じページが見えるということになります。 ドメイン名を得るにはレジストラーという業者にお金を払って設定してもらう必要があります。値段は1,000円くらいからですが、もう一度言いますが、今回の問題を解決するのには必要ありません。 あと、使っているプログラミング言語はCGIの基本的なロジックには全く影響を与えません。「C言語を使っていたら○○ができない」という話はほぼ技術が未熟な人間のデマだと思ったほうが良いでしょう。ただ、C言語だけでやろうとするとそれをサポートするような言語機構がPerlなどに比べて弱く、苦労するというだけです。例えば、CGIでありがちな"<"を"&lt;"に書き換える処理はPerlだと1行ですが、C言語だと何行かかかる処理になりますよね。 今回の問題を解くために、まずセッションについてちょっと調べてみることをおすすめします。あと、TCP/IPの入門書のようなものに目を通しておくこともおすすめします。
wgetコマンドは使えませんか。
こういうやつですか？ http://www.ajaxtower.jp/js/event/index3.html ちなみに、こういうタイプのメニューをdrop down menu (あるいは、選択リスト) と言います。 また、何かを選択肢たり何かに値を入れたりしたらなにか処理をするにはHTMLタグにonChangeという属性を付け、そこからJavaScriptで書いた関数に飛ばすのが普通です。
こんにちは！ 質問1 > 答えずともあっているといわれそうですが・・・。 よく分かっていらっしゃる。 認識は合ってますよ。 質問2 > 個別ごとに処理する事になりますか？ 場合によりけりです。 今回の例だと、3つチェックされていたら「食いしん坊ですね」とか 出すんであれば、個別に処理する必要はないですよね？ 逆にチェックされたものによって動作が異なるのであれば 個別に処理する必要があります。 例えばチェックされている画像を表示するとか。 ただ、CGIにもよりますが、for文で回せばいいかもしれません。 その場合でも、個別に処理していることに変わりはないので こちらに該当するかな？と思います。 って感じの答えで合ってますか？
「自分ではログファイル名というものがどこを指しているのか、わかりません。」 　カウンタ情報を保存するファイルのことを「ログファイル」と呼んでいて、/dream/dataの中のindex.datが最初から用意されているものです。 　複数のカウンタを設置できるので、そのページをアクセスしたときに、どういう名前のログファイルに、カウンタの情報を保存するのかを指定します。例えばもう一つカウンタが欲しいなら、/dream/dataの中のindex.datをコピーして、subcnt.datとして用意し、＜img src="dream/dream.cgi?id=subcnt"＞とhtmlで記述すればよいのです。
これはCGIというよりHTMLの問題かと思います。 １： ゲーム面背景色はview.iniの中に思い切り書いてますね。 $gtibgcolorで指定されているのでそれを真似てその下に「$gtibgimg = './hogehoge.jpg';」(わかってると思うけどjpg/gif/pngのどれか)とでも書けば設定変更が楽になる ２： 本体は「wsame.cgi」の中で「$gtibgcolor」を探せば1485行目がゲーム板用のTableタグなのでそこにスタイルで背景画像を指定してやればいいのでは 例：（さっきの$gtibgimg を使う） print "<table border=\"0\" cellspacing=\"0\" cellpadding=\"0\" bgcolor=\"$gtibgcolor\" style=\"background-image : url($gtibgimg);background-position : center center;\">\n"; ３： 「none.gif」はファイルは設定から消したりせずに、ペイントツールなんかで透明化するだけ。
たびたびすいません。 URLが空でないかぎりと書きましたがCGIを呼び出すからには空というのはありえないので、要するにURL情報にドメインやらパスやらCGIファイル名なんか入れてCGIを呼び出すと、リクエストメソッドはGETまたはPOSTのいずれかの値をとり、デフォルトではGETとなるのでした。 フォームタグで通常、「method="????"」でメソッドタイプを指定するのですが、省略されてsubmitされたり、直でCGI呼び出しがあったりすると、Webサーバ側では自動的にGETメソッドと判断されます。 正しい動作の例って //GET else if(!strcmp(method, "GET")){ 　qs = getenv("QUERY_STRING"); 　printf("Content-type: text/html\n\n"); 　if(strlen(qs) > 0){ 　　printf("<html><head></head><body>\n"); 　　printf("%s<br>\n", qs); 　　printf("</body></html>\n"); 　}else{ 　　printf("<html><head></head><body>\n"); 　　printf("%s<br>\n", "パラメータが無いよ。"); 　　printf("</body></html>\n"); 　} } こんな感じ？
普通のCGI（Perlとかphp）では、入力フォームを返すのとフォームからのPOST（やGET）を受け取って処理するスクリプトが同一というのはよくあります。httpリクエストがどうなっているか（content bodyの有無やQueryString）で処理を分けます。 提示されたソースでも >clen = getenv("CONTENT_LENGTH"); >if(clen == NULL){ >printf("no contents.\n"); no contentsを返す代わりに、最初のソースにある「入力フォームを返す」ようにすればいいだけです。
> プログラムの作りでそうなってるのかもしれませんが > これって変ですよね？　それともよくあることなのでしょうか？ これは変でも何でもありません。 表示されるＨＴＭＬ内で張られているＵＲＬリンクパスが内部的な事情で相対パスでなく絶対パスで管理されているのでしょう。 変えるのなら全部変えないと、ご自身で経験されているようにリンクをたどっていてＵＲＬ記述が変わるとセッションが切れてしまうからです。 セッションはサーバ側だけのものでなく、クライアント側のクッキー情報との連携があって成立するものです。 ユニークなＩＤをブラウザ側でクッキーとして保存してそのＩＤをサーバ側で参照してセッションを確立するのです。 当然、クッキーは「ドメイン名」や「ＩＰアドレス」でなく「ＵＲＬ情報」(＋期限)をベースに保存されます。 ＵＲＬをドメインでアクセスすればドメイン名、ＩＰでアクセスすればそのＩＰアドレスでクッキーは保存されるのです。 これは、サーバがどうたらというものでなくインターネットの仕組みの問題です。 ＵＲＬのＡ(ドメインまたはＩＰ)で保存されたクッキーがＵＲＬのＢ（ドメインまたはＩＰ）から参照できるようならセキュリティ上大問題です。 ＵＲＬが変わってクッキー情報が取得できなければセッションは成立しませんので、セッションは切れて当然です。 もうひとつドメインとＩＰはＤＮＳというサービスでヒモ付けされてはいますが絶対ではありません。 近年のインターネット参加者は元の仕組みを知らないため、まるでドメインがあって当たり前のように思われていますがＤＮＳという分散型データベースのいちサービスによって成り立ってます。 黎明期にはＤＮＳも現在のように統合されておらず、草の根ＤＮＳサービスとかもあって社会政治的(管理されるのがやだとか)または経済的(フリーで登録したいとか)な意味合いから各自のポリシーによってＤＮＳシステムを選択することができた時代もありました（メールもドメインでなくＩＰで普通に送受信できていました）。 近年ではウイルスやマルウェアによってＩＰとドメインのヒモ付けがクライアントのＰＣレベルで偽装工作がされるようになっています。 あくまでインターネットのホスト間通信の基盤はＩＰアドレスだということはキモに命じておいて下さい。 ＤＮＳはＷｅｂやメールと同じ立場のいちサービスに過ぎないもので、有って当たり前というようなものではない(無いと困りますけどね)のです。 さらにもうひとつ、近年ではＷｅｂサーバに仮想ドメインという機能も搭載されて、ひとつのＩＰに複数のドメインをぶら下げ、ドメインごとに設定によってコンテンツを分けるものも有ります。 そのサービスの場合にはＩＰアドレスって表面的には役に立たなくなってしまいますね。 最後にセッションＩＤで機能を使い分ける方法とやらですが、ログイン（セッション接続）状態では管理モード、ログアウト状態では一般というのが普通ですので、その時点で切り分けはできていると思われますがいかがでしょうか。 長文失礼いたしました。
> ＜＜あくまでも「クライアントの指示」でサーバ側のプロセス開始オーダーがあったときのみ必要なデータをクライアント側が送信し、サーバはそこからプロセスに必要なデータから環境変数群を構成してプログラムを開始するのです。 > ここら辺をもう少し分かりやすく解説していただけませんか？ > もしくは分かりやすく書かれたサイトを教えていただけませんか？ まず、Ｗｅｂサーバ側(以下サーバ側)とＷｅｂページを見たい側(以下クライアント側)に分けて考えましょう。 普段はサーバ側は待ちの状態にあります。 クライアント側からページを見せろと要求があれば、その要求が真っ当なら、サーバ側はそのデータをクライアント側に返信します。 Ｗｅｂサーバというのは要求のあったデータを返信するだけの単純な仕組みに過ぎません。 次に、クライアント側が要求とともに送信するデータに応じて、サーバ側で返信内容を加工して動的なデータをクライアント側に返信するようなケースでは サーバ側では返信の前にクライアント側から送信されてきた内容を解釈して、それを元に処理を行い結果を返信する このとき、ＷｅｂサーバはＯＳの標準入出力（cでいうところのstdio）を通して指定プログラムの実行を要求します（Ｗｅｂサーバが直接実行するわけではないことに注意してください。動作するプログラムはＯＳ環境下でＷｅｂサーバというユーザ権限で実行されるのです）。 この仕組みをＣＧＩといいます。 このようにＷｅｂサーバはクライアントからの要求を単純に処理して返信するだけ(タレ流し)の仕組みで、基本的にサーバ側からクライアント側に対してなにかを行うものではありません。 タレ流されてくる先頭部分には、後にタレ流すデータの種類(HTML/画像/ベタテキスト/音楽・・・etc)とか、サイズ、ブラウザへの指示(キャッシュを利用するしないとか)、そしてcookie情報なんかがまとめてあって改行連続２回のその後に、ＨＴＭＬデータやなんかが送られてくる。 ここで送られてくるcookieに注目すると、ブラウザは受け取ってcookieエリアに保存するだけでおしまい。 サーバ側に対してその情報からアクションを起こすわけではないのです。 今度は少し戻って、サーバ側からの視点で見ると、クライアント側からＣＧＩの要求があれば、要求とともに送られてくる各種情報、返信用ＩＰアドレス(どこに返信するかわからないと困りますよね)、返信用ポート番号(同じマシンでブラウザ２個表示して同時に同じサイトに要求してもデータがごっちゃにならないように)、cookie情報(当然ドメインやパスが一致して期限切れでないもの)、フォームやＵＲＬのメソッドデータなどなどさまざまな情報を受信し終わった後に、処理を開始します。 受信した情報はその呼ばれたＣＧＩ専用のプロセスに環境変数や標準入力バッファを構築してシステムに実行オーダーを出します。 実行時の標準出力データを出力バッファに蓄えてクライアント側にヘッダ情報とともに垂れ流し終了です。 呼び出されるプログラムは、クライアント側のcookieを直接参照するわけではなく、クライアント側から初期呼び出し時に能動的に送られてきた情報を元に構築された環境変数を介して参照するのです。 サーバ側からのデータで書き込まれたcookieはサーバ側から直後に読み出すことは不可能なのです。なぜなら環境変数は処理前の初期状態をキープしているからです。 また、クライアント側でcookieが正常に書き込まれたかどうかなんていちいち知ったこっちゃないのです。それはクライアント側の問題であってサーバ側の問題ではないからです。 cookie情報はクライアント側にあって、サーバ側にあるわけじゃないのです。 たとえ話は誤解を生む可能性がありますがあえていうと この通信は電話ではなく手紙だと思ってください。 １．このプログラムを実行して結果をくれと手紙を出す ２．これが結果だと返信がくる。その中にはcookie情報があるので憶えておけと書いてある ３．クッキーを見せるプログラムを実行して結果をくれと２度目の手紙を出す(じつはその手紙にはいろんなものと一緒にcookie情報が書いてある) ４．その手紙からcookieを判別して、これがお前のcookieだと返信がくる。 > ＜＜セットしたクッキーを参照したいなら、そのプロセス終了後に新たなプロセス(プログラムを別にする)で参照するしかないでしょう。 > > 要するにクッキーを食わせるプログラムと、クッキーを参照するプログラムは分けて起動すること > > 後これは具体的にどのようにすれば分けて起動できますか？ > というよりも起動するのは一つまでする方法しかしらないのですが同時に起動するにはどうしたらできますか？ 要するに、「クッキーを書き込むＣＧＩ」と「クッキーを読み出すＣＧＩ」を別々に作ってブラウザから順にアクセスすればいいのです。 でも、直後に確認したいだけならサーバ側でＣＧＩ実行後、クライアントスクリプトを動作させてブラウザ上で表示すれば確認は可能です。 要するに「ＣＧＩでクッキー食わせて」から、そのＣＧＩからブラウザに表示させるＨＴＭＬ内に「クッキーを読み込んで表示させるJavaScript」を組み込めばよいのです。 出力するＨＴＭＬの例 <html> <head> <meta http-equiv="Content-Language" content="ja"> <meta http-equiv="Content-Type" content="text/html; charset=shift_jis"> <title>クッキー</title> </head> <body> <p>クッキー一覧（以下はブラウザ側で実行される）</p> <script language="JavaScript"> document.write(document.cookie); </script> </body> </html> 長文失礼しました。
http://www.dohm.jp/seat_cover-order_system/img/02_base_09.gif http://www.dohm.jp/seat_cover-order_system/img/04_base_08.gif http://yoheim.web.fc2.com/js/jquery/event.html 指定のページは　Javascriptで製作可能です ヘッド部分の色パターンを全て作成する サイド部分も全色用意する クリックしたら画像を入れ替える 画像を用意してから 分からないところがあれば補足を 詳しく説明します
自分のサーバーにプログラムを設置し、監視したい掲示板のURLをチェックすれば良いです。 ただし、毎日、または毎時間確認しなければならないのでCGIではできません。 サーバーのスケジューラーに登録する必要がありますね。 web用のレンタルサーバーなどでは難しいと思われます。 自宅サーバーを立ち上げるか、ホスティングなどでサーバー設定権まで付いているサーバーを使う必要があります。
質問１ httpヘッダ出力パート ---------------------------------------- printf("Content-type: text/html\n"); get_Form(); set_cookie(); get_cookie(); printf("\n"); ---------------------------------------- の ---------------------------------------- set_cookie(); get_cookie(); ---------------------------------------- が"×"です。 クッキーの設定はhttpヘッダから可能ですが、参照は環境変数を介する必要があります(ソースコードもそうなってるはずですが)。 環境変数はクライアントからＷｅｂサーバに対して「ＣＧＩを介したプログラム」の起動オーダーが発生した際に、その実行プロセスの環境を構成するためにプロセス起動時に作り上げられるものです。（注：ＣＧＩはプログラムのことでは有りません。Ｗｅｂを介してプログラムを起動する仕組み→インターフェース：Common Gateway Interface のことです。だから標準入出力機能を持った言語なら何でもＯＫなのです。) クッキーセット直後、同一プロセスからクッキーの環境変数を参照することは無意味です。クッキーはブラウザ側に送られても、環境変数はサーバ側にあって自動更新はされません。ＣＧＩプロセスの途中でサーバ側からクライアントのデータぶっこ抜き放題ならセキュリティもクソもあったもんじゃないでしょう。 あくまでも「クライアントの指示」でサーバ側のプロセス開始オーダーがあったときのみ必要なデータをクライアント側が送信し、サーバはそこからプロセスに必要なデータから環境変数群を構成してプログラムを開始するのです。 セットしたクッキーを参照したいなら、そのプロセス終了後に新たなプロセス(プログラムを別にする)で参照するしかないでしょう。 要するにクッキーを食わせるプログラムと、クッキーを参照するプログラムは分けて起動すること。 あと「サーバサイドのプログラムまたはプロセス」と「クライアントサイドのプログラムまたはプロセス」の区別をつけて考えることです。 さらに、ＨＴＴＰをはじめとするＴＣＰ／ＩＰについてもプロトコルとは何ぞや程度は・・・。 C/Sやネットプログラミングに限らず言語だけ知ってても仕組みを知らんと実装はなかなか難しいということですね。 質問２ 関数「Data1」が挙動不審なので作り直してみました。 nameset[0]に全ＰＯＳＴデータを入れた後、共通のポインタから直にいじり倒しているので最終的にvaluesetの最後と同じになっています。 最適化はしてないので教科書みたいなリスト（しかも古いスタイル）になりますが・・・ --------------------------------------------------------- int Deta1(char *a,int b){ 　int i,nMax; 　char *aTmp[30]; /* とりあえず30個まで耐えられるように */ 　char *sTmp,*sSTW; 　sTmp = a; 　i=0; 　while((aTmp[i] = strtok(sTmp, "&")) != NULL){ 　　sTmp = NULL; 　　i++; 　} 　nMax = i; 　for(i=0; i < nMax; i++){ 　　sSTW = aTmp[i]; 　　nameset[i] = strtok(sSTW, "="); 　　valueset[i] = strtok(NULL, "="); 　} 　return nMax; } --------------------------------------------------------- インデントは全角にしてるのでコピペ時には注意 できれば関数名は別のを考えたほうがいいと思う。代入する変数名とかぶってるし。 あと、評判の悪いstrtok使ってるけど、この処理って基本半角文字だけだから適材適所ってことで できれば値はエンコードされてるはずだからデコードして出したほうが理にかなってるかも こんな感じで答えになってるかな・・・。 それにしても、あらためてＣの文字列・配列処理は読み書きがめんどくさくて歳を感じてしまいました。 perlで作ったほうが開発効率いいと思う。　正規表現の変態さ加減なんかはもう・・・。
CGIを使うにはまず開発環境を整える必要性があります。 後CGIに使う言語の選択によっても開発環境は少し違ってきます 使用言語はC言語、peal、PHP、それ以外があります。 C言語…早いし複雑なゲームを作るのに向いてる　けど複雑な処理がいろいろ必要 peal・PHP…遅い（といっても簡単なCGIならそこまで遅いとは感じないはず）けれど作りやすい（らしいけど私にとっては難しい）　比較的安全に使えて初心者向け 質問者さんの「 ページにURLと簡単な文章を記入するスペースを設けて入力更新後任意のテーブルにそのURLと文章を表示する様にしたい」 の質問は作り方自体は簡単ですが、何の言語で作りたいかで書き方が変わってくるため、答えられません そのため ・何の言語で作りたいのかを決めて ・その言語で開発可能な環境を整える必要性があります 開発環境に必要なら C言語ならコンパイラとApatch（webサーバーであれば他でもよし） PealならpealソフトとApatch PHPは私はつかったことがないので調べてください
核心となる部分は見当たりませんが、内部では$cmtという変数に代入されて処理しているのがわかりました。 「score_chk.cgi」側には 改行があった場合は「<br>」タグに変換しているコードが入っているのでフォーム側からわざわざタグを記述する必要はないと思います。 「$cmt =~ s/\n/<br>/g;」の部分 できれば「$cmt =~ s/\r\n|\r|\n/<br>/g;」と記述したほうがいいです。 ただし文字コードがShift-JISをベースに書かれているので正規表現の記述が正確に作動するかどうかは気になるところです（まあ半角文字だけなので大丈夫とは思います）。 「score_cmp.cgi」側は 文字「35124」を「>」に変換するコードが入っています。 「$cmt =~ s/35124/>/g;」 もしかしたらその「次の行」に以下の一行 「$cmt =~ s/br683/br>/g;」 もしくは 「$cmt =~ s/683/>/g;」 と記述することで新規の入力データからはちゃんと動作するかもしれません（過去のものは683となったままデータ内に残っているので表示時に変換するか更新時のコードに追記して変更する、はたまたデータが入ってるディレクトリでcmt.txtをテキストエディタで「683」を「>」に置換して保存する）。 エラーメッセージなんかがけっこう適当に書かれているので身内の手作り感満載ですが上記変換コードもその類のミスかもしれません。 コメントは「cmt.txt」に記述されています。 お試しください。
ささっと、要求する仕様のものを作ってみました。 http://www.daiba.cx/okwave/q7773869/test.cgi ダウンロードは、こちらより。。。 http://www.daiba.cx/okwave/q7773869/test.zip 注意点 Shift-JIS、EUC、UTF8どのコードでも一応動きます。 （使用する文字で、Shift-JISは化ける場合があります） ですが、できればUTF8にして、htmlのヘッダ部分を 以下のようにして下さい 最初のHTML の・・の部分あたりです。 <html><head> <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> <html lang="ja"> <head> <meta http-equiv="Content-Language" content="ja"> <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> あとは、パーミッションを、最低でも 755 に設定し、 この例では、0.htmlとa.htmlからd.htmlまで移動しますので、 ファイルを置いてください。 以下、コード ---------- #!/usr/bin/perl use strict; use CGI; # プレゼントのデータハッシュ my $presents={ 1=>{ name=>"年齢", 1=>{ name=>"20代", score=>10, }, 2=>{ name=>"30代", score=>20, }, 3=>{ name=>"40代", score=>30, }, 4=>{ name=>"50代以上", score=>40, }, }, 2=>{ name=>"予算", 1=>{ name=>"2000円", score=>10, }, 2=>{ name=>"3000円", score=>15, }, 3=>{ name=>"5000円", score=>20, }, 4=>{ name=>"6000円以上", score=>30, }, }, 3=>{ name=>"プレゼントの相手", 1=>{ name=>"男性", score=>10, }, 2=>{ name=>"女性", score=>20, }, }, }; # 合計点数のテーブル my %scoretable=( 0=>"0.html",# 該当なかったので新設 30=>"a.html",# 宝くじセット 40=>"b.html",# ご当地スイーツ 50=>"c.html",# シネコンチケット 60=>"d.html",# ワイン試飲会チケット ); # エラーメッセージ my $errmsg="選択されていません。"; my $errflg=0; my %err; my $score=0; my $cgi=new CGI; # チェック及び計算 if($cgi->param("submit") ne "") { for(my $i=1; $presents->{$i}->{name} ne ""; $i++) { my $parm=$cgi->param("form$i"); if($parm eq "") { $err{$i}=$errmsg; $errflg=1; } else { $score+=$presents->{$i}->{$parm}->{score} } } # スコアに応じてページに飛ぶ # （ここもCGIでもいいのですが、あえて飛ばします） if(!$errflg) { my $page=""; foreach my $stable(sort keys %scoretable) { if($score >= $stable) { $page=$scoretable{$stable}; } } print <<EOM; Location: $page EOM exit; } } if(1) { # HTTPヘッダ print "Content-type: text/html\n\n"; # 最初のHTML print <<EOM; <html><head> <title>プレゼントテスト</title> </head> <body> <h1>あなたのプレゼントについてのアンケートです。</h1> どうぞ条件を選択してください <hr /> <form action="test.cgi"> <table> EOM for(my $i=1; $presents->{$i}->{name} ne ""; $i++) { print <<EOM; <tr><td> $i.@{[$presents->{$i}->{name}]} </td><td> EOM for(my $j=1; $presents->{$i}->{$j}->{name} ne ""; $j++) { print <<EOM; <input type="radio" name="form$i" value="$j"@{[$cgi->param("form$i") eq $j ? ' checked="checked"' : '']} /> @{[$presents->{$i}->{$j}->{name}]} EOM } print <<EOM; </td><td>$err{$i}&nbsp;</td></tr> EOM } print <<EOM; <tr><td>&nbsp;</td><td> <input type="submit" name="submit" value="送信" /> </td></tr> </form> </body> </html> EOM }
everCookieでも使って粘るくらいしか無い
> 最初に初期値を入れればいいのですか？ いいえ、何を作ろうとしているのか思い出してください。 クッキーに入れたいのは「フォームから受信した値」のはずです。 フォームからＧＥＴなりＰＯＳＴなりのメソッドで送られたデータを受信後に必要なものだけを取り出しクッキーに格納してから画面表示するのが目的（質問もそうなってませんか？）かと思いますが・・・。 最初に初期値を入れてもいれなくてもどうでもいいのですが、クッキーにセットする前に目的のデータを用意して代入しないと勝手に入ってはくれません。　最初のクッキーセットはデータ取得の前に行っていますよ。 蛇足ですが、初期値はどうでもいいと書きましたが、 Ｃの場合は宣言だけではメモリ上に実体が確保されるわけではないので、初期値をしっかり入れて実メモリ領域を確保しとくのは予期しないバグを生み出さないための常套手段だと思います。 > 確かにごちゃごちゃしてると言われればそんな気もします > うまくまとめているような参考例でもなければなかなかまとめ方がよく分からんのです ちゃんと動いて自身で全体を把握できてなおかつ人に見せるものでなければごちゃごちゃしていようといっこうにかまわないと思います。 参考例は書籍やその言語の解説サイトをみれば、人に見せるためのものがほとんどなので、ちゃんと整理されたサンプルになっているかと。 > 出力部と処理の部で分けたらまたごちゃごちゃしそうだと思いますしね うーん・・・。ごちゃごちゃさせないために機能を分類整理するんだと思いますが・・・。
送信先メアドをパラメータで指定できるようなＣＧＩは使用するべきでは有りません。 ＵＲＬやフォームのソースなどからフォーム名が判明すれば悪用が簡単にできるからです。 例えば、たくさんのメアドを外部から指定されて送信されれば、匿名性（送信者は明白ですが・・・）の高いスパムサーバの出来上がりです。今話題の冤罪が・・・。 ＷＰで組んでいるならプラグインで[contact form 7]など有名どころがたくさんありますのでそれを利用するのが得策です。 ＣｏｎｔａｃｔＦｏｒｍ７なら、基本のフォームをひとつ作って、営業所の分だけ複製し、各営業所別にフォーム用固定ページ作ってショートコードを貼り付けるだけで完成です。管理ページに日本語の使い方やＦＡＱへのリンクなども付いています。 見栄えが悪くなければボタンを張る代わりにフォームを直に（ショートコード）入れちゃっても無駄が無くていいかと思います。 実績のあるプラグインなのでお試しください。
参照URLの「アクセス制限・管理」などいかがでしょうか？
横入りして申し訳ございません。 ご質問について、いろいろと回答が出ており、いまさらではありますが、質問者様の冒険的なこころみにいたく感心し、わたくしなりに回答してみたいと思います。 まず、ＣＧＩの利用についてはプロバイダが利用可と言っているなら遠慮なく使ってもいいと思います。 ただ、レンタルサーバの利用形態によって制限があるため、プロバイダの利用上の説明やＱ＆Ａは読んでおいた方がいいと思います。　そして禁止事項は守るようにお願いします。 なぜ、制限があるかというとＣＧＩを使ってシステム上のプログラムを実行させた場合に、メモリやディスクまたは回線などのサーバ資源をパンクするまで占有させるようなプログラムであった場合、他のお客様に迷惑がかかるからです。 例えば、メモリを多く使ったりディスクへのアクセスを頻繁にすると、複数の客で１機のサーバをシェアレンタルしている場合にサーバが重くなってシェアしている全サイトの各種処理サービスが遅くなるなどの問題が発生します。　実際には早々起こる事ではありませんが、その可能性があるというだけで脅威なのです。 割高ですが、１機のサーバを独占する占有サービスなどでも、ＳＰＡＭ業者のように秒間何千通ものメール発信してたら、回線があっという間にパンクします。　回線には何台ものサーバがつながってますので・・・。　サポセンに電話がつながりにくいようなもので、緊急の人にとってはもう泣きたい位の・・・。 まあ、利用はＯＫだけど気をつけてねとも書いてあると思います。 サーバになんかあった場合、極端な話、生活をそれに依存している人とかが損失のせいで首をつったりするケースもあるので、プロバイダに責任転嫁しないでちゃんと責任とってねというようなことをオブラートに包んで書いてあるかと・・・。 次に「Ｃ」言語で作ったプログラムをＣＧＩから動作させたい場合 これはまず、占有サーバを借りる以外無理かと思います 理由としては、プログラミングを学習した方ならご存知でしょうけれど、プログラム言語には大きく分けて「インタープリター型」と「コンパイル型」に分けられます。近年(といってもふた昔ほど)では、ＪａｖａやＶＢなどに代表される中間言語処理型のような「コンパイラ」と「インタープリター」の中間に位置する方式もありますが、こちらはまあ脇においておいて。 Ｃは基本的にはコンパイル型です。まず、実行ファイルを作る(以下ビルドといいます)ことが前提です。ソースの状態では実行できません。　実行ファイルは「マシンの環境に依存」しますのでサーバ側でビルドを行うことになりますが、一般の安いレンタルサーバでそんな操作をさせてくれるところは聞いたことがありません。 サーバと同じＣＰＵ・ＯＳの環境を仮に持っていたとして、staticモードでビルドをすれば動作する可能性は高いですが、言ってることが良くわからなければ事故の元です。　この手の事故は簡単に発生します。　事故で共用レンタルサーバをつぶした場合の損害額は個人では弁済できない額になると思います。　あなたがアラブの石油王なら大丈夫かも知れません。 perlはなぜソースのままで動くのかというと、そのソースが単体で動作するわけではないのです。　UNIX系サーバの場合、テキストファイルに実行権限がある場合、その１行目はシェバング行となります。これは、そのテキストデータをその行で指定されたプログラムから処理させますよというものです。 「#!/usr/bin/perl」という行がperlのCGI用ソースに入っていると思います。ここで指定されている「/usr/bin/」に入ってる「perl」という名前のperl言語を処理するインタープリターのバイナリ実行ファイルがＯＳ上で起動してそれ以下のテキストをperlのプログラムとして逐次実行されるという仕組みです（正確には中間言語にコンパイルしてから云々というのは後々の学習のためにとって置いて下さい）。 そんなこんなで、レンタルで、ある程度なにをやっても許される占有サーバをレンタルするのでなければ、ＣをCGIから利用するのはあきらめたほうがいいと思います。 できれば、ローカルでＬＡＮを組んで自前のサーバを構築してそこでやってみることをおすすめします。 蛇足ですがＣＧＩはプログラム自身ではありません。Ｗｅｂサーバからシステム上でプログラムを起動させてその結果をＷｅｂサーバに橋渡しする仕組みのことを指します。　また、プログラム言語は言語仕様だけを学んでも習得できた事にはなりません。それの取り巻く環境や開発ツールを使えるようになってスタート地点です。　がんばって学習してください。 長々と失礼いたしました。
(1)CGIをどのプログラミング言語で作成して、どの実行環境で実行するか? (2)CGIとして実行できるか? (3)サーバーの運営方針は? これらは、それぞれ別の問題です。 (1) プログラミング言語のPerlを使った作ったプログラム(CGI)は、Perlの実行環境が無いと動作できません。 > ParlはCGIを設置するのにプロパイダのPaｒｌソフトを使わないとCGIが設置できないと聞きました が持つ意味の一つは、これです。 C言語で書かれたプログラムも、実行するには対応した実行環境が必要です。 コンパイルしてできた実行ファイルだけで動作しているように見えますが、実際には他にもたくさんの必要なものがあります。 例えば、Windows用の実行ファイルを動作させるには、最低限「Windows」という実行環境が必要です。 サーバー上で実行させるには、そのサーバーで実行できるものを用意する必要があります。 (2) サーバーの設定によっては、CGIの実行を制限することが可能です。 ・Perlで書かれたものだけ許可する とか ・全て許可しない とか、いろいろです。 ・コンパイル済みの実行ファイルは許可しない というのは、セキュリティを考えれば、よくある設定だと思われます。 このような設定だったら、聞くまでもなく、C言語で作ったCGIは動きません。 (3) これらの設定は、プロバイダの運営方針に基くものです。 方針が違えば、設定も違います。
上に上がるだけになるのは、本当に携帯の戻るボタンですか？ 画面に表示される戻るボタンじゃないですか？ もしそうだとしたら、その画面だけ戻るボタンがjavascriptの戻る機能になっています。 インターネットで戻るで内容を維持するには3つの考え方があります。 キャッシュ　・・・表示した画面や入力した内容がパソコンや携帯に残っているので、戻った時に表示される。 クッキー　・・・・プログラムがパソコンや携帯の中に強制的にデータを保存させ、表示させる。通常戻るでこの機能は使わない。 クエリ　　・・・・戻るボタンを押したとき、画面にあるデータを一緒に戻す。 いずれも、テンプレートを変更するだけでは、データを残すことはできません。 基本的に携帯は、携帯の中にキャッシュが残るので携帯の戻るボタンで戻ってデータが残ります。 一方、WEB画面の戻るボタンは、「戻る」といっても新しい画面なので、戻るボタンを押したときにクエリでデータを送信なければなりません。 そのプログラムがそこまで考えて作られているかどうかわかりませんが、ないなら戻るボタンは作れません。
どのjcode.plでしょうか? 改造されていない限り、jcode.plはUnicodeに対応していません。 @contentsがUTF-8だったりしたら、jcode.plでは対応できません。 Perlが古い等の理由が無いのなら、Encodeモジュールを使いましょう。
Webサーバー側の設定に Apacheで言う IncludesNOEXEC に相当するものが設定されていないですか？ もし、.htaccessによる設定の変更が許可されているなら、WebサーバーにApacheを使っていれば Options -IncludesNOEXEC + Includes のようにすれば良いと思います。 .htaccessでの設定変更ができないなら、SSIの中からCGIを呼ぶのは不可能ですね。 あるいは、自分が管理しているWebサーバーだったらIncludesNOEXECに相当する設定をしていないか確認してみてください。 他人が管理しているものでも.htaccessでその設定を変更できるか試してみましょう。 どちらもダメなら、SSIからCGIを呼び出すことはできません。
IPアドレスはロシアのものです。 ロシアから本文無しで送信ボタンをクリックしたのでしょう。 日本語本文がある場合以外は送れないようにするとか、対策がないといたずらの標的です。
CGIスクリプトのソースがそのまま出力されるのは、そのファイル/URIがCGIとして実行できていないためです。 httpd.confの<Directory>ディレクティブや<Location>ディレクティブなどの指定箇所が間違えているか、 ファイルの拡張子を間違えているか、 httpd.confを書き換えてからApacheをリスタートしていないか。。。 Forbiddenが出てきたら.cgiファイルに実行権限が無い。 Internal Server Errorが出てきたら、Perlがインストールされていないか.cgi拡張子とPerlが関連づけられていない。 ということが考えられます。
Graphicsクラスは、WindowsのGDI+ライブラリを使用しているはずです。描画しているのが唯の直線の場合は、最終的にLineToを呼び出していると思います。 GDI+はペンをリッチにしたり出来るので、その場合はGDI+内部で自力で描画（線・点・塗りつぶしなどを駆使して）している可能性があります。 ILSpyを使って、GDI+の呼び出し部分までは自力で調べることが出来るかもしれません。それ以上は難しいでしょう。又は、API呼び出しを解析するツールなどを使用すれば分かると思います。
以下のページが役に立つでしょう。 http://detail.chiebukuro.yahoo.co.jp/qa/question_detail/q1212686187
コンソールアプリを作ればOKです。 ウェブサーバーがLinuxなら、Linuxで動くようにコンパイル（メイク）してください。 HTMLデータを出力するなら、"Content-Type: text/html\n\n"を出力してからHTMLデータを出力してください。 参考：C言語によるCGIアプリ作成 http://mewc.to/CGI/
多分、.htaccessに記述してある、　.htpasswdファイルの置き場所のパス指定を間違えているんじゃないですかね。 URLとしてのパスじゃなくて、サーバー上のディレクトリパスです。
おそらく、ヘッダーと本文の区切りの空行が出力されていないからでしょう。 「print MAIL "$maintxt\n";」の行の前に「print MAIL "\n";」を追加すればよいかと。 ちなみに、提示されているロジックより前の方で 　open (MAIL, "| sendmailのパスとオプション") ・・・ とやっていると思いますが、デバグ時には一時的に 　open (MAIL, "> デバグ用のファイル") ・・・ の様にしてファイルに出力してやると確認が楽です。
改造したのがかなり前なのでうろ覚えですが失礼します。 見た目を直すには確かHTMLだけだったはずです。 ただ、検索結果の表示項目を変える場合はCGIもいじったような。。。 スパムにつかまりやすいのでスパム防止のプログラムも入れなくてはいけません。 PHPは挑戦してみたら全く上手くいきませんでした。 ちんぷんかんぷんで物凄く難しかったです。 サーバーによってはCGIは良くてもPHPは不可というところもあります。
JavaScriptを使えば可能ですね。
お使いのlogin.cgiの4１行目が open(IN,"$cf{secfile}") or &error("open err: $cf{secfile}"); print "Content-type: text/html\n\n"; print <IN>; close(IN); の固定なので、CGI自体がファイルのダウンロードには対応できてないようです。 絶対パス記述の方式だと、Locationでのリダイレクトなので、移動先を直リンクされると、 認証なしでだれでもダウンロードされますので用途には、厳しい気がします。 別の　CGIを探すか、 拡張子がzipのときは、 my $size = -s $cf{secfile}; my $filename = $cf{secfile}; $filename =~ s|([^/]*?)$||; open(IN,"$cf{secfile}") or &error("open err: $cf{secfile}"); print "Content-Disposition: inline; filename=\"$filename\"\n"; print "Content-Length: $size\n"; print "Content-Type: application/octet-stream\n"; print <IN>; close(IN); のコードをこのlogin.cgiってファイルに挿入すれば、ダウンロードしてくれると思います。 （試してないので、タイプミスあるかも）
> (1) index.htmlと同じ階層にloginという名前のフォルダを設置。 このフォルダのパーミッションはどうなっていますか？ CGIを含むディレクトリは705もしくはそれ以上(755・777など)にしないとCGIはリクエスト要求に応答できません。 別の要因としては、万一サーバー側の設定に問題がある場合、CGIをバイナリモードで転送した時のみ動作したという例もあるようです。この場合、1行目のパスの末尾に" --"を付加すればアスキーモードで動作するかもしれません。
おそらくBOMだと思いますのでBOMなしのUTF-8で保存しなおせばよいかと(エディタによってはできないかもしれません)。 UTF-8にBOMは必要でないのですがWindowsのエディタではUTF-8だとBOMを付けるものは多いみたいです。
.htaccess は、HTTPサーバーに対して支持するファイルです。 パーミッションは、OSに対する設定です。 　Windows(MS-DOS)にUNIXのパーミッションと言う概念はありません。NT系以上はアクセス制御リスト ( http://ja.wikipedia.org/wiki/%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E5%88%B6%E5%BE%A1%E3%83%AA%E3%82%B9%E3%83%88 )を使用した特殊な方法で、UNIXで言うところのパーミッションとは別物です。 『ローカルでテスト用にwindowsでアパッチを動かしてるのです』と『コマンドでやってもいいのですが、』と矛盾しています。 　別の公開されているインターネット上のサーバーに転送した後での処理でしたら、多くのビジュアル系のFTPソフトは、拡張子によってパーミッションの変更には対応しているはずですが、転送と同時には勧められません。あくまでファイルを選択して行うべきです。もちろんコマンドを使うのではないですが。 『phpとかをつかって属性を変える方法はありますが URLを打ってアクセスするファイルのパーミッションを変えたいんです。 perlなんかだと777などに設定しないと403になってしまいますし。』 も意味不明です。 　phpよりは、perlのほうが楽なはずです。chmod(mode, filelist) 　後半はCGIプログラムのパーミッションだと思いますが777なんてしません。ハイセキュリティなら705、もしくは755ですし、ライブラリは644でよいです。 　perlでは、 　
せっかく貼ってもらった画像に何が書いてあるのか見えません.... 考えられるのはすでにApacheかその他のWEBサーバがインストールされていて、 Port80を占有しているという事はありませんか？ ブラウザで http://localhost といれて何か表示するなら すでにWEBサーバがインストールされているので、 XAMPPのApacheを使いたい場合は、Portを変更すれば良いと思います。 →httpd.confで調整してください。
Googleは自前で情報を収集しています。 そのクローラーにはGooglebotという名前がついています。 ちなみに，Googleの検索結果のスクレイピングは利用規約の > Google が提供するインターフェースおよび手順以外の方法による本サービスへのアクセスを試みてはなりません。 に反する可能性があります。現行の規約にはありませんが，以前の規約には > 5.3 Google が提供するインタフェース以外の手段で、本サービスのいずれにもアクセスしないこと（またはアクセスを試みないこと）に同意するものとします。 という文の後に， > 特に、ユーザーは、いかなる本サービスについても、いかなる自動化された方法（スクリプトやウェブ クローラーの利用によるものを含みます）によりアクセスせず、アクセスを試みないことに同意し、 とありました。
こんなのがありましたよ。 http://123bbs.jp/bbs/index.shtml
http://httpd.apache.org/docs/2.2/howto/htaccess.html#how に 「.htaccess ファイルの設定ディレクティブは .htaccess ファイルの存在するディレクトリと、そのサブディレクトリすべてに適用されます」とあります。 上位ディレクトリの .htaccess の設定が下位ディレクトリでも使われるので、上位と設定を変えたいということがなければ、下位のディレクトリに .htaccess を置く必要はありません。
たいていはテンプレート等を持っているので修正して納品するだけなので1万で1日で対応も出来ます ただしテンプレートの範囲ですけど それを超える場合追加料金 たくさん仕事しているとそういう事出来るんだね
バグなら、MSへ報告して修正依頼してはいかがでしょう。 おそらく設定がきちんとされていないのではないのでしょうか。 http://technet.microsoft.com/ja-jp/iis/ff625168.aspx 少し前IIS7.5でperlを動作させた時、構成の変更を感じました。 セキュリティが強化されて、細かく設定する必要があるようです。 502エラーなのだから、アクセスできないのでしょう。 トレースを見れば、原因と対応がわかると思います。
できません。 この場合は、PHPを使わないか問い合わせフォームをPHPに移植するかどちらかになります。
$qは何でしょう? おそらくCGIオブジェクトだと思います。そうであるなら http://perldoc.jp/docs/modules/CGI-2.89/CGI.pod より > 新しい問い合わせオブジェクトの作成(オブジェクト指向スタイル）: > $query = new CGI; > これは（POSTとGETメソッドの両方からの）入力を解析し、 $queryと呼ばれるperl5オブジェクトに格納します。 と、あります。つまり、 > if ($ENV{'REQUEST_METHOD'} eq "GET") {# GETでの受信 (略) > print "POST=$formdata"; >} の部分はまったく無意味なコードです。CGIモジュールを使う理由の一つは、こういうコードを書かなくても、簡単にパラメータ受けとれる、ということです。 内容はparamメソッドで取りだせます。 ・これが出力したHTMLを「ソースを見る」等で確認しました? pメソッドは<p>タグの構造をperl上で表現するためのものです。 $q->p( "aaaa", $q->strong("BBB") , "ccc" ) → <p>aaaa<strong>BBB</strong>ccc</p> といったように。こうすると、Perlでの文法の構造と、HTMLの文法構造が一致するわけです。 それをまったく無視してるので、できあがったソースが無茶苦茶になってます。 そのせいで、そもそものデータが送られてない可能性もあります。 formを書くなら http://perldoc.jp/docs/modules/CGI-2.89/CGI.pod#pod125011 あたりを読んでください。 正しい文法かどうかもわからないなら、各種チェッカーがありますから、使ってください。 http://validator.w3.org/ http://openlab.ring.gr.jp/k16/htmllint/index.html http://users.skynet.be/mgueury/mozilla/ (firefoxのアドオン) ・前の質問(http://oshiete.goo.ne.jp/qa/7453554.html)から > ラクダ本の上巻は必須でしょうか？ 下巻は、当然、上巻の続きですから、上巻を読んでいること前提で書かれています。 他の資料で上巻相当のことを理解しているのなら不要かもしれません。 が、これまでのやりとりを見ていると、とてもそうには見えません。 ラクダ本はあまり初心者向けではないので、今すぐに、とは言いませんが、将来続けていくなら読んでおいた方がいいです、
#!で始まる行は、そのファイルを単独で実行するときの引数指定です。 「perl -c encoding.cgi」というように、明示的にperlインタプリタを起動してファイル指定した場合は、#!の行は基本的に意味を持ちません。 その上で、perlインタプリタが「#!行では -T オプション付になっているのに、-Tオプションなしで実行しようとしている」ということでエラーにしているのです。 チェックの時も、「perl -cwT encoding.cgi」のように、-Tオプションを付けてください。 そうすればエラーにならなくなります。
> # wT付けるとエラー これは、すでに指摘があったように、文法ミスがあったので、perl -w (=use warnings)でエラーを検出して停止したんでしょう > require 'cgi-lib.pl';# cgi-lib.plを呼び出す > require "jcode.pl";# jcode.plライブラリを組み込む cgi-lib.plもjcode.plも使わないほうがいいです。古すぎます。どうしても使わなければならないという理由があれば別ですが。 CGI.pmを使えばcgi-libは不要になるはずです。日本語の文字列を処理したいときは、use Encodeしましょう。Encodeの使い方は http://blog.livedoor.jp/dankogai/archives/51031595.html などが参考になるでしょう。 > $q->li('<FONT color="brack">テスト？</FONT><BR>'), li はhtmlで言うところの List Itemタグ(<li>)です。CGI.pmのタグ出力は必ずしも必須でないです。つまり、HTMLの出力を全部CGI.pmでやらなくてもいいです。 以下、空白2文字を全角空白していることに注意。use utf8しているので、CGIスクリプト中(perlスクリプト中)に日本語を埋め込むときはutf8で保存のこと。 binmode STDIN, ":encoding(cp932)"; binmode STDOUT, ":encoding(cp932)"; しているので、入出力はCP932(=Windows Shift jis)になる。 use strict; use warnings; use utf8; use CGI; use CGI::Carp qw(fatalsToBrowser); use CGI::Pretty; # Windows Shift JIS binmode STDIN, ":encoding(cp932)"; binmode STDOUT, ":encoding(cp932)"; my $q = CGI->new(); print $q->header( -charset => 'Shift_JIS', -type => 'text/html' ), 　　$q->start_html( -title => 'TEST' ); my $name = $q->param('username'); if ( !defined($name) or $name eq '' ) { 　　$name = 'Anonymous'; } print $q->h1("Hello $name"); print << "END_BODY"; <form method="POST" action="foo.cgi" enctype="multipart/form-data"> 　user name: <input type="text" name="username" value="$name" /> 　<br /> 　<input type="radio" name="look_behind" value="A" />Value A 　<input type="radio" name="look_behind" value="B" checked="checked" />Value B 　<input type="radio" name="look_behind" value="C" />Value C 　<br /> 　<input type="checkbox" name="checkbox" value="ON" lablel="checkbox_label" />checkbox 　<input type="hidden" name="sample" value="red"　/> 　<input type="hidden" name="sample" value="blue"　/> 　<br /> 　<input type="submit" name="Send" value="Send" /><div><input type="hidden" name=".cgifields" value="checkbox"　/> 　<br /> 　<input type="hidden" name=".cgifields" value="look_behind"　/> </form> END_BODY print $q->hr, "<pre>\n"; my @params = $q->param; for my $param (@params) { 　　print "$param:\n"; 　　my @values = $q->param($param); 　　for my $value (@values) { 　　　　print "　$value\n"; 　　} } print "</pre>\n"; print $q->end_html;
すごい原理的な仕組みを使って、CGIのパラメータを取得しようとしているみたいですけど、CGI.pmくらいは使いましょう。(cgi-lib.plじゃなくて) CGI.pmなどのモジュールを使わずPOSTが動いているのを確認したいだけなら、つぎのコードで確認できます。表示がくずれるので、空白2文字を全角空白にしていることに注意。 --- foo.html <html> 　<head> 　　<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" /> 　　<title>TEST</title> 　</head> 　<body> 　　<form method="POST" name="hoge" action="foo.cgi"> 　　　<div>TEXT DATA: <input type="text" name="NAME"></div> 　　　<input type="submit" value="SEND"> 　　</form> 　</body> </html> --- foo.cgi #!/usr/bin/perl print "Content-type: text/plain; charset=utf-8\n\n"; read STDIN, $data, $ENV{'CONTENT_LENGTH'}; print "$data";
昔、nifty @homepage 用に html表示用サーバー と cgi実行用サーバーを分けてAN-HTTPDに構築して動作実験する方法を @homepage に公開していたが、そのページはすでに削除したので、とりあえず以下をチェックしてください。 バーチャルホストにはアクセスできてるようなので、.cgi でどのプログラミング言語を起動しようとしてますか？たぶんperlだと思うけど、そうでないときは、以下のperlのところを読み替えてください。 １．AN-HTTPD の設定を開いて「一般」タブ内「.pl, .cgi の実行」の右の欄に、インストールしたperlへの フルパス名（ドライブレターから、拡張子の手前まで）を入れましたか？ ２．「#! の行を調べる」のチェックは外しましたか？ このチェックがついたままだと、.cgi ファイルの一行目に、インストールしたperlへの フルパス名（ドライブレターから、拡張子の手前まで）を入れないとなりません。 ３．また「CGI出力を検査」にはチェックを入れておくと、実行時エラー内容がブラウザにも出力されます。公開用では、ブラウザにエラー内容まで表示するのはまずいですけど、localhost練習用なら、この方がデバッグは速いです。 ４．ブラウザのurl欄にcgiのurlを直接入れて、どんなエラー表示が出るかをまずはチェックしてください。cgiプログラムそのもののデバッグはそれからです。
変換演算子（tr///）はスカラ変数にしか適用できません。 配列の場合、@array[n]=~tr/+/ /; $array[n]=~tr/+/ /; はOKですが @array=~tr/+/ /; はエラーになります。
CGIとHTMLでサーバーが同じで、ディレクトリが違うというだけなら CGIやHTMLのaction=やhref=を相対パスで書いてしまえば、 テストサーバーでも本番サーバーでも同じファイルがそのまま使えるので テストもそのぶん簡単になります。 しかし、今例のように、HTMLとCGIでサーバー自身が異なるという場合は、 テスト環境を作るのは少々厄介そうですね。 案１） プライベートLAN内に、本番と同じURLになるWebサーバーを２台を立ち上げる。 （実際にはバーチャルドメインで１台のマシンで可能） （テスト時は、クライアント機のhostsファイルに、プライベートLAN内のIPアドレスを記述し、 本番環境をみるときはhostsファイルから削除する） 案２） HTMLやCGI中のURL記述部は、決め打ちにしないで HTMLはSSI、CGIはrequreで　別の設定ファイルを読み込んでURL部を確定させる。 本番機とテスト機で設定ファイルだけは内容が異なり、他のファイルは共通とできる。 案３） HTMLやCGI中のURLはテスト機のURLの決め打ちにして、 本番環境にアップするときに、手動で　書き換える。 （更新時の修正漏れや、CGI用/HTML用のURLの取り違えなど、トラブルは多いでしょう） という方法が考えられると思われます。
Perlは2002年に5.8が、2007年に5.10、2010年に5.12、2011年に5.14と どんどん新しくなってはいるのですが、 出回っている情報に古い物が混じっているで注意が必要です。 互換性は重視されているので、古い書き方でも動いたりはしますが、 推奨されなくなった物にはそれなりの理由があります。 あまり古い書き方は避けた方が良いです。 新しめの情報は、とりあえず「モダンperl」とかで検索すればよいかな。 ただ、レンタルサーバーとかだとバージョンアップして無くて 最新のperlは使えないこともあると思います。 （さすがにPerl5.8くらいは使えるところがほとんどだと思いますが） CGIはWebサーバーから外部プログラムを呼び出す仕組みのことで プログラミングするだけならそれ自体を勉強する必要ってあまりない気がしますが。
サンプルとしては悪いので、ものすごく簡単なものをかいてみました。 #!/usr/bin/perl &main; sub main { if(&is_galapagos) { print "Content-type: text/html\n\nThis is mobile"; } else { print "Content-type: text/html\n\nThis is PC"; } } sub is_galapagos($) { return $ENV{HTTP_USER_AGENT} =~ / DoCoMo|UP\.Browser|KDDI|SoftBank|Voda[F|f]one|J\-PHONE|DDIPOCKET| WILLCOM|iPod|PDA|Mobile|Semulator /x; } もし、他のCGIを取り込みたいなら #!/usr/bin/perl &main; sub main { if(&is_galapagos) { require "bbs_mobile.cgi"; } else { require "bbs_pc.cgi"; } } sub is_galapagos($) { return $ENV{HTTP_USER_AGENT} =~ / DoCoMo|UP\.Browser|KDDI|SoftBank|Voda[F|f]one|J\-PHONE|DDIPOCKET| WILLCOM|iPod|PDA|Mobile|Semulator /x; }
CGIの記述ミスというよりもタイムアウトだと思います。 負荷がかかっているとか、運用面での問題は考えられませんか。
メールヘッダの Subject を次のようにします。 use Encode; Subject: encode('MIME-Header-ISO_2022_JP',decode('cp932',${'場所'}))."\r\n";
共通部分をテンプレート化してしまえばいいと思います。テキストファイルで（拡張子はなんでもいいです） <html> 　： 　： <div id="content"> <!-- inset contents here --> </div> 　： 　： </html> としておいて、そのファイルを読み込んで'<!-- inset contents here -->'までを出力→コンテンツ部分を出力（処理によって異なる）→以降を出力などとすればいいです。 あるいは'<!-- inset contents here -->'までを$herderに、以降を$footerに代入しておいて、 print $header; // 処理によって異なる出力 print $footer; でもいいでしょう。 一番簡単なのは「処理によって異なる出力」をいったん変数に代入する仕様であれば、ファイルを読み込んで'<!-- inset contents here -->'の部分をその変数で置換して返すことです。
これは、postfixの正しい挙動だと思います。 それは、 $to の定義において、 @の前に \ を置いてエスケープしているのにシングルクォートで括っているから、postfixは 「foo02\@bar.jp」をローカルパートと判断し、「@サーバー名」 を付加しているのでしょう。
＞　at ./yybbs.cgi line 56 yybbs.cgiの56行目で ＞Can't locate ./registpl.cgi in @INC registl.cgi の場所が見つけられません てあります どちらも使ったことがないので詳しくはわかりませんが、なんか根本的な使い方が間違ってないですか？ registpl.cgiはyybbsと組み合わせ使うものなのでしょうか？
結局のところ、エラーメッセージは 「Open Error: ./count.dat」 だけでしょ? ファイルがオープンできない、ということは、ディスクの故障等を除けば ・読み込め権利のないファイルを読もうとしている ・書き込み権利のないファイルに書こうとしている ・存在しないファイルを読もうとしている/ファイル名の指定が間違っている ・新規書き込み時にファイルを作れない。(権利がないディレクトリ、利用できないファイル名等) あたりが原因です。 CGI設置の説明に、そのあたり(特に権限(パーミッション))のことは書いてないですか? それと、この貼り付けた部分って、どこに表示されたのですか? ブラウザからCGIにアクセスしたら、 > <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> 以降だけがhtmlとして解釈されて、画面には ERROR ! Open Error: ./count.dat 前画面に戻る とだけ表示されるはずです。
＞　このURLのようなgetで各個人を識別するURLをお客様にメールで送り、・・・ 　　URL をメールで送る、という部分で不安要素が出てきます。 　　メールは、平文がそのままネットワーク上を流れていくので、 　傍受しようと思えば、途中で拾えます。 　　（　※ この URL を参照する際に、パスワードは必要ですか？　）
<a href="nextpageaddress"> のURLに 「 ?day=日付 」 を付ければ良いんじゃないですか。
まずはターミナルから、「 /Library/WebServer/CGI-Executables/test.cgi」として、直接実行してみてください。 ちゃんと実行できるか? Content-Type: text/html Hello Ruby と3行表示されるかどうか? 一つ気になるのは、test.cgiが「円記号n」となっていることです。 私はブラウザでは\はバックスラッシュで表示するようにしてあるので、改行を表わす\nならバックスラッシュnと表示されるはずがそうなっていません。 Macの場合、使ったエディタや設定によっては、円記号とバックスラッシュは区別されます。 もし、ターミナルで実行して「Content-Type: text/html¥n¥nHello Ruby」とか「Content-Type: text/htmlnnHello Ruby」などと一行で表示されてしまうようなら、option+円記号で\を入力する必要があります。
.htaccessと.htpasswdの２つのファイルをWEBサーバにFTP転送する際に、テキストモードで転送して下さい。 FTPクライアントソフトの初期設定では、これらのファイルはバイナリでFTP転送され、ファイルの中身がサーバに正しく解釈できない状態になるので、正しくログインできません。
補足でのご返信ありがとうございます。 CMONOS.JP を評価していただきありがとうございますm(_ _)m。 ウェブで小説を公開される方は縦書きにしたいと思う方が多いようなので、そちらの方が大きいのかなと勘違いしておりました。 失礼いたしました。 はい、php 版のドリーム小説ツールとの併用はできないように思います。 こうしたツールにはうといのですが、JavaScript 版もあるとのことですので、JavaScript 版でしたら CMONOS.JP のテンプレートに、JavaScript を埋め込むタグを追記することで併用できるのではないかと思います。（その場合縦書き化のタイミングを調整する必要があるかもしれません＜読み込み時に縦書き化するのではなくボタンを押すと縦書き化する等） 以上参考になりましたら幸いです。
例として，たまたま思いついた次のページを挙げます。 楽天市場 ＞ メディア情報ナビ ＞ テレビで紹介商品情報 http://event.rakuten.co.jp/ent/onair/ この種のページというのは，ページの内容を毎回ゼロから作り上げているのではありません。定型的なページ全体のレイアウトはあらかじめ決まっていて，後は，魅力的な商品写真，購買意欲をそそるようなキャッチコピーを個々に埋め込んでいって，効率よくWebページを作り上げているわけです。「cgiで管理画面を使ってお知らせや画像を更新する作業」とはそういう業務を指します。 画像や文章など，Webページを構成する「内容」を英語でcontentsといいます。HTMLエディタなどを用いてゼロからホームページの全体像を作り上げなくても，コンテンツを埋め込むだけで簡単にWebページが作れるようにしたソフトウェアを，コンテンツ管理システム(CMS)といいます。ですから「cgiで管理画面を使ってお知らせや画像を更新」できるシステムはCMSと呼んでもよいわけです。 ちなみに。 就職情報などで業務内容を説明する文章にそのような文言が登場していたのでしょうか。であるなら，勉強なんて身構えなくてもすぐに応募してみて，作業を通じて知識を付けていった方がよいでしょう。 http://okwave.jp/qa/q5069659.html の私の過去の回答ANo.1
サーバーの環境によってはパーミッションが異なることもあります。 755で動くのならそれでいいですよ。
他のカートでもよければ　残り在庫数を設定できるものがありますが
1番目のケースでは、文字化けするのが正しい。 UTF-8の文字列をbase64エンコードして、それに、=?iso-2022-jp?B? という嘘のコード名をつけたら文字化け（デコードしたUTF-8文字列を指定されたiso-2022-jpのエンコードと見なして無理矢理表示しようとする）のは正常な動作です。 改善としては、必ず文字コードをiso-2022-jpに変換してからbase64エンコードしてください。
> ・CGIプログラムはウェブサーバがクライアントからのリクエストに応じて起動する。 > ・CGIプログラムへの情報の入力は、 > 　コマンドライン引数、環境変数、標準入力によって行われる。 > ・プログラムが標準出力に出力したデータは、 > 　ウェブサーバを経由してクライアントに送られる。 > ・CGIプログラムはHTMLを出力するケースが圧倒的に多い。 http://ja.wikipedia.org/wiki/Common_Gateway_Interface と解説されていますから，CGIとは何か？を端的に言うと， ・コマンドプロンプト画面において環境変数やキーボードによって入力データを与えられるプログラムならすべて，それをWebブラウザ→Webサーバへのデータ送信と同等に扱うことができる ・コマンドプロンプト画面に文字出力できるプログラムならすべて，Webサーバ→Webブラウザへのデータ送信と同等に扱うことができる という仕組みを実現するためにWebサーバに用意された機能を指します。 したがって，コマンドプロンプト画面で入出力をおこなうプログラムであれば言語を問わずCGIプログラムにできるのですが， 現実にCGIプログラムを記述する言語として圧倒的に普及しているのはPerlということになります。 > HPの中でどういう風に使用すればいいのでしょうか。 HTML「の中で」は使用しません。 拡張子.htmlのファイルの中に静的なHTML文字列を記述しておくのではなく， プログラムの実行結果としてHTML文字列を動的に生成して出力するのがCGIプログラムの働きですから。
CentOSのバージョンが不明…ですけどねぇ…。 [user@localhost ~]$ rpm -qf /usr/include/sys/io.h glibc-headers-2.5-65.el5_7.1 [user@localhost ~]$ ということで、CentOS5.7では「glibc-headers-2.5-65.el5_7.1」のパッケージが入っている必要があります。 # というか既に入っているんじゃないですか？？ 上記のコードだけなら…io.hは要らないんじゃないかとも思いますが…… # 使うなら…<sys/io.h>ですかねぇ。 で…… ヘッダを修正しても、_O_BINARY等でエラーになります。 _setmode()自体が見当たらない……ですかねぇ。 stdoutに対してfwrite()で書き込めばバイナリモードで出力できる。 とありますけど。 まぁ、それでもこのコードには問題がありますけどね。 ・コンテンツのサイズが不明。(CGIの呼び出し元で付けてくれますかねぇ…) ・fopen()の時の失敗する可能性がある。(カレントディレクトリにimg1.jpg、img2.jpg、img3.jpgがありますかねぇ？)
>なかなか参考にできそうなサイトなどがありません。どなたかお勧めのサイトなどがあればお教えください 大抵の参考書には、「標準ライブラリ」のリファレンスマニュアルが載っています。 載ってなかったとしても、「C言語 標準ライブラリ」で検索すればいくらでも見つかります。 それだけで十分です。 いまは乱数でnoに0～2の値を入れ、文字列の配列imgfileから、添字noの文字列(=ファイル名)を選んでいます # 念の為に聞きますが、上記動作をしていることは理解していますね? これを、乱数ではなく、曜日をもとにすればいいだけです。 とにかく動くもの(if～elseの連続とか)だったら、非常に簡単です。 このヒントでわからないようなら、技術がぜんぜん足りません。 C言語とプログラミングの基礎をやりなおしてください。
こんにちは。 formのactionで、so-netのCGI呼んでるので、 さすがにこのCGIを改変するのは難しいですな・・・。 それぐらいのチェックなら、別のCGI挟むのも面倒なので、 JavaScriptでやっちゃえばどう？ <INPUT TYPE="SUBMIT" VALUE="送信します" > これやめて <INPUT TYPE="BUTTON" VALUE="送信します" onclick="checkSubject();" > とかなんとか・・・。
CGIというより、CGIが出力したHTMLが正しいかどうかの問題ではないでしょうか。あるいは(使っているなら)CSSか。 とりあえず、そのCGIの結果をHTMLチェッカーにかけてみては? http://validator.w3.org/ http://htmllint.itc.keio.ac.jp/htmllint/htmllint.html
http://www.kinet.or.jp/hiromin/cgi_introduction/access_counter/access_counter.html
RFC2822 に 「メールヘッダの宛先フィールド（To、Cc、Bcc）は、コンマで区切られた１つないし複数のアドレスのリストである」 と規定されています。
A1に例えば2011/11/30 13:25 のように日時が入力されているとしたら、次の式のようにします。 =IF(A1="","",IF(NOW()-A1<"1:00"*1,TEXT(NOW()-A1,"mm分"),IF(NOW()-A1<"24:00"*1,TEXT(NOW()-A1,"h時間"),IF(NOW()-A1<30,TEXT(NOW()-A1,"d日"),DATEDIF(A1,NOW(),"Y")&"年"&DATEDIF(A1,NOW(),"YM")&"月"&DATEDIF(A1,NOW(),"MD")&"日"))))
何をしているのか理解できないところがあるので、 まず syumi = cgi.params["hobby"] で上の方の 趣味： <input type="checkbox" name="hobby（以下省略） のチェックしている状態を受け取っているのですよね。 (CGIを使ったことはないのでチェックしたものはどのような形式で受け取るのでしょうか？ Hash? Array?が分かれば考えやすいのですが） それはともかく、 その後の syumi = "" で折角受け取ったデータを消ししまっているのです。 その後の for x in str syumi = syumi + x end でstrはforの前で "映画, 音楽, スポーツ, 料理, その他 " ですので、forは１回しか回らず、syumiにそのまま入れて終了しています。 要するに、 cgi.params["hobby"]で受け取った値を捨ててしまっています。
もしかして content-type を書かないで私の書いたコードだけ入れてないでしょうね? Hello World のところだけ変えるんですよ。
ANo.1で指摘されている通りです。 print "ようこそ、" #{account}"さん。それではゲームを始めましょう。" の場合は print "ようこそ、" +account+"さん。それではゲームを始めましょう。" にするか、 print "ようこそ、#{account}さん。それではゲームを始めましょう。" にしましょう。 #{account}は文字列の中に変数accountの内容を入れるときに使います。 print #{account}"というアカウントはありません。" も同じです。 スクリプトをrubyでじかに動かすと、初歩的な文法上のエラーは即座にでてくると思いますが。
https://www.google.com/search?q=wiki+%E3%83%95%E3%83%AA%E3%83%BC ＞現在のウェブサイトに実装したいので、＠wiki等で新たに作るということは考えておりません。） ググればいろいろ出てくるものを自力で探せないレベルなら高望みはやめたほうがいいと思うけど。
CGIにデータを渡す方法に、QUERY_STRINGSとPATH_INFOとSDIN(標準入力)があります。 QURY_STRINGSはURLの一部として渡す方法で、?の後に続くURLエンコードされた文字列です。 PATH_INFOは、/で区切られたURLの一部です。サーバーが?より前の文字列を/で区切って下位から環境変数に読み込みながら保存し、CGIに出会ったらそれを利用します。 標準入力は<FORM action="URL" method="post">とpostが指定されているときに、HTTP要求ヘッダに続いて渡される値です。 CGI側では、受け取ったデータを処理して様々に利用します。 CGIはこうして受けった値を処理します。どのような値があるかは下記参照 例] http://hpcgi1.nifty.com/Iruka/ENV_FORM.cgi/worker001/http://oshiete.goo.ne.jp/qa/7154231.html?name=ORUKA1951 　どのように処理されているかは、CGIプログラムをエディタで開いて見ることになります。
CGIにはあまり関係ない話ですね。 どのようなnameでどのような形の値を取得しているかと、どのような方法で処理しているかの概略をつかめばよいです。 　大部分の問題は、HTMLのデザインの問題なので、CGIの中からその部分だけを取り出して書き直せばよいです。 　表示されたフォーム画面のHTMLソースを開いて、デザインしなおしたものを差し替えればよいだけかと思います。
こんにちは。 質問者様の要件を満たそうとするとおそらくオリジナルで作成する必要があると思います。 ・当選商品の種類、数を決めておかなければならない ・携帯の端末情報を保存して1回目の抽選かどうかを判断(何回でも抽選できてしまう) ・大吉,中吉,小吉の出る確率を決めなくてはいけない 等々 店舗について広告に載せるQRコードを変えるのは厳しいと思うので入力された都道府県等から近くの店舗を選んで貰うか、この際プルダウンで出してしまうかになるかなと思います。 (工数的にはプルダウンで出してしまうほうが安いです) (確かにユーザ側からの立場だと、プルダウンにどっさり出ても近隣が分からない可能性もあります) よってフリーでは要件を満たすものが見つからないと思います。 またそれ相応のサーバ側処理を作る技術が必要になります。
例えばこんな感じですか？ #!/usr/local/bin/ruby require "cgi" target_filename = "program_data.txt" def insert_line_before(lines, from, to) to_insert = lines.delete_at(from) to -= 1 if from < to lines.insert(to, to_insert) end def modify_file(filename, from, to) f = File.open(filename, File::RDWR) f.flock(File::LOCK_EX) lines = f.readlines insert_line_before(lines, from, to) f.rewind f.write(lines) f.truncate(f.pos) # may not be needed. f.close return lines end print "Content-type: text/html\n\n" cgi = CGI.new from = cgi.params['from'][0] to = cgi.params['to'][0] if from.to_i >= 1 and to.to_i >= 1 then modify_file(target_filename, from.to_i - 1, to.to_i - 1) print "<html><body>done</body></html>" else print "<html><head><title>Insert test</title></head><body>" print "<ol>" f = open(target_filename, "r") {|file| file.flock(File::LOCK_SH) while line = file.gets printf "<li>%s</li>", line end } print "</ol>" print <<EOS <form method="POST"> Move the line [<input type="text" name="from">] before the line [<input type="text" name="to">]. <input type="submit"> </form></body></html>" EOS end insert_line_before(lines, from, to)で全ての行が入った配列を受け取って、from行番目の文字列をto番目の行の前に挿入します。fromの方がtoよりも小さい場合はfromの部分を抜いたことでtoのところの位置が変わっているので、そのぶん減算します。また、modify_file(filename, from, to)はこのinsert_line_beforeを使うことで、ファイルを開いて指示された変更を行います。 余談ですが、このコアな部分をPerlで書くとこんな感じです。 sub insert_line { my ($lines, $insert_from, $insert_to) = @_; my @to_insert = splice(@$lines, $insert_from, 1); $insert_to -= 1 if $insert_from < $insert_to; splice(@$lines, $insert_to, 0, @to_insert); }
「prel」が「per」lの、「タグ」が「タブ」の間違いだとして。 「文章において、タグをなくす」→可能です。 ただ、やりかたに問題があります $comment = FILE; 直接ファイルハンドルを使っても、ファイルから読み込むことはできません。 普通は<FILE>と、ダイアモンド演算子を使います。 $comment = <FILE> ; 通常は1行ずつなので、ループで全体を処理します。 @comment = <FILE> ; リストのコンテンツでは、全体を読み込んで1行1要素のリストにします。 undef $/ ; $comment = <FILE> ; 特殊変数$/が「区切り」なので、未定義にしたらファイル全体を一度に読み込みます。 あとは、これは読んだだけなので、明示的に出力させなければ、見掛けなにもしていないように見えます。
> http://www.kent-web.com/data/upload/upload.cgi > こんなような感じのものです。 > しかし上記のものは1ファイルあたりの容量制限がかけられています。 自分で設置するのであれば容量制限を5MB以上に設定すればよいだけではないでしょうか。
Wordpress
> どこで認証したいサイトの登録をしたらいいのでしょうか。。。 サイトを登録するのではなく、ユーザが作成したディレクトリにコンテンツを入れるだけです。 隅から隅まで良く読めば判りますよ。
「海外プロパイダ－をブロック出来るツ－ル」 　プロバイダーとはインターネットへの接続をサービスしてくれる事業者のことです。↓ http://ja.wikipedia.org/wiki/%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E3%83%8D%E3%83%83%E3%83%88%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E3%83%97%E3%83%AD%E3%83%90%E3%82%A4%E3%83%80 　日本に住んでいる以上、海外のプロバイダと契約することはないはずですが...　それとも、モデムで勝手に海外の回線に接続されることを防止したいのでしょうか？ 　なお、海外のサイトという意味であれば、無意味です。たとえば、Niftyはnifty.comというアメリカのドメインですしWikipediaもwikipedia.orgはアメリカのドメインです。これらをブロックしたら、不便なだけですが。　
＃１です。 これも、 ・管理画面は下記ＵＲＬです。管理パスワードは初期値が「cgi」です。 って書いてあるんだから、16行目の $pass = &crypt('cgi'); を修正する。 ※「取り敢えず、中を見てみる」というのが結構重要。
厳密には不可能です。 案１：メールアドレスなどでユーザ登録してもらい、１ユーザ１回の投票にする。 ⇒問題点１：メールアドレスを複数持っている人が複数回登録できる 　問題点２：登録が面倒で投票してくれる人が減る 案２：cookieを使う。 ⇒問題点１：そもそもcookieを有効にしていない人をどうするのか？・・・投票不可にするしか無い 　問題点２：cookieをクリアすると何度でも投票できる 案３：TwitterとかmixiとかのIDで認証して、１ユーザ１回の投票にする。メールアドレスと違いIDを複数持っている人は少ないので ⇒問題点：そういうサービスを利用してない人は投票できない まあ、あまり厳密さを求めないで（意図的に何度も投票する人が居てもしょうが無いとあきらめ）、cookieでしょうか。 Cookieを扱うPHPでの具体的な記述は「PHP Cookie」で検索すればいくらでも情報があります。Perlなら「Perl Cookie」で。 処理の流れはこんな感じで： 0. Cookieの名前は投票回ごとに違う名前を決めます。例えば第一回だとponpoko001とか。 1. 投票を受け付けるときに、ponpoko001というcookieがあれば投票済みとみなします。 2. そのcookieが無い場合、Cookieを無効にしてないかチェックのため、checkというcookieを発行してみます。 3. 次のページに遷移して、checkというcookieが帰ってこなければブラウザ設定でCookieを無効にしているということなので「Cookieを有効にしてください」というメッセージを出してトップページなどに帰ります。 4. 投票を受け付けます。 5. 同時に、長い有効期限で、ponpoko001という名前のCookieを発行します。
フリーでいろいろ配布されてはいますが、ページ数は(近い将来も含めて)どの位でしょう? サイト内検索には大きく分けて２種類あります。 ■クロール型 検索時に全ページを調べるタイプ。各ページのタイトルやキーワード、本文中に「犬 イヌ いぬ」などと入れておくだけで勝手に検索してくれます。手軽な反面、その都度全ページを検索するので、ページ数が多いと遅くなります。(2～300頁あたりが限界か) http://www.tohoho-web.com/soft/wsrch.htm ■インデックス(登録)型 あらかじめリストを作成しておくタイプ。高速になる反面、ページの追加・更新・削除時にはインデックスも修正する必要があります。(自動的に作成するタイプもあり) http://www.kiteya.net/script/msearch/ カテゴリ分け等高機能なヨミサーチも場合によってはよいかも。 http://yomi.pekori.to/yomi-search.shtml その他 http://www.yumemaboroshi.net/cate15/ >「大サンョウウオ」も検索結果に～ たいてい大丈夫です。
ファイルのパーミッションが000 だと、CGIでのメール送信以前に、CGIの出すHTMLさえ表示できないので、とりあえず、CGI実行結果は見えているということは、 パーミッションの件は、見間違いか、 新しいサーバーのOSでは、パーミッションを扱えないファイルシステムなのか 新しいサーバのFTPサーバの設定ミスでパーミッションを正常に返していないか FFFTPのファイル一覧の取り出しオプションの設定ミス ってことではないでしょうか？ なお、肝心のsendmailですが、CGIが実行できているのにメールが送れないということであるなら、 ・CGIにエラーやバグがあってsendmailする前に終わっている。もしくはsendmail処理が通らない分岐に入る条件になっている。 ・古いサーバーとsendmailのパスが違っている。CGIもsendmailの実行結果をチェックしていない ・新しいサーバーではのsendmailが使えないので、、別のSMTPサーバーを使うようCGIを拡張する必要がある。 ・自宅サーバ等で　ISPによりOP25Bされていて、同様に別のSMTPサーバーをSMTP認証で使う必要がある。 って感じだと思いいます。 なお、プログラムにデバック用のprint文を入れて実際にどこまでOKなのかを 表示させると　原因がある程度絞り込めると思いますが sendmailまでいってそれのエラーチェックでも問題ないとすると、 サーバー管理者に　問い合わせしてみる他にないと思います。
＃２です。 > 悪意ある発言 > 攻撃的な書き込み > 公俗良序に反する内容の書き込み と有りますが、これをどうやって判断「させる」つもりですか？ 自分（手動）で削除するなら、その前の「許可式の掲示板」だけで十分ですよね？ その他に「排除」する機能が必要だということは、自動で削除してくれるものですよね？ 何をもって、「悪意」とするのか。 何をもって、「攻撃」とするのか。 何をもって、「公序良俗に反する」とすのか。 自然言語を解釈できなければ無理でしょう、ということです。
http://www.google.com/search?hl=ja&lr=lang_ja&ie=UTF-8&oe=UTF-8&q=cgi+%E3%83%91%E3%83%A9%E3%83%A1%E3%83%BC%E3%82%BF+%E5%8F%96%E5%BE%97&num=50
リンクをクリックして訪問する人を.htaccessで弾く事が出来ますが、 リンクURLをコピーして直接訪問する人を.htaccessでさえ判別できません。 つまり、無理です。 ＞悪意のある文章 管理者に削除依頼しましょう。 または、 不本意でしょうが、削除や引越を考えましょう。
ログファイルというと通常は追記していくイメージがありますが、ここで書いてある操作はそれとはちょっと違いますね。 テキストに保存したデータ列といった感じでしょうか。 試しに書いたプログラムはこんな感じです。 use strict; use Fcntl qw(:flock); sub swap_lines { my ($lines, $index0, $index1) = @_; my $tmp; $tmp = $$lines[$index0]; $$lines[$index0] = $$lines[$index1]; $$lines[$index1] = $tmp; } my $filename = "program_data.txt"; my $fh; open($fh, "+<$filename") or die "cannot open $filename"; flock($fh, LOCK_EX); my @lines = <$fh>; swap_lines(\@lines, 0, 3); # write the lines to the file. truncate($fh, 0); seek($fh, 0, 0); print $fh @lines; close($fh); ちなみに、swap_linesではlinesの参照(\@lines)を渡すことで、swap_linesで値を入れ替えたのが呼び出し元で反映されるようにしています。 データを破壊しないためにファイルロックを取ります。なお、closeがアンロックするので明示的なアンロックは不要です。close直前にLOCK_UNするという間違いが多いですが、それをやるとプログラムのキャッシュに乗ったデータがファイルに反映される前にアンロックされる可能性があり、次にopenを読んでいたプログラムがそこが反映されていないデータを読む可能性があります。
500エラーはプログラム中のどこかの記述がおかしくて正常に動作しないエラーです。 おそらく、使用者の環境に合わせ書き換えるべき箇所を書き換えていないんでしょう。 ※「どうしても」や「できません」は何の情報も持っていません。 解決を望むのであれば、「やったこと」「やりたいこと」「どうなったか」を記述しましょう。 あと、エラーメッセージをブラウザが出してくれてるんだから、まずはそれで検索してみること。
ああ、なるほど。使ったことないですけど、コマンドラインでパスワードを設定できるqpdfとかを使って、パスワード付きのpdfを一時ファイルとして作って、それを前で書いてあるようにバイナリ出力すればいいかもです。
リアルタイムでということになると、ブラウザ側での動作が必要なので、JavaScript を使います。 繰り返し更新するということになるとJavaScriptでHTMLのDOM(Document Object Model)を触ることになります。大がかりな操作だとjQueryなどのJavaScriptライブラリを使ったりしますが、この程度であれば直接spanタグの中のテキストを書き換えるなどのほうが簡単でしょう。 http://www.google.co.jp/search?q=JavaScript+HTML+%E6%9B%B8%E3%81%8D%E6%8F%9B%E3%81%88
Yomi-Search http://yomi.pekori.to/yomi-search.shtmlを利用しています。 デフォルトではチェックボックスは付いていませんが、改造してつけることが出来ます。 最近はその改造サイトがなかなか見つかりませんが。。。 私はCC-ROOMさんのところを参考にチェックボックスを付けております。
403になるのはどのドメインですか？ リダイレクトが成功しているとして、aaa.jpにアクセス権はありますか？
自動的にウェブ上のメールフォームを探して送信するプログラムがたくさん知られています。 これらSPAMロボット対策として、内容チェック画面、変形した画像にした数字や記号を入力させたり、いったんメールを送信して改めてそのメールに記載してあるリンクをたどって送信させるなどの工夫が必要です。
まずはFutomiのサーバアナライザーとか使ってGDが使える環境かどうかチェックしましょう。 GDのPNG出力は「http://perldoc.jp/docs/modules/GD-2.02/GD.pod」に例が出ています。「perl」「gd」で検索してください。
無理。 MACアドレスなんてルータを経由すれば(インターネットって事はルータはいくつも経由してる)変わります。元々の端末のMACアドレスなんて取得できませんよ。 それとも、ガラケーでいう所の固体番号みたいなやつ？これも無理だね。 IPアドレスもWifiやWiMAXだと変わるから無理。 >悪質な利用者を特定し、利用制限をかけようか パスワード制にでもしたらどうでしょうか。
＞ですが、お客様に対してメールを返信すると、 ＞送ったメールにこちら側のメールアドレスが記載され、 ダミーのメールアドレスを「送信元」に設定した上で返信し、返信メールの末尾に定型で 「このメールは、送信専用メールアドレスで送信されています。 このメールに返信されましてもメールは届きませんのでご注意下さい」 と書いておきましょう。 で、ダミーのメールアドレスを「存在しないアドレス」にしておけば、顧客が返信してもエラーメールが返るだけなので、ダミーアドレスに何かメールが来ているかチェックする必要はありません。 ＞メールサポートの回数、頻度を こういう細かい要望に沿ったシステムは既存の物では無理なので、WEB系のソフトハウスに発注して、専用フォームを作成し、自社サイトに設置するしかありません。
「何が良くなかったのでしょうか…」 　「sendmailのパスはサーバーサイトに書いていなかったので取り急ぎ空欄で設定しました。」です。メールを送るｃｇｉなのに、その手段(sendmailのpath)が設定されてないのですから、動かしようがありません。 　sendmailの使用は可能とサイトに書いてあるので、サポートにそのpathがどこなのか、問い合わせるしかないでしょう。
→ http://oshiete.goo.ne.jp/qa/7030066.html こちらのつづきでしょうか。 それならば、CRにするのは解決にはなりません。 おそらく、最近の事情を知らずに「Macではテキストの改行はCR」だと思っているのでしょう。 たしかにOS9まではCRを使っていましたが、OSXではUnixがベースになっており、改行もUnixと同じLFを使っています。 Web共有で使われれうApacheも、CGIを実行するのに使うperlも、LFを改行とみなします。 実際、手許で実験したところ、 CRLF,CR→Internal Error 500 LF → 「ちわ！世界。」と表示 でした。 原因は他にも考えられます。 > perl -c /Library/Webserver/CGI-Executables/test.cgi 文法が正しくてもプログラムとして間違っている、ということはよくあることです。 -cをはずして実行したら、ちゃんとターミナル上に表示されるでしょうか? CGIでは、その実行ファイルを単体で実行しようとします。perlを探すのは、シェルの役目です。つまり、シェルからコマンドとして実行できる必要があります。ターミナルで /Library/Webserver/CGI-Executables/test.cgi とだけ入力したらどうなるでしょうか?
PHPでも大丈夫であれば、http://dou.moo.jp/ で配布しています。 １ファイルで動作するので簡単に設置出来ます。 ダウンロード・ページを参照下さい。
変数ありの場合が抜けています。 # guid=Onにする RewriteEngine On # query stringなしの場合 RewriteCond %{HTTP_USER_AGENT} ^DoCoMo.* RewriteCond %{QUERY_STRING} ^$ RewriteCond %{REQUEST_URI} !\.(gif|jpe?g|png|swf|pdf|ico)$ [NC] RewriteRule ^(.*)$ http://homepage.jp/$1?guid=ON [R=302,L] # query stringありの場合 RewriteCond %{HTTP_USER_AGENT} ^DoCoMo.* RewriteCond %{QUERY_STRING} !guid=ON$ RewriteCond %{REQUEST_URI} !\.(gif|jpe?g|png|swf|pdf|ico)$ [NC] RewriteRule ^(.*)$ http://homepage.jp/$1?%{QUERY_STRING}&guid=ON [L] 変数を使用する場合としない場合の2つの条件を記載すれば多分問題なくなると思います。
メールに反応してプログラムが動けばいいのでCGIとは関係ないです。 一般的に使われる方法としては、簡単に言えば下記の通りです。 １．メールサーバのaliases機能（または.forward機能）を使用して、受信したメールをプログラムに渡す。 ２．渡されたプログラムはメールデータから送信者情報を取得し、メールを返信する。 使用するプログラムはperlでもpythonでもシェルでも何でも得意なもので構いません。
失礼しました。 $val=~s/(?<!\xA1)\xA1\xA5/\x2E/g; でいいと思いますが、J(j)code::tr を使う方が良いかもしれませんね。
location ヘッダを使う。 ただし、すでに他のヘッダを出している場合は javascript でリダイレクトする。
フォームを mailto: で送ろうとして、まあまあ送れるのは MSIE くらいと思ったほうがよさそうです。
aaa.cgiにサーバがアクセスするんでない限り、アクセスもとは接続者だよ。 リンクからたどったとしても、接続リクエストを行うのはクライアントだからね。 もしlocalhostとしてcgiにアクセスしたいなら、サーバマシンにクライアントアプリケーションが存在して、それを使ってリクエストすることになる。 でも、そうなるとそのサーバにあるクライアントソフトウェアの制限は・・・となって、結局堂々巡りになります。 cookie食わせるとか、その程度しか方法ないんじゃないかねぇ・・・。 top.htmlじゃなくてtop.cgiとかにして、ランダムな文字列を記入したCookieを食わせておいて、それと一緒に一定時間だけサーバのデータベースに同じ文字列を保存しておく。 aaa.cgiにアクセスしたときに、cookieの文字列とデータベース内の文字列が一致した場合、アクセスを許可する・・・とか。 厳密にtopからのアクセス以外をはじくわけではないですが・・・。
Webからアクセスするのにパーミッションが偶数なのが気になる。 全部「777」とか「755」とかに変えてみたら？ （偶数のところは「実行」権限が有りませんよね？）
自分でも試してみましたが、隠しはsecret.htmlだけのようです。 そこに画像を載せる場合、公開ディレクトリにアップロードした画像を フルパスでsecret.htmlに記述、で表示はされます。 ただこの場合だと、入り口にパスワードが設けられるものの 画像そのものを隠しているわけではないので 画像を置いてある場所（URL）がばれてしまうと パスワードの意味がなくなってしまう可能性もあります。 画像を隠す場合、【強化タイプ】が対応しているようです。
100人で締め切るのは簡単ですが、申し込みをすると言うことは、そのまえに、ユーザー登録しないといけないので、メールアドレスを管理したり、パスワードを管理したり、パスワードを忘れた人の対応する仕組みを作ったり等と、結構大変ですよ。 仕事でやるなら5万で引き受ける気はしませんね。まあでも、そういうのを何度も作って流用出来るコードを持っている人なら引き受けてくれるかも。画面デザインには全く手を掛けないという前提で（デザインはあなたがやればいいですよね）。 もっと楽なのは、とあるメールアドレスにメールを送ると申し込み番号が送り返されてくる。番号が100までの人が当選であとのひとはキャンセル待ちとかの仕組みかな。これだとユーザ登録とか要らないし。これなら1万円で引き受けても良い。 もっと手を抜いて、返送が即座でなくて良いなら、あなたが手動でやっても良いし。メール到着順に番号を振る。
まずjavascriptでチェックします。 すべて一旦送信してエラーを返すより良いと思います。 <script type="text/javascript"> function inchk(f){var ele=""; for(i=0;i<f.elements.length-1;i++){ if(f.elements[i].value=="") ele+=f.elements[i].name+"が未記入です\n"; } if(ele){alert(ele);return false;} } </script> <form method="post" action="CGI" onsubmit="return inchk(this)"> ただし、ユーザのブラウザが javascript OFF ですとこれは効きませんから、スクリプトでもチェックが必要ですけどね。 スクリプトは受信データを変数に格納しているところでチェックして確認ページにプリントします。 ここで説明するより、いろいろサンプルを見たほうがいいです。
「メール送信失敗」と表示されるのであれば一応動いているはずなので、たぶん Sendmail (サーバにあるメール送信プログラム)のパスが間違っているかも知れません。 1.現在のサーバの sendmail のパスを調べます。 /usr/lib/sendmail のような感じで、レンタルサーバのサイトのどこかに明記されているはずです。 2.その postmail.cgi をメモ帳で開きます。　どこかに「sendmail」という設定欄があると思うので、正しいパスを記述してアップロードします。 もし KentWebさんのpostmail.cgiであれば、以下にサポートページがあります。 http://www.kent-web.com/data/postmail.html もしくは、そのcgiに著作者やURLが記述されていると思うので、そちらからたどってみてください。
apache のアクセスログ、エラーログは確認されましたか。 エラーログには [error] [client 192.168.0.201] client denied by server configuration: のような感じで出ていると思います。 まさかとは思いますが、プロキシーを使っていて、思っているIPと違うアドレスでアクセスされているということはありませんか。
直接の回答ではありませんが、Webサーバ側で取得できる情報をすべて出力してみて、 識別できる情報があるか探してみるのはどうでしょうか？ 以下を実行するとREMOTE_ADDRやHTTP_USER_AGENTなどに何が入っているかチェック できるので、この出力をDBなりファイルなりに保存して後で解析します。 print "Content-type: text/plain; charset=utf-8\n\n"; for my $var ( sort( keys(%ENV) ) ) { my $val = $ENV{$var}; $val =~ s|\n|\\n|g; $val =~ s|"|\\"|g; print "${var}=\"${val}\"\n"; }
HTMLのMETAタグで出来るはずですが、、、ダメってことですか？ <META HTTP-EQUIV="Pragma" CONTENT="no-cache"> <META HTTP-EQUIV="Cache-Control" CONTENT="no-cache"> <META EQUIV="expires" CONTENT="0">
情報の種類が３種類あっても、cgiを３つ使う必要はないと思いますよ。 情報の登録の仕方、情報の読み出し方を工夫すれば、1つのcgiで足ります。 　↓ 同じような質問です。 http://okwave.jp/qa/q6841548.html
無名配列、無名ハッシュ、リファレンス 以上をキーワードに調べてみてください。 $listはハッシュの配列(もっと正確に言えば、「『ハッシュへのリファレンス』を要素にもつリスト」へのリファレンスになります) > foreach ($list) { これでは、$listが示すリファレンス一つだけのforeachになります。 $_ == $list となります。 また、Perlでは、インデックスを指定する場合に使うのは、リストには[],ハッシュには{}です。 $_['id'] では、'id'は数値0だと判定され、$_[0]の意味になります。 合せれば、$_['id']は $list[0] にあたり、{ id => '1', name => 'hoge' }(へのリファレンス)になります。 printでは そのことを示す HASH(0xXXXXXX) というような表示になったのでは無いでしょうか。 リファレンスから元の値にするには、デリファレンスと呼ばれる処理が必要です。 foreach (@$list) { # 配列のリファレンスを@でデリファレンス→リストになり、 #リストの要素であるハッシュのリファレンスが順番に$_へ入る print $_->{'id'} ; # ハッシュのリファレンスの中の特定要素へは->を使ってアクセスする。 # ハッシュのインデックスは{}で指定する。 > また「[]、{}」は何を意味するのでしょうか？ $list=[～ では、 []は無名配列、{}は無名ハッシュですが、どちらの記号も他の場面でも使われています。 その文脈で判断する必要があります。 Perlは不慣れ、とのことですが、PHPとは似ているようで結構違います。半端にやらずに、区別して覚えるようにしましょう。
まず、公開サーバソフトはApache5でしょうか?それとも6でしょうか？IISでしょうか？ また、CGIはperlでしょうか、phpでしょうか？ Apache5でperlのCGIを使うという前提で、心当たりを挙げれば、 ローカルサーバの環境設定ファイルのhttpd.confの設定がうまくできいないのではないでしょうか。 cgi-binを有効にしたり、使用ポートを80から8000に変えてみたりしてうまく作動するか試してみる必要があるでしょう。 ポートを変えるのは、テストサーバで、初期値の80番をIISが使用している可能性がある場合です。そのときのURLは、 http://localhost:8000/cgi1.pl といったようにドメイン名の末尾に:8000とポート番号を付加しないとcgi-binにあるcgiを呼び出せません。
なかなか回答が付かないようですので、「素人なので分かりやすく」と敷居が若干高いのですが回答を残しておきたいと思います。 > 多分下記の部分が問題だと思うのですが 残念。 その部分はまったくの的外れです。 フォームの内容と既存のクッキーをハッシュに一緒くたにしているだけの処理です カート情報にはクッキーを使っていると思いますが、クッキー情報を入れる前にデータをエスケープ処理していないのでしょう。 Safariはクッキーにバイナリデータは直には受け付けないようです。 同じ技術基盤を持つはずのChromeはOKなんですけどね（ただしデベロッパーツール上ではSafari仕様で未対応なのかアウトです）。 また、Firefoxだと文字化け(Shift-JISですよね)するんで、ブラウザがどうあれデータをエスケープ処理していない方が悪いかと思います。 > ＣＧＩなどは全くの素人なので分かりやすくお願い致します。 そんなつもりは無いのかもしれませんが、「理解する努力」を放棄しているように感じる文言です。
CGIには、メールフォーム生成画面と、送信画面の２つのモード（確認画面もいれて３つかも） があるはずですので メールフォーム生成画面のモード時に、bodyタグ内に、 onsubmit="alert('アラートメッセージ'); return false;" とか onsubmit="return confirm('確認メッセージ');" を入れてはどうでしょう。
WordPress + EventCalendar３(plugin) が簡単かと思います
No.1です。 お客様の情報を管理・格納するための仕組み（データベースサーバ、クラウドなど）と 現在のシステムを連携させるための仕組み、セキュリティ的な考慮などが必要になります。 そこまで大掛りなシステムであればそこそこの値段になりますし、工数もかかります これはちょっと個人では無理かと思います 簡易なシステムであれば、一度入力された情報を ユーザ側のcookieに保存し入力画面で呼び出させる方法もあります 但しcookieを取得すれば住所等の個人情報が取得できるのであまりお勧めできませんが 工数は最小かと思いますし、ひょっとしたら作成出来るかもしれません ベースのシステム自体何で書かれている物かなど良く判りませんが 下手に弄って流出などの大問題になるよりは、それなりの所に依頼した方がいいかもしれませんね＾＾；
>このあたりが近いでしょうか? そうですね。 もし.htaccessで設定しようと思っているのでしたら、 無理かもしれません。 普通は、httpd.confや、バーチャルホスト用のconfファイルなどで設定します。 httpd.confが弄れる環境なら大丈夫だと思いますが、 一般的な有料レンタルサーバーでは操作できません。 ログ保存しても、それを解析させなければなりません。 また、ログを作るということはログのメンテナンス（ログローテーションなど）も必要になりますので、 その辺も考慮して設定されたほうが宜しいかと思います。
「URLエンコード」「URLエスケープ」などと呼ばれる形式ですね。 http://ja.wikipedia.org/wiki/URL%E3%82%A8%E3%83%B3%E3%82%B3%E3%83%BC%E3%83%89 「perl URLエンコード」 「php URLエンコード」 などで検索すれば、参考となるページが見つかることでしょう。
元々この掲示板には下記コード変換しか無い様ですので、プログラムを書き足すしかありません。 因に BBCode って言う規格も書き方も無くBBSで使うタグの通称の事でボードによって使える物はかなり変わります。 ■以下タグの抜粋 <a href="javascript:MyFace('(^^)')"><img src="./img/smile01.gif" border="0"></a> <a href="javascript:MyFace('(^_^)')"><img src="./img/smile02.gif" border="0"></a> <a href="javascript:MyFace('(+_+)')"><img src="./img/smile03.gif" border="0"></a> <a href="javascript:MyFace('(^o^)')"><img src="./img/smile04.gif" border="0"></a> <a href="javascript:MyFace('(^^;)')"><img src="./img/smile05.gif" border="0"></a> <a href="javascript:MyFace('(^_-)')"><img src="./img/smile06.gif" border="0"></a> <a href="javascript:MyFace('(;_;)')"><img src="./img/smile07.gif" border="0"></a> <a href="javascript:supphtml('b');" title="太字"><img src="./img/b.png" border="0"></a> <a href="javascript:supphtml('i');" title="斜体"><img src="./img/i.png" border="0"></a> <a href="javascript:supphtml('u');" title="下線"><img src="./img/u.png" border="0"></a> <a href="javascript:supphtml('s');" title="取消"><img src="./img/s.png" border="0"></a> <a href="javascript:supphtml('code');" title="等幅"><img src="./img/code.png" border="0"></a> <a href="javascript:supphtml('color','INPUT COLOR');" title="色字"><img src="./img/color.png" border="0"></a> <a href="javascript:supphtml('url','INPUT URL');" title="連結"><img src="./img/url.png" border="0"></a>
「全角ハイフンを、住所欄や電話番号欄で使用するとエラー表示になり送信できない、という対応をしたいのですが、どうすればいいのでしょうか？ 」 　とりあえず、init.cgiに「$no_wd = '－';」を設定して、clipmail.cgiの「禁止ワード」のロジックで「if ($flg) { &error("禁止ワード「－」が含まれています"); }」としておけば、それが使えないことが、伝わると思います。もちろん、「clipmail.html」で「『－』は使用しないで下さい」と記載しておく出来ですが。 　既に、$no_wdを設定済みなら、clipmail.cgiの「禁止ワード」のロジックで「if ($flg) { &error("$_に禁止ワードが含まれています"); }」とすれば、禁止ワードが何かは分からないが、どこに含まれているかを表示できます。 　
>私は検索“結果”画面とは言ってませんけど。 逆切れですか（笑 言ってなくても普通は検索した画面って思うでしょ。 Googleの検索画面とか、Yahoo!の検索画面って言われて、トップページのこと言ってるんだ～ってわかる人そういないと思うけど。 自分にとってわかってることでも他の人は分からないことが多い。 回答者はできるだけ質問者にわかってもらおうと答えるけど、回答者側もそういう意識は必要だと思う。 っていうか、わざわざ回答して改善案まで提示した人に向って逆切れとか...ｒｙ まあ、何でもいいや。 こういうのは手っ取り早く終わらせよう。 予め言っておくけど、この部分、liをfloatしてレイアウトを整えてるだけなので、確実にレイアウトは崩れると思うよ。 崩れるのが嫌なら自力でやってね。 CSSは苦手なので。 とりあえず、改造案。 top.htmlを弄るから、search.cgiは自分で考えてやって。 質問者さんのファイル内容は見えないから私にはわからない。 # template/top.html 79行目 foreach $Gno(sort (keys %ganes)) { の上の行に $subcateName = ""; を追加 112行目付近 $bf_kt_no=$Gno; の下に $subcateName = ""; を追加 117行目付近からの if($gane_top{$Gno}) { @Gname = split(/:/,$Gname); if($gane_UR{$Gno}) { print <<"EOM"; <li><a href="$Ekt$Gno$Eend">$ganes{$Gno}</a></li> EOM } elsif($gct{$Gno}) { print <<"EOM"; <li><input type="checkbox" name="ct" value="$Gno" />$gane_NOT<a href="$Ekt$Gno$Eend">$ganes{$Gno}<small>[$gct{$Gno}]</small></a></li> EOM } else { print <<"EOM"; <li><input type="checkbox" disabled=\"disabled\" />$gane_NOT$ganes{$Gno}<small>[$gct{$Gno}]</small></li> EOM } } を以下に書き換え if($gane_top{$Gno}) { @Gname = split(/:/,$Gname); @dirlist = split(/_/,$Gno); if($#dirlist == 1){ $subcateName = $Gno; print "<li>\n<div>"; } elsif(!$subcateName || index($Gno,$subcateName) != 0){ print "<li>\n<div>"; $subcateName = ""; } elsif($subcateName && index($Gno,$subcateName) == 0){ print "<div>├"; } if($gane_UR{$Gno}) { print <<"EOM"; <a href="$Ekt$Gno$Eend">$ganes{$Gno}</a></div> EOM } elsif($gct{$Gno}) { print <<"EOM"; <input type="checkbox" name="ct" value="$Gno" />$gane_NOT<a href="$Ekt$Gno$Eend">$ganes{$Gno}<small>[$gct{$Gno}]</small></a></div> EOM } else { print <<"EOM"; <input type="checkbox" disabled=\"disabled\" />$gane_NOT$ganes{$Gno}<small>[$gct{$Gno}]</small></div> EOM } } # style.css（city） 396行目 height:25px; をコメントアウト /*height:25px;*/ 以上。
わざわざ自作しなくても、そういうWeb上で、アップロードダウンロードできる フリーのCGIを探してきて、自社サーバーに設置するだけで利用可能ですよ。 ただ、Pogoplugを自社(自宅）のLAN（ルータの内側）に設置して、 自分はNASとして使い、 外部の人にはそれをファイル転送サービスとして公開するという方法もあります。 なんといっても、自分の作業ディレクトまたは保存ディレクトリをそのまま公開できるので、 更新したのにアップロードし損ねていたという　トラブルがないのがよいです。 アカウントを分けることで、出先から自分の環境をそのまま取り出せますし、 http://internet.watch.impress.co.jp/docs/column/shimizu/20100518_367667.html
昔作った検証用サンプルも入れときます 参考になれば幸いです [ファイル名：index.cgi：UTF-8]↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓ #!/usr/bin/perl my $sDT = '漢字です'; my $sDT_URL = './test.cgi?T1='.URL_Encode($sDT); print <<HTML_BODY; Content-type: text/html\n\n <html> <head> <meta http-equiv="Content-Language" content="ja"> <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> <title>TEST UTF-8</title> </head> <body> <p><a href="$sDT_URL">CLICK</a></p> </body> </html> HTML_BODY exit; ## URLエンコード sub URL_Encode{ my ($p01,@waste)=@_; $p01 =~ s/([^\w])/'%'.unpack('H2',$1)/eg; $p01 =~ tr/ /+/; return $p01; } ↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑ [ファイル名：test.cgi：UTF-8]↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓ #!/usr/bin/perl my %hIN = readMethod(); my $ss = $hIN{T1}; print "Content-type: text/html\n\n"; print <<HTML_BODY; <html> <head> <meta http-equiv="Content-Language" content="ja"> <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> <title>TEST UTF-8</title> </head> <body> 送信内容：$ss </body> </html> HTML_BODY exit; ## ******************************************************** ## メソッド読み込み ## ******************************************************** sub readMethod{ my %rm_in; my $paramPost; if($ENV{REQUEST_METHOD} eq 'GET'){ my @tmpPrmt = split(/&/,$ENV{'QUERY_STRING'}); foreach(@tmpPrmt){ my ($p1,$v1) = split(/=/,$_); $v1 =~ tr/+/ /; $v1 =~ s/%([a-fA-F0-9][a-fA-F0-9])/pack("C", hex($1))/ego; if(exists($rm_in{$p1})){ $rm_in{$p1} .= "\t".$v1; }else{ $rm_in{$p1}=$v1; } } }elsif($ENV{REQUEST_METHOD} eq 'POST'){ read(STDIN, $paramPost, $ENV{'CONTENT_LENGTH'}); my @tmpData=split(/&/,$paramPost); foreach(@tmpData){ my ($p1,$p2)=split(/=/,$_); $p1 =~ tr/+/ /; $p1 =~ s/%([a-fA-F0-9][a-fA-F0-9])/pack("C", hex($1))/ego; $p2 =~ tr/+/ /; $p2 =~ s/%([a-fA-F0-9][a-fA-F0-9])/pack("C", hex($1))/ego; if(exists($rm_in{$p1})){ $rm_in{$p1} .= "\t".$p2; }else{ $rm_in{$p1}=$p2; } } }else{ print "die for error..."; } return %rm_in; } ↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑
状況が不明ですが、 ・困ったサイト運営者に頼まれた。 って感じでしょうか。 > サーバーのFTP情報しかわからず、サーバーを管理していた会社は夜逃げ状態で連絡がとれません。。 多分、サーバを管理している会社はご存じないだけかと。 間に入ってくれてた会社(ウェブコンテンツの制作会社など)がサーバを借りてやってたのだと想いますので間に入ってくれてた会社を含めて事情を話し調整すれば(サーバを管理している会社と話をする)引き継げる可能性はあります。 ※夜逃げ状態の会社が運営してたら電気止まったりしてサーバもアクセスできる状態を保ってはいないのでは。IPやドメインから調べれば実際運用されている会社は調べられるかと。調整次第でアカウントの初期化なども対応してもらえる可能性は低くないかと。調整が付く様だと継続使用すれば良いですが、調整付かない場合には変えた方が良さそうな気はします。今後ドメイン管理費用の支払いも行なわれないでしょうから時期は不明ですが将来名前解決ができなくなったりする事が予想されますので。 > 接続して上の階層を見てみたら「cgi-bin」というディレクトリがありましたが、中身はtest.cgiというファイルが入っているだけでした。 > test.cgiは、おそらくcgiでHTMLを表示させるテストをしたかったようです。 > 上の階層なので、URLがわからずそこに接続して結果を確かめることもできません・・・ > ただ、そのファイルをそのまま制作中のディレクトリに入れてみたところ、記述内容がそのまま表示され、cgiとして動きませんでした。 『制作中のディレクトリに入れてみたところ』って何かな。 cgiって基本的にhtmlを出力するプログラムですよ。まぁ、最初にhttpの応答ヘッダを出力したりもするはずですが。 書かれている言語を調べてその言語で実行してみると動くかどうかはわかると。 例えばperlで書かれているcgiだとコマンドプロンプトなどで perl test.cgiで実行してhtmlが表示されれば動く可能性があります。 ftpのアカウントがあって、cgiが動かせる状態に設定されていればある程度の調査はできますよ。 例えば、perlのバージョンやサーバに入っているソフト(ファイル)を調べるcgi書いて動かせば多くの事がわかりますし。 『上の階層なので、URLがわからずそこに接続して結果を確かめることもできません・・・』って書かれていますが、通常は http://run-host.example.co.jp/cgi-bin/test.cgi にアクセスすれば確認できそうに想います。(Acacheは標準の設定で ScriptAlias /cgi-bin/ /var/webdata/cgi-bin 等とcgi-binでアクセスできる様な設定が入っている場合が多いです) 通常の方法かSuEXECかで設置する場合にパーミッション等に違いがありますので、その辺りも調べながら試験用のコンテンツを配置・調査すればある程度は対応できると想います。 http://www.aconus.com/~oyaji/www/apache_linux_suexec.htm
http://www.tohoho-web.com/wwwcgi.htm 良く参考にさせてもらっています
ないならば「ありあわせ」で行う対処法を。 画像掲示板を改造するという方法 画像掲示板というCGIがあります。 これらのうちには管理人のみアップロード可能 (パスワード入力しないと新規書き込みやアップロードできない) という機能があるものがあります。 それを使うというのがひとつです。 また、少しCGIがわかるのであれば、 ありものの画像掲示板を改造すれば簡単に作ることができると思います。 また、この形式の掲示板をレンタルするという手もあります。 この方法の欠点は「今までアップしたデータがほぼ使えなくなり、 新しくアップロードしなければならない」という点です。 フレームを利用する方法 そのページにインラインフレーム、あるいはフレームをつくり、 そのフレーム内に一行掲示板のようなCGIなりPHPを表示させ、 そこにコメントを書き込ませるという方法です。 この方法の欠点は「うまくやらないとサイトの構造が無駄に複雑になる」という点と、 「間違いがあってもものすごくわかりにくいこと」です。
No.1のkmeeさんが言及されてますように、コードの例がちょっと古いですね。 use strict; use warnings; のないコードはまず古いですね。レキシカル変数を使ってスコープを限定しないコードも古いです。リファレンスで済むところを型グロブを使うコードも古いです。 私の所有している本は以下です。 CGIプログラミング http://www.amazon.co.jp/dp/4873110440 これも古いのですが、まだ通用する本でお薦めです。 ただ、少し難しいかもしれません。 初心者用の良い書籍を紹介できないのが残念ですが、 サンプルコードによるPerl入門 http://d.hatena.ne.jp/perlcodesample/ の木本さんが書かれた かんたんプログラミング CGI/Perl http://www.amazon.co.jp/dp/4774139289 なら幾分ましかもしれません。 Perlについてなら定評のある結城浩さんの本がいいのではないでしょうか。 新版Perl言語プログラミングレッスン入門編 http://www.amazon.co.jp/dp/4797336803 上記2点の本は拝見したことがないので、はっきりと推薦はできませんが、お持ちの書籍よりはましかと思われます。 以下のオライリーの本は評価が高いです。かなりやる気があるのならこれがお薦めですが、ご自分で中身を確認されてからご検討ください。 初めてのPerl 第5版 http://www.amazon.co.jp/dp/4873114276 書籍を選ぶ最低限のポイントとしてサンプルコードに use strict; の記述があるのをお選びください。 余談はこれぐらいにして（Perlカテゴリで似たような質問があったため御託を並べてしまいました）、質問への回答をしたいと思います。 以下2点、ご確認お願いします。 まず、この↓行を削除（コメントアウト）したらどうなりますでしょうか？ $value = jcode::sjis($value); ←出来ればeucに直したい(基本サイトをeuc-jpで作成) 次に、 loadFormdata(); を、 use CGI; %FORM = CGI->new->Vars; にしたらどうなりますでしょうか？
これだけでは何のことかさっぱり。 > CGIで、 ・「CGI」はしくみであって言語ではありません。どのプログラミング言語のこと? > $hensu = ~ s/\r\n|[\r\n]/<br>/g; > を実行すると ・元の$hesuの内容は? ・どこで実行?どんなタイミングで実行? ・=と~の間のスペースはわざと? > 18446744073709551615 > と、書き出されます。 ・なにに書き出される? ・$hensuとの関係は? ・期待している結果は? まあ、おそらくPerlでしょう。 で、$hensuの改行文字をbrタグの置き換えて表示したいのに、数字が出てくる、ということでしょう。 正規表現の対象を指定する演算子は「=~」です。間を空けてはいけません。 $hensu = ~ s/\r\n|[\r\n]/<br>/g; だと $hensu = (~ (s/\r\n|[\r\n]/<br>/g)); と解釈され、次の様に計算されます。 1) デフォルトの対象$_に対して s/\r\n|[\r\n]/<br>/g → スカラーのコンテキストなので、 成功で1/失敗で0に。おそらく 0になるケースが多い 2) 単項演算子~はビット反転 →0のビット反転で 0xff...f に(64bitなら2進64桁、32bitなら2進32桁のオール1) 3) =で $hensuの値は 2)に。 → 64bit符号無し整数だと 18446744073709551615 何かの資料を見様見真似で書き写したのでしょうが、プログラムを変えようと思うなら、それがどんな意味なのかは知っておいた方がよいでしょう。=~のことを知っていれば、こんな間違いはしないと思います。
すみません。何に困っているのかよくわかりません。 文章からは、全部sendmailで $admin に入れたアドレスにメールを送信できている、と読めるのですが。 エスパーすると、可能性の一つは @ がリストを表わしていると解釈されています($でスカラー変数を表わすように)
>cgiをその方のサイトのものに頼る、経由するような形なのでしょうか、、。 そうだと思います。 こちらの作成者の方がどのような意図でこのcgiを掲載されているかわかりませんが、隠された作用を持たせる事は可能かと思います。 結局の所は、作成者の方がcgiを利用不可にする事も可能ですし、何かの原因で動かなくなっても動かなくなった原因を突き止めて修正されるかどうかも不明かと思います。 極端な話、作成者の方の自由ですので、ここ2,3日で利用停止になってしまうかもしれません。 あくまで、個人的には、プルダウンメニューを作成するcgiとかHTMLでしたら無償で配布してくださっている方がいるかと思いますので、そちらを利用させて頂く方がよいように思います。ただ、無償での配布になりますので、隠された作用がもしかしたらあるかもしれません。 そこについては、結局、自己責任になると思います。 隠された作用を排除されたいのでしたら、ある程度、cgiを読めるスキルをつけられるか、そのスキルがあるようでしたら、ご自身で作られる方が無難かと思います。 また、質問される事は問題ないと思いますが、どこまで親切な回答が得られるかは、タイミングと質問される内容によって変わるかもしれません。今回、上げられたcgiぐらいですと、人によってはすぐに書けますので具体的な解が得られるかもしれませんが、条件が厳しくなってくると解が得られにくい事も出てくるかと思います。 文字化けは全く別の所にあるかもしれません。借りられているサーバーか、WordPressの方に問題があるかもしれません。文字化けの問題は、根が深い事もあり問題解決まで困難を極める事もあるとは思います。 が、しかし、上記の理由から作成者の方の都合によりcgiを利用できなくなる可能性もあるかもしれません。 どちらがよいかとはひとえには、申し上げられないと思います。
unix系のファイルシステムでは、各ファイルやディレクトリに そのファイルの所有者(オーナー) そのファイルの所有グループ が設定されています。 オーナーは要するにユーザーです。 グループというのは、複数のユーザーの集まりに名前を付けたものです。 管理の方針で実際にどうなっているかは個別に違いますが 例えば、会社だったら部署毎とか、学校だったらクラスとか、プロバイダだったら社員と契約者の区別とか。 パーミッションは、 ・一致するオーナーに対しての許可 ・一致するグループに対しての許可 ・オーナーもグループも一致しない場合(その他)について許可 で設定できます。 ・メールはその本人だけが読み書きできるのがよい。他人には読み書きさせない → オーナーのみrw権,他は許可無し(600) ・グループで共同作業、他グループには秘密 →オーナー、グループにrw権、その他には無し(660) ・CGIはユーザー「nobody」グループ「nobody」の権限で実行されている事が多い。 CGIを実行した結果を個人のディレクトリに書き込んで欲しい →その他にrw権(xx6) 等といった使いわけをします。
べたなロジックですが cat ファイル名 | awk '\ BEGIN { FILE=-1 } { 　if (substr($0,11,3)=="OUT") { 　　LINE=NR 　} 　if (NR==(LINE+1) && substr($0,11,2)=="IN") { 　　print $0 　} } END {}' > 出力ファイル名 ではいかがでしょうか。(インデントのために全角空白が入っています) 「sh処理」は何を言っているのか分かりません。
セッションなどに前回アクセスした時刻を保存しておき、 その時刻と現在時刻を比較して下さい。
awk使ってよいなら、こうかな： NR % 2 == 1 { s = $1 } NR % 2 == 0 { print $1 - s }
foreach $item (@list) { 以降の各場所でprintデバッグして、どこで化けるか確認したらどうでしょう？ &Jcode::convertの前後とか &tagの前後とか
> ※ftpで接続した後にあるディレクトリにあるファイル名が存在するかをチェックするのは厳しそうなので・・・・ 誤解じゃないかな。ftpのプロンプトでls lookdir とする事により lookdirディレクトリの内容を表示する事もできますよ。 ftpのプロンプトでhelpとすれば使えるコマンドの一覧が表示されます。 ftp> ls 接続先でlsした結果が表示される。 ftp> !ls ローカルでlsした結果が表示される。 > シェルからtelnet接続する方法がわかりません。 telnetコマンドを実行。 $ telnet open 接続先アドレス $ telnet 接続先アドレス ※接続に使うユーザ名をしていするなど様々なオプションがありますので詳しくはオンラインマニュアルをご確認ください。
Perlが動く環境がないのでうまく動かなかったらすみません。 ---- #580行くらいに挿入 $ENV{'TZ'} = "JST-9"; ($wsec,$wmin,$whour,$wmday,$wmonth,$wyear,$wwday,$wyday,$wisdst) = localtime(time); $wyear = 1900 + $wyear; $wmonth++; local($maxyear, $maxmonth) = ($wyear, $wmonth+6); if ($maxmonth > 12) { $maxyear++; $maxmonth = $maxmonth - 12; } if ($maxyear * 10000 + $maxmonth * 100 < $nextyear * 10000 + $nextmonth * 100) { $nextmag = "次の月 >>"; }else{ $nextmag = "<a href='$self?mode=show&month=$nextyear/$nextmonth&disptype=$FORM{'disptype'}'>次の月 >></a>"; } #621行を変更 $nextmsg
HTTPサーバー（Apacheとか)のソースを修正しないと出来ないでしょう。
姫君スクリプトあるよ！ どうしたらいい？
HTTPのレスポンスコードを307にするとPOSTのままリダイレクトしてくれます 但し全てのブラウザで正常に処理されるかは不明です(追加規格のため) IE 6でも正常に機能するんでそれほど問題ないかも？ その他 IE 7 IE 9 Sarai 5 Opera 11 Chrome 9 FireFox 3.6 なんかでは問題ないようです
> 「cgiを動かすというのは公開するindex.htmlファイル内にcgiのリンク先を記述してやって動かしているという意味でしょうか？」 用語の使われ方が混乱していてご質問内容が自動英文翻訳のように支離滅裂になっていますので、わたくしだけかもしれませんが回答が困難です。 それぞれの役割や機能が整理されていないようですのでご存知であることを承知で説明します。 ただし、ここでは画像やマルチメディアデータについてはややこしくなるので割愛してHTMLデータに主眼を置いて説明いたします。 Webブラウザ 　HTMLで記述されたテキストデータをHTMLタグ情報を元に加工成型して表示する、ローカルPC上で動作するソフト 　※ ホームページと、そのソースを見比べてください。 　※ サーバ機でも動作はしますが、ローカル機とサーバ機を区別して考えてください。 Webサーバ 　◎ ネットワーク経由でWebブラウザによって要求されたデータを返信する、サーバマシン上で動作しているサーバサービスプログラム 　要求されたものがHTMLファイルならそのファイルを読み込んで内容をそのまま返信する 　◎ CGIファイルならその指定されたファイル内に記述されたプログラムをそのサーバマシン上で実行して、その実行結果を返信する。 CGI用の掲示板プログラム 　◎ プログラム実行時に、掲示板の表示フォーマットにしたがってHTMLを成型し出力するプログラム 「◎」の部分に注目すれば「BBS掲示板でのhtmlとcgiの関係について」に関して理解しやすいかと思います。
日本語文字列のソートには、厄介な問題があります。漢字には読み方がいろいろありますが、そのうちの１つの読みでコード化されているからです。例を挙げてみます。 上 (Shift_JIS: 8FE4, EUC-JP: BEE5) 下 (Shift_JIS: 89BA, EUC-JP: B2BC) 「上」は「ジョウ」の読みで、「下」は「カ」の読みでコード化されています。そのため、「上」と「下」をソートすると、常に「下」が先にくることになります。「ウエ」と「シタ」でソートしたいと思っても、そうはならないのです。 EUC-JP でコードを書かれているなら、ソート順を書いたハッシュなどを利用する方法があります。 %order = ('アイコン' => 1, 'イコンア' => 2, 'コンアイ' => 3, '管理者専用' => 4); foreach (sort { $order{$icn_nam[$a]} <=> $order{$icn_nam[$b]} } 0 .. $#icn_nam) { Shift_JIS ではいろいろと問題が発生するのでお勧めできません。なお、UTF-8 についてはよくわからないので、悪しからず...。
よくわかりませんが、、、 a.html b.html という２つのファイルがあるとすると、 訪問者が「a.htmlを見たい」というリクエストをすると、a.htmlが表示されます。 「b.htmlを見たい」というリクエストをすると、b.htmlが表示されます。 同様に、 bbs.cgiというファイルがあるとすると、 「bbs.cgiを見たい」というリクエストをすると、bbs.cgiが表示されます。
MediaWiki も mathtex を使ったことはありませんが、（10年以上前にLaTeX, pTeX は使っていました） mathtex はその名のとおり数式をTeX(LaTeX)を使って表しています。HTMLでは複雑な数式を表せないので、出来上がった数式を画像として表示します。 # TeX についてご存じなければ、それこそ wikipedia あたりで確認してみてください。 表示されている部分はそのHTMLのイメージタグのようです。 ＃ scr= の部分は src= の転載ミスですよね？ ＃ 前後に < > があるはずなのですが、なぜか省略されていますよね、意図したものがあるのであれば伝えていただかないと。 手順通りに作業されたとありますが、本当に手順通りに作業されたのであれば動くと思われます。 実際は、表示されていないので手順に漏れかミスがあったと思われます。 はしおらず書いていただかないと、回答者はあなたではないのでわかりません。 TeXは、 tex --> div -->画像 ( ps とか pdf とか png とか ) と変換していきます。 mathtex のサイトにも、このCGIは LaTeX と dvipng に依存していると記載しているので、推測ですがこの辺が失敗している気がします。 ＃ dvipng は ImageMagic に依存しているので、こちらも必要ですね。 LaTeX も dvipng も、それぞれ独立したものなので、こちらがうまく動くか確認されてはどうでしょうか？ 動作確認できたら、mathtext のコンパイルオプションにそれぞれのコマンドのPATHを設定しコンパイルします。 ＃ ということは C コンパイラが動作する環境が必要ですね。 と、ここまで回答して、サーバがLinuxやUnix系マシンでないと、とても大変です。実際どうなんでしょう？ また、サーバが共有サーバ的なものでしたら必要なコマンドのインストールも無理だと思われます。 ＃めちゃくちゃ頑張ればなんとかなるかもしれませんが。 また、コンパイルもサーバで作業できるといいのですが、コンパイル済みのものをサーバにアップする方法でしたら、 また難易度が上がります。こちらどうなんでしょう？ また、LaTeXが使えない場合は、 minetex.cgi という大替え手段も用意されているようです。 以上の情報は全て　http://www.forkosh.dreamhost.com/source_mathtex.html　の QuickStart と dependencies に記載されていることなのですが、確認済みですか？ 「コンパイルはしたんだ、通ったんだ」とすると、また別の問題ですね。TeXはフォント周りが面倒だったりしますし。 mathtex.cgi から、各コマンドを実行するときに、上手くいっていないのかもしれません。画像ファイルを作っていて、そのパーミッションの問題かもしれません。 そうなれば、 mathtex.cgi をターミナルから実行してみたり、Webサーバのログを確認してみたり、起きている現象を調査しなくてはなりません。
.htaccessに DirectoryIndex bbs.cgi と設定しておけは、ファイル指定しない時（当然、拡張子も指定しない時）に、 bbs.cgiへのアクセスさせることができます。 （普通、ファイルが指定されてない時は、そのディレクトリのindex.htmlやindex.htmへのアクセスになりますが、 　それをcgiファイルへのアクセスに指定する形）
・実行するディレクトリがCGIのあるディレクトリではない ・実行するユーザーに、そのディレクトリやtest.txtへの書き込み権が無い あたりが有力でしょう。 詳細な方法は検索でもしてください。 細かい点を言えば ・出力ファイルにINってハンドルは混乱のもと ・追記するだけなら '>>' が楽なのでは。通常は無ければ作成してくれますし。
CGI って、 Common Gateway Interface の略なのですが、大雑把に、「Webサーバでプログラムを動かすための共通した仕組み」ぐらいで認識していいと思います。 プログラム言語っていっぱい種類があると思います。（PHP とか Perl　とか） Web サーバでプログラムを実行してページを表示したいときに、それぞれの言語が独自にWeb サーバの拡張機能を提供していたら、面倒だしヤヤコシイので共通的な仕組みを用意しました。 この仕組みをCGIと呼んでいます。 PHPって、Web サーバの拡張機能とCGIとして利用する２パターン実行する方法が提供されています。 拡張子ですが、拡張子ってそのファイルがなんなのかを表していると思います。 例えば、XXXX.jpg だとすると jpeg データの画像だねとか。 ですから、XXXX.php ですとPHPのプログラムだねとわかるので、拡張機能がインストールされていればPHPの処理系に実行してもらおうということで、そう設定します。 ところが、Webサーバにもいろいろ種類がありまして、すべてに拡張機能が提供されているわけではありません。 それでもPHPを使いたいと言う場合は、CGIで実行するという手段は残されています。 CGIの場合は、いろいろなプログラム言語が選べますから、先に述べた拡張子はどうでもよくて、実行出来るかどうかで判断します。 このため、サーバにアップしたときにパーミッション（権限）の設定で、実行できますよという印の "x" が付いた物にします。 前置きが長くなりましたが、ご質問の回答としては > 自分のイメージとしては、ＣＧＩは機能でＰＨＰはそれを実現する手段と言うイメージ これは正解ですね。ですが、Webサーバの拡張機能で実現する方法もあるということです。 > ＣＧＩが使用可能とあった場合に、ＰＨＰが使用可能である。 は、PHPの処理系がインストールされていれば、CGIとして動かせるかもしれないということになります。 > ＣＧＩ不可の場合は、拡張子がＰＨＰのものは全て不可なのでしょうか？ 不可とは限らないですね。
Perlについて言えば、クオートに「入れ子」なんてものはありません。 ダブルクォートの中にシングルクオートがあっても、それはただの「シングルクオートを表わす文字」です。 質問にある > 'action="./test.cgi";submit();' の最初の'はただの文字で、対応する(ことを期待している)最後の'とはまったく無関係です。 < Aaction="./test.cgi";submit();A と書いたのと、(Perlの解釈は)同じです。 クオート中にそのクオート文字を含ませたい場合は、\でエスケープすればいいだけです。 print "<td><input type=button value='ログイン' onclick=\"action='./test.cgi';submit();\"></td>\n"; # onclickの引用符をヒアドキュメントでの例に合せました。 なお、出力結果がHTMLとして正しいかどうか、という点は別問題です。
断然PHPだと思います。 PHPはPerlの進化系のような言語なので、 いろいろと便利に使えます。 それにPHP5からはオブジェクト指向が本格的に導入され、 ますます使いやすくなっています。 開発もどんどん進んでいっているので、 是非使って頂きたい言語です。
403 Forbidden　というエラーは、アクセス禁止である、 というエラーメッセージです。 サーバー側でcgiファイルへのアクセスを禁止する設定にしていると思われます。 サーバーに「.htaccessファイル」を置いて、そちらに詳細を設定します。 「.htaccess」で検索すれば、たくさんの情報を拾うことができますので 一度ご確認されることをおすすめします。
s|</?PRE>||g; でもだめですか? s/abc/ /g ; と空白が入ってるとかもないですよね?
できますよ。 次月のカレンダーを表示するには、MTCalendarタグのmonthモディファイアに次月の年月を「YYYYMM」の形式で設定します。 例えば今月が2011年2月であれば、次月である2011年3月のカレンダーを表示するには同じコードをもうひとつ作り、MTCalendarタグのmonthモディファイアに次のように設定します。 …前略… <mt:Calendar month="201103"> …後略… すいませんが次月の算出方法は省略しています。
perl？perlかな？ if (!$original || !$filename) $filename = "j.jpg".$now.".".$ext;
提示されている情報が「状況」のみで「環境」に関する情報ものがないので誰も原因の推測はおろか検証もできないとおもいます。 ECのソフト、リモートサーバ環境（ローカルは提示されていますが）、サーバ側のエラー情報、などです。 とくに、サーバ側のエラーログはレンタルサーバでもCGIが動作するところなら記録されていると思うのですがいかがでしょうか。 提示されているのはブラウザのエラーで、サーバからテキストでエラーメッセージを受信しているのでHTTPヘッダ情報として解釈できずにブラウザ独自のエラーを出しているだけではないでしょうか？ なんとなく、DB周りの設定ミスっぽい気がします。 ローカル側のDBにアクセスしようとして失敗しているのでは？
SSIが使えるならCGIなんか書く必要ないのでは？ hogehogeディレクトリの中のB.htmlの最終更新日なら、 <!--#flastmod file="hogehoge/B.html" --> という1行をindex.shtmlに書けば表示されると思います。 フォーマット変更は、 <!--#config timefmt="%Y-%m-%d" --> 等。（flastmodの行より上に書くこと） そういうことではない？
回答１：単に英語（というかマルチバイトを使わない）フォームページを作りたいだけであれば、そこはUTF-8でもShift_JISでもWindows-31Jでも構わないです。より英語圏の人に対して親切なのはISO-8859-1でしょうか。フォームメールの開発、世界各国の言語のブラウザー対応など色々考慮に入れて最も適切なのはUTF-8でしょう。 回答２：CGIでPOSTされたデータを受け取る時、実際何の文字コードでくるかはブラウザーに依存します。SJISでデータを受け取ろうがPOSTするのはUTF-8固定なブラウザー、現在閲覧中のページのcharsetで送信するブラウザー。 　普通のお行儀の良いブラウザーであればPOSTされるデータのコンテンツタイプにcharsetを記述してくれるはずなのでそれを読み取ってエンコーディングの解釈をすればより良いです。 　また、POSTされたデータをメール（例えばsendmail(1)）に流す際にどうするかはフォームメールCGIを作る人が決めます。US-ASCIIだろうとISO-8859-1だろうとUTF-8だろうとPOSTされたデータをiso-2202-jpでsendmailに流し込んでやればあなたにはtext/plain;charset=iso-2202-jpなメールが届く事でしょう。 　そして、自動返信されるメールはtext/plain;charset=iso-8859-1にしておけば問題ないと思います。自動返信されるメールのサブジェクトと本文が全てASCII文字なのであれば、英語のメールソフトでもほとんど関係ないでしょうけどね。 回答３：前述の通り、ユーザーからPOSTされるデータとあなたがCGIでメール送信するデータには本来何の関係もありません。CGIがPOSTされたデータのエンコードが何なのかを正しく判定できて、かつそれをISO-2202-JPに変換できれば良いのです。もっとも、7ビット文字しかないデータはUS-ASCII←→ISO-8859-1←→UTF-８←→ISO-2202-JP間で変換する必要はないですけど。 ---- 　そのフォームメールのページをフランス人や日本人も見るのか否かというのが重要なファクターですね。すなわち、POSTされるデータは7ビットの文字ばかり（US-ASCIIのみ）だと期待して良いのか、フランス語やドイツ語で書いても良い（ウムラウトなどを表現できるISO-8859-1が必要な）のか、いやいや日本人も中国人もフォームに質問を書きまっせ（EUC-JPやShift_JIS、EUC-CN、BIG-5も扱えないとダメ）なのか。 　そういう意味でUTF-8は最も優れているといえましょう。
通常モードでCGIやSSIを実行すると、 WWWサーバ管理者のユーザID(nobodyなど)での実行になってしまいますので、 一般ユーザでは削除や書き換えができませんのでサーバ管理者に依頼するしか方法がありません。 また、ものによっては、サーバ管理者側のファイル等が破壊されるなどの問題があります。 それを防ぐのがsuEXECです。 suEXECを使用すると、サーバを実行しているユーザIDとは異なるユーザIDでCGIやSSIを実行することができます。 この「異なるユーザID」が各利用者の事です。 各利用者のIDで管理できるため、利用者にホームディレクトリの管理を任せることが可能になります。 SSIを記述するファイルと同じ階層か下層に制限されるのも、suEXECの特徴です。 要は、「他ユーザには迷惑掛けないでね」という事です。 ＞「実行ファイルは、SSIを記述するファイルと同じ階層か、下位のディレクトリに設置して頂きますよう」ということがわかりません。 トップページの「index.html」のファイルがある階層を含む下位の事です。
　提示されているプログラムソースが表示部分を指してはいるのですが、ここだけを改造 してどうこうって訳にはいかないと思います。 　まず、受信したフォームの項目が年月日以外にもあると思うのですが、問題点は「年」 と「月」と「日」が順にまとまっているという保証が有りませんので、このリストのよ うに、データが表示不可かどうかのチェックだけで順不同表示されてしまう場合、表示 順を意図的に表示させるための根本から考慮しないと対処のしようがありません。 　表示させたくない要素を「@no_view_item」に入れていますが、表示させたい要素をリス ト化すべきだったかと思います。 　この状況で年月日をまとめて表示可能なのは確認項目の先頭か最後尾に表示するしか できないでしょう。 　最後尾に表示させる例として「@no_view_item」に年月日をリストに加えてループ内で非表 示にしてから以下の３行を -------------------------------------------------------------------- my $sTMP = sprintf("%s年%s月%s日",$FORM{'年'},$FORM{'月'},$FORM{'日'}); print "<TR><TD bgcolor=\"#EEEEEE\" width=\"20%\" align=\"left\">年月日</TD>"; print "<TD>$sTMP</TD></TR>\n"; -------------------------------------------------------------------- 最終行（下のリスト）の手前に挿入する print "</TBODY></TABLE><BR><INPUT type=\"submit\" value=\"送信する\"></FORM>\n"; -------------------------------------------------------------------- という方法が最小限(追加分の３行の最適化を除いて)の変更でしょう。 　あとは、ループ内で表示処理させずに、表示要素のテーブルをいったん作ってから表示させな おす方法も有りますが、どちらにしても年月日がどの位置となるのかの指定が必要です。
横から失礼します。 一度認証して、LocationでちがうＣＧＩを呼び出すのは　認証した意味がなくなると思うのですが・・ というのも、認証しないでいきなりＣＧＩ-Ａを呼び出したらどうなります？ 認証するということは、一度の処理ですべてを行わないと意味がなくなります。 なので、ＡとかＢとかに分けないで１つにするのが初心者向けですよー もうちょっと理解が深まれば、ＣＧＩ-Ａをrequireして１つのＣＧＩとしてあつかえることができます。 さらに簡単にするのなら、1つのＣＧＩ内でサブルーチンにして分けて処理を行う方向性が後々の変更のため そして、コード量を減らすことや　なによりエラーをなくすためにはいい方法です。 例) 認証サブルーチン、DB問い合わせサブルーチン、アンケートフォームサブルーチン、アンケート受け取りサブルーチンetc そしてこれらを１つのCGIで処理するページングを行いたいのであれば、引数としてURLに含めるのが一般的です。 例) xxx/B.cgi?que=form　(認証して入力用のアンケートフォームを表示するなど) xxx/B.cgi?que=input (認証してアンケートフォーム入力値を受け取り結果を表示するなど) 上記のように常に認証しないと、意味がなくなります。 それと、system関数やexec関数は同じプログラム言語を使うならお勧めできません。 環境によっては使えないことも多々ありますし、なによりコスト(サーバ負荷)とリスク(トンネル)が高いです。 この辺はもう少し言語に対する理解が深まってから手を出すべきです。(初心者に勧めるべきことではありませんよね) 横槍のようで何なんですけど、なんだか変な方向に行きそうなので、口を出してしまいました。
print qq!<INPUT TYPE="radio" NAME="$key" VALUE="$_">$_!; ↑の文を print qq!<INPUT TYPE="radio" NAME="$key" VALUE="$_">$_<br>!; に書き換えればいいと思います。
>ネットなどで見るかぎり、UNIX系のサーバーではよく行われる方法のようなのですが、Windowsでの実装になにか違いがあるのでしょうか？ 検索したら、こういうことらしいです。ビルド環境の違いのようですね。 CGIの動作について http://chaichan.web.infoseek.co.jp/qa3000/qa3198.htm suEXEC サポート http://httpd.apache.org/docs/2.2/ja/suexec.html >また、Windowsサーバーでこのようにブラウザに処理を戻しつつ、時間のかかる処理を行いたい場合にはどうすればよいのでしょうか？ こちらは、他の方にお願いします。
> exec("./cgi A.cgi") > <!--#exec cgi="./cgi A.cgi"--> これ、何を意図したものですか? ./cgi ってなんです? この書式だと、 ./cgi(カレントディレクリのcgiというコマンド)に A.cgi を引数にして実行しようとします。おそらく、cgiなんて実行ファイルや命令は無いでしょうから失敗するでしょう。 方法としては次のものが考えられます。 ・正しく A.cgi を実行する PCでApache使ったことないので、どうなるか確認取ってませんが、 A.cgi が単独で実行できるなら exec("A.cgi") ; あるいは、Perlコマンドを指定して exec("perl A.cgi") ; A.cgiにパラメータを渡すなら、仕様にしたがって。 あと、httpのヘッダが重複しないように注意。 ・ location や refresh を使って、 A.cgiのURLへリダイレクトする。
mt.cgi のパーミッションはどうなっていますか？ 755 でなければ chmod 755 mt.cgi でパーミッションを 755 にしてみてください。
＞フリーソフトとかではなく、自分で一から作りたいのですが、 まずは、CGIで使用する言語を勉強することです。 説明サイト見て実際に作りながら慣れるというのもありですが、いずれ自分で１から作りたいのであれば、最終的に基本的な使い方をマスターする必要があるでしょう。 CGIとしての使い方も勉強する必要があります。 ＞このまま自宅サーバにアップしてもうまく動きません ＞最初のパスとかも確認したのですが…。 500エラーだったらスクリプトに問題があると考えられるので、サーバのエラーログを見ましょう。 よくあるミスとしては、改行コードがCR+LFになってしまっている、というのがあります。 ちゃんとLFになっているか確認してみてください。 ＞もしわかりやすいサイトさんとかありましたらぜひお願いいたします＞＜ 示されたサイトは結構丁寧に書かれているで、それで十分だと思います。
「私の会社Ｘ社」とあり、業務内容が弁当の注文を行う事のようですので 質問者さんは、プログラム開発業務の会社では無いと判断して解答します。 もし自社で開発するつもりなのであれば、 ２重に注文した場合らどうなるか キャンセルしたい場合はどうするか 変更したい場合はどうするか さらには、セキュリティについても考慮する必要があり 例えば、第三者の愉快犯が、Ｚ社の社員を装い勝手に弁当を購入するような 事ができてしまうシステムにはならない仕組みにしないといけません そのような条件も合わせて質問の内容をまとめた見積もり/提案依頼書 を作成して、プログラム開発業者、数社に依頼して吟味した方が良いと 思います。
拡張子が変わってしまうと言うことですか？普通はそんなへんな事態にはならないです。 ダウンロードは静的なファイルのダウンロードですか？それともcgi等で生成したものをダウンロードするのですか？ 静的だとすると、拡張子 docx や ｘｌｓｘ に対しての定義が漏れている？ 定義が漏れていて、ブラウザがIEだとそういうおかしな事にもなるみたいです。IE以外のブラウザを使って拡張子が変わらないとしたら原因はそれです。 Office2007が出る前の古いバージョンのApacheを使っているとかですかね。バージョンアップ出来ないのなら、設定ファイルに、 AddType application/vnd.openxmlformats-officedocument.wordprocessingml.document docx AddType application/vnd.openxmlformats-officedocument.spreadsheetml.sheet xlsx などを追加してください。 cgiで生成したものだとするとプログラミングミスですね。
最近は cgi-lib を利用することはあまりないのですが、参考にされているページの内容をベースに説明します。 $in{'name'} には HTMLのフォームで指定した「name」という部品の中身(value)が入ってくるのはわかりますよね。で、おそらくスコアには 「score」などの名前がついていると思うので、CGI上では $in{'score'} で取り出せます。 それぞれのデータが取り出せたのであれば、あとはそれをうまいこと区切って出力するだけです。 その際の区切りは自分で決める必要がありますが、よくあるのはタブ(\t)で区切ることでしょうか。 具体的には、ファイルハンドルFHが追記モードでオープンされているとき、 print FH $in{'name'}."\t".$in{'score'}."\n"; という感じにすると、[名前] (タブ) [スコア] (改行) という1行のデータを書き込めます。 なおファイルを読むときは基本的に1行単位で読む(区切られていない状態で入ってくる)ので、適宜タブで区切ってそれぞれの変数を取り出してください。 ヒントは「 split 」です。
>CGIファイルはこちらのものをそのまま試しています＞＜ で、perlはインストールされていますか？ Windowsならcgiの1行目のperlの実行パスは修正する必要がありますが、そちらは処理していませんよね？ 前回回答した「windows apache cgi」で検索していくと、 http://pentan.info/server/windows/activeperl.html というページなどが見つかるハズですが……。
CGIなんて言語はありません。 一昔前なら、Perlだと思っておけば大丈夫でしたが、最近ではRuby(on rails),Python等もシェアが増えてます。 また、このような「国際化」絡みは同じ言語でもバージョンによって対応状況が違います。 > 今回のプログラムではutf8でないと日本語がうまく読み込めない状況です。 その確認方法は?「読み込めない」のはどのプログラム? > 色々と調べたのですが、エラーがでたりと解決できません。 どんなエラーですか? > 良い方法があれば、参考になるサイト等を教えていただけませんか 使用言語も実行環境も不具合の内容もわからないので、良い方法も参考になるサイトも教えられません。 強いて紹介するなら、BOMありなしの違いについて。 http://ja.wikipedia.org/wiki/UTF-8#.E3.83.90.E3.82.A4.E3.83.88.E9.A0.86.E3.83.9E.E3.83.BC.E3.82.AF.E3.81.AE.E4.BD.BF.E7.94.A8.E3.81.AB.E3.81.A4.E3.81.84.E3.81.A6
OSとか不明…ですな。 まぁ、localhostでIEだとか、 >’#’は内部コマンドまたは外部コマンド、操作可能なプログラムまたはバッチファイルとして認識されていません というエラーメッセージからWindows系だとは思いますが。 >今CGIをつくっているのですが、localhostで試したときにcgiページを開こうとすると、 そのcgiは何で作られていますか？ perlだとして、使っているWindowsにperlは入っていますか？ apacheでcgiが使える設定になっていますか？ 「windows apache cgi」で検索すれば、perlのインストールやapacheの設定など記述されているページが見つかるかと思いますがそういったページは参照していませんか？
OS掲示されないから、パーミッションの設定を指摘されるのでしょう。 http://oshiete.goo.ne.jp/qa/6454541.html Windowsですから、FTPソフトなどでパーミッションの設定はできません。 # NTFSアクセス権はあるでしょうが、今回の場合は無関係でしょう。 # Perlスクリプトは、Windowsでは「実行ファイル」と見なされませんし。
とりあえず基礎知識だけ。 FLASHとCGIの連携 http://1art.jp/le3.htm fla：Adobe Flashでフラッシュを作成する際の保存形式。 http://www.mitsue.co.jp/case/design/f_044.html swf：flaをブラウザで再生できるように変換したもの。 http://d.hatena.ne.jp/keyword/swf
> デコードでしないで文字コードの方だけで処理する場合 そもそも文字列の各要素には文字コードが入っていますので， 各要素の値を単純に足していくだけです。 char name[] = "%C5%C4%C3%E6%C2%C0%CF%BA"; const char *p; int s = 0; for (p=name ; *p ; p++) { s += (unsigned char)*p; } printf("%d\n", s);
lock関数の初めに判定処理を移動してはどうでしょうか。 sub lock { if ($_[0]) { $lock_file = $_[0]; } else { $lock_file = $lockfile; } $past_lock = -M "$lock_file"; if ($past_lock * 24 * 60 * 60> 2) { &unlock("$lock_file"); ...
> 生年月日のようにすでに数値であるものはそのまま使いたい 文字列（数字）から整数型への変換は，strtol や sscanf などが使えます。 その前に，生年月日の部分を切り出す処理は必要です。 しかし，「ランダムだと一日の中でやり直しができてしまうからつまらない」 のを回避することだけが目的なら，氏名や，生年月日，性別の意味を解釈する必要はないので， 受け取った文字列をそのまま，簡単なハッシュ関数に突っ込んでしまってもいいでしょう。 各文字のコードを全部足して，最後に 20 で割った余りを取るとか，そんなんで十分やと思います。
PHPでもデコードが必要だとは思いますけどね。 モジュールを使わずに自前で実装すれば、どの言語でも難しくなります。 一番簡単なのはCGIモジュールを使った方法です。 サンプルを載せておきますので、参考にしてみてください（動作確認済）。 --- form.html --- <form action="test.cgi"> <input type="text" name="message" /> <input type="submit" "実行" /> </form> --- test.cgi --- #!/usr/bin/perl use strict; use CGI; my $cgi = CGI->new; my $message = $cgi->param('message'); print "Content-type: text/html\n\n"; print <<__HTML__ <html> <body> <h1>MESSAGE: $message</h1> </body> </html> __HTML__
エラーの内容はEncode.pmというperlモジュールがないという意味です。 このモジュールは確かperl5.8以降しか動かないと思いますので、perlのバージョンをあげるのがもっとも早い解決方法と思われます。 そもそもMT5はperl5.8.1以降しかサポートしてないようです。 http://www.movabletype.jp/documentation/mt5/installation/system.html したがって、その環境でMT5を使用することはできません。
URLでパラメータ指定すると漢字があることからエンコードしなければいけなくなるため、その手間を惜しむならフォームが必要になります。 まずフォームはGETメソッドで **************************************************************************************************** <html> <head> <meta http-equiv="Content-Language" content="ja"> <meta http-equiv="Content-Type" content="text/html; charset=shift_jis"> <title>TEST</title> </head> <body> <form method="GET" action="./hoge.cgi"> <p>送り先：愛知から<select size="1" name="TO"> <option value="愛知">愛知</option> <option value="関東">関東</option> <option value="信越">信越</option> <option value="近畿">近畿</option> <option value="東海">東海</option> <option value="北陸">北陸</option> <option value="東北">東北</option> <option value="中国">中国</option> <option value="四国">四国</option> <option value="九州">九州</option> <option value="北海">北海</option> <option value="沖縄">沖縄</option> </select></p> <p>荷物のサイズ<select size="1" name="SZ"> <option value="60">60</option> <option value="80">80</option> <option value="100">100</option> <option value="120">120</option> <option value="140">140</option> <option value="160">160</option> <option value="170">170</option> </select></p> <p><input type="submit" value="送信" name="B1"><input type="reset" value="リセット" name="B2"></p> </form> </body> </html> **************************************************************************************************** こんな感じでファイル名は「hoge.html」とします 一回で入らないのでつぎへ
CGIでももちろんできますが、javascriptのほうが簡単だと思います。 サンプル作ってみましたので、参考にしてください。 random.html ------------------------------------------------ <html><head> <title>今日の運勢</title> <meta http-equiv="Content-Type" content="text/html;charset=Shift_JIS"> </head> <body> <center> <script type="text/javascript"> <!-- var sample=new Array(); var line="5,15,50,75,100";//「,」区切りで点数データを書く。何個でも可 sample = line.split(","); var num=Math.floor( Math.random() * sample.length ); document.write("今日のあなたの運勢は",sample[num],"点です"); // --> </script> </body> </html>
誤: $data= <dataright>; 正: @data= <dataright>; では？ $foo = <bar>という書き方だと、1行しか持ってこなかったような気がします。 全部欲しい場合は配列に代入します。 ちなみに、全行つなげた行を作るにはこうやればいいかと思います。 my $lines = join('<br>\n', @data); それにしても、$data= <dataright>;のところでもとの$dataを上書きして、もともとの$dataは何にも使われていないように見えますが、このプログラムでいいんですよね？
エラーの内容がわからないのではっきりしたお話はできないのですが、 sendmailがないということかもしれないです。 「Windows　sendmail」を検索したらいろいろ出てきますので、試してみてください。
> METAタグのPRAGMAは使ってみたのですが、どうも上手くいきませんでした。 ブラウザによって聞かないものもありますが、もしも表示させるページがCGIやPHPならページ表示の前にHTTPヘッダを使ってやってみてはどうでしょうか？ perlなら 1.Pragmaの場合 print "Content-type: text/html", "\n"; print "Pragma: no-cache", "\n\n"; 2.Expiresの場合 print "Content-type: text/html", "\n"; print "Expires: Friday, 17-Dec-01 00:00:00 GMT", "\n\n";## 古い日付を指定 こんな感じ
ご希望に添えるかどうかわかりませんが http://www.vago.jp/jp/dload/ に検索ボタンをつけて別窓で一覧を表示、選んで元のフォームに住所データを戻すCGIを置いてありますのでご自由にどうぞ。 設置の仕方もマニュアルが入ってます（ちょっと不備も有りますが）。 元のフォームとはJavaScriptでインターフェースをとるのでシフトJISでもいけると思うのですが、できればEUCの方が相性がいいです。 当たり前のことですが事業所郵便番号（地域郵便局が比較的大きい会社に適当に割り当てる番号）には対応しておりませんのでご注意ください。 以前、客の担当から住所が引けんと、いちゃもんつけられたんで番号聞いたら・・・アホかそりゃ住所の郵便番号じゃないだろうと・・・。　ホント言うと対応は可能なんですが、データの更新頻度が半端じゃなくなるので・・・。 データ再構築ツールもCGIとして入ってるので最新データを郵便局のホームページからCSVを取ってきて加工処理してください。 検索は一桁目からできます。
LoadModule cgi_module modules/mod_cgi.so のコメントを外してありますか？
たしかに何がやりたのか曖昧だが、予想して書くとこんな感じ？ 表示がくずれるので全角空白を空白2文字にしていることに注意。 use strict; use warnings; my ( $day1, $day2, $day3 ) = qw(100 200 300); { 　　no strict qw(refs vars); 　　no warnings; 　　for my $count ( 1 .. 3 ) { 　　　　my $day_var　　= eval '$day' . $count; 　　　　my $array_name = 'pl' . chr( ord('a') + $count - 1 ); 　　　　@{$array_name} = cal($day_var); 　　} 　　print $_, q{, } for @pla;　　# 100A, 100B, 100C, 　　print $/; } sub cal { 　　return ( $_[0] . 'A', $_[0] . 'B', $_[0] . 'C' ); }
試せる環境がないので、推測ですが。。。 mart_init.cgiのheader部分の<head>要素の中に以下のような文を追記すると 表示できると思います。 <link rel="icon" href="ファイルの指定"> <link rel="shortcut icon" href="ファイルの指定">
技術的にはフレームを使っています。以下、サンプルです。 1) それぞれファイルを同じ場所に保存する 2) ファイル名は正しく保存する 3) charsetにUTF-8を指定しているので、UTF-8で保存 4) 表示がくずれるので全角を空白2文字に置換して保存 5) index.html をブラウザで開く index.html <html xmlns="http://www.w3.org/1999/xhtml"> 　<head> 　　<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 　　<title>テスト</title> 　</head> 　<frameset rows="60,*" frameborder="NO" border="0" framespacing="0"> 　　<frame src="menu.html" name="menu" scrolling="NO" noresize /> 　　<frame src="page1.html" name="contents"/> 　</frameset> </html> menu.html <html xmlns="http://www.w3.org/1999/xhtml"> 　<head> 　　<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/> 　　<title>メニュー</title> 　</head> 　<body> 　　<div align="left"> 　　　<table width="500" border="0" cellpadding="0" cellspacing="0"> 　　　　<tr> 　　　　　<td width="500" height="60" valign="top"><br/> 　　　　　　<a href="page1.html" target="contents">ページ1</a> 　　　　　　<a href="page2.html" target="contents">ページ2</a> 　　　　　</td> 　　　　</tr> 　　　</table> 　　</div> 　</body> </html> page1.html <html xmlns="http://www.w3.org/1999/xhtml"> 　<head> 　　<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 　　<title>ページ1</title> 　</head> 　<body> 　　<p>ページ1の内容</p> 　</body> </html> page2.html <html xmlns="http://www.w3.org/1999/xhtml"> 　<head> 　　<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 　　<title>ページ2</title> 　</head> 　<body> 　　<p>ページ2の内容</p> 　</body> </html> 一般的な作成方法ですが、 1) 上のようにhtmlを直書きする 2) wysiwygなhtmlエディタを使う 3) 1)と2）を組合せて作る どちらにしろ、html を本かサイトで勉強して下さい。私はHTML/XHTML&スタイルシートレッスンブックという本で勉強しました。というかこれしか知りません。
> ユーザーデータの管理は、エクセルなどを使って管理しようと考えていましたが、やはり難しいでしょうか…。 Excelでは不可能では有りませんが制御に難が有り開発コストがすごいことになるでしょう。 CSVなら敷居が低くなりますが、ユーザ情報なのでセキュリティの面でお勧めできません。 > ただ、複数ある製品の中から「何をダウンロードしたか」というのは、ログでわかるものなのでしょうか。 ログはホームページからのダウンロードであればWebサーバの記録に残ります。 この場合(複数ファイル選択でダウンロード)は、CGIなどのコントロールが要りますのでCGI側に記録を残すプログラムを組み込むなら自由に出来ると思います。 極端な話、CGIを使わなくてもHTMLと基本認証そしてアクセス記録だけで可能な話かと思います。 もちろん、操作にそれなりの手間ひま(と理解)はかかりますが・・・。
根性があればNamazuとか入れるといいと思いますが サイト指定のGoogle検索じゃダメなんですか？ 下のようなタグをページに貼り付ければいいだけなんですが・・・。 例： <form method=GET action="http://www.google.co.jp/search"> <input type=hidden name=output value="googleabout"> <input type=hidden name=hl value="ja"> <input type=hidden name=lr value=""> <input type=hidden name=ie value="文字コード(EUC-JPなど)"> <input type=hidden name=domains value="あなたのサーバードメイン名"> <input type=radio name=sitesearch value=""> WWW を検索 <input type=radio name=sitesearch value="あなたのサーバードメイン名" checked>○○○○.○○○を検索 <input type=text name=q size=18 maxlength=255 value=""> <input type=submit name=btnG value="検　索"> </form>
>while(@link){ >push(@new,splice(@link,rand @link,1)); >} > >#ランダム化したリンクにLocation >print"Location: $link[0]\n\n"; @linkは中身がなくなっていると思いますし、$link[0]はundef（何も出力されない）ではないでしょうか。 ここは$link[0]ではなく$new[0]になると思います。 余談ですが、 newというのは予約語にもありますから、変数名にするのは好ましくないと思います。
>参考になるご意見を頂戴～ ということで。 アカウントはないのでこのサイトがどうかは分かりませんが、#や:はセパレータの感じがします。 cgiへの変数を渡す場合のクエリは、一般的には act=home&id=12345&lang=ja&ref=reg& ～ のような形ですが、 SEO対策のためクエリを短くしたい、キー名を隠匿したい、などの理由により、 home:12345:ja:regist などとして、スクリプト側でセパレータで分割してやる方法もよく取られます。 ( : に限らず | など変数の値に使用しない文字なら何でもかまわない) もし、そのサイト他のページを回ってみて、:12345::abcd: などと間に文字が入ることがあればセパレータで間違いないでしょう。 その場合、:::は単に「すべての値が空」ということです。 または、もしそのページのソースに <a name=':::'> や id=':::' が見つかれば、ページ内リンクのための単なるアンカーです。(それにしては不自然な命名ですが) >このサイトのページ遷移の方法～ ざっと見、URLが/install ,/tour といった形式で終わっているので mod_rewrite で内部で http://example.com/○○○ ==> http://example.com/コントローラ.cgi?page=○○○ のように変換しているかと。 方法は mod_rewrite で検索すればよい解説ページが沢山みつかります。
> Windowsで設置しようとしているのでアクセス権ではないようです。 「Windows(1～XP)」でなく「Windows7」しかも「Pro」ですよね。 Windows7マシンが今手元になくなったので検証できませんがシステム専用フォルダへのアクセス権がWindowsServer並に厳しくなってるはずです。 単なるCGIが何もしないでシステムフォルダを参照できるなどとは背筋が寒くなるほど恐ろしい状況かと・・・。 また、初めて使ったときには戸惑ったのですが使用するソフトによっては見かけどおりの場所にファイルを作ってはくれません。 例えば、なにかをインストールしたときに、「C:\Program Files」にインストールしたつもりが「C:\User\HOGE\Program Files」だったり。 コピーしたつもりが見かけどおりの場所にない可能性も考えられます。 どちらにしても「C:\windows」ディレクトリに設定ファイルが見つからない旨のエラーメッセージなので、管理者権限でもう一度アクセス権などご確認ください。 Windows7をクライアントOS感覚で使ってはいけません。
全角スペースのあとに半角文字を入れると 文字コードの関係で文字化けを起こします。 全角スペースとTVの間に半角の￥を入れてみてください
誰もレスしないし、自分でEC用のCGIに興味があったので試してみました。 > 自分で、Freecart.jp　というところから同じCGIをダウンロードしたのですが、設置の設定画面に入ることができません。 このような質問のされ方だと、どこに設置しているかは設置した当人かその関係者以外わからないという回答しかないと思います。 自社商品のサイトなら管理画面用のアドレスくらい引き継いでいないのでしょうか？　それとも外部に完全委託していたのでしょうか？ どちらにしてもFTPなどでサーバに接続してどこのパス(MacやWinで言うところのフォルダ)に格納されているのかを地道にチェックするしかないと思います。 > yourdomain.com/cgi-bin/acart/maketag.cgi > からはいるとReadmeには書いてあるのですが、変な外国のサイトになります。 まさかこれをそのままアドレスに打ち込んでいないですよね？ yourdomain.comはあなたが運営しているサイトのドメインに置き換えてという意味です(あなたのドメインと書いてますよね)。 > どなたか、設置画面への入り方を教えてください。 まず、自分の運営しているサーバにFTPなりSCPなりで接続して、「manege.cgi」を探して、そのパスにブラウザからアクセスしましょう。 パスワードはそのファイルのある「conf」ディレクトリ内の「conf.txt」に書かれています。
?付けるとquery消えます。 RewriteEngine on RewriteCond %{QUERY_STRING} ^nd=dd&parent=([0-9]+)$ RewriteRule ^bbs.cgi$ /log1/%1.html? [R=301,L] http://xn--u8jxb9ib9150b2px.jp/htaccess/rewritequery2.html
「HTTP 500 内部サーバー エラー」はプログラムがエラーで停止したことを示してます。 設置した当初は動いていたのでしょうから、その後の何らかの変更でプログラムが動かなくなったのでしょう。 何のエラーが起きているかはログファイルに書かれているはずです。 ログファイルは、httpサーバがLinuxのApacheなら、/var/log/httpd/フォルダ内にあります。 WindowsのIISなら、C:\WINDOWS\System32\LogFiles\内にあります。 （※サーバ設定で変更されてない場合） そのログファイルをプログラムがわかる人に見せてもらうか・・・ または、いっそ今のお問い合わせフォームを捨てて、フリーソフトのCGIを探して新たに設置するかですね。
iframeを持っている親ページと iframeの中に表示されているページとはそれぞれ独立しています。 なのでそれぞれに適切な文字コード指定をしてやれば何も問題はありません。 適切に指定さえすれば、HTML文書と外部CSSが異なる文字コードでもきちんと認識されますよ。 むしろ編集する際にごっちゃにならないようにお気をつけくださいまし。
SEOの専門家ではないですが。 PHP による動的生成もCGIの一種です。 また、サーバーの設定次第で、URLが.htmlで終っていても、 実際にはCGIで作られたもの、ということもあります。 これらを区別する理由というのが見当たりません。 同じHTMLを作りだすCGIで、PHPで作られたものと、他の言語を使ったものがあった場合、PHPの方が必ず上位に来る、というデータがあるなら別ですが。
全体を見ないと判断しにくいのですが提示されている範囲内なら } else { print "<br />?n"; この部分と思います。 if(式){処理}else{処理} の書式を if(式){処理} にします。
間違っている点 １．受信データをベタのまま使用している 　　たぶん学校の課題かなにかでしょうが、この状況では練習問題にもなりません。 　　POSTやGETのメソッドで受信したデータは名前と値にそれぞれ分離して扱いましょう。 　　現状ではボタンもフォームの一部なのでボタンデータの値(例：BT1=送信など)も受信文字列に入っているはずです。 　　それをそのまま正規表現でパターンマッチをとっても無意味でしょう。 　　さらに、エンコードされている可能性も考慮してデコード処理も必要でしょう。 　　連想配列に代入して処理するのが一般的です。 ２．ファイルを開く 　　書きこみの必要性がないなら出来るだけ「読み込み」だけで処理することです。 　　データ量にもよりますが「ファイルを開いている状況は出来るだけ短時間に押さえる」ように処理するのが吉です。 　　この場合データ量が少ないので、一気呵成に配列へ読み込んでファイルはさっさと閉じましょう。 　　配列のループで処理すればいいのです ３．ファイルを削除 　　オリジナルデータは出来るだけ残すようにする。 　　HDDの空き容量が問題にもなりますが、ここはunlinkよりもrenameを使って以前のデータを残すべきでしょう。 　　いまどきのマシンでテキストデータが圧迫するようなマシンならサーバなんぞには向いていません。 ４．書き込み処理 　　状況にもよりますが、前の回答者様が述べているようにファイルのブロック処理があったほうがいいでしょう。 　　ただし、シェバングをみるとWindows上で組んでいるようなのでPerlのファイルロックはあてにできません。 　　CGIでは古典的手法なのですが、外部ファイルのステータスを利用するなど、裏技を利用するのが良いでしょう。 　　「perl」「ファイルロック」などでググれば見つかるでしょう。 　　また出力データは丁寧に出しましょう。配列をベタでガバーではまともに処理ができていてもいなくても消された元ファイルは成仏できません。 　　せっかく出力イメージを提示しているのですからそのように出力するよう少しは努力してください。 ５．メインの処理の部分 　　正直、結果の部分とプログラムの内容があまりに乖離しすぎていて、どんな処理をしたいのかが汲み取れないので以下の点を明確にしてください 　　・受信データとファイルデータを比較しているが左辺が同一のデータ部分だけを上書きするような仕組みなのでしょうか？ 　　・フォームに入力値がなかった場合の処理は必要ないのか？→必要ないなら比較などせずにマルマル上書きすれば済む話ですよね。 追伸： 　まえの質問でも同じなんですが回答を受け取ったあとそこで生じた問題をその１時間後に別のスレで質問していましたが、そういう丸投げの姿勢では技術は身につきません。 　アドバイスするくらいのスペースしか有りませんので、アドバイスが可能なようにご自身で多少でも努力されるようお願いします。 　こうしたくてこうしましたがダメでした的な状況でのアドバイスなら回答ももう少し具体的かつ明確になるでしょう。
もしかして、最近流行りの「画像に書いてある文字や数字を入力させる」タイプの認証のことですか?(CAPTCHA と言います) http://ja.wikipedia.org/wiki/CAPTCHA だとすると、画像加工処理は必要ですけど、画像認識は使用しませんが。 (そもそも、画像認識による自動入力を防ぐための技術ですから) それだとすると 準備: ・「合言葉」を変形させて画像と合成する。→ imgタグに ・「合言葉」と対応したIDを出力するhtmlにinput type=hiddenに ・合言葉の入力欄を用意 フォーム送信後(サーバーの受け取り) ・hiddenに入れた ID から正解の「合言葉」を求め、入力欄の「合言葉」と比較 というのが基本の流れです。 先のwikiにあるように、 Perl (Parlではありません)のモジュールを使う方法があります。 それ以外でも、外部のプログラムを呼び出すなどもあります。
CGIはブラウザからサブミットされたデータを受信して処理します。 基本的にはそれぞれ別個のフォームとなりますので、いずれかひとつのフォームでサブミットした場合はそのフォームの内容のみしかサブミットできません。 よって、サブミットする側の問題なのでCGI側ではどうすることも出来ません。 これを解決するにはクライアント（ブラウザ）側での処理を行う以外に手は有りませんので、必然的にJavaScriptを用いて以下の条件を満たすことで全ページのフォーム内容をサブミットすることが可能となります。 １．a,b,cのhtmlは名前付きのフレーム内に確実に存在すること(別窓だと表示不足処理がめんどくさい->たとえば「a.html」しか開いていない) ２．各html内のフォームにそれぞれ別個のname指定があること 例として a.htmlから別のフレームのhtml内のフォームにあるテキストフォームを参照する場合は 変数名 = parent.フレーム名.document.フォーム名.テキストフォーム名.value; で取得できますので、これをhiddenフォームに代入してからサブミットすればよいです。 サーバとクライアントという関係が介在するようなWebプログラミングは、サーバ側の処理(CGIやPHPなど)とクライアント側の処理(JavaScriptなど)をしっかり判別理解して取り組まないとまともに動作するものは出来ません。
＞他サイトからのアクセス制限：あり → http://～ このあたりに似た設定はないでしょうか。 http://www.kent-web.com/support/old/63/0022.html http://www.kent-web.com/support/old/57/0331.html http://www.kent-web.com/support/old/66/0136.html
パーミッションには自分、グループ、他人の3種類あります コマンドラインから実行する場合は自分なので自分のパーミッションに書き込み権限があればできます HTMLで実行するのは他人なので他人に書き込み権限がなければできません 0644(rw-r--r--)ではだめで0666(rw-rw-rw-)でないとだめです
＞この４のようなアクセスの仕方をしたユーザーは,[www.school.html]をブックマークしていて飛んできたユーザだと考えていいのでしょうか？ 違います。 www.school.html内からwww.school.html/main.htmlにアクセス。 ブックマークは３のアドレス入力と同じ。 ４の前に４のアクセス者がwww.school.htmlにアクセスしたログがあるはず。 無い場合、以前アクセスした際のキャッシュからアクセスしている。
Ajaxに値を戻すなら、普通にブラウザへ表示（HTTPヘッダ付き標準出力）するようにします。 例： return("$counter"); 　の行を 　print "Content-type: text/plain\n\n"; 　print $counter; 　とします。 ただ、Ajax側のリストをよく見ていないので動くかどうかはやってみてください。
ひらがなのみなのか、漢字まじりでもいいのか、 サーバー側で音声合成をさせるのか、あらかじめ単語単位になった音声ファイルを用意してそれを連結するだけなのか でかなり　かわってくると思います。 たとえば、 HTMLのテキストフォーム上に、文章を記述 ↓ フォームからWebサーバーに submit ↓ PHPなりPerlなりが、テキストを受け取るので、それを一旦テンポラリファイル化する ↓ 分かち書きツールをシステムコールして、漢字仮名交じり文を平仮名の文に変換 (kakashiとかChasenとかMeCabとか） ↓ 結果をファイルから読みとって、音声合成ソフトの入力ファイルを作る ↓ 音声合成ソフト（コマンドラインで使えるもの）をシステムコールして、その出力ファイルを　サーバー上にファイル保存する ↓ その音声ファイルへのリンクボタンを含む、結果表示HTMLを作る ↓ ブラウザにそれが表示される って感じじゃないですかね。 作ったことないので　想像ですが。 ちなみに、mp3ファイルってID3タグを取り除けば、単純に連結できるんですが、 ５０音別のmp3を連結しても、抑揚ないので、 多分　日本語として聞き取れないんじゃないですかね。 課題は、音声合成ソフトとそれの音源ライブラリとして コマンドラインで使えるもので、出力結果に著作権が発生しないもの って点ですかね。 どっかありそうですけど、詳しく知りません。
frameのことを言っているのかな？いずれにせよ、やりたいことはCGIじゃないと思います。 以下、表示がくずれるんで空白2文字を全角1文字の空白にしています。 --- index.html <html> <frameset cols="50%,*"> 　<frame src="a.html" name="a"> 　<frame src="b.html" name="b"> </frameset> </html> --- a.html <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 　　　　　"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> <html xmlns="http://www.w3.org/1999/xhtml"> 　<head> 　　<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" /> 　　<script type="text/javascript"> 　　　//![CDATA[ 　　　function showOtherFrame(){ 　　　　var text　 = document.getElementById('aForm').text1.value; 　　　　var otherText = top.frames['b'].document.getElementById('otherText'); 　　　　var node = document.createTextNode(text); 　　　　if (otherText.firstChild) { 　　　　　otherText.removeChild(otherText.firstChild); 　　　　} 　　　　otherText.appendChild(node); 　　　　otherText.style.display = "block"; 　　　} 　　//]]> 　　</script> 　　<title></title> 　</head> 　<body> 　　<form id="aForm"> 　　　<input type="text" name="text1" value=""/> 　　　<input type="button" value="反対に表示" onclick="showOtherFrame()"/> 　　</form> 　　<p id="otherText" style:display="none"></p> 　</body> </html> --- b.html <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 　　　　　"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> <html xmlns="http://www.w3.org/1999/xhtml"> 　<head> 　　<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" /> 　　<script type="text/javascript"> 　　　//![CDATA[ 　　　function showOtherFrame(){ 　　　　var text　 = document.getElementById('bForm').text1.value; 　　　　var otherText = top.frames['a'].document.getElementById('otherText'); 　　　　var node = document.createTextNode(text); 　　　　if (otherText.firstChild) { 　　　　　otherText.removeChild(otherText.firstChild); 　　　　} 　　　　otherText.appendChild(node); 　　　　otherText.style.display = "block"; 　　　} 以下文字数制限で表示できず。a.htmlと同じですが、id="bForm"です。
land.to の文字が見えますが、sendmeil は使用可能でしょうか？ sendmail は使用できないような記述があるので、socket もダメでしょうね。 まずは、その辺りを確認してください。
＞404 Not Found 指定した場所にそのファイルがないということです。 cgiの設置以前の問題です。 postmail.htmlというファイルが、public_htmlのディレクトリ（フォルダ）直下にあるはずのpostmailというディレクトリにあるかきちんと確認し、なければファイルをアップロードしてください。 ＞# SMTPサーバ ＞$server = "mail.server.sp.****.to.jp"; ＞# POP3サーバ【POP before SMTPのとき】 ＞$pop3sv = 'mail.server.xx.jp'; あなたが使っているメールのPOP3およびSMTPサーバ名をきちんと設定していますか？ ＞# 接続ID【POP before SMTPのとき】 ＞$user = 'user_id'; ＞# 接続パスワード【POP before SMTPのとき】 ＞$pass = 'password'; ＞としたままにしています。 Kentさんがサンプルとして書いているのをそのまま利用していませんか？ もしそうならエラーが出ます。 正直な感想を書きます。 Kentさんのcgiは設置は簡単な部類です。 解説ページすらが理解できなければ使わない方が無難です。
全てはまたさないまでも concrete5が目次を自動化出来る CMSです。 結構使えると評判ですよ。 http://concrete5-japan.org/
恐らく2の条件がクリアできないのだと思いますが、 既に出ているように自身でカスタマイズした方が手っ取り早いと思います。 そんな簡単に言ってくれるなと思われるかもしれませんが、 投票結果を表示している部分はHTMLなので存外簡単です。 例えば、 　print "<tr> <td>$koumoku</td> <td>$hyou</td> <td>$percent</td> </tr>"; みたいな具合のちょっと不思議なHTMLがソース中に紛れ込んでいると思います。 なのでその部分を直接書き換えて、 　print "<tr> <td>$koumoku</td> <td>$percent</td> </tr>"; としてしまえば、表示結果から得票数は削除されます。 最初は失敗してしまうかもしれませんので、バックアップを取ってから行われるといいでしょう。 なおCGIの利用条件に「一切の改変禁止」などがないかもご確認ください。 1（ならびに3）の条件だけならば幾らでも見つかると思いますので、 具体的にどれを利用するかは質問者様のご趣味にお任せいたします。 うまく改造できないのならば別のCGIに乗り換えるというのもありだと思いますよ。
もう少し具体的にしたいことを書いてもらうと、みなさんの意見を伺いやすいと思います。 何かのフォームを作って送られた内容をページに反映したいとか、メールを受け取りたいとか そういう感じで。 設置するだけならば色々なサイトにフリーのCGIもありますのでご希望にあうものを設置するのが よいかと思います。イメージにぴったり合わなければ、自分で改造するのはOKのところが 多いので、イメージに近いものを改造するのがいいと思いますが、そのCGIの中身もある程度 わからないといけないです。 自作するならば、言語の問題もあります。昔はCGIならperlみたいな雰囲気でしたが、 今はperlだけでなくPHPやrubyや色々な言語で作成されている方がおられます。 まずは、言語をある程度決めて、簡単なCGIをサーバーに設置するところからはじめられるのが いいかと思います。「Perl CGI」「PHP CGI」とか検索かけたらたくさんサイト出てきます。 イメージに近いCGIを設置してみるといいと思います。
$hidden_key =~ s/\0/\|/g; ↑これは\0を\|に変更するという正規表現ですので$hidden_keyにしたところは縦棒になるはずです。 $in{$key} =~ s/\0/<br>/g; ↑これは\0を<br>に変更するという正規表現ですので$in{$key}にしたところは改行になるはずです。 縦棒にしたいのは登録＆メール送信データですので、$hidden_keyに（メールの改行は<br>ではありません）、 ブラウザ上で改行したいのは、テンプレートに入るほうですので、テンプレートに入るほうを$in{$key}にします。 メールは<br>では改行になりませんので、$hidden_keyで縦棒にしたデータをいったん送り、 sendmail.plの145行目で↓を追加して縦棒を\n\tに変換しています。 $in{$_} =~ s/\|/\n\t/g; ※\nはテキストの改行コードで、\tはインデント用のタブです。 送信メールで<br>が送られるということはhiddenに$in{$key}を入れている場合ですので、 修正部分の記述ミスか古いデータを上書きしないで使っている可能性があります。 FTP上のファイルをもう一度確認してみましょう。 (1)sendmail.plの145行目前後が、 # 本文内容 my $tmp; if ($in{$_} =~ /\n/) { $tmp = "$_ = \n$in{$_}\n"; } elsif($in{$_} =~ /\|/) { $in{$_} =~ s/\|/\n\t/g; $tmp = "$_ = $in{$_}\n"; } else { $tmp = "$_ = $in{$_}\n"; } になっているかどうか。 (2)preview.plの111行目前後が、 $hidden_key = $in{$key}; $hidden_key =~ s/\0/\|/g; $in{$key} =~ s/\0/<br>/g; $hidden .= qq|<input type="hidden" name="$key" value="$hidden_key" />\n|; になっているかどうか。 一見まったく同じように見えても、実は微妙に違っていたということは、 スクリプトに慣れていても、よくありますので、 エディターソフトの検索機能で検索して、 まったく同じかどうかを再確認してみるのも一つの手です。 スクリプトに慣れるまでは気長に触っていくしかないですが、 くじけずがんばってみましょう。
JavaScriptでチェックする手もあります。 <script type="text/javascript"> <!-- function check() { // パラメータチェック if ( document.form1.param1.checked == false && document.form1.param2.checked == false && document.form1.param3.checked == false && document.form1.param4.checked == false ) { alert("どれか１つは選択して下さい"); return (false); } return true; } // --> </script> 関数check()が送信ボタンが押されたら実行する様にするには、 フォームコントロールを書き換えます。 <INPUT type="button" name="" value="送信" onClick="return check();">
ここら辺りでは。 http://cygwin.com/cygwin-ug-net/ntsec.html
取得したIPを照合用にどこかに吐き出したり、 日付別にログファイルを書き出したり、 ログファイルを参照するモードを追加したり、 いろいろな説明が必要そうなので、 既存のフリーCGIカウンターを参考にしたほうが早そうです。 バグも少ないですし。。 KENT WEBのDay Counter-EXあたりが近いのではないでしょうか。 参考URL http://www.kent-web.com/count/ init.cgiに、IPアドレスの二重カウントチェックのON/OFF機能も確認できました。
ページ拝見しました。 cgiがEUCで、datファイルがShift_JISになっているようです。 このあたりを一度、EUC-JPで統一なさってみては如何でしょうか。
データ格納ファイルを個別に作るほうがいいかどうかはデータ量にもよると思いますが、 管理番号つけて行に分けたらファイルは1個でもいけると思います。 別ファイルにしたほうが管理しやすければ分けるべきです。 私はCGIはPerlで書くのですが、パミッションが違うんで、データ格納ファイルとCGIファイルは別でないといけないと思います。 表示と書き込みは分岐させたら、CGIファイルひとつでもいけると思います。 ただ、別々にしたほうがプログラムは書きやすいかもしれないです。
#1です。 cgiの設定、もしくはcgiソースの書き方(1行目とか)がおかしそうですね。WindowsのApacheについては経験が無いのでどうすればいいかアドバイスできませんが、Apacheのエラーログに何かメッセージが出ているはずです。
このdatファイルの中には<form action～</form>までのデータしかないのでしょうか？ で、管理のみに使うファイルですよね。 もしそうだとしたら、1行で打ち出すようにして、文頭に管理番号ふってしまったら、 管理が楽になると思います。今のファイルは改行を一旦全消しして、「</form>」を「</form>\n」に変換して、古い順に管理番号ふってしまえばコンバートが終了します。 で、追加の際にはそのファイルを開いて最新の管理番号＋１で新しい管理番号をふったら 途中削除とかで飛ぶことはあっても管理番号で管理はできると思いますが・・ 実はもっともっと複雑なファイルなんでしょうか？
print "Content-type: text/html; charset=UTF-8\n\n"; print <<"EOF"; <html> しこしこ </html> EOF exit(0);
＞index.htmlをcgi-binディレクトリに設置することはできないのでしょうか？ できません。Webサーバの設定によって決まります。 そもそも、ドメイン名URL（あるいはhttp://www.okwave.co.jp/~user/のようなユーザ名付きURL）の直後のディレクトリは、Webサーバ設定によりそのユーザのpublic_htmlディレクトリ下からHTMLファイルを探すようになっています。 また、サーバ設定によりcgiディレクトリ下のファイルはCGIファイルのみアクセス（実行）可能なようになっていると思いますので、HTMLファイルを置いてアクセスしても拒否されると思われます。
CGIでは無理です。 CGIは、WWWブラウザからアクセスしたときに起動し、表示すべきデータを返す、というプログラムです。 原理的に、アクセスが来てない時にCGIプログラムを実行することはできませんので、「毎日同時刻に実行」することは不可能です。
<!--#include virtual="test.cgi?5"--> でcgiの方はPerlの場合 $ENV{QUERY_STRING}; で受け取る exec cmdはセキュリティホールになりやすくApacheのかなり初期のバージョン（1.2.4あたり）から引数が渡せなくなりました
use Storable qw(nstore retrieve); my @towns = qw(TownA TownB TownC); my $file = 'serialize.dat'; nstore( \@towns, $file ) || die "$file:$!"; @towns = (); my $towns_ref = retrieve($file) || die "$file:$!"; print $_, $/ for @{$towns_ref};
フォームデータをどのように処理しているかわからないのですが、連想配列を使っているのなら、キー／値のペアの並び順が保証されていないので、 each関数で取り出したら順番がランダムになる可能性はあります。 どうしても同じ順番に取り出したいなら「・名前・フリガナ・住所・電話番号・お問い合わせ内容」の順に取り出すようにCGIプログラムを改造する必要があると思います。あるいはそれが面倒ならば、受け取った後ソートするかだと思います。
1行目のperlへのパスと編集ファイル、編集ファイルの文字コードの部分を編集、 このCGIも編集ファイルと同じ文字コードで保存する事。 #!/usr/local/bin/perl $file = 'XXX.txt'; # 編集ファイル $code = 'UFT-8'; # 編集ファイルの文字コード read(STDIN, $buff, $ENV{'CONTENT_LENGTH'}); ($name, $value) = split(/=/, $buff); if($name eq 'str') { open(FILE,"> $file") or die("$file open error"); $value =~ s/%([a-fA-F0-9][a-fA-F0-9])/pack("C", hex($1))/eg; $value =~ s/\r\n/\n/g; $value =~ s/\r/\n/g; print FILE $value; close FILE; } else { open(FILE, $file) or die("$file open error"); read FILE,$value,-s $file; close FILE; } print <<___HTML; Content-type: text/html; charset=$code <body> <form method="post"> <p><textarea name="str" cols="128" rows="24">$value</textarea></p> <p><input type="submit" value="更新" /></p> </form> </body> ___HTML
当然 Perl でも javascript でも実装可能ですが ＞エラー表示させるよう改造したいのですが、方法が解りません。 このような質問をされるくらいですから、Perl スクリプトの改造はちょっとハードルが高過ぎると思います。フォームの入力内容をチェックする javascript ライブラリならグーグル先生に聞いてみればたくさんヒットすると思いますので、好みのモノを選べば宜しいかと。 http://www.google.co.jp/search?hl=ja&source=hp&q=javascript+validator&aq=f&aqi=g1g-m1&aql=&oq=&gs_rfai=
GETはURLで送れるので情報ダダ漏れ。 但しURL文字列になってるのでURLとして1つにできる URLなので文字数の制限が有る POSTはURLとは別なのでダダ漏れには(見た目的に)なってなく、 文字数は余り関係ない 文字ではないので画像とかも扱える 簡単な情報送信やページングのみだったりするものはGETが未だに使われる formのデータやアップロードの場合はPOSTが普通(危惧しているセキュリティの事も有るから)
CGIの表示部分のソースを見ないとなんとも言えないのですが ヒアドキュメントからHTMLを出力しているなら変数部分はちゃんと変換されて出力されるはずです。 まずはキャリアチェックをはずして(もし入れているなら)PCまたは携帯エミュレータで動作確認した方が良いと思います。 またどっちでもいいと思うんですが 「http://maps.google.com/staticmap」 部分ですが最近ではわたくしは 「http://maps.google.co.jp/maps/api/staticmap」 を使って作っています。 蛇足ですが、 APIのキーは不要になったかと思います。 それと緯度経度の計算が面倒な場合、住所を直接入力で表示も可能となりました。
サーバーがオプションとしてCGIによるメールフォームが設けてある場合はカスタマイズは不可能ですので自動返信機能が付いたフリーで配布されてるメールフォームをお勧めします。 ただし現在のサーバーでは自作のCGIは利用できないと思うのでサーバーを移転させることになります。
質問文のソースがコピペしたものなら、test.cgiが500エラーです。 open (JSCR "<$jscr") のコンマが欠けていますから。
かなり惜しいです。 $in{"$key"} = $value; $in{'chikan'} =~ s/\Q$in{'a1'}\E/$in{'a2'}/g; } のところを $in{"$key"} = $value; } $in{'chikan'} =~ s/\Q$in{'a1'}\E/$in{'a2'}/g; にすれば希望の動作になると思います。 foreachの中で処理をするとループ中なので何回も置換処理されます。 １回目 $in{'chikan'}=定義済 $in{'a1'}=未定義 $in{'a2'}=未定義 　結果→a1が未定義のため置換対象がない ２回目 $in{'chikan'}=定義済 $in{'a1'}=定義済 $in{'a2'}=未定義 　結果→a1があるがa2がないのでa1とマッチする部分が削除というのと同じになる ３回目 $in{'chikan'}=定義済 $in{'a1'}=定義済 $in{'a2'}=定義済 　結果→a2が定義されたがchikanは２回目の時点で置換処理が行われたためa1とマッチする文字はすでにない という処理になっていた訳です。
＞@denyemail = ("abc@yahoo.co.jp","abc@gmail.com"); 値を " でくくってるから @ を配列のプレフィクスとして認識してしまうからではないでしょーか？ 単純に @denyemail = ('abc@yahoo.co.jp','abc@gmail.com'); で行けません？
HTML4/XHTMLではvalueが入っていない場合、送信する「必要がない」とだけ定義してあります。 http://www.w3.org/TR/html4/interact/forms.html#h-17.13.2 (邦訳 http://www.asahi-net.or.jp/~sd5a-ucd/rec-html401j/interact/forms.html#h-17.13.2 ) > If a control doesn't have a current value when the form is submitted, user agents are not required to treat it as a successful control. ですので、それを送信するかどうかはブラウザ依存です。 が、たぶんほとんどのブラウザが送信しないと思います。
pythonはわからないので、アルゴリズムだけですが。 こういう他サイトからデータを取ってくるCGIは、データの取得に時間がかかることが殆どですから、 一定期間、自分のサーバーにキャッシュデータとして保存しておき、それを利用するようにしてはどうでしょうか。 もちろん一定期間が過ぎればキャッシュデータを更新するためにRSS/RDFファイルを取り直す必要がありますので、その時のみ時間がかかってしまいますが。
＞恐れ入りますが、openの成功・失敗の記述方法を教えて頂けないでしょうか？ open(FILE,"filename") || die "I can't open this file"; die 演算子は perl の初歩の初歩。 ＞パスはあっていました。 No.2さんの言う通りだと思うんですが、もう面倒くせぇから相対パスで指定すれば良いんじゃね？
この場での説明は無理なので割愛しますが、 メイルの受信は、「CGIで出きること」を逸脱します。 と思ったら、あるにはあるらしいですね。 私は試してません。
Google Analyticsで解析をしたらどうでしょうか。 <http://www.google.com/intl/ja_ALL/analytics/#utm_source=ja-ha-apac-jp-google&utm_medium=ha&utm_campaign=ja> 解析したいページにJavascriptを埋め込むだけです。
とりあえず知っているものを二つほど。 もっと知ってたのですが、その配布サイト様がいつの間にか閉鎖してました…。 http://cmf.ohtanz.com/　　可愛い系。 http://www.cj-c.com/　　スレッドタイプでは一番有名なBBSかも。 http://www.yumemaboroshi.net/　有名どころのCGI検索サイト様。こちらも一応貼っておきますね。
プログラム的には簡単とはいえ、 unixコマンドとかhttpの予備知識がないとキツいでしょうね・・ とりあえずperlのサンプルです。 ただ書いただけで、動作確認はしてません。 ------------------------ #!/usr/bin/perl my $fn='largefile.flv'; my @ps=`ps ax | grep $fn | grep -v 'grep'`; if(@ps>2){ 　　print "Content-type: text/html\n\n"; 　　print "<html><head></head><body>Overloaded.</body></html>\n"; 　　exit; } print "Content-type: video/flv\n"; print "Content-Disposition: inline; filename="$fn"\n\n"; system("cat $fn"); exit; ------------------------- ・最初の'largefile.flv'は、公開したいストリーミングファイル名に変更して下さい。 　ただし、ファイル名が日本語だと、保存しようとした時に化けます。 　対応するとけっこうタイヘンなんです。詳しくは 　http://cydn.cybozu.co.jp/office/2008/07/post_1.html ・Content-Typeをprintしている行のvideo/flvは、flv動画の場合です。 　ストリーミングファイルの種類に応じて、変更する必要があります。 　Content-Typeについては、 　「動画 content-type」でぐぐってください。 ・psコマンドについては、 　http://www.garunimo.com/program/linux/linux11.xhtml このCGIを<a>タグなり、flashプレイヤーの<object>タグなりの もともとのストリーミングファイルの代わりに指定します。 #前回の回答には「同じCGI名を数える」と書いてましたが、 #cat使ったのでファイル名を数えました。
微妙な規模ですね。たぶんご希望にピッタリというものは難しいかも知れません。 なぜなら、通常は、 ●簡単なオーダーフォーム < ●簡単なカート < ●高機能カート(各種決済 + 会員機能 + メルマガ + ポイント制 + & more～) という感じで拡張機能が追加されていきますので…、 「 (将来も含めて)欲しい機能つきのカートを導入して、商品登録は1つだけにする」という考え方もあります。各機能を個別に導入してつなぎあわせるより管理しやすいはずです。不要な機能は使用しなければよいだけですから。また、もし少しづづいろいろな機能を追加して来られたのでしたら、管理も煩雑になっているかと思いますので、まとめてしまうのも手かと…。 (もしかするとピッタリの回答があるかも知れません。締め切らずにしばらくそのままで…。)
だいたいのCGI可能のレンタルサーバではCGIの外部呼出しは禁止されております。 したがって、そのような使い方は出来ないと考えたほうがよろしいでしょう。 レンタルで商用でも使えるメールフォームを利用してみてはいかがでしょうか？
楽メールProは使ったことないので、 動くかどうかはわかりませんが、 さくらレンタルサーバは使ったことがありますので、 ご参考になれば。 ファイルのアップロード場所は、 FTPでログインした際の初期ディレクトリとします。 絶対パスは「/home/あなたのユーザ名/www/」となります。 そこに、「distribute」というディレクトリをアップロードするわけですから 設定しないといけない絶対パスは「/home/あなたのユーザ名/www/distribute/」と なると思います。 なお、cronの設定ですが、 さくらのサーバ設定画面からでも可能だと思います。
HTMLは、空白文字は次のように処理します。 Paragraphs, Lines, and Phrases (ja) ( http://www.asahi-net.or.jp/%7Esd5a-ucd/rec-html401j/struct/text.html#h-9.1 ) 　言い換えれば改行コードの変更は不必要です。 　<p>段落</p>でマークアップすべきで、行間が広ければスタイルシートで調整するべきです。 <br>は次のような特殊な場合を除いて通常はHTML内に表れない要素です。 <address> 　東京都新宿区<br> 　なんとか町なん丁目何番地<br> 　誰それ誰べえ<br> </address> 【引用】＿＿＿＿＿＿＿＿＿＿＿＿ここから BR要素は、現在のテキスト行を強制的に区切る(終了させる)。 ￣￣￣￣￣￣￣￣￣￣￣￣￣ここまで［Paragraphs, Lines, and Phrases (ja)( http://www.asahi-net.or.jp/%7Esd5a-ucd/rec-html401j/struct/text.html#edef-BR )］より ＞<table>～</table>の範囲を、 ＞置き換え演算子を使って、改行(<p>$&</p>)させているのでしょうか。 　s/^.*$/<p>$&<\/p>/; 　は、s///;で置換演算子です。$&はマッチしたものすべて、^は行頭$は行末 ＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿ 　テスト結果　スクリプトは・・末尾(text2html.pl)、 perl text2html.pl; <p> のように、改行した状態で更新すると、書き込んだ改行分だけ、ブラ ウザに表示された表の直前が改行されてしまいます。 </p> <p> （mdbファイルに直接書き込んでも同現象となりました。） </p> <table> <tbody> <tr> <td>・・・</td> <td>・・・</td> </tr> </tr> </tbody> </table> <p> と改行せずに書き込むと、ブラウザに表示された表の直前は改行され ませんでした。 </p> __________________以下すべて(text2html.pl)＿＿＿＿＿＿＿＿ #!/usr/local/bin/perl use strict; my $tableCheck = 0; while(<DATA>){ if( /<\/table>/ ){ $tableCheck = 0; } elsif( /<table[^>]*?>/ ){ $tableCheck = 1; } else{ if($tableCheck!=1){s/^.+$/<p>\n\t$&\n<\/p>/;} } print; } if($tableCheck==1){ print "\n\ntableが閉じられていません!!\n";} __END__ のように、改行した状態で更新すると、書き込んだ改行分だけ、ブラウザに表示された表の直前が改行されてしまいます。 （mdbファイルに直接書き込んでも同現象となりました。） <table> <tbody> <tr> <td>・・・</td> <td>・・・</td> </tr> </tr> </tbody> </table> と改行せずに書き込むと、ブラウザに表示された表の直前は改行されませんでした。
ページ移動は不要です。 移動させる手もありますが、どちらにしても一旦出力したものを書き換えるのでJavaScriptが必要になります。移動させる場合、直でリンクされてもこまるので、referrer調べたり sessionやcookie等で確認が必要になったり、またはjavaScript有効無効の考慮などかえって面倒になりますよ。 以下移動しないタイプの流れ ---------------------------------------------------------○○.cgi #!/usr/bin/perl $| = 1; #バッファ無効 # 考え方としては、処理の前にとにかく待機中画像までを表示。 # ただし途中まで。htmlは完了させない print "Content-type: text/html\n\n"; print <<EOL; <html><head></head><body> □□□□□□□□□□□□□□□□□□□□□□□□□<br> □□□□□□□□□□□□□□□□□□□□□□□□□<br> <script type="text/javascript"> document.write("<div id='watingDiv'>"); document.write("<img src='クルクル.gif'>ただいま処理中です。"); document.write("</div>"); </script> EOL # 時間のかかる本処理～ sleep 5; # 本処理が完了次第、JavaScriptで待機中divを消す print <<EOL; <script type="text/javascript"> document.getElementById('watingDiv').style.display='none'; </script> 処理が終わりました。<br> </body></html> EOL exit; --------------------------------------------------------------- ※□□□～はIE対策。(バイト数が少ないと勝手にバッファしてしまう) 　もろちん削除してかまいません。 ※移動がよければ、最後にdivを消すのではなく、 　location.href='完了ページ'; 等で飛ばしてやればよいでしょう。
単純にフォルダを移動したら動かないのはサーバのhttpdの設定の問題だね。 通常は".htaccess"とかで設定するけれどCGIは通常そこらのフォルダに放り込んでも動作しないようになってるよ。 で、真っ白っていうのは　どう真っ白なのかっていうのを突き止めないとならない。 その真っ白な状態でソース表示したら何か出るのかどうか、出ないようならCGI側の書き方そのものが何かおかしい。 (よくやるのがhttpヘッダの送り方を間違えてたり、空行が先に余分に出てしまう書き方がされている) http://www.google.com/search?hl=ja&q=perl%20cgi%20%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A1%E3%81%AA%E3%83%9F%E3%82%B9 ・・・ちょっとそれっぽいのは出てこなかったけど、身に覚えがありそうな物もあるかも。
URLのリンクから設置マニュアルを読んだのですが 質問者さんが公開しているサーバのOSは何になりますか？ 不明な場合は、今まで普通のhtml等を公開する場合は 文字コードの設定はどのようにしていましたか？ もしサーバがWindowsである場合や、 UNIX等であってもEUC以外の文字コード設定であれば CGIモジュール(yoyaku.cgi)をそのまま利用することはできません。 特にuni-codeだと、非対応のようです。 サーバOSの設定がShift-JISならば、 次の対応でおそらく実行可能だと思われます。 １．yoyaku.cgiの下記の部分を変更 ======================================= # OSの文字コード (euc / sjis) $os_code = 'euc'; ##変更前 　　↓ $os_code = 'sjis'; ##変更後 ====================================== ２．サーバ転送時は全ファイル無変換、アスキーモードとする
■識別用のクエリを付加する方法 あまり難しく考える必要はないですよ。index.htmlでアクセス元を調べていますよね。その時もし、 ・referrerが空で ・かつ from=Success が付いていれば 「認証OK」のページから飛んできた、 と判定するわけです。 もちろんクエリは from=Success に限らず、?referrer=http://認証OKページURL でも何でもご自分で分かりやすいものでかまいません。 ■専用ページに飛ばす方法 これも上と同じです。専用のindex2.htmlに来たものは、http://認証OKページURL から来たものと判定できますので 適宜処理をしてindex.htmlへ飛ばします。この時はRefreshで飛ばしても、すでに処理ずみですのでreffererが空でも構わないわけです。 適宜処理、というのはCookieを発行するなどで index.htmlでも判別できるようにする、ということです。 ■ついでに 例えばこの認証OKページに <img src='http://example.com/img.php'> などとして、単なるgifやjpgではなく、別のサイトに置いたプログラムで画像を出力してやります。このときクッキーやセッションを発行すれば、example.comの方で判定でるわけです。 あるいは直接 この認証ページから <script language="JavaScript" src="http://example.com/○○○.js"></script> としてJavaScriptで処理してもよいでしょう。 このOKwaveさんでも様々なサイトのクッキーが発行されていますよ。一度クッキーの設定を IEなら[ダイアログを表示する]に設定するとよく分かります。 でも単純な方法が一番ですね。やっぱり。 上記の方法は回りくどくてあまり学習する価値ないかもです。
前者はサーバサイドでwordなりexcelなりを生成して送り返してるやりかただね。 (pdf作成サイトとかと仕掛けは一緒) これはwordやexcelの書類形式が(バイナリ的に)どうなってるか知らないとできない。(最近のはxml形式みたいだからどうにかなる気がする) 後者は、textがユーザローカルの場合無理。formのfileでサーバ側に一度uploadしてもらいサーバサイドで処理して埋め込むなりクッキーにするなり。(通常は埋め込む) textというのがサーバ側のならjavascriptかクッキーで橋渡しが楽だと思う。
　refreshの場合は、それを受け取ったブラウザは、HTTP要求ヘッダ内にrefererを含めません。含んではならない。refererは能動的に参照するという意味があるからですね。したがってサーバーの環境変数HTTP_REFERERには値が入ってこない。 　したがって他の手段を用いる必要があります。良く使われる方法は ・Cookie　 　いわゆるtracking Cookieですが、この場合セキュリティソフトで消される場合がある。 ・Web ビーコン 　ジャンプ先のサーバーで画像を出力させる。セキュリティを高レベルにしていると、表示しているページのドメインと異なる場所の画像は読み込まない場合もある。 　手法については 　　　下記の様に、単一の画像ファイル「a.jpg」を呼び出して、 - CGI - 教えて！goo 　　　　( http://oshiete.goo.ne.jp/qa/5901567.html ) ・PATH_INFOやQUERY_STRINGSなどに含めて、refere先のサーバーで処理する。 　私は、この3つを併用しています。最後の方法については、 ・DirectoryIndexで、index.cgiを表示させるようにするか、index.htmlをCGIとして動作させる、あるいはindex.phpを使い、 　<meta http-equiv="Refresh" content="5;URL=www.abc.com/hoge.com/"> 　<meta http-equiv="Refresh" content="5;URL=www.abc.com?hoge.com"> のようにする。 　処理後直ちにページを閉じた場合なども含めて確実に補足するには、3つを併用するとよい。
メールフォームのCGIは、htmlページのformタグでCGIにリンクしてあるだけなので ページのカスタマイズに、CGIはほぼ関係ありません。 従いまして、どこのCGIを使おうとも大差はありません。 問題は文字化けですね htmlページが文字化けするのですか、または確認ページとか それとも送信され、届いたメールが文字化けするのですか。 よくある間違いとして htmlページの文字コードとCGIの文字コードが異なる場合ですね。 メールフォームのCGIは、Googleなどで検索すればよろしいかと思います。 レンタルメールフォームを使うのもありかな。
メール送信フォームのHTMLで、フォームの提出先がHTML自身になってませんか？ ＞直接CGIから実行せず、htmlからメールフォームを表示して。 ・・・【中略】・・・ ＞アルファメールでは「700」が推進とあったので700にしてみたら ＞　　sendmail.htmすら、動かず、755に変更しました ・・・【中略】・・・ ＞送信ボタンを押すとエラーになります ＞　　「　internal Server Error　」 　以上から想像できるのは、 ・HTMLの他人権限がＯだと動かないけど、ソースがそのまま表示されるのをブラウザ(たぶんIE)は拡張子で判断して表示させている。標準的なブラウザだと、text/plainでおられてきたデータはテキストで表示されるので、そこで気がつく。 ・HTMLを実行プログラムとして実行しようとしてエラーになる。 　HTML内の<form action="[パス]sendmail.cgi" method="post">にすると良いはずでか。 　本来は、HTMLもCGIから出力させる方が良いです。スクリプトの __END__ 　以降にそのままHTMLのソースを記述して、 while(<DATA>{print;} 　とか・・
sqliteは、たしか、データベースではなく、ファイルだったと思います。
./lib/kihon.pm のようにファイルを置いて use lib './lib'; use kihon; でいかがでしょうか。
　単純にPerlのテストだけなら、activePerlを使って、コマンドプロンプトからエラーチェック程度ならできなくはないです。 　しかしウェブサーバー経由でテストしたければ、サーバーとPerl、場合によったら他のシェルなども必要です。シェルとはウィンドウズのコマンドプロンプトみたいなもの。 　私はセキュリティやデータの保護のため、HDD内に特定のパーテーションを用意して、Cygwin,Apache,Perl,PHP,その他Shellを入れています。複数のサイトを管理していますが、たとえば、個人用のページが G:\home\myName\web 内にあり、CGIが、G:\home\myName\web\cgi-binにあると http://hoge.com.local/myName/ とアクセスすれば、トップページが、http://hoge.com.local/myName/cgi-bin/board.cgi とすれば掲示板が表示されます。 　同様に、http:// 【参考サイト】 Cygwin - Wikipedia CGIがサーバーのシェルコマンドを使うときは必用 　 http://ja.wikipedia.org/wiki/Cygwin ActivePerl - Wikipedia Cygwinのperlでもよい。 　 http://ja.wikipedia.org/wiki/ActivePerl インストールメモ：Cygwin + Apache2 on Windows XP 　 http://sabimaru.no-ip.com/memo/installmemo-cygwin-apache2.html CygwinでCGIローカルテスト環境設定メモ・・情報古いですが問題ない 　 http://cgi.members.interq.or.jp/sun/aiueo/koyanean/puchi/try/trysmemo.htm 　結構ハードル高い作業になりますよ。
.htaccessで、 SetEnvIf User-Agent "DoCoMo" KTAI SetEnvIf User-Agent "SoftBank" KTAI SetEnvIf User-Agent "KDDI" KTAI Order allow,deny allow from all deny from env=KTAI とかで、どうですかね。vodafon時代の携帯ってまだあるならそれも追加。あとPHSとか。 フルブラウザからも制限したいのなら、User-Agentを調べてそれも追加。 参考：http://agency.mobile-stage.net/document/tec05.php
後ひと頑張りですね。 あなたのスキルは想像できますから、具体的なソースは書きませんが、サイズは$ENV{'QUERY_STRINGS'}を使います。 　指定方法は、紹介した(使用例)サイトの下の方に書いてあります。 　それをPerl CGIで解析して利用する方法は、PATH_INFOよりふんだんに情報があるので探せるでしょう。 <img src="[CGIへのパス][ファイル名]?width=100&height=100"> 　widthだけでなく、wやWIDTHなどでも指定できるようにするとよいでしょう。 なおサイズ変更は、 convertを使うほうが楽です。 convert a.jpg -resize 100x100 b.jpg; これで、100×100に収まるように、縦横比を変えずに縮小/拡大してくれます。
HTMLはともかく、CGIとしてはもちろん可能です。 その場合、通常は #!/usr/local/bin/perl use strict; use warnings; my $fileName = $ENV{'PATH_INFO'}; my $view = './images'.$fileName; my $extention; if( $fileName =~/.+\.(\w+)/){$extention = $1;} print "Content-type: image/$extention\n\n"; open IMG,"$view"; binmode IMG; binmode STDOUT; while(<IMG>){ print; } close IMG; __END__ かな。CGIのあるディレクトリにある/imagesフォルダー内のファイルを開きます。拡張子は何でもよい。 　アクセスはこのCGI名がimage.cgiだとすると、 <IMG src="image.cgi/abc.jpg" border="0"> 　となります。 ★サイズを調整するなら、サーバーにperlMagick、imageMagickが必要です。これがあると、imageMagickはPhotoShop程度の機能を持つ画像処理ソフトですから、ファイル形式を変換したりサイズを調整したり、色を変えたり画像を回転させたり、枠をつけたり、複数の画像を連結したりと様々な処理ができます。 【参考サイト】 ImageMagick - FSWikiLite 　 http://tuka.s12.xrea.com/index.xcg?p=ImageMagick#p3 ImageMagick 　 http://mechanics.civil.tohoku.ac.jp/soft/node43.html Imagemagickの使い方 　 http://vision.kuee.kyoto-u.ac.jp/~nob/doc/imagemagick/imagemagick.html 48. ImageMagickで簡単に画像処理 - PHP TIPS：ITpro 　 http://itpro.nikkeibp.co.jp/article/COLUMN/20070704/276677/ 使用例) Lacoocan用アクセスカウンター(LaCounter.cgi)：マニュアル ( http://iruka.la.coocan.jp/cgi/counter/LaCounter.html )
@の前に￥（円記号）を付けると良いと思います。 \@ な感じです。
HTMLのformには、メールを送る機能は定義されていませんので、CGIを利用することになります。(ブラウザの機能として持っているものもありますが、問題が多すぎて使いません) 【引用】＿＿＿＿＿＿＿＿＿＿＿＿ここから HTTPスキームURI以外の値の場合のユーザエージェントの動作は、定義しない。 ￣￣￣￣￣￣￣￣￣￣￣￣￣ここまで［Forms in HTML documents (ja)( http://www.asahi-net.or.jp/%7Esd5a-ucd/rec-html401j/interact/forms.html#h-17.3 )］より 　メールフォームから送信されたデータを処理するCGIは沢山配布されていて、それ自体は最も簡単な部類に属しますから、自分で加工するのが良いです。一応、どのような処理が行われているかというと 1) 受け取ったデータのエラーチェック 2) インターネットメールの仕様に合わせてデータ変形 　一行の文字数、文字コードなど 3) MTA(メール配信エージェント--sendmailかpmayl)を呼び出してデーターを渡す ※いくつかのセキュリティ対策がされています。 　SPAMの踏み台にされないため 　複数の配信先に送信するときは、単純に宛先で区切ってMTAに渡せばよいです。(sendmail) 　固定した複数のアドレスに配信させるときは、フォームにはアドレスを書かず、CGI側で処理してください。具体的には<select multiple name="to" name="To"><option value="A">総務課<option value="B">企画</form>とか、もちろんcheckboxでもよい 　CGI側では、if ($FORM{'To'} eq 'A'){push @To,$ADDRESS{'A'};}elsif{*******}とか
配布元はそれぞれの名前をキーワードにして検索して下さい。 CMSとして--- Wordpress MovableType Nucleus CMS ブログとして--- ぶろぐんぷらす Drupal 日記CGIとして--- Nicky tDiary
リンクのは結構大変そう。 単純な内容なのでちょっと作ってみました。 自己責任で作業を行ってください。 以下のサブルーチンをgwbbs.cgiの最後尾に加える ## -------------ここから sub fChkDays{ my ($sDate,$nHowManyDays,@waste) = @_; if( $nHowManyDays eq ''){ $nHowManyDays = 2; } $sDate =~ s/\([^\)]+\)//; $sDate .= ':00'; my @aDT = localtime(time() - (86400 * $nHowManyDays)); my $sCT = sprintf("%04d/%02d/%02d 00:00:00",$aDT[5]+1900,$aDT[4]+1,$aDT[3]); my $sRet = 0; if($sCT gt $sST){ $sRet = 1; } return $sRet; } ## -------------ここまで そして登校日表示している行(344行目付近)の後ろに if( fChkDays($date) ){ print " New "; } を挿入します。 " New " はイメージタグなりなんなり、アレンジしてください。 とりあえず自助努力が肝心です。
conf.htmlとpostmail.htmlの設置階層は異なっていますが conf.htmlなどのcssファイルへのパスは、postmail.htmlと同じにするはずです。 （かなり前に使用していたので変わっているかも知れませんが）
> データの送信元のＨＴＭＬがUTF-8ならば、一旦cgi-lib.plで > デコードされた文字も私が使っているコードのままでUTF-8に > 再エンコードされるということでしょうか？ そのとおりです。 ただ、例外としてformにaccept-charsetを指定するなど 送信する際の文字コードを別途指定した場合はそれに従います。 EncodeもCGIもこれまでのライブラリーと同じように使えるようにする書き方と オブジェクト指向っぽくする書き方の両方ができるのでいろいろと試してみると 面白いと思います。検索するとドキュメントもかなり豊富ですよ。
いろんなケースがありますが ・PerlのスクリプトがShift_JIS以外のコードで書かれていて、出力時にShift_JISに変換するような仕掛けが無いとき ・スクリプトがShift_JISで書かれていて、いわゆる「ダメ文字」対策がされていなかったとき ・(記述してある位置が違う、ブラウザが対応していない、など)charset=shift_jisが上手く解釈されなかったとき ・上に加えて、自動判定に失敗したとき ・ブラウザの設定の方が優先されたとき あたりが頻度の高いものではないでしょうか
"と"の間とか、'と'の間とかは文字列として解釈します。 ""には変数や?の展開とかは行われますが、それ以外は書かれた文字がそのまま内容になります。 #は#という文字になり、コメントにはなりません。 コメントと「誤認識」されるのは、 引用符無しの文字列を書いたときや 引用符の対応がとれてなく、文字列の外になっているときです。
ID登録するタイプの掲示板のCGIに削除部分だけ作り込むのが簡単かもしれません。 ログにIDが残っているのだから、削除ボタンを押したら（確認画面はJavaScriptで作る）ログを全部検索して該当個所を消せばいいだけですし。 大抵は１行ごとに書込内容がログとして保存されているので、該当行を読み飛ばして新しいファイルに上書きします。
CGI > FastCGI > mod_perlの順にCPU負荷が上がり、 CGI < FastCGI < mod_perlの順にメモリ負荷が上がることは説明するまでもないですよね？ プロクシ（キャッシュファイル）でうまくいくなら、 キャッシュコントロールを利用してクライアントのHDDに保存されたキャッシュを読んで貰うようにするとか、 304 not modifiedを返すだけにするとか、CGI/mod_perlを可能な限り動かさないような仕組みにする方が良いのでは？ もちろんユニークユーザーが多い場合はこの限りではありませんが。
自分でカスタマイズするしかないんじゃないかな。 http://wws.cside.com/cgi-plant/bbs/ こーゆーのとか。 画像はimgタグのwidth,hightを調整するだけで実際に小さい画像を作る機能はないみたい。
　cgiやphpは、Webサーバー上で動作します。 　URLの拡張子がcgiやphpになっていても、それはWebサーバーへの処理のリクエストになるだけで、実際にはクライアント（閲覧者）側には、cgiなりphpが生成したhtml形式のデータが送信されるだけです。 　したがって、通常はダウンロードを指示してもWebサーバー上のcgiやphpを直接ダウンロード出来ないはずです。 　一方、cgiなりphpソースのライブラリ素材として利用可能なようにダウンロードで提供されているものもありますが、上記のようにcgiもphpもWebサーバー上で動作するように作られているものなので、それなりの環境が無いと動作しません。 　例えばperlで書かれたcgiはperlの実行環境が無いと動きませんし、phpもphpの実行環境が無いと動きません。また、httpサーバー環境が存在しないと動作しない部分もあります。（perlもphpもスクリプト言語なので、実行環境がなければただのテキストファイルでしかありません）　もっとも、C言語等で書かれた実行形式のcgiだと、なんらかの動作はするかもしれませんが、想定されたWebサーバー上以外で動かしても目的の成果は得られないでしょうし、どんな障害がでるかもわかりません。 > と何れも解凍ソフトにより解凍された状態でDLされますがダブルクリックすることで何れもプログラムが開きますがプログラム自体はpcの中のデスクトップにショートカットとして残るだけでpc内部には残らないものなのでしょうか？ 　「解凍された状態でDLされます」というのがよくわかりませんが、もともとアーカイブソフト等で圧縮されたものじゃなければ、そのままの形でダウンロードされます。それは動画や音楽のデータだって同じことです。 　ダウンロード先がデスクトップになっていたらデスクトップ上にダウンロードされます。どこにダウンロードされるかはダウンロード時の操作指定やダウンロードソフトの設定によるので自分で確認してください。デスクトップにショートカットがあるなら、プロパティを見れば本体の場所がわかるはずです。
メールを読み取るにはcronで定期的にスクリプトを実行してメールサーバからメールを読み取るか、 メール到着時に.forwardでメールをスクリプトに渡す方法が考えられます。（前者はあまり現実的ではなさそうだけど） php/CGI実行可能なサーバであってもこの仕組みを入れる事ができるサーバは限られていますのでまずはそこを確認。 実行できるレンタルサーバは少ないので配布されているものは多くないようです。（軽く検索したけど見つからなかった） メールではなくwebページにアクセスしてもらう事になるけど http://wws.cside.com/cgi-plant/p_edit/ こういうCGIもあります。
下記のように修正して試行してください。 私の環境では正常動作しました。 <form name="frm_test" onSubmit="trans();return false;">
現実問題として、添付ファイルの制限があることを考えましょう。 その容量があるのですから、お客様別フォルダでも設定してアップして頂く方が現実的と思います。
先ほどif else文をご質問された方ですか？ おそらくレンタルサーバーかプロバイダーのホームページスペースかと思われます。 Perlの基礎知識が乏しいようですので画像の入出力等は変更しない方が良いのではないでしょうか？ コピーペーストではミスに気付かず、 サーバーをダウン・負荷をかけてしまい他の利用者に迷惑をかけてしまいます。 今現状でリサイズする機能があるのであればそのままでの運用をお勧めです。
通常、アクセス解析などではimgタグなどでcgiを呼び出すので単なるhtmlでも問題ありません。 cgiが使われるは動的なデータを表示する必要がある場合が多いです。 例えばデータベースなどからデータを読み込む必要があるページなどです。 このQ&Aサイトもデータベースとデータを読み出すPHPで構成されいます。 ホームページ全体がwiki風だったりブログ風になっていて簡単に記事やページの作成が出来るようにCGIを使用している場合もあります。 categoryやpegeなどの引数があるようなのでおそらくブログCGIなどで簡単に記事の追加や編集ができるようになっているのでしょう。 製作会社しかしらない管理ページがあり、そこから更新が簡単に出来るようになっているんだと思いますよ。
ANo.1で回答した者です。お礼メッセージをありがとうございます。 スクリプトを下記のように訂正します。お試しください。 ------------------------- $s = substr($filelist[$_][0], 11, 8); if ($s > 10.0) { $dateA = $s * 1.6; } else { $dateA = $s * 1.0; }
　nameが同じデータをハッシュに入れると、上書きされてしまいますから、順次、配列(リスト)に入れるか、$hash{'hoge'} .= $data;とつなげていくかしないとだめです。 　スクリプトはちらっと拝見しましたが、その部分ではなく受け取ったデータの格納部分の変更が必要です。
Yomi-Search　ver4.22の場合 regist_ys.cgiのオリジナル211行目に <select name=Fkt$kt_no size=7>という箇所があります。 ここのsize=7の7を希望行数に指定すれば可能だと思います。 挑戦してみてください。 間違っていたらごめんなさい。
改行の入っていそうな場所に↓(下矢印)が表示されているのなら、改行コードの違いです。 サーバーではlinux等のunix系のOSが使われることが多いのですが、その改行コードはLF(0xA)の1バイトです。 対して、Windowsの改行コードはCR+LF(0xD 0xA)の2バイトで改行を表します。 大抵のテキストエディタでは、これらを自動判別し、どれでも「改行」するのですが、メモ帳はWindows用のCR+LFしか改行とは考えてくれません。 ・改行文字修正ツールでWindows用のCRLF形式へ変換する という方法もありますが、CGIのプログラミングをするのなら、 ・低機能なメモ帳をやめて、他のテキストエディタに乗り換える のが良いでしょう。
そのチャットを試したわけじゃないけど紹介記事には「Ajaxを利用しており」って書いてありますね。 http://gigazine.net/index.php?/news/comments/20090715_chatpad/ 単純に内部的に定期リロードしてるのか・・・うまく作れば他者の発言に合わせて非同期でロードもできるのかな。 http://www.google.com/search?q=chat+ajax+perl&lr=lang_ja
http://www.netdeoshigoto.com/nso_support/2008/02/cgihttpdbgw_relaycgi404.html 最低限 FAQ くらいは目を通してから質問するべきだと思うんだ
top.html にて、その基本認証を設置したディレクトリへリダイレクトするような仕組みになっていませんか？ metaタグのrefreshなどで。
＞初期設定からルートフォルダやcgiファイルのフォルダは変更したほうが良いのでしょうか？ 　私は、G:ドライブに、CYGWINとともにインストールしています。hostsは 127.0.0.1 ****.local *****.ne.jp.local *****.com.local local.host 　のようにローカル用のバーチャルホストを指定。 　apachehttpd.confで <VIRTUALHOST 127.0.0.1> DocumentRoot "/home/" ServerName localhost ServerAdmin webmaster@hoge.com AddHandler server-parsed .shtml Options All +Includes +ExecCGI ErrorLog logs/webtest_error_log CustomLog logs/webtest_access_log common </VIRTUALHOST> など、管理しているいくつかのサーバーのローカル版を設定。 　その他、apacheの細かい設定はたくさんあります。参考書をどうぞ 添付は、CygwinのシェルからG:ドライブの ls -l をしたところ。
＞この場合下記のタグをhtmlに添付するだけでいいのでしょうか？ セレクトタグなどはhtmlに添付させてもプログラム自体には、何ら支障も影響もありませんよ。 セレクトタグのようにhtmlから直接呼び出すものはcgiのプログラミングとは無関係ですね。
？？？ 見たままじゃないの？ 例えばサブジェクトを変更したいならば %PgdMailFormConfig::mail_subject = ( 'default' => 'メールフォーム', ); 「メールフォーム」って書いてある場所を好きに書き換える。 ただそれだけの話ですよ？ スカラー変数を使わずに直接サブルーチンに突っ込むのが解りづらいのでしょうか？ 一応書き換える例として、「こんにちは」というサブジェクトのメールを送信したいのならば %PgdMailFormConfig::mail_subject = ( 'default' => 'こんにちは', ); こう書くですよ。 そしてサブジェクトの設定よりも下には CC（カーボンコピー）、BCC（ブラインドカーボンコピー）、及び自動返信に関する設定ですから、必要があれば設定すれば良いでしょう（その際には # を削除する事を忘れない事。これ大事） まぁ単純に一箇所にメールを送るだけならばどれも必要の無い設定ですので、あまり気にしなくても良いと思います。 というよりそもそもあなたの提示するソースの箇所は、全く変更しなくてもとりあえずメール送信に支障をきたさない設定ばかりです。 もっと大事な設定を行う場所がある筈なのですが・・・ 宛先（ To ）の設定とか、メール送信に関する設定（sendmail コマンドを使うならコマンドパスとか、Net::SMTP を使うなら SMTP サーバーに関する設定とか）など、これを間違えたらメール送信できませんって感じの重要な設定が。 そっちの方は大丈夫なのでしょうか？
一度投稿した記事の編集は edit_log.pl 内の edit_log というサブルーチンで行っているみたいです。 このサブルーチンの適当なところ（めんどくさいので exit の寸前くらい）で sndmail というサブルーチンを実行することで実現できませんか？ （スクリプトをザっと眺めただけですので動作は未確認） &sendmail if ($mailing == 2); # ←こんな感じに exit; }
仮にパソコンに負荷が掛かったとして、どうなんでしょう？ ワード、エクセルを起動すると、パソコンに負荷が掛かります。 インターネットに接続すると、パソコンに負荷が掛かります。 パソコンを起動すると、パソコンに負荷が掛かります。 パソコンに負荷を掛けたくないなら、パソコンの電源を入れてはいけない事になります。 仮にゲームCGIのゲームが、頻繁にサーバーと通信をしてパソコンに多大な負荷を掛けたと仮定します。 それはそのパソコンを使う本人が自分で負荷を掛けているのだから、それはそれで良いのです。 ゲームはしたいけれど、負荷は掛けたくないという人がもしいたら、そんな人はパソコンの電源を切って大事にしまっておけば良いのです。 さて、共有サーバーの場合は、複数の契約者がそのサーバーを契約しています。 複数の訪問者が、ゲームCGI以外のページを見に来ています。 サーバーに(多大な)負荷を掛けると、ゲームCGIを使う人以外の他のページを見に来ている訪問者が、ページ表示が遅いという迷惑をこうむります。 見に来ている人の迷惑であるということは、そのページを提供している契約者にとっても迷惑です、快適ではないページだという事で読者、顧客が立ち去ってしまうかも知れません。 契約者にとって迷惑であるということは、レンタルサーバー会社にとっても迷惑です、別の会社に乗り換えられるかも知れません。 パソコンの場合は自分自身が使うものだから、必要ならいくらでも負荷を掛けても良いけれど、サーバーは複数の人が共同で使うものなので、そのうちの一人だけがサーバーの処理を独占するのは他の人にとって大迷惑になります。 なので、多大な負荷を掛けるCGIは共有サーバーを使用するならマナー違反であり、一般的には契約上の禁止事項となっています。 ここまでは、イジワルな回答。 一般的なカウンターや掲示板では、CGIであるか静的HTML(普通のHTMLページ)であるかで、パソコンに対してより大きな負荷が掛かることも逆に小さくなることもありません。 チャット、ゲームCGIのように、頻繁に再読み込みをするページの場合には、当然頻繁に再読み込みをする分の負荷がパソコンに掛かっている事になります。 サーバーに掛かる負荷から考えると小さい負荷ですが、わずかには増えると言えます。 ただ、先に書きましたように、その本人が自分で負荷を掛けているので別に不都合はありません。 サーバー側を見ると、非常に大きな負荷で大迷惑ですが。
子プロセスがレスポンスを返して、親より先に死ぬようにしたほうがよいと思います。 また、レスポンスを返さないほうのプロセスは先にSTDOUTをcloseした方が良いでしょう。 以下perlですが、やることはほぼ同じだと思います。(半角スペースを全角にしてます。) #!/usr/bin/perl use strict; use warnings; use utf8; use CGI; use CGI::Carp qw(fatalsToBrowser); use CGI::Pretty; if ( my $pid = fork ) { 　　# Parent 　　# Close STDOUT 　　close STDOUT; 　　# Do heavy work 　　sleep 10; 　　my $file = '/tmp/tmp3.txt'; 　　open my $fh, '>', $file or die "$!:$file"; 　　print $fh "Hello CGI. I'm parent\n"; 　　close $fh or die "$!:$file"; 　　# Wait to finish child for safe 　　wait; } elsif ( defined $pid ) { 　　# Child 　　# HTTP Response 　　my $q = CGI->new(); 　　print $q->header( -charset => 'UTF-8' ); 　　print $q->start_html( 　　　　-lang　=> 'ja', 　　　　-title => ' T I T L E ' 　　); 　　print $q->p("Hello CGI. I'm child"); 　　print $q->end_html; }
> 「名前」しかメールに記載されていない状態です。 html を見たところ、タグに名前がついていません。 フォームの入力部分、3つの項目について (略) <INPUT type="text" name="" size="30" value=""> (略) <INPUT type="text" name="" size="30" value=""> (略) <TEXTAREA name="" rows="6" cols="73"></TEXTAREA> (略) とった表記がありますが、どれも name が空のままです。 <INPUT type="text" name="email" size="30" value=""> (略) <INPUT type="text" name="name" size="30" value=""> (略) <TEXTAREA name="message" rows="6" cols="73"></TEXTAREA> といった感じで、name を入れてください。
＞ FFFTPで、掲示板CGI用フォルダをCGIサーバー内の、「/アカウント名/bbs1」として作成し、その下に ＞ 「/アカウント名/bbs1/aska.cgi」として、aska.cgiという、掲示板CGIファイルを設置しました。 /アカウント名/aska.cgi としたらどうなりますか? ぷららの説明( http://www.plala.or.jp/access/community/phps/ucgi_main.html )を見てますが、cgiは任意のディレクトリで実行可能とされているので、サブディレクトリに入れるとまずいのかもしれません。 あとは、パーミッションが指示されたものと違うようですが。
#3です。 ＞ 肝心の「入力状態のHTML」をそのまま受け取るにはどうしたらいいのでしょう？ ダウンロードして試してみられたのでしたら、管理ページの「データ参照」画面を開いて、参照したい日付とフォームを選択して受信データ一覧を表示します。 その一覧の「入力状態のHTML」を参照したいデータの日付をクリックすると、入力された状態のフォームが表示されます。
　エラーにならなくて、素のテキストで表示されるということは、そのディレクトリではCGIとして動作していないということです。 ・・・その場合、古いシステムではサーバーはテキストファイルとして送り返すのがデフォルトの場合が多い・・・ 　ですから、ご利用のサービスのマニュアルを読んでください。 　また、.htaccessファイルで、その設定を上書きできるかもしれません。それも確認すること。 　いずれも、ここで聞いてもわからない内容です。
public_html の外はあなたには、ファイルやディレクトリを作る権限が無いのではないか思います。 これはどうしようもないことなので仕方ないですね。 $dbhome= "../../private/db"; ですけれども、main.cgi と同じところに private って言うディレクトリがあるんですよね？ そうだとしたら $dbhome= "./private/db"; になります。".." （ドットが２つ）というのは親ディレクトリ、"." （ドットが１つ）はカレント（自分自身）のディレクトリです。main.cgiからみて自分と同じ場所なら、ドット１つの "./private/db" と言うようになります。 あと、private/db のディレクトリにも忘れずに権限を設定してくださいね。 動かないときは後は権限の設定があっているかどうかです。マニュアル通りに一致していても動かないときは、権限設定を変えてみてください。この 755 とかの数字が与える権限をさしています。 この 755 は８進数で表されていて、さらにこれをビット（２進数）に分解すると 755　=> 111 101 101 になり、２進数の1のとき許可、0のとき禁止という意味です。 １つの要素は左から読み込み許可（r）、書き込み許可（w）、実行許可（x）となっているので 　7 => 111 => r=1, w=1, x=1　つまり読み込み・書き込み・実行の全てを許可、と言う意味です。 755 のそれぞれについては、一番右端の数字が自分自身（あなた）、 真ん中の数字はグループ（Biglobe内の全てのユーザー）、 右端は全てのユーザー（インターネットでアクセスしてきた全ての人）に与える権利です。 つまり755 は左から順に、 7 => 111 あなた自身は読んだり書いたり実行もできる、 5 => 101 ほかのBIGLOBEユーザーは読んだり実行したりはできるけど書き込みはできない 5 => 101 インターネットでアクセスしてきた全ての人にもBIGLOBEユーザーと同じ権利を与える という設定なのです。あと、実行の権利と言うのは、Windows ではexeファイルやbatファイルが実行できると決まっていますが Webサーバーは Linux や Unix というOSで動いていて、実行できるかどうかを拡張子（.exeとか.batとか.txt等）で識別するという仕組みがないので、この数字で実行できるかどうかを指定するのです。 これが理解できると、CGI設置はそれほど難しくありません。 ディレクトリにファイルを作れるようにするにはディレクトリの書き込み権利が必要なので、必然的に755や644になります。CGIファイルは実行するCGIの本体なので755です。HTMLファイルみたいに読むだけのものは、644（110 100 100、実行権を与えない）、plファイルはCGIの一部ですが直接実行しないので644です。 あともう一点は、CGIファイルの先頭１行目に#!/usr/bin/perl みたいのが書かれていると思います。 これはCGIファイルをどのプログラムが実行するのかという指定なので、BIGLOBEのサーバー設定にあうように変更してください。先頭の#や!の間とか!以降に空白を入れないでくださいね。 これを忘れるといくら権限とか配置をうまくやっても実行できないですから注意しましょう。
http://heteml.jp/support/faq/230.html http://www.aconus.com/~oyaji/faq/apache_cgi3.htm 確認してみてください
簡単にソースを見ただけなので、違ってたらごめんなさい。 rss1 rss2 atom という各サブルーチンでは、@feed の値を順に出力しているようなので、 それらが呼び出される手前、具体的には if($rss1file) { &rss1; } if($rss2file) { &rss2; } if($atomfile) { &atom; } というところの前で、@feed を表示したい順に並べ替えてやれば良いと思います。 my($num,$rno,$sub,$pdate,undef,undef,$nam,$com) = split(/<>/, $feed[$i]); というところからして、4番目の $pdateが日付だと思うので、 @feed = map {$_->[0]} sort {$b->[4] <=> $a->[4] } map {[$_, split /\t/]} @feed; としてやれば良いと思います。 RSS関連は仕様が厳格ではない部分があるので、RSSリーダーによっては、出力順ではなくて 勝手に日付順にするかもしれません。
getenv()を使います。 CGIが起動したとき、サーバーから送られたデータも環境変数に入ってますから、それを呼び出して使います。 　簡単な例は C言語でCGI ( http://pub.cozmixng.org/~rwiki/index.rb?cmd=view;name=C%B8%C0%B8%EC%A4%C7CGI ) 　の中ほどに、 環境変数のおもなものは Enviroment Variable and FORM,COOKIE ( http://hpcgi1.nifty.com/Iruka/ENV_FORM.cgi ) 詳細は CGIプログラムに渡す環境変数 ( http://www.hitachi.co.jp/Prod/comp/soft1/manual/pc/d3M1501/EM150111.HTM ) 　とか
直感での即答。回答間違い＆不足分あったらごめんなさい。 （誤）$mail_mes=$mail_name."様\nお問合せありがとうございました。以下の内容を受け付けました。\n".$toi; （正？）$mail_mes=$mail_name."様\nお問合せありがとうございました。以下の内容を受け付けました。\n".$toiawase; なのでは？（後半の変数誤り） メールの本文に問い合わせ内容が連結されていないようです。
templateディレクトリ(フォルダ)の中のtop.htmlに自動ジャンプするmetaタグを入れてみてはいかがでしょうか？ ジャンプするmetaタグ http://www.tagindex.com/html_tag/page/meta_refresh_jump.html 移動設定時間を0にして自分の運営しているYomi-Searchを利用したサイトで試してみたところ、一瞬表示されるもののちゃんとジャンプできました。 急ぎでやったんで、使っていないカテゴリ一覧のタグを消していませんが、それらを消しておくと目障りなくジャンプできるかと思います。 それとサーチページからindexに戻るため管理室で設定し忘れずに。
ラインをのばすために宣伝用ホームページを支給したいけど プログラムができない。市販のものは、報酬プランまで入ってるので高額です。 ３０万円ぐらいでしょうか。 必要なものは？ １．ＩＤ付きのホームページ ２．ＨＰ使用者のリスト ３．ＨＰ使用の申請フォーム ４．ＩＤ付き資料請求フォーム ５．宣伝者を認識しての資料送付 ６．資料文の変更が簡単にできる ７．各フォームのカスタマイズができる
HTMLの先頭に、 <html> <head> <title>....</title> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> </head> と言うのがあれば、 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> のutf-8とか言うところを、HTML自身のエンコード形式にしてください。 ないなら追加してください。 コードをUTF-8で書いているなら上のまま（小文字です）。 Windowsのメモ帳とかで作っているなら、 <meta http-equiv="Content-Type" content="text/html; charset=shift_jis" /> です。shift_jis は全て小文字で書いてくださいね。_ はアンダーラインです。 あと、サーバーは大抵EUC-JPだったりもします。本来はサーバーにあわせるのがベターです。 日本語は文字種が多様なので現在はUTF-8が主流です。この部分はブラウザとCGIプログラムが識別する部分なのですが、ブラウザはほとんどのエンコードに対応しているので、CGIが解析するエンコード形式にあわせてください。
http://kirishima.cc/patio/ 改造版をお使いください。
>それ以外のファイルを他においています。 原因はどう考えてもコレ >cgiしか入れられないので、 これってHTMLや画像ファイルがNGって事ですよね？ スタイルシートも駄目なのだろうか・・・？ とりあえずスタイルシート（uploader.css）以外のファイルを同一ディレクトリにアップして様子を見てみましょう。それで多分動くと思います。 動いたら uploader.cgi のソースを検索して、HTMLのヘッダ部分の（多分）ヒアドキュメントを探し、スタイルシートへのパスを変更すれば完了。
IE8は、HTMLのフォーマット形式が変わりました。 基本的には XML1.1 形式に全て準拠してください。 Googleのクローラもそうなんですが、タグの入れ違いも間違いないようにします。 IE7だと以下はOKですが、 <b><a href="...">...</b></a> IE8は <b><a href="...">...</a></b> です。 また、<b>はそのままでもよいですが、<strong>が望ましい。 imgタグなどは、XML みたいに <img src="..." /> で閉じるようにします。 <a href=/web/pub/link/> のようなものも <a href="/web/pub/link/"> にしてください。 <font>等のタグも、<span style="font-...">にするとかです。 <div></DiV>みたいなものも前はOKでしたが、統一しないとダメです。 HTMLの先頭に、<!DOC-TYPE ...> みたいなのも入れるようにしてください。 万人向けではないですが、自分が見るだけだったら、IE8の開発者ツール(F12)というのでIE8互換モードとかIE7互換とかがあるのでIE7にしておくとよいです。
それはまったく正常ですよ。 QUERY_STRINGで値を渡すときは、URLに使えない文字はURLエンコードしなければなりませんので、 mode=find&word　という文字列は、mode%3Dfind%26word になるのが正しい動作です。 　ためしに、googleで検索欄に、mode=find&word　と入れれば、q=mode%3Dfind%26word という文字がURL欄にあるはず。 QUERY_STRING が、patio.cgi?mode=find&word=であって欲しいなら・・・逆に考えるのはおかしいが・・・・ [name]=[value]&[name]=[value]となるためには mode="find" word="" ですから、 <input type="hidden" name="mode" value="find"> <input type="text" name="word" value="" size="25"> とかになります。 　なお、QUERY_STRINGでデータ保渡す場合、 <FORM action="patio.cgi?" method="get"> ではなくて、 <FORM action="patio.cgi" method="get"> です。標準入力で渡すなら <FORM action="patio.cgi?" method="post"> です。
直接の回答ではありませんが、こんなサービスを使ったほうが早いのでは？ http://kanji.kodama.com/ http://www.densuke.biz/
追記。 ＞print "<H2 align=\"center\">アンケートにご協力誠にありがとうございました！</H2>\n"; このprint文は、何を出力しますか？ <H2 align="center">アンケートにご協力誠にありがとうございました！</H2>＋「改行」 を出力しますね？ この時「"center"」を出力している部分は「\"center\"」になっていますね？ これが「"をエスケープしている部分」です。 「center」の両端の「"」は「文字列を括る特殊文字」ではなく「他の文字と同様にprint文で出力される、単なる文字」になっています。
それだと、PCへの振り分けが記述されてませんよね・・・ 確認は取ってないので動かない可能性もありますが、以下のような感じで書けば振り分け出来ると思いますよ。 <?php $agent = $_SERVER['HTTP_USER_AGENT']; if(preg_match("/^DoCoMo/i", $agent)){ //docomo header("Location: http://www,xx.com/cgi/m_read.cgi?no=1"); }else if(preg_match("/^(J\-PHONE|Vodafone|MOT\-[CV]|SoftBank)/i", $agent)){ //SoftBank header("Location: http://www,xx.com/cgi/m_read.cgi?no=1"); }else if(preg_match("/^KDDI\-/i", $agent) || preg_match("/UP\.Browser/i", $agent)){ //au header("Location: http://www,xx.com/cgi/m_read.cgi?no=1"); }else{ //PC header("Location: http://www,xx.com/cgi/read.cgi?no=1"); } ?>
＞要求ヘッダというのは、​http://www.studyinghttp.net/cookies​ ＞このサイトにあるような形のものでしょうか。 　これは、サーバーからの応答ヘッダです。 　確認は、fie\refox3.57 + LiveHTTP hedarsが分かりやすいです。 　現状、firefox3.6には未対応のようです。 ＞要求ヘッダにcookieがない状況を作り出したり、自分の使っているブラウザにあるかどうかを確認する方法はありますか？ 　これもFirefoxが楽です。ツール→プライバシー→Cookieで、サイトごとのCookieの確認や削除ができます。 ＞大変恐縮ですが、Cookieを発行して、再読み込みをするには、どのように書き換えればよいでしょうか。 　ブラウザからの要求ヘッダに、 Cookie: ************************** 　がないとき、簡単なHTMLを Set-Cookie付で発行します。HTML自体はrefreshを短時間で設定すれば良いですね。 　再要求の要求か否かは、QUERY_STRINGかHTTP REFERERなどで判別してください。 ＞(2)文字化けについてですが、&jcode::convert(\$messagen,'jis'); ＞のような変換を行うようにしました。これで正しく回避できているでしょうか？ 　そうです。 　当然、ヘッダの該当部分も Content-Type: text/plain; charset=ISO-2022-JP 　に変更してください。 また、メッセージタイトルに日本語が含まれる場合はBase64エンコードが必要です。 Subject: =?ISO-2022-JP?B?[この部分Base64エンコードされた文字列]=?= 　詳しくは適当なメールフォームCGIのマニュアルをご覧ください。
CPANを検索したらこんなのがありました。どうでしょうか？ MySQL::Backup http://search.cpan.org/~dmitry/MySQL-Backup-0.04/lib/MySQL/Backup.pm Perlで何かしたいと思ったらまずはCPANを探してみるのがいいかもしれません。
.../cgi-bin/dictionary092b/html/tdisjs.js .../cgi-bin/dictionary092b/html/tdisty.css の 2つのファイルのアクセス権を見直してください。 アクセス権に問題ないようでしたら、cgi-bin ディレクトリの 下に設置したプログラム以外のファイルは読み出しを禁止して いるのかもしれませんので、cgi-bin 以外のディレクトリに 移動させてみてはいかがでしょうか。
Wordpress http://ja.wordpress.org/ Drupal http://drupal.org/ ライセンスは両方GPLです。 GPLを一言で言えば、 自由に使用、改変が可能で、その代わりに、改変した物を誰かが見たいと言えば自由に見られ、さらに改変して再配布することを許す。 wikipedia コンテンツマネージメントシステム http://ja.wikipedia.org/wiki/%E3%82%B3%E3%83%B3%E3%83%86%E3%83%B3%E3%83%84%E3%83%9E%E3%83%8D%E3%83%BC%E3%82%B8%E3%83%A1%E3%83%B3%E3%83%88%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0 wikipedia ブログ http://ja.wikipedia.org/wiki/Weblog これらのページに、多くのCMS/ブログツールにリンクが張られていますので、その中からGPLと書かれている物を選べば、まず問題はないと思います。
selected属性を追記すればできます <option value="3" $check3 selected>C</option> print "<a href=\"./rental.cgi\" onClick=\"henkyaku('$pass1')\">" ."ログインページへ戻る"."</a>"; も修正ですね
＞拡張子以外に、上記のように文法でも違いがあると考えていいのでしょうか？ 一言で言えばなにもかも（というか前提というか、お話というか）が違います。 http://okwave.jp/qa/q1505052.html のようにPHPは言語の名前だからCGIとは比較すること自体おかしい、と言ってしまえばそうなのですが、出力についてどうなのかについて、もう少し書いておきます。 CGIはWebサーバーでスクリプト言語を実行するための仕組みです。言語じゃないです。 スクリプト言語を実行するにはスクリプト言語の実行プログラム（あるいはモジュール）が必要です。 CGIでは最初にその実行プログラムのパスを指定することで、その実行プログラムに書いたスクリプトを実行してもらいます。よって言語に対応した実行プログラムさえ用意すれば、任意の言語を実行することができるわけです(もちろんPHPでもいい。cで書いてビルドしておけば直接それを指定する事もできる)。 その結果としてWebブラウザへ出力がされることになります。 ではPHPで出力される場合はどうかといえば、最初からなにもしないでもPHP実行プログラムで、PHPスクリプトが実行される、というだけです。 perlでいうなら、コマンドプロンプトで"perl hoge.pl"とするのと同じようなことです。
どのような動作をするスクリプトなのか解らないのでなんとも言えないですね。HTMLはテンプレートを読み込んで出力するのか？それともスクリプト内に直書きされているのでしょうか？ 前者ならテンプレートの書き換えで任意のクラスを設定してやれば良いでしょうし、後者ならスクリプトの書き換えが必要でしょう。 現状のままで何も特殊なマークアップをされていない td 要素群に異なるスタイルを指定するのは不可能です。
＞このセッション管理はcgiなどのアプリでチェック・認証しないといけないのでしょうか？ 　いえ、これはサーバー側で行います。 CGI RESCUE - ネットサーフレスキューＷｅｂ裏技 ( http://www.rescue.ne.jp/ ) さんの、 　→ネットサーフレスキュー[Ｗｅｂ裏技] - 技の裏 - CGI-BBS - 基本認証 ( http://www.rescue.ne.jp/CGI-BBS/auth/ ) 　あたりをよく読んでください。 　十数年来、ここで勉強させていただきました。
CGI というのは入出力ができる言語であれば何でも作成できます。 例えシェルであっても、Pythonであっても、Rubyであっても、Javaであっても。 で、まずC/C++のメリットとデメリットを理解されていますか？ 大胆ながら挙げてみますとこんな感じでしょうか。 メリット： - コンパイルしてから実行するため動作が高速 - OSレベルの細かいところまで制御可能 デメリット： - 文字列の扱いが面倒 - コンパイルが必要 - セキュリティホールを生みやすい CGIの場合はフォームに入力された値を解析するところから 始まるので、上記のうち「文字列の扱いが面倒」というのは 重大な欠点となります。また、メモリの細部まで制御できる ため、「セキュリティホールを生みやすい」(特にバッファ オーバーフロー)という非常に重大な欠点を持っています。 なので、高度なパフォーマンスを要求される場合を除いて C/C++が使われることはあまりないと言ってよいと思います。 PHP と Perl については、Web のみを勉強の目的とするのであれば どちらでもよいと思います。ただし、OS (例えばLinux) もあわせて 勉強したいというのであれば、Web 以外のところでも使われることが 多い Perl をお勧めします。 余談ですが、PHP は CGI の言語として使用されることは少なく、 多くの場合は Apache などの Web サーバにモジュールとして 組み込むことによって使用されます。ですから、CGI に特化したい という場合も Perl をお勧めします。
私がPerlでプログラムを書く場合は、 ソースに色を付けてくれるエディタを使用しています。 （Windowsの場合は、Tera Padやサクラエディタなどフリーのエディタがたくさんあります。メモ帳は基本使いません。） （Macの場合は、miというエディタを使用しています） ちなみにeclipseにもPerlのプラグインがありますので、それをインストールすれば、開発は可能です。 （私は、エディタで開発するのに慣れてしまっていたので、馴染みづらかったですが。。。）
画像を置けない場所に画像を置いているか 画像のURL指定が間違っているか の単純ミスをまず疑う。 　画像が表示されるであろう場所で右クリックして「プロパティ」ないし「画像だけを表示で」画像のURLを確認した結果は？
(略) RewriteRule ^$ /mobile/index.html [R,L] RewriteRule ^$ /pc/index.html [R] Rオプションは必要に応じて。 [R=301]かアクセス拒否の方がいいんじゃないかな？っぽい書き方な気もしますが。
こんばんわ^^ 問題点(1)： こちらは下記の部分を修正しましょう。 if($ref[5]) eq "貸出中"){ print "<a href=\"#\" onClick=\"dialog('本「" . $ref[1] . "」を返しますか？')\">" . $ref[5] . "</a>"; } else{ print "<a href=\"#\" onClick=\"dialog('本「" . $ref[1] . "」を借りますか？')\">" . $ref[5] . "</a>"; } 修正後 if($ref[5]) eq "貸出中"){ if($ref[7]) eq $ユーザーID){ print "<a href=\"#\" onClick=\"dialog('本「" . $ref[1] . "」を返しますか？')\">" . $ref[5] . "</a>"; } else{ print "<a href=\"#\" onClick=\"javascript:alert('貸出中です')\">" . $ref[5] . "</a>"; } } else{ print "<a href=\"#\" onClick=\"dialog('本「" . $ref[1] . "」を借りますか？')\">" . $ref[5] . "</a>"; } 問題点(2)： こちらはヒントを出しますので自力でやってみてください。 サブミット前の画面でセッション変数【reload_flug】= "off" を代入しておきます。 サブミット後のDB更新の際に　reload_flugがoffだったらreload_flugをonにしてDB更新、onだったら更新しない。 頑張ってみてください♪
CGIとPHPはそもそもの動作する仕組みが違うため、そのままではできません。 一応、CGIの拡張子をPHPとして実行することは可能ですが、その場合はCGIとしては機能しません。 PHPは仕組みが違うと書きましたが、PHPにはCGIモードやコンソールモードといったものもあります。 たとえば、CGIモードの場合、perlのようにCGIの拡張子にして、ファイルの先頭部分に#!/usr/local/bin/phpのようにphpのコマンドラインのパスを入れてあげればCGIとして動作するはずです。 また、Perlやそのほかの言語で作成したCGIに.phpファイルのようなものを読み込みたい場合、少し手間ですが、コマンドラインのphpに.phpファイルを引数にして渡してあげれば、phpとして動作した結果のHTMLを受け取ることができるはずです。 はずばっかりですが、実際には、そういう動作は用意されているのは知っていますが、どう考えても普通にphpやperlを実行した方が早いので私はやったことはありません。 そもそも、そんなに言語をまぜこぜにする利点はあまりありませんので・・・苦労の方が多いですよ。
トップページもCGIに任せずHTMLにしてみてください。 リンクの手直しなど、ちょっと管理が大変になりますが･･･ CGIは新規登録とカテゴリページ出力のためだけに使用してみては？
画像を見る限りでの回答。 cgi-binディレクトリを作成し、中にアップロードしたとのことですが、 画像のアドレスバーにcgi-binの文字が見当たりません。(見間違いならご容赦を。） ルートディレクトリに残っているものにアクセスしてしまっているのでしょうかね？ /cgi-bin/text03.cgi のようにアップしてある場合のアドレスは （略）.co.jp/cgi-bin/text03.cgi ディレクトリは普段お使いのOSにもフォルダという概念でありますので、そのイメージで。
むしろ最近は関数に&をつけない方が主流なようです。唯一&を付け るのが、コードリファレンスを作るときです。省略するときは、既に 書かれているようにシンボリックリファレンスを使います。 my $code_ref = \&func2; # コードリファレンスを作る func1( 5, $code_ref ); # コードリファレンスを渡す sub func1 { my ( $var, $code_ref ) = @_; # コードリファレンスを実体化(デリファレンスという)し # 元の関数を呼び出す my $sum = $code_ref->($var); print $sum, $/; } sub func2 { return $_[0] + 10; }
CGIではなく、HTML側の記述です。 <input name="***"> を <select name="***"><option value="">AAAに変えればよいだけです。 【参考サイト】 Forms in HTML documents (ja) 　 http://www.asahi-net.or.jp/%7Esd5a-ucd/rec-html401j/interact/forms.html
これだけではわからないですが……。 W3Cの評価というのは， SITE: The W#C Markup Validation Service http://validator.w3.org/ での検証結果の事でしょうか。 これであるならば，英語ではあるものの， ・行 ・桁 ・理由 ・場所 ・説明 (無い事もある) が表示されますから，それを参考に修正するといいと思います。 英語ではわからない場合は，Another HTML-lintで検証してみるのもよいでしょう。 SITE: Another HTML-lint gateway http://htmllint.itc.keio.ac.jp/htmllint/htmllint.html こちらで文法上の問題をクリアしたならば，おそらくW3Cの検証器でもエラーになる事はないと思います。
No1ですが、管理者側に送られてくるメールと同一のものを送信者にも送ればいいってことですかね。 であれば、4行目に送信者のアドレスが入っている変数を入れればいけるはずです。 変更前） $head .="To: $mailto\n"; 変更後） $head .="To: $mailto, $送信者アドレスの変数\n"; まぁこれだと管理者のアドレスもバレちゃうので、できれば送信者アドレスだけをTo:に入れて、管理者アドレスはBCc:あたりに入れる方が見栄えは良いかもしれません。
decode関数でPOSTフォームを読み込んでいて、STDINのポインタが進んでいるのが原因ではないかと思います。 以下のようにseek関数でこれを元に戻せばうまくいくのではないでしょうか？ my @kanji_names = CGI->new->param('kanji'); ↓　　　↓　　　　↓追加 seek STDIN, 0, 0; my @kanji_names = CGI->new->param('kanji');
ついでに、 \n NewLine　　LF(Line Feed:行頭へ戻る) \r Return　　 CR(Carriage Return:次の行へ) 　WindowsではCR+LF[\x0D\x0A]、Mac OSではCR[\x0D]、UNIXではLF[\x0A]を使います。厳密にはもっとやややこしいけど、PerlでCGIを書くときはこれでよい。
仕様の詳細が書かれていないので、不明な点は想像で書いてみました。 新規ファイルを作成し、以下のように末尾に漢字名が入るようにしました。 yamada<>100<>山田 yoshida<>96<>吉田 ueda<>76<>上田 sakurai<>77<>桜井 以下、そのコードです。 ファイル名は、質問者さんの環境に合わせて適宜変えてください。 use CGI; use Fcntl qw(:flock); my $org_file = 'score.txt'; # オリジナルファイル（漢字名なし） my $new_file = 'new_score.txt'; # 新規作成ファイル（末尾に漢字名あり） my @students; open my $fh, -f $new_file ? $new_file : $org_file or die $!; flock $fh, LOCK_SH; while ( my $line = <$fh> ) { chomp $line; my %data; @data{ qw(name score kanji) } = split /<>/, $line, -1; push @students, \%data; } close $fh; my @kanji_names = CGI->new->param('kanji'); if (@kanji_names) { open my $out, '>', $new_file or die $!; flock $out, LOCK_EX; for my $i ( 0..$#students ) { print {$out} "$students[$i]{name}<>$students[$i]{score}<>$kanji_names[$i]\n"; $students[$i]{kanji} = $kanji_names[$i]; } close $out; } print "Content-Type: text/html\n\n"; print qq{<form method="post"><p>\n}; for my $student (@students) { print qq{$student->{name}<input type="text" name="kanji" value="$student->{kanji}">$student->{score}<br>\n}; } print q{<input type="submit" value="送信"></p></form>};
regist_ys.cgiをメモ帳などのテキストエディタで開くと「リンク切れ報告フォーム」の編集が出来ます。 (9)リンク切れ報告フォーム(&no_link) というところです。 (当方改造していますので、何行目と答えることが出来ません) $mes=<<"EOM"; ～ EOM 内は基本的にHTMLタグなので お好きなところにTOPページへのリンクをつければいいのではないでしょうか？ 「前の画面に戻る」ボタンの下辺りに入れてみるのも良いでしょう。
お使いのスクリプトでは、質問者さんの例から、同じname属性の場合、単純に連結しているように思えます。 そこで、間にvalueが ”-” のhidden属性を入れてみるのはいかがでしょうか？ 所望の結果は得られますでしょうか？ 数値入力制限というJavaScriptもおまけで付けてみました＾＾ <script type="text/javascript"> function check_zip(zip_input, digits) { var code = zip_input.value; var len = code.length; if ( !code.charAt(len - 1).match(/^\d$/) || len > digits ) { code = zip_input.value = code.substr(0, len - 1); } if ( digits == 3 && code.length == 3 ) { document.getElementsByName("zip")[2].focus(); } } </script> <input name="zip" type="text" onkeyup="check_zip(this, 3)"><input type="hidden" name="zip" value="-">-<input name="zip" type="text" onkeyup="check_zip(this, 4)">
selectならこんな感じになると思います。 <script type="text/javascript"> <!-- onload = function() { var select = document.getElementById("year"); var thisYear = (new Date()).getFullYear(); var years = [thisYear - 1, thisYear, thisYear + 1]; for ( var i in years ) { var option = document.createElement("option"); option.value = years[i]; option.appendChild( document.createTextNode(years[i]) ); select.appendChild(option); } } --> </script> <form> <p> <select id="year"> </select> </p> </form>
あなたが素人だったら一番の対策方法は、これが一番簡単、現実的、超お勧め。 (1)スパムがきだしたらメールアドレスを変える。 あなたが改造できる人だったら考えられる対策方法は、 (1)メールフォームのURLが検索エンジンに引っかからないように、HTMLにボット拒否を記述する。 (2)URLでpostmail名を使用しない。 (3)ログを保存して、一定時間内の連続投稿を拒否する。 (4)ログを保存して、連続投稿してきたIPを拒否する。 (5)ボットに読まれないようにjavascriptに改造する。 (6)postmailをやめてflashのメールフォームを採用する。 (7)postmailをやめてsession付きのメールフォームを採用する。 (8)postmailをやめて画像認証機能付きのメールフォームを採用する。 といったところ。 postmailだったら(1)～(4)までできると思うよ。 個人的には、postmailはお勧めできない。セキュリティ対策がほとんどなされていない性善説に立ったメールフォームだから。 今ならメールフォームもフリーで色々いいのがあるから検索してごらん。 検索キーワードは、 cgi メールフォーム flash メールフォーム など
何が起きているのかを調べるのが先決でしょうね。 メールが送られない場合はエラーが戻ると思うのですが、そのエラーをどこに戻すようにしているか。 それを管理可能なメールアドレスに戻るように設定して、どんなエラーになっているかを確認してみてください。 メールログが閲覧可能ならばそれをチェックですね。
open(FH,"member.txt");・・・(1) while(<FH>){・・・・・・・・(2) 　if(/^(\d+),/&&$1!=$flg){・・・(3) 　　$famly.=(split(/,|\n/))[1].',';・・・(4) 　} 　$flg=$1;・・・(5) } close FH; (1)member.txtファイルを、ファイルハンドル「FH」に結び付けて読み込みモードでオープンする (2)ファイルハンドル「FH」から1行ずつ読み込む (3)行頭に数値、続いてコンマがあったら、（条件1） 　　数値の部分は()で括ってあるので特殊変数 $1 に代入される 　　$1値と、変数$flg値を比較して違っていたら（条件2） 　条件1合致、かつ（&&）条件2合致ならば (4)変数$famly に、行の文字列をコンマか改行文字で分割した2番目の要素にコンマを付けた文字列を連結する (5)変数$flg に 特殊変数$1 の値を代入する (3)(4)は、 　chomp;・・・改行文字を削除 　if(/^(\d+),(.+)/&&$1!=$flg){ 　　$famly.=$2.','; 　} としても良さそうですが、これだと、データが文字コードShift_JISで特定の文字を含むときエラーになるから注意！
サブルーチン decode の 　$in{'code'} =~ s/\r\n//g; 　$in{'code'} =~ s/\r//g; 　$in{'code'} =~ s/\n//g; 　$in{'msg'} =~ s/\r\n//g; 　$in{'msg'} =~ s/\r//g; 　$in{'msg'} =~ s/\n//g; ですべての改行文字を削除していますから、ここを 　$in{'code'} =~ s/\r\n/<br>/g; 　$in{'code'} =~ s/\r/<br>/g; 　$in{'code'} =~ s/\n/<br>/g; 　$in{'msg'} =~ s/\r\n/<br>/g; 　$in{'msg'} =~ s/\r/<br>/g; 　$in{'msg'} =~ s/\n/<br>/g; にすれば、とりあえずご希望は叶うでしょう。
上はHeartRails Capture　http://capture.heartrails.com/、下はMozShot　http://mozshot.nemui.org/を利用したサムネイルを使っているようです。 PHP版ならあるみたいですが、当方PHPは無勉強でよく分かりません。 http://yomiphp-mod.sweet82.com/modules/d3forum/index.php?topic_id=152#post_id597 Perlでも改造スキルがある程度あるなら、ソースを見れば出来そうな気もします。。。 Riseさんhttp://www.w-art.org/のCSS Yomi-searchが一応サムネイル表示が出来るみたいです。
「パーミッションの設定やファイルのアップロードは間違いなくできて」とは書かれてますが、動作環境はＯＫなのですか？ 　具体的なエラー内容をBIGIN{}で補足してみましたか？ #/usr/local/bin/perl BEGIN{ close(STDERR); open(STDERR,">>./error.log"); } END{ close(STDERR); } ここからは今のまま。 実行後FTPでできているはずのerror.logをダウンロードしてその内容をチェック
以下のような変更で所望の結果は得られるでしょうか？ use CGI; 　　↓ use CGI qw(escapeHTML); $Name4 = $q->param('txt'); 　　↓ $Name4 = $q->param('txt'); $Name4 =~ s/\n/\0/g; @BOX = split(/,/ ,$FILE_FOR[$Y - 1]); 　　↓ @BOX = split(/,/ ,$FILE_FOR[$Y - 1]); for my $item (@BOX) { $item = escapeHTML $item; $item =~ s/\0/<br>/g; }
たぶん、質問者さんは http と ping(ICMP) がごっちゃになっているようで す。 ところで、 > ブログの記事投稿時に下記cgiにping送信して というのは、どうやって実現していますか？ ブログでCGIが動いていて、そ れを使って、別のサーバに ping を送っているということでしょうか ?
初歩的なことですが、 　フォルダーオプションで、「登録されているファイルの拡張子は表示しない」のチェックを外していないのでは？？ 　Windowsｋおせっかいで、アプリケーションに関連付けられていると「登録されているファイルの拡張子は表示しない」となってしまう。基本的にこれは無用なのでいつも拡張子は見えるようにしておきましょう。 「名前をtelnet.cgiとして保存致しました。」 つもりが 「名前をtelnet.cgirtfとして保存された。」 とだけではないかと 　telnet.cgiは、私もtelnetの使えないサーバーでシェルを使うために作ってますが、初心者向きではありません。 添付ファイルは私の使っているもの(自作)
GETとPOSTの違いを理解されているとして。 ★　もちろん、hiddenで渡せば済むという話ではないですよね。 CGI::new()では、POSTで要求された場合のQUERY_STRINGSは無視されるはず。マニュアルをチェックすること 　そこで、 cgi.params.merge!(CGI::parse(cgi.query_string)){|key, self_val, other_val| self_val } name = cgi.params['name'] 　などを一行追加すればよい。それともCGI::newを使わない。 たとえば、こんなふうに 　http://hpcgi1.nifty.com.local/ENV_FORM.cgi?ref=5
CGIを確認しましたが、自分で実現するのであれば、 この辺りを変更されるのが一番簡単かと思います。 ＝＝＝＝ # メールアドレスのチェック if($msghash{'FROMADDR'} eq ""){ if($msghash{'FROMADDRCK'} ne 'IGNORE'){ &show_err("メールアドレスが入力されていません。"); exit; }else{ $msghash{'FROMADDRCK'} = "nobody"; } } ＝＝＝＝ 例えば、こういう処理を書き加えてみるとか。 if ($msghash{'FROMADDR'} =~ m/abcd.ne.jp/) { &show_err("abcd.ne.jpのアドレスは登録できません。"); exit; } これを書き加えれば、「abcd.ne.jp」という文字列を含む メールアドレスでは登録できなくなります。 メンテナンス性を考えれば、他のリストから文字を読み込んで 比較していったりという方が良いでしょうね。
下記スクリプトを　up.cgi　の名前で設置します 画像のアップロードだけではなく動画でも音楽でもなんでもアップロードできます スクリプトを簡略化した為にパスワード制限などは行っていません 取り扱いには注意してください #!/usr/bin/perl #----------------------設定---------------------- # ＣＧＩファイル名 $cgi = "up.cgi";# このスクリプトの名前 #----------------------ここまで---------------------- use CGI; $query = new CGI; $UPfire = $query->upload('upfire'); if(!$UPfire){ print <<"HTML"; <form action="$cgi" method="post" enctype="multipart/form-data"> <input type="file" name="upfire"> <input type="submit" value="アップロード"> HTML exit; }else{ @names = split(/\\/,$UPfire); $firename = $names[$#names]; open (OUT,">$firename"); binmode (OUT); while(read($UPfire, $buffer, 1024)){ print OUT $buffer; } close (OUT); print <<"HTML"; アップロード完了 HTML exit; }
mimew.pl は導入されていますか。 http://www.cc.rim.or.jp/~ikuta/mime_pls/document.html
"ー"はSJISでメタ文字"["を含むためのエラーのようです。 foreach中はむしろeucやutf8のような、問題を起こさない文字コードに変換して処理をさせ、printする直前でsjis等に戻してやるのが良いと思いますが、 それ以前にコードの書き方そのものが旧世紀の負の遺産らしいです。 以下のコードにするだけで片付くかもしれません。 #!/usr/bin/perl -T use strict; use warnings; use CGI; my $q = CGI->new(); my $name = $q->param('name'); my $value = $q->param('value'); print "$name\n"; print "$value\n"; 詳しくは参考URLをご覧下さい。
初心者の方には多少、難しいかも。 http://sakura-editor.sourceforge.net/ 貴方の環境が不明ですので、上記の公式サイトを参考にして下さい。
http://okwave.jp/qa4506849.html テキストの掲示板だけで成り立ってるのは数が少ないと思いますが、 OKWaveもその１つですね。 pixivを「画像掲示板」、ニコ動やyoutubeを「動画掲示板」という表現にすれば、そういうところはかなり多いと思います。 もっとも、そういう転送量の多いところは、純粋な掲示板だけでは運営できてないようですが。 価格.comのように、○○情報の併設として掲示板（通常はその「○○情報」に関する話題専用）がある方が多いと思います。
CGIでもできますが、JavaScriptの例があるのでそれを活用されてみてはいかがで しょうか？ データを別ファイルに記述すれば管理しやすいのではないかと思い、JSON形式の ファイルを用意してAjaxで読み込むように作ってみました。 まず以下のようなデータファイルを作ってください。 ＜ファイル : data.json＞ { "time": ["昨日", "今日", "明日"], "endphrase": ["した。", "することになっている。", "する予定。"], "people": ["私", "友達", "見知らぬ人"], "where": ["家", "トイレ", "学校"], "what": ["うんこ", "野球拳", "キス"] } そして、HTMLファイルは以下です。 <HTML> <HEAD> <TITLE>いつどこゲーム！？</TITLE> <SCRIPT language="JavaScript"> <!-- //-- ご自分の環境に合わせて変更してください -- data_file = "data.json" // JSONデータを記述したファイル名 //-------------------------------------------- function createHttpRequest() { if(window.XMLHttpRequest){ return new XMLHttpRequest() } else if(window.ActiveXObject){ try { return new ActiveXObject('Msxml2.XMLHTTP') } catch (e) { try { return new ActiveXObject('Microsoft.XMLHTTP') } catch (e2) { return null } } } else { return null } } function make_par(){ var data var http_request = createHttpRequest() http_request.open( "GET", data_file, true ) http_request.onreadystatechange = function () { if ( http_request.readyState == 4 ) { if ( http_request.status == 200 ) { try { data = eval( "(" + http_request.responseText + ")" ) } catch (e) { alert("JSONデータの形式に問題があります") } show(data) } else { alert("ファイルに問題があります") } } } http_request.send(null) } function show(data) { var day_num = Math.floor(Math.random()*data.time.length) //いつ？ var peo_num = Math.floor(Math.random()*data.people.length) //誰と？ var peo2_num //誰が？ while ( (peo2_num = Math.floor(Math.random()*data.people.length)) == peo_num ) {} var whe_num = Math.floor(Math.random()*data.where.length) //どこで？ var do_num = Math.floor(Math.random()*data.what.length) //どんなことを？ text.innerText = "「" + data.time[day_num] + "、" + data.people[peo_num] + "と" + data.people[peo2_num] + "は" + data.where[whe_num] + "で" + data.what[do_num] + "を" + data.endphrase[day_num] + "」"; } //--> </SCRIPT> </HEAD> <BODY onLoad="make_par()"> <!--表示部分--> <SPAN id="text">　</SPAN> <!--ここまで--> </BODY> </HTML>
そのままでも、もしファイルがなければ新たに作成してくれるはずですが。 どうしてもファイル存在チェックをしたければ「ファイルテスト演算子」で検索してみてください。
私もCGIの補助機能としてJavaScriptを少し使う程度でそんなに詳しくはないのですが、 質問に回答したいと思います。 ＞１）action="kakunin.cgi"があるのになぜonClickで再度kakunin.cgiを指定する必要 ＞があるのですか ”kakunin.cgi”の中のJavaScriptでopenerというのを使っていますが、このopenerは、 親ウィンドウのことを示しています。 質問者さんの方法だと、親ウィンドウがないため「window.opener.documentはnullまた はオブジェクトではありません」という警告が出たのだと思います。 親ウィンドウはopenというメソッドによって子ウィンドウを生成することができます。 生成された子ウィンドウは、openerによって親ウィンドウを参照することができます。 したがって、openerを使うのであれば、下記のようにopenメソッドによって子ウィンド ウを生成する必要があるという理由です。 onClick="window.open('kakunin.cgi');return false;" ＞２）フォームをクリックすると、「ウインドウは表示中のwebページにより閉じられよ ＞うとしています------」の表示がでます＞が、これが表示しないようにするにはどう ＞すればよいですか 下記のようにすれば、警告なしで閉じるようにはならないでしょうか？ <input type="submit" value="確認" onClick="window.opener='main';window.open('kakunin.cgi');return false;"> ”kakunin.cgi”に関してですが、フォームは質問者さんが書いたままで（onClickを書 かない）、通常はJavaScriptは使わずに以下のよう書きます。 use CGI; my $q = new CGI; my $email = $q->param('mail'); print<<END; Content-type: text/html <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"> <html> <head><title>確認</title> </head> <body> <form name="kuser" action="soushin.cgi" method="post"> <input TYPE="text" NAME="kmail" value =$email> <p> <input name="button" type="submit" value="送信"> </p></form> </body> </html> END JavaScriptは通常、内容確認で補助的に使ったりします。 例えば、質問者さんのフォームのHTMLでは以下のようにして、内容確認ダイアログを 出したりします。 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> <html> <head> <meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS"> <title>フォーム</title> <script type="text/javascript"> <!-- function confirm_submit(message, form) { if(confirm(message)) { form.submit() } } //--> </script> </head> <body> <form name="user" action="kakunin.cgi" onSubmit="confirm_submit('メールは「' + document.all.user.mail.value + '」でよろしいですか？', this);return false;" method="post"> <p>メール　 <input name="mail" type="text" value="" size="30"> 　　　　　　　　　　　　　　　　 　　　 <input type="submit" value="確認"> <input type="reset"" value="リセット"> </form> </td> <td width="148">&nbsp;</td> </tr> </table> </body> </html>
application/x-stuffit でいいと思います。 もしくはアップロードされるデータのヘッダを見てみて下さい。 .sitと区別する必要があればx-stuffit-xなど、適当な区別できる名前にしても良いと思います。 x-と付いている物はIANAやRFCに登録されていない私的な物という意味で、 実質「その他」と同じ意味です。 余談ですが、Macのよく使われる圧縮フォーマットは他にも.dmgや.tar.gz（UNIX系の標準）などもありますし、 Windowsの日本で標準の.lzhなどもあります。
逆の発想ですが、行の末尾にカンマを付けてはどうでしょうか。 ... while(my $line = $io->getline) { $line .= ',' if substr($line, -1) ne ','; push @ids, (split(/,/, $line))[0]; ...
小窓を開くことは必須条件なのでしょうか？ CGIだけ実行して結果を棄て、まどをそのまま閉じるのならAjaxを使えば良いと思います。 プログラム例： <script language="javascript"> <!-- // ------------------------------------- // ------------------------------------- function exit(){ var xObj = createHTTPRequest(); var fName = "http://etwas/cgi/test.cgi"; var sVoid = ''; xObj.onreadystatechange = function(){ if (xObj.readyState == 4) { if (xObj.status == 200) { sVoid = xObj.responseText; } else { sVoid = "通信に失敗"; } } else { sVoid = "通信中"; } } xObj.open("GET", fName, true); xObj.send(null); } // ------------------------------------- function createHTTPRequest(){ if(window.ActiveXObject && !window.XMLHttpRequest){ try{ return (new ActiveXObject('Msxml2.XMLHTTP')); }catch (e) {} try{ retrurn (new ActiveXObject('Microsoft.XMLHTTP')); }catch (e) {} return (null); }else if(window.XMLHttpRequest){ return (new XMLHttpRequest); }else{ return null; } } //--> </script> CGIの方もJavaScriptでCloseとかしなくても、小窓自体開かずにCGIが実行されますので普通に書き直せると思いますがどうでしょうか？ もしも、小窓を開くことが必須ならお邪魔いたしました。
”list.cgi”の561～562行目に名前を表示する部分があります（以下）。 if($name){ print"<td width=$show_name><a href=\"$cgipath?id=$num&mode=show\">$name</a></td>";} else{print"<td><a href=\"$cgipath?id=$num&mode=show\">---</a></td>";} それから、同じく”list.cgi”の732～736行目に画像を表示する部分があります（以下）。 if($gazou && $tail){ if($imgflag){ $tail ="<a href=\"$imgdir2$imgno$tail\"><img src=\"$imgdir2$imgno$tail\" border=0 width=$imgw height=$imgh alt=\"$imgno$tail\"></a>"; } else{ $tail ="<img src=\"$imgdir2$imgno$tail\" border=0 width=$imgw height=$imgh alt=\"$imgno$tail\">"; } print "<TR><TD class=\"left\">$gazou</TD><TD class=\"right\">$tail</TD></TR>\n"; } なので以下のように、画像を表示するコードを名前を表示するコードにくっつけてみては いかがでしょうか？ if($name){ print"<td width=$show_name><a href=\"$cgipath?id=$num&mode=show\">$name</a></td>";} else{print"<td><a href=\"$cgipath?id=$num&mode=show\">---</a></td>";} 　　　　↓　　　　↓ if($name) { print"<td width=$show_name><a href=\"$cgipath?id=$num&mode=show\">$name</a>"; if($gazou && $tail){ if($imgflag){ $tail ="<a href=\"$imgdir2$imgno$tail\"><img src=\"$imgdir2$imgno$tail\" border=0 width=$imgw height=$imgh alt=\"$imgno$tail\"></a>"; } else{ $tail ="<img src=\"$imgdir2$imgno$tail\" border=0 width=$imgw height=$imgh alt=\"$imgno$tail\">"; } print "<br>$tail</TD>\n"; } } それから、同じく”list.cgi”の535行目のデータを変数に入れる部分を以下のように変えてみてください。 ($num,$name,undef,$last_time,$time1,$imgno,undef,$mail,$mailflag,$url,$imgurl,$tail,undef,undef,undef,undef,undef,undef,undef,@item) = split(/,/); 　　　　↓　　　　↓ ($num,$name,$pass,$last_time,$time1,$imgno,$host,$mail,$mailflag,$url,$imgurl,$tail,$imgw,$imgh,$imgflag,$comment,undef,undef,undef,@item) = split(/,/);
「あたり」「はずれ」の画像を用意し同一ディレクトリーに 「atari.gif」「hazure.gif」の名前とする 参考までにjpeg画像の場合は「atari.gif」を「atari.jpg」に 「Content-type:image/gif」を「Content-type:image/jpeg」にします #!/usr/bin/perl $rand = int(rand(10)); if($rand == 0){$img = "atari.gif"} else{$img = "hazure.gif"} open(IMG,"$img"); binmode IMG; print "Content-type:image/gif\n\n"; print while (<IMG>); close(IMG);
ＣＧＩで観覧制限をかけるなら下記のようなスクリプトはいかがでしょうか （簡単なスクリプトなので一つのＨＴＭＬしか保護してませんが） #!/usr/local/bin/perl #################　設定　################# $script = 'test.cgi'; #このスクリプトの名前 $password = '1234'; #パスワード #################　スクリプト　################# use CGI; $query = new CGI; $pass = $query->param("pass"); if($pass eq $password){&html}; &pass; #################パスワード入力ページ################# sub pass{ print <<"HTML"; Content-type: text/html <html> <head> <title>パスワード入力</title> </head> <body> <form method="post" action="$script"> パスワード：<input type="password" name="pass"> <input type="submit" value="送信"> </form> </body> </html> HTML exit; } #################パスワードで保護されたページ################# sub html{ print <<"HTML"; Content-type: text/html <html> <head> <title>タイトル</title> </head> <body> ここにパスワードで保護するページを書く </body> </html> HTML exit; }
定番のphpBB3が使いやすいと思います。 ※サーバー環境を書いた方が明確な答えがでるかと思います。何故なら、冒頭アプリを紹介してもＰＨＰ・データーベース対応サーバーなのか不明です。
本当に大至急解決したいなら、身近なあるいは有償の技術者に相談するのが良いと思います。 質問文からは原因が特定できず、対策も示せません。 原因を特定する為の判断材料集めもまた技術力が必要な作業なのです。 > 私自身、CGIもPerlの知識も殆ど無い為、 本当にそうなら、ここへの質問だけで迅速解決できる確率が多くないと思います。 それだけでは何なので、当てずっぽう予測をひとつ。 > 最後の段階で、私の方にメールが届かない... その「私のメールアドレス」は正しいですか？ ドメインが省略されてたり % を含んでたりしませんか？ できている「送信内容確認メール」の送信のために何かを変更したなら、同じ変更が「私宛の送信」にもされていますか？
現在、Apacheのダウンロードは http://httpd.apache.org/download.cgi からできます。 しかし、最新版のtarballをざっと眺めても printenv は見付かりませんね。 make で生成されるんじゃ無いでしょうか。 Apacheをインストール済のマシンが身近にあればそこから引っこ抜くのが手軽です。 あるいは最新版をダウンロードしてビルドしてみる手もあります。 しかし、printenv を欲がる人なら、サーバーアナライザーの方が良かったりしませんが? ちょっと重いですが、環境変数以外にもいろいろレポートしてくれます。 http://www.futomi.com/library/servana.html
まず、このエラーは500番のInternal Server Errorになります。 内部エラーですね。 WebサーバがCGIを動作しようとしたときに、 エラーになってしまいクライアントに情報を返せないときにでるエラーです。 どのようなCGIを動かしているかわかりませんので回答はしかねますが、 以下のようなことを怪しんでみてください。 ・perlのスクリプトは正しいか 　＃Terminalは使えているようですので、./go.cgiなどとして実行してみてください。エラーが出るようでしたら修正する必要があります。 ・パーミッションは正しいか 　設定されているようですけど、Perlの中から違うPerlのスクリプトを呼び出していて、そのスクリプトのパーミッションが正しくないとか ・HTTPヘッダは書かれていますか 　一番先頭に、以下のような文を表示していますか？ 　print "Content-Type: text/plain\n\n"; 　＃私も結構忘れます。。。 　＃詳しいことは、参考URL等をお読みください。 お分かりかもしれませんが、 初めてということですので、参考になればということで、 PerlでCGI書く場合は、以下のような手順でやっています。 １．Terminalから実行して文法エラーがないか確認する ２．Webサーバに置いて、パーミッションをいじってから 　　ブラウザで確認する わからない場合は、ネットで検索すれば、かなりの数の情報を得られると思います。
>この中の「postmail.html」の位置を変更してもいいのでしょうか？ 可能です。 >もし変更が可能であれば他のファイル内の記述で何か変更することは でてくるのでしょうか？ ありません。（postmail.html内のCGI呼び出し先は修正が必要です） >また、ファイル名も変更していいのでしょうか？ postmail.htmlのファイル名のことなら問題ありません。 >一つのＨＰに問合せフォームを複数（２つ）作りたい時、 何をしたらいいのでしょうか？ 1.　２つのCGIを別々のディレクトリに設置して、それぞれ独立して使用する。 2.　１つのCGIを２つのhtmlファイルから呼び出す。（エラーページや送信後のページなどが同じになってしまいます） 意味がわからなければ、別のディレクトリに２つのCGIを設置されるのがよろしいかと思います。
>管理画面（admin.cgi）にログインできません。 そこのところを詳しく。 説明を見ると最初にアクセスした時にパスワードを設定するように書いてありますが、どうされましたか。 pwd.cgiへは暗号化されているはずなので、コピーしてもダメです。 なので、pwd.cgiを一旦サーバから削除して、最初のものをアップロードすれば初期化されると思います。 わからなければ全て削除して、設置し直せばよろしいかと思います。
> C#でCGIを作成できるとの話を聞いたことあるのですが、 できるかできないかはサーバーによって決まるので、使えるサーバーを探すのが先決かと。 レンタルサーバーの範疇で探すのであれば... ・「C# でCGI可能」と書かれてりゃOKでしょう、きっと。 ・「C/C++ でCGI可能」なサーバーも、場合によっては OKかも知れません。 ・ 上記以外の場合、Perl, PHP, Ruby の様な、「コンパイルせずに実行可能」な言語しか CGI可能リストに書かれてないサーバーは絶望です。 サーバーが見付かって、あなたが HTML を手書きできる人なら、ゴールは近いかも知れませんね。 HTML手書きできない場合は、C# にどんなライブラリがあるかに依存で、私には判らないです。
CGIのソースが先頭から表示されるんじゃ無く、HTMLのソースが見えるんですね？ これ、もの凄く重要です。 直接の原因は、ブラウザが「CGIが吐いたHTML」をプレーンテキストと認識してるんでしょう。 その原因はWebサーバーソフトの設定がそうなってる可能性が高いかと。 簡便に対策するには、CGIが出力するレスポンスヘッダに Content-type: text/html; charset=Shift_JIS を追加してください。 # もしも既に Content-type: を出力してるなら、その内容を教えてください。 Content-type: の追加で解決したなら、サーバーの設定が以前と違うのが原因と断定できます。 Apacheなら、設定ファイルや .htaccess で本対策できるでしょう。 もう少し説明が必要ですか？
Perl中の変数の内容は、現在の要求の HTML を出力し終った時点で無くなります。 出力したHTMLに対して閲覧者が次に操作を行なった時、前回の処理結果はもはや利用できません。 これで、答えになっていますか？
Location: ～ でジャンプ（リダイレクト）させたいのならHTTPヘッダフィールドで出力しなければいけません。 その前に他のヘッダを出力し空行があればそれ以降はHTTPボディーですから画面に表示されます。 通常のCGIスクリプトではリダイレクトの場合、Location: ～ 行と空行を出力するだけで、他のヘッダは要りません。
やぁ　miyura88さん、おひさー。 miyura88さんて女の子？俺は女の子以外は興味ないんだけどー。 miyura88さんは一見さんじゃないからぁ。特別扱いしてあげるよ。 しかしよみずれーなｗ。　まずインデントしないとね。 うんとね。ページをどのようにしたくて、今はどのように呼び出しているか分からないので回答が難しいけど、大体想像はできましたよ。 ここを # ★実際の表示タグ。（デザイン変更時はここをカスタマイズ） print "document.write(\"<a href=$jump_url target=_blank><img src=$Slog[12]></a>\")\;\n"; このようにするだけでいいかもしれない。 # ★実際の表示タグ。（デザイン変更時はここをカスタマイズ） print "document.write(\"<a href=$jump_url target=_blank><img src=$Slog[12]></a><br>\")\;\n"; 希望と違ったらいってください。
Mozilla のバージョンがわからないのですが、 最近のMozillaの初期設定ではfile://は開けません。 設定は大丈夫でしょうか？ ↓のサイトに設定の仕方やAdd-onが紹介されています。 http://kb.mozillazine.org/Links_to_local_pages_do_not_work
メール受信を自動でできるようにすればできると思います。 質問にあるリンクでみると 「受信スクリプトが手動で取り込みます」 を自動化したいのだと思いましたので。 linux系であればシェル等で対応する等。 自動化が無理な場合、 別の方法で対応してはどうでしょうか。 メール送信後 携帯でPHPの画面を表示する時にメール受信するなど。
Jcode.pm は jcode.pl の後継ですがすでに標準で無くなりつつある、と私は思っています。 Perl5.8 以降に標準で入っている Encode.pm が Jcode.pm の後継です。 しかし、すでに知っている Jcode.pm を使いたい場合には、どんなサーバーにも簡単にインストールできます。 @INCパスの通ったディレクトリに、 Jcode.pm ファイル 1個を置くだけです。 そうなると、手軽さが jcode.pl と同じなので、引越しに備えて jcode.pl を勉強する必要は無いでしょう。 Jcode.pm は、参考URLでダウンロードできる Jcode-2.??.tar.gz 中にあります。 ただし、Encode.pm の無いPerl(5.6 及びそれ以前)ではファイル 1個置くだけではダメで、おそらく共用レンタルサーバーの一般ユーザーにはインストールできないでしょう。 その場合は、 jcode.pl に頼る事になるでしょう。
$ENV{'REQUEST_URI'} ではダメですか？
sqliteの経験はないのですが、LIMIT句が使えるみたいですね。 SELECT文の最後に「LIMIT n, (p-1) * n」（ページ番号がp、各ページの件数がnの場合）と付けると表示したいデータだけが取れるはずです。 注意点として、ORDERの指定が曖昧だと期待通りに動かないことがあります。 最後に主キーを付けるなどして、必ず同じ順番になるようにしてください。
XML::RSS を使えばできます。CGI というか、Perl モジュールですけど --- #!/usr/bin/perl use strict; use warnings; use LWP; use HTTP::Request; use XML::RSS; use utf8; my $uri = shift || 'http://dailynews.yahoo.co.jp/fc/rss.xml'; my $ua = LWP::UserAgent->new; my $req = HTTP::Request->new( GET => $uri ); my $res = $ua->request($req); $res->is_success or die "$uri: ", $res->message, "\n"; my $rss = XML::RSS->new(); $rss->parse( $res->content ); binmode STDOUT, '::encoding(utf8)'; print $rss->channel("title"), "\n"; print $rss->channel("link"), "\n"; print $rss->channel("description"), "\n"; for my $item_hash_ref ( @{ $rss->{items} } ) { while ( my ( $key, $val ) = each %{$item_hash_ref} ) { print '$rss->{items}->{', $key, '}', ' => ', $val, "\n"; } } --- 実行結果 Yahoo!ニュース・トピックス - トップ http://dailynews.yahoo.co.jp/fc/ Yahoo! JAPANのニュース・トピックスで取り上げている最新の見出しを提供しています。 $rss->{items}->{link} => http://rd.yahoo.co.jp/rss/l/topics/topics/*http://dailynews.yahoo.co.jp/fc/domestic/pension_accounts/ $rss->{items}->{item} => ... $rss->{items}->{title} => 消えた年金 基準緩和し救済へ $rss->{items}->{pubDate} => Sat, 19 Sep 2009 16:04:07 +0900 $rss->{items}->{link} => http://rd.yahoo.co.jp/rss/l/topics/topics/*http://dailynews.yahoo.co.jp/fc/domestic/bear/ ...
＞CGIがノートになっており使えません（汗 ＞関連付けもしようとしたのですがPerlが出てきません。 「CGIがノートになっている」「Perlが出てこない」とはどういう意味でしょうか？ CGIはウェブサーバー上でプログラムを動かすための仕組みです。 PCの中でローカルでPerlによるCGIプログラムを使いたいということでしょうか？ その場合、例えばWindows環境なら ・ApacheやAN HTTPD等のソフトでローカルなサーバーを構築 ・ActivePerl等をインストールしサーバーでPerlをCGIとして利用できるように設定する。(Apacheならmod_perlとかも利用できます) ・Perlプログラムの先頭でPerlインタープリターのパスを入れる。 といった流れです。
>ファイルは以前動作したサーバから引っ張ってきました 簡単なcgiスクリプトで試すのが先ではないでしょうか。 それで、そのcgiファイルは、FTPでアップロードされたのでしょうか？ アスキーモードで転送されていない場合は改行コードが問題なります。 #!/usr/bin/perl -- これで動作するのなら、サーバの設定でアスキーモードでのアップロードが許可されていないと思います。
Ajaxからコールして受信内容を破棄すれば良いです。 こんな感じ function HogeHoge(){ var xmlhttp = createHTTPRequest(); var CGIURL = 'CGIのフルURL「http://」から記述'; var sDT; xmlhttp.open('GET', CGIURL, true); xmlhttp.onreadystatechange = function(){ if (xmlhttp.readyState == 4) { if (xmlhttp.status == 200) { sVOID = xmlhttp.responseText; } else { // 通信に失敗 } } else { // 通信中… } } xmlhttp.send(null); }
ShiftJIS コードの場合、漢字コードの２バイト目に正規表現の区切り文字やメタ文字と同じ コードがあるためうまくいかないことがあります。英単語のみ正規表現を使って、それ以外は index を使えばうまくいくかもしれません。 > if (index($_, $wd) >= 0) { 上の行を次のように変更してみてください。なお、英単語に can't や Dr. などがある場合は、 /^\w+$/ を /^[\w.']+$/ などに変更する必要があります。 if ($wd =~ /^\w+$/ ? $_ =~ /$wd/i : index($_, $wd) >= 0) {
お、大人じゃんｗ　えらいじゃんｗ 敬意を表して一つだけ分かった事書いてやるよ。 　管理人に通知画面　じゃなくて　管理者に通知画面 じゃないかい？　違ってたら知らんけど。 この編集は　regist_ys.cgiの650目　以降の付近と templateフォルダの　mes.html で出来るようだよ perl構文部分を誤って編集しなければhtmlみたいなもん だから、編集できるでしょ。 で？彼氏はなんだって？ｗ
$subjectをMIMEエンコードするコードをコメントアウトしているのはなぜ？ ここを戻せばOKかも。。。
> ただ、なぜか画像へのパスを書いても、とどかないんですよ。。。。よく > わかりません。 Web サーバが任意のディレクトリのファイルを外部に表示できるとセキュリ ティ上問題があるので、それはそうです。とりあえず、画像ファイルを CGI スクリプトと同じ場所にコピーして、表示できるか確認したらどうでしょ う。
参考にされたサイトの【サンプルソース】は自分でリクエストのMIMEマルチパートの解析をやってますね。 マルチパート解析と添付ファイルの取り出しは Perl標準の CGI.pm でできます。 信頼性や今後の保守の手間を考えると、CGI.pm に乗り換えられた方が良いんじゃ無いかと思いますよ。 必要なら CGI.pm の使い方を思い出して具体的に書きますが、どうされますか？
echo file_get_contents('hoge.cgi'); みたいにすれば呼び出る、というようなじょうほうを見つけました。 すいませんPHPできないので、本当にできるかは分かりません。 リファレンス見ましょう。 http://jp2.php.net/manual/ja/funcref.php
CGI::Session を使えばいいと思います。 以下のサイトあたりが参考になると思います。 http://www.dab.hi-ho.ne.jp/sasa/biboroku/perl/session.html http://digit.que.ne.jp/work/wiki.cgi?Perl%E3%83%A1%E3%83%A2%2FCGI%3A%3ASession%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB http://www.ksknet.net/cgi/cgisession.html 私のゴミみたいなテストプログラムも載せておきます。 #!/usr/bin/perl -T use warnings; use strict; use utf8; use CGI; use CGI::Carp qw(fatalsToBrowser); use CGI::Pretty; use CGI::Session; # 異なるipからのアクセスは認めない場合 # use CGI::Session qw/-ip_match/; # http://search.cpan.org/dist/CGI-Session/ # http://www.dab.hi-ho.ne.jp/sasa/biboroku/perl/session.html # http://digit.que.ne.jp/work/wiki.cgi?Perl%E3%83%A1%E3%83%A2%2FCGI%3A%3ASession%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB # http://www.ksknet.net/cgi/cgisession.html use constant SESSION_DIR => '/tmp/session'; if ( ! -d SESSION_DIR ) { mkdir SESSION_DIR or die "$!"; } # Clean Session File CGI::Session->find( undef, \&purge, { Directory => SESSION_DIR } ) or die CGI::Session->errstr(); sub purge { my ($session) = @_; next if $session->is_empty; # already expired # Delete 1 hour old if ( ( $session->ctime + 3600 ) <= time() ) { $session->delete(); $session->flush(); } } my $q = CGI->new(); my ($login) = $q->param('login'); if ( defined $login ) { # Recv Form if ( $login eq 'login' ) { my ($user_name) = $q->param('user_name'); # Clean Old Session File CGI::Session->find( undef, sub { my ($session) = @_; next if $session->is_empty; # already expired # $user_name my ($session_user_name) = $session->param; if ( ( defined $session_user_name ) || ( defined $user_name ) || ( $session_user_name eq $user_name ) ) { $session->delete(); $session->flush(); } }, { Directory => SESSION_DIR } ) or die CGI::Session->errstr(); my $s = new CGI::Session( undef, $q, { Directory => SESSION_DIR } ); $s->expire('+1m'); # 1 Minute $s->param( -user_name => $user_name ); # set user_name print $s->header( -charset => 'UTF-8' ), $q->start_html(), $q->p( "New session! Session ID = ", $s->id ), create_login_form( $q, 'logout' ), $q->end_html; } elsif ( $login eq 'logout' ) { my $s = CGI::Session->load( undef, $q, { Directory => SESSION_DIR } ) or die CGI::Session->errstr(); $s->close; $s->delete; $s->flush; print $s->header( -charset => 'UTF-8' ), $q->start_html(), $q->p("Your session closed!"), create_login_form( $q, 'login' ), $q->end_html; } else { die "Unknown Form $login"; } } else { # Not Recv Form my $s = CGI::Session->load( undef, $q, { Directory => SESSION_DIR } ) or die CGI::Session->errstr(); if ( $s->is_expired ) { print $q->header( -charset => 'UTF-8' ), $q->start_html(), $q->p( "Your session timed out!. Session ID = ", $s->id ), create_login_form( $q, 'login' ), $q->end_html; } elsif ( $s->is_empty ) { print $q->header( -charset => 'UTF-8' ), $q->start_html(), $q->p("You don't have session!"), create_login_form( $q, 'login' ), $q->end_html; } else { my $sid = $s->id; my $s = new CGI::Session( undef, $sid, { Directory => SESSION_DIR } ); if ( $sid != $s->id ) { # Create New Session ID -> Unknown Session # Delete Temporary Session $s->close; $s->delete; print $q->header( -charset => 'UTF-8' ), $q->start_html(), $q->p( "Your session id don't match!. Session ID = ", $sid ), create_login_form( $q, 'login' ), $q->end_html; } else { print $q->header( -charset => 'UTF-8' ), $q->start_html(), $q->p( "Your session id match!. Session ID = ", $sid ), create_login_form( $q, 'logout' ), $q->end_html; } } } sub create_login_form() { my $q = shift || die "Require CGI object"; my $login = shift || 'login'; if ( ( $login ne 'login' ) && ( $login ne 'logout' ) ) { die "$login doesn't match login or logout"; return 0; } my $form = $q->start_form( -method => 'post', -action => $ENV{SCRIPT_NAME} ); if ( $login eq 'login' ) { $form .= $q->textfield( -name => 'user_name' ); } $form .= $q->submit( -name => 'login', -value => $login ) . $q->end_form; return $form; }
よくカウンターなどに使われているCGIのように、imgタグで呼び出せばいいと思います。そのCGIの出力を空の1px×1pxの画像にしておけば、問題ないでしょう。
# ドキュメントに書き込む。 print "document.write(\"<a href=$jump_url><img src=$Slog[12]></a>\")\;\n"; を # ドキュメントに書き込む。 print "document.write(\"<a href=$jump_url target="_blank"><img src=$Slog[12]></a>\")\;\n"; target="_blank" を足すだけ。
>RedhatLinuxというのは初めて聞いたので同じものなのか違うものなのかすら分かりません。 今時RedhatLinuxを使っているかは疑問ですが RedhatLinuxはLinuxディストリビューションの超大手の一つでした。 今はサーバ向け製品のRed Hat Enterprise Linuxを販売しています。 Linuxを使っていてRed Hatを知らないというのは日本に住んでいて 東京都が首都だと言うのを知らないレベルです。 >テストサーバのOSはLinux 2.4です。 カーネルのことですか?ディストリビューションのバージョンですか? その場合、ディストリビューションはなにを使っていますか? >テストサーバのOSが違ったらプログラムを直す必要あるかもと言われましたが、意味が分かりません。 可能性はあります。 特にCPANでインストールされている外部ライブラリを使っていた場合 それが使っている双方でインストールされているか確認したりなど
簡単ジャン。3行書き換えればすむ。 ＞それと　トップページにバナーは表示されるのですが　 ＞バナーの横に・点のような模様がなぜかついてしまいます ＞これを消すにはどうすればよいでしょうか? リストタグを消す。 以上
>解除の仕方 入力必須にしなければいいだけの話ですが、どうしたいのですか？ 項目自体を表示しないとかですか、それならそのタグを削除すればいいし。 まぁ、説明は下記のようにあなたが示されたページに書いてありますのでご覧ください。 ・タグの記述 (5) E-mail <input type=text name="_email" size=25> → name値の先頭に「アンダーバー 」を付けると、その入力値は 「入力必須」となります。 上記の例では、「メールアドレスは入力必須」となります。
CGI(perlやPHP)を動かすには HTTPサーバーソフトが必要です、IISやApacheやhttpdなどです。 無料で手に入りますのでインストールしてください。 その上で、perlやphp等のインタプリタ言語を動かす場合は perlならActivePerl、phpならphp本体が必要になります。 これも無料なのでイントールしてください。 両方インストールが終わったら ドキュメントルートにファイルを置いて、 ブラウザでlocalhost、もしくは127.0.0.1(ループバックアドレス)で アクセスすれば動作確認できます。 他の言語の場合も基本は同じです。 HTTPソフトと、その言語を動かすソフトを入れていください。
以下のcpan モジュールをサーバに入れられるなら、できると思います。 Net::SMTP Authen::SASL Module Net::SMTP::SSL MIME::Entity #!/usr/bin/perl use warnings; use strict; use utf8; use Carp; use Encode; use Net::SMTP; # Require Authen::SASL Module use Net::SMTP::SSL; use MIME::Entity; my $smtp_server = 'smtp.gmail.com'; my $smtp_port = '465'; my $smtp_acc = shift || croak "Require Gmail Acount"; system "stty -echo"; print "Password: "; chop( my $smtp_pwd = <STDIN> ); print "\n"; system "stty echo"; my $mail_to = $smtp_acc; my $mail_bcc = $smtp_acc; my $mail_from = $smtp_acc; my $mail_attached = shift || undef; my $mail_subject = '件名'; my $mail_body = << 'END_MAILBODY'; 本文1 本文2 END_MAILBODY $mail_subject = encode( 'MIME-Header-ISO_2022_JP', $mail_subject ); $mail_to = encode( 'MIME-Header-ISO_2022_JP', $mail_to ); $mail_bcc = encode( 'MIME-Header-ISO_2022_JP', $mail_bcc ); $mail_from = encode( 'MIME-Header-ISO_2022_JP', $mail_from ); $mail_body = encode( 'ISO_2022_JP', $mail_body ); my $mime = MIME::Entity->build( From => $mail_from, To => $mail_to, Bcc => $mail_bcc, Subject => $mail_subject, Type => "text/plain; charset=ISO-2022-JP", Data => $mail_body ) or croak "mime build error : $!"; if ($mail_attached) { if ( -f $mail_attached ) { $mime->attach( Path => $mail_attached, Type => "application/octet-stream", Encoding => "Base64" ) or croak "mime attach error : $!"; } else { croak "no such file exsits : $mail_attached"; } } my $smtp_ssl = Net::SMTP::SSL->new( $smtp_server, Port => $smtp_port, Debug => 1 ) || croak "smtp ssl conn error : $!"; $smtp_ssl->auth( $smtp_acc, $smtp_pwd ) or croak "smtp ssl auth error : $!"; $smtp_ssl->mail($mail_from); $smtp_ssl->to($mail_to); $smtp_ssl->bcc($mail_bcc); $smtp_ssl->data(); $smtp_ssl->datasend( $mime->stringify ) or croak "data send error : $!"; $smtp_ssl->dataend() or croak "data end error : $!"; $smtp_ssl->quit;
KentWebさんに、そのようなものがあります。 アクセス解析のタグなら、CGIのHTML部分に入れればよいので、HTMLの掲示板にこだわる必要はないと思います。
社内（イントラネット）だけで利用とのことですが、全員がMSインターネットエクスプローラを使っているのなら次のようなフォーム（HTML）で送信できます。 文字コードは Shift_JIS でないと文字化けします。 他のブラウザではうまく動作しません。 【form.html】 <html> <head> <meta http-equiv="content-type" content="text/html; charset=Shift_JIS"> </head> <body> <form method="POST" action="mailto:受信するメールアドレス" enctype="text/plain"> お名前：<br> <input type="text" name="件名" size="50"><br> 件名：<br> <input type="text" name="お名前" size="50"><br> 本文：<br> <textarea name="本文" cols="35" rows="5"></textarea><br> <input type="submit" value=" 送信 "> </form> </body> </html> 　 ※入力項目は適宜に。ラジオボタン、チェックボックス、プルダウンも使えます。
CGI(perlかphpでしょうか？)を改造できるほどの技術をお持ちでしたら アンケートフォームくらいなら簡単に作れると思います。 勉強のために一度作ってみるのもよいかもしれないですよ？ もしそちらに興味がないようでしたら 以下のようなサイトから無料レンタルフォームを使ったほうが早いと思います。 http://muryou-de.com/fom.htm http://google-mania.net/archives/1039 ご希望のアンケートフォームだと やはり「アンケートフォーム」等の文字で検索するのが 目標を達成する最短の道でしょう。
状況を図りかねるのですが推測で書きます。 画像の転送はメールに乗っている添付ファイルでしょうか？その場合に画像が開けないということなら、画像がMimeエンコードされていないのだと思います。 CGI上で画像をメールで送る場合にはJPEGなどのバイナリデータをメール用のデータ(Mime)に書き換えて、その上でメールに添付してやる必要があります。 知識がなくても出来るのは、サーバーに画像をアップロードしてもらって、その画像のURLだけをメールでおくる方法です。これならば、メールの送受信についての知識がなくても簡単に出来ると思います。 もしまた質問する時は、詳しく状況を書いていただけると、より的確な回答が出来ると思います。
<option value="" selected>お選びください</option> でダメですか。
スクリプト、テンプレートが見えないので何ともいえないのですが、 job_num <-> jobnum がうまくいってないんじゃないですか。 いちどステップを print してみたらどこに問題があるのかわかると思います。
No.2です。 私の質問にお答えいただいてないので再確認です。 o Perl.exe は /usr/bin/ （Windowsなら C:\usr\bin）にありますか。 　そうでないなら、スクリプトの１行目に書く #!/usr/bin/perl を perl.exe のパスに合わせて書換えないといけません。 もし、C:\perl\bin\perl.exe なら、#!/perl/bin/perl です。 o cgiファイルは cgi-binフォルダに置いてありますか。 　apacheの初期設定は cgi-binフォルダ以外では cgiファイルは実行できないと思います。 o httpd.confで .cgiファイルが実行できるようにしましたか。 　httpd.cnf の中に、 　#AddHandler cgi-script .cgi　という行があります。頭に付いている # を取ってください。 そうしたらいったん、apacheを止めて再起動した後、ブラウザから目的のcgiファイルをリクエストしてください。
メールアドレスを変更すると当然変更先のメールアドレスへ送信されるので、前担当者のメールボックスからすれば「メールが届かない」ということになると思いますが、そういう話でないとして。 最近のメールサーバーは第三者からの不正使用を防止する目的で、POPbeforeSMTPなどの機能がありますが、それらに引っかかってる可能性が高いかと思います。 ですが、ここで可能性を云々議論するよりもスクリプトを調べた方が早くてより確実に原因が突き止められるかと思います。
>ファイル名を変えた あやしいですね。 同じCGIを設置する場合は、ディレクトリ（フォルダ）を分けて、中身は同じにすることです。 >これでいざテストしてみると「 Forbidden テストとは、何をして、どこでそうなったのか？ Kent Webさんのは、最初にHTMLを表示させるので、送信時でしょうか？ また。Kent Webさんのは、Shift_JISですので、中国語はどうなんでしょう（私は知りません） ユニコードのフォームメールを使った方がいいと思います。
@data = split(/<>/,$DATA[0]); の前に chomp($DATA[0]); @data = split(/<>/,$DATA[0]); として下さい。
Perl/CGIでしたら多少お力添えできそうです。 color情報をデータに書き込み、読み込むときにそのデータを取り出してタグの内部に利用してやれば良いかと思います。 主に読み込み時に一度配列にファイル内容を取り込み その後、split関数でデータを分けてtemp_dataという一時的な配列に格納、それを出力。みたいな感じでいかがでしょう。 動作テストしてないので動かないかもしれませんが、考え方の手助けになれれば幸いです。 HTML <form action="XXX.cgi" method="post"> NAME<input type="text" name="name" /> TITLE<input type="text" name="dai" /> <textarea name="comment">Please Type Any Comment!</textarea> COLOR red<input type="radio" name="color" value="red"/> blue<input type="radio" name="color" value="blue"/> green<input type="radio" name="color" value="green"/> <input type="submit" value="書き込み"> </form> とでもして CGI側 #書き込み処理 #------------------------------------------------------------ # 登録データ書き込み処理 #------------------------------------------------------------ sub writeData() { #　$DATAFILEをオープンする open(FILE, ">> $DATAFILE") or die("error:$DATAFILE open error!"); eval{ flock(FILE, 2); }; $timestr = &getTimestr(); $in{'comment'} =~ s/\n/<br>/g; print FILE "\n$in{'namae'},$in{'dai'},$in{'comment'},$in{'color'},$timestr,"; #↑不要だったら先頭の\n消してください close(FILE); } # ファイル読み込み sub readData() { my @file_data=(); my @temp_data=(); #　$DATAFILEをオープンする open(FILE, "< $DATAFILE"); eval{ flock(FILE, 2); }; @file_data = <FILE>; close(FILE); foreach(@file_data){ #@file_dataを元に一行毎に処理させます @temp_data = split(/,/); print "$temp_data[1] (by $temp_data[0] / $temp_data[4]) : <div style=\"color:$temp_data[3]\">$temp_data[2]</div>\n"; } }
httpd.conf がでてくるというのは、Apache でしょうか？ マニュアルによると SetEnv ディレクティブは .htaccess でも使えるそうですが、そういうご質問ですか？ http://www.apache.jp/manual/mod/mod_env.html#setenv
> 今cgi-binの中でしかcgiが動かないサーバーを借りていてcgi-binの中からcssや画像を呼び出そうと考えております。 cssや画像をcgi-bin以外の所に置けばいい問題だと思いますが。 そして通常はそのようにします。 HTMLではcssや画像をcgiと同じディレクトリに置かなければいけないというような仕様にはなっていないはずです。
プログラムしだいです。 フォームから渡されてくる変数をjisだと信じて処理するだけなのか、変数の文字コードが何であれ一定のコードに変換してから処理するか。 後者の処理が実装されていればHTMLの文字コードを気にしないで使用できます。
http://webmastertool.jp/ ここの「マルチフォームメール」は、sendmailとSMTPの両方が使えます。
>flockを使っている部分をコメントアウトしても解決されないのでしょうか？ たしかに動きますが、すぐに正しくカウントされなくなります。 flockは排他処理といって、一つのファイルを同時に更新させないための処理です。 この排他処理がないと、正しくカウントが取れなかったり、0に戻ったりしてしまいます。 （CGIではないですが排他処理の参考として） 参考：http://www.techscore.com/tech/sql/11_02.html#sql114 >また、追加する場合はどのように記述すればよいのでしょうか？ flock以外でもmkdirを使った排他処理方法があります。 参考：http://beginners.atompro.net/smpcgi_flock.shtml すでにあるプログラムに手を加える場合、トラブルが発生しやすくなるため、それに対応する知識が必要となります。 僕が手を加えて提示するのは動作保障と今後のサポートが出来ませんのでやめておきます。 大変申し訳ないのですが、少し勉強されて追加されるか、別のカウンターに変えてみてはいかがでしょうか。
questionform.cgi というファイルは../cgi-user/のパスにおいてますでしょうか？ もしあるならこの呼び出しがうまくいっていないと思われますので、cgiの使用できるサーバではないとか、パーミッションが適切でない可能性があります。
一見するとスキン式ではないので無理だと思います。 直接ＣＧＩ内部のデザイン部分をいじれば可能。 ＣＧＩが分からない場合はＣＧＩ自体が動かなくなるので触らないほうがいいと思います。 スキン式（テンプレート式）掲示板を探すことをお勧めします。
> print "Content-type: text/html\n\n"; htmlで改行する場合は、再度テキストエリアなどに表示しない場合、 <br>といったhtml用のタグを用いるのが通例です。 ですので、そのまま出力して改行を反映させるならば text/html から text/plain に変え、 print "Content-type: text/plain\n\n"; print $area; としてください。 htmlとして表示するなら、改行を<br>に置換すれば表示できるでしょう。 #全て置換する $area =~ s/\r\n|[\r\n]/<br>/g; print "Content-type: text/html\n\n"; print $area;
