【環境】 ・WindowsServer2012 R2 Standard ・Oracle Database 11g R2 Express Edition お世話になります。 上記環境にて、OracleXEのインストールを行ったのですが、 Windows起動時にインスタンスが自動起動してくれずに困っています。 XEとリスナーのサービスはどちらもスタートアップの種類を"自動"としており、 実際に、Windowsが起動するとサービス自体は問題なく開始状態になっています。 ただ、その状態でsqlplusなどでOracleに接続する際、 SYSDBA権限を持ったユーザであれば接続可能なのですが、 ※「アイドル・インスタンスに接続しました」というメッセージが表示されます。 一般ユーザで接続しようとすると ORA-01034：Oracle not available ORA-27101:shard memory realm dose not exist となり、接続できません。 インスタンスが起動していないからということはわかりましたが、 自動でインスタンスを起動させるにはどのようなことを行えばよいのでしょうか。 ※手動であればSYSDBAユーザでstartupをかければいいということはわかっております。 自動起動させるようなバッチファイルを作成する方法や、 最悪レジストリをイジったりといった手段もアレコレ探してみましたが これといった情報は得られませんでした。 何かお分かりになる方いらっしゃいましたらご教示の程宜しくお願い致します。
PEARSON VUE からOracle認定試験（オンライン試験）を受けようとサインインしようとしたら以下のようなエラーが出ました。 ■エラー表示 The service is unavailable. これって自分だけですか？ もし試験を受けられなかったときって期日の延長か返金はしてもらえますよね？ せっかく受けようとしたらこんなことに出くわすなんてついてなさすぎです。。。
結果がこのようになってしまいます。 ID -------------------------------------------------------------------------------- TITLE -------------------------------------------------------------------------------- aaaabbbbcccc test 理想はこうです。 ID　　　　　　TITLE ------------------- --------- aaaabbbbcccc test 入ってる文字列は全部長さがバラバラです。なので表示される長さに合わせて自動調整させたいです。どうすれば良いでしょうか？ 宜しくお願いします。
SQLの学習用にMicrosoft SQL Server 2014を利用しているのですが、問題が発生したので以下に記載します。 私はまだ始めて3日目の素人です。 1. SUBSTR やTRIM などの関数を利用すると組み込まれていないというエラーが出ます。ライブラリの読み込み方法があるのならば教えて欲しいです。 2. DUALテーブルがエラーで表示できない。 上記2点の理由がわかる方がいらっしゃればよろしくお願いします。
oracleの順序のEXP/IMPについてです。 oracle 11gでlinuxなのですが、別サーバ上にあるAというスキーマ（例：hon1）の シーケンスを、別サーバ上にあるBというスキーマ（例：dev1）に、expdp/impdp コマンドで、sequenceのみを、export/importをしようとしています。 expdpコマンドでsequenceのみはexportできたのですが、impdpコマンドで、sequence をimportするとエラーがでて失敗します。 SEQUENCEの処理はできるのですが、OBJECT_GRANTの作成でエラーで失敗します。 別環境の別スキーマに入れようとしているので、権限の作成で失敗するのは当たり前 かもしれませんが。 回避する方法、grantを実行しない方法はないのでしょうか。 また、表のimportみたいに、記述したテーブルのみをimportするような、ターゲットの sequenceのみをimportするような記述はできないのでしょうか。 宜しくお願い致します。 環境：oracle 11g、Linux
「 Oracle 11g 」のデータベースファイルの場所が探せなく、もし、探す方法分かりましたらお願いいたします。
WEBサーバー（Linux）とDBサーバー（WindowsServer2003）が分かれている環境で、WEBサーバーのPHPからoci8で、DBサーバーのOracleからデータ取得をしており、データ取得量？が多いとエラーとなってしまします。 SQL自体はOracle環境で実行して正常にデータ取得することは確認しているのですが、10万行程度のレコード数でもレスポンスの時点？でエラーとなります。 （レスポンスの情報が無いので、エラー内容が分からず、データ件数を絞ると抽出が出来ます） 解決方法をご存じの方や、PHPもしくはLinuxの設定で取得データサイズの設定方法について分かる方がおりましたら、ご教授ください。 宜しくお願い致します。
JDK 1.7を使っているアプリケーションサーバとOracle 11gR2のデータベースサーバ間で使用するJDBCドライバのバージョンについて教えて下さい。ojdb6.jarというものと、ojdbc7.jarというものがありますがどちらのバージョンを使用するかは何によって決まるものでしょうか？ Oracleのバージョンが11gであるということは必然的にojdb6.jarを使わなければならないのでしょうか？　Oracle12cでもojbc7.jarを使用してもよいのでしょうか？変な質問でしたらすみません。
2月からITエンジニアとして研修を受けている者です。 最初の研修として、テキストに書いてあるSQLの問題を解いてOracle SQL Developer上で実行し、そのコードを提出するというものがありました。 そちらに関しては、全て添削をして頂き、終了したのですが、今日になって、実行出来ないということになり、責められました。 確かに、今日同じコードを実行しエラーが出るのを確認しましたが、私がその問題を解いた時はきちんと実行できるのを確認したことを記憶しています。 私は「Oracle SQL Developer上で実行できるのを確認してから提出した」と主張しましたが、信じてもらえず、何か証明する方法はないかと模索しております。 テキストの問題は、booksテーブルのISBNコード(isbn列)の先頭に、固定値で「ISBN」を追加するというものです。 isbn列のデータ型はCHAR(17)で、 下記のコードを提出しました。 UPDATE books SET isbn = CONCAT('ISBN', isbn) ; ただ、自宅で予習した際はエラーが発生し、列の定義をvarchar(2000)に変更したのですが、会社で実行した際はそのまま実行出来たので、列の定義が変更されていた可能性があります。 責られている点は、提出したコードでエラーが出ることではなく、「コードを実行せずに提出した」というです。 自身が実行せずに提出したのなら、反省して、二度と同じことをしないようにしようと思えますが、一方的に決めつけられて、信じてもらえず、理不尽さを感じております。 明日3/9の9:30までにきちんとOracle SQL Developer上で実行したと証明したいです。 私も方法がないか情報収集しますが、こういったことに詳しい方、アドバイスを頂けましたら幸いです。 何卒よろしくお願い致します。
SQL文で商品別、人員別 の作成時間（平均値）を出力したいのですが、出来ずに困っています。 ＊開発環境＊ DB：Oracle11ｇR2 プラットフォーム：VisualStudio2010 ＊データ 商品ID＿人員ID＿作成開始日時＿作成終了日時 1＿＿＿1＿＿＿16/2/18 9:00＿16/2/18 9:10 1＿＿＿1＿＿＿16/2/18 9:10＿16/2/18 9:15 1＿＿＿2＿＿＿16/2/18 9:00＿16/2/18 9:10 2＿＿＿1＿＿＿16/2/18 9:00＿16/2/18 9:10 2＿＿＿2＿＿＿16/2/18 9:10＿16/2/18 9:20 2＿＿＿2＿＿＿16/2/18 9:20＿16/2/18 9:30 ＊出力結果 商品ID 人員ID 平均値 1＿＿＿1＿＿＿7.5 1＿＿＿2＿＿＿10 2＿＿＿1＿＿＿10 2＿＿＿2＿＿＿10 と言った具合な結果が出力したいです。 １文のSQL文で、group by や 副問い合わせの合わせ技で出力できそうかとは思うのですが。。。 どうぞ、宜しくお願い致します。
oracle10gです。 テーブルAから取得した項目aaaが"1"のとき、 テーブルBから項目bbbを取得する それ以外の場合、 テーブルCから項目cccを取得する という内容のSQLを一度に実行したいのですが、 ifやcaseで実行可能でしょうか。 ご教授いただきたいです。 よろしくお願いいたします。
VisualStudio＋ODT.netで、C#にて「.NETストアドプロシージャ」を製作しようとしています。 例えばNUMBER型の値を引数で渡してNUMBER型値を返す様なFUNCTIONを作りたいとして、 Oracle側で使う際にNUMBER型の値にはNULL値も有り得るわけですが、 C#側でメソッドの引数や戻り値に、NULL許容型（int?やdecimal?とか）を指定してビルドし、 それをVisualStudioからOracleデータベースへデプロイしようとすると、 ウィザード上のパラメータマッピングのところで、NULL許容型に指定した引数や戻り値に対して Oracle側の適切なデータ型を指定出来なくなってしまいます。 かと言って、C#側メソッドでNULL許容型ではない型を指定してしまいますと、引数へNULL値を 与えると例外が発生してしまいます。 この様な問題に直面されて、何らか解決された方はいらっしゃいますでしょうか？
Oracleのバージョンで11gR2(11.2.1.0）という物と(11.2.01)がありますが、何が違うのでしょうか？ライセンスを購入する方法によって違うのでしょうか？ また、Windows Server2012R2にインストールをしようとしていますが64bitか32bitかがわかりません。 Windows serverはダウンロード版のものです。
いつもお世話になっております。 OTNアカウントの作成日時を知りたいのですが、何か方法はございますでしょうか？ サポートに連絡するにしても、どこへ連絡したものやら…といった感じです。 尚、作成時のメールアドレスではないため作成時のメールを閲覧することもかないませんでした。 よろしくお願いいたします。
いつもお世話になっております。 タイトルの通りJDKや、oracle clientなどのダウンロードをするときに、 サインインを求められるかと思いますが、サインイン後のダウンロードについてです。 サインイン後にダウンロードしたJDKやoracleには、サインインしたときの メールアドレスの情報がダウンロードしたもののどこかに、残ってしまったりするのでしょうか？ ダウンロードしたものに自分の情報が残っていたらいやだなぁと思っています。 ご存じの方や、こう思うよって方のご意見をお待ちしております。 よろしくお願いいたします。
以下のような地点間の距離を保存するテーブルで、逆区間を登録させたくない場合は どのような制約をかければよいでしょうか。 CREATE TABLE DISTANCE_TBL ( S_POS CHAR(1), -- スタート地点 E_POS CHAR(1), -- ゴール地点 DISTANCE NUMBER(6) -- 距離 ) S_POS='A'、E_POS='B'がすでに登録されていた場合に S_POS='B'、E_POS='A'を登録させたくありません。 「CONSTRAINT CK_DISTANCE CHECK (S_POS < E_POS)」 として、登録時に自前でチェックするぐらいしか思いつきませんでした。 なにかよい方法があればご教授願います。
Oracle11g　x64です。 ハッシュSHA-256（SHA-2）の規格をつかいたい。 SHA-1,MD4,MD5の規格は使えるのですが、256の使い方を教えてください。 vHashed RAW(20); vText VARCHAR2(2000); BEGIN vText := 'PASSWORD'; vHashed := DBMS_CRYPTO.HASH( src => UTL_I18N.STRING_TO_RAW (vText, 'AL32UTF8'), typ => DBMS_CRYPTO.HASH_SH1 --←ここのSH1をMD4,MD5に変更します。SH2にするとエラー ); return(vHashed); END; /
TEST 表に TNO 列、AREA 列、CLASS 列、SCORE 列、ADJUST 列、BIRTH 列があるとします。 この TEST 表から、TNO 列、AREA 列の頭 3 桁、SCORE 列の 1/10、SCORE 列の値に ADJUST列の値 を加算した値、および BIRTH 列の月末日を表示する SQL 文を 1 つ作成してください。SCORE 列の値の 1/10 は、小数点以下を四捨五入してください。BIRTH 列の月末日は、YYYY/MM/DD の書式で表示してください。SCORE 列には NULL 値はふくまれていませんが、ADJUST 列に NULL 値がふくまれている行もあるとします。ADJUST 列の NULL 値は、0 として計算してください。
社内WEBアプリのレスポンス障害が発生しました。 現在障害は解消されてい（特に何もしていない）ます。 障害の経緯ですが 突然社内WEBアプリからのレスポンスが返って（非常に遅い）こなくなる。 タスクマネージャーでサーバーのcpu負荷とメモリ負荷を確認するが問題無し。 Apacheのレスポンスは問題無し。 サーバーからSQL/PLUSを使用しconnectする。connectに問題無し。 10カラム1レコードのデータをsqlplusから索引するも20秒程度かかる。 一旦サーバーを再起動するが10分程度使用した所で同様の現象が発生しoracleが遅くなる。 取りあえず業務を停止し2～3時間放置。 なぜか問題無く使用出来る様になり今にいたる。 結果、サーバーの再起動を一回行った程度で何も行っていないのですが現在レスポンスに問題は無く社内WEBアプリも快適に使用出来ています。 alert_rocl.logも見てみたのですが特に問題は無いような気がしますが 正直あまりよく解りません。 3年程このシステムは問題無く稼働していたのですが、この様な現象は初めてです。 原因不明となると問題なので何か手がかりの様なものは無いでしょうか？ 以下環境となります。 Windows2008 Server R2 Enterprise Oracle Database 11g Release 11.2.0.1.0 - 64bit Production httpd 2.2.20 PHP 5.2.14 OracleにはOci8を使用して接続しています。 よろしくお願い致します。
Oracleのユーザー名を変更する方法をお教え頂けないでしょうか？ トライしましたが、最初の入り口が見つかりませんでした。 以上
Oracle Database Express Edition 11g Release2 for windows x32の downloadを試みましたが５時間かかる様でした。 ファイル容量：３１２MB 転送速度：17.3Kbyte/sec この、遅い原因は、回線の不具合によるものでしょうか？ 以上
以下のTESTテーブルから以下の結果を表示するようなSQLを教えて頂けないでしょうか。 TESTテーブルでTYPE(1,2,3)を抽出して、2,1,3の順番にして それぞれのTYPEごとにDBIDでソートをしたいです。 どうかよろしくお願いいたします。 table TEST DBID | NAME | TYPE ------------------------------- 1 | A | 1 2 | B | 2 3 | C | 3 4 | D | 4 5 | E | 1 6 | F | 2 7 | G | 3 8 | H | 4 9 | I | 1 10 | J | 2 結果 DBID | NAME | TYPE ------------------------------- 2 | B | 2 6 | F | 2 10 | H | 2 1 | A | 1 5 | D | 1 9 | G | 1 3 | D | 3 7 | G | 3
ORACLE11gで、一部のデータをカラムにしたいのですが、どういったＳＱＬを書けばよいかアドバイスください。 ◎カラム 予約番号 人員タイプ（男、女、小学生、幼児、他）＊左記タイプは変動しません。 人数 金額 ◎データ例 予約番号｜人員タイプ｜人数｜金額 001 ｜男性 ｜１ ｜1000 001 ｜女性 ｜１ ｜1000 001 ｜小学性 ｜１ ｜500 002 ｜男性 ｜１ ｜1000 002 ｜女性 ｜１ ｜1000 002 ｜幼児 ｜１ ｜300 002 ｜他 ｜１ ｜1000 ◎最終出力 予約番号｜男性｜女性｜小学生｜幼児｜他｜金額 001 ｜1 ｜1 ｜1 ｜0 ｜0 ｜2500 002 ｜1 ｜1 ｜0 ｜1 ｜1 ｜3300 ※NULLは０として出力出来れば理想です。 以上、アドバイス頂けましたら幸いです。
データベースに次の２つの表があったとします。 （表１「employee」） ・employee_id ・employee_name ・hire_date ・section 上記の４つのカラムを所持 例：（101,田中太郎,1995-10-01,総務） （表２「employee_data」） ・employee_id ・employee_name ・address ・phone_number 上記の４つのカラムを所持 例：（101,田中太郎,東京都,11-1111） この２つの表から次の条件で連携したい場合、どのようにすれば良いのでしょうか。 （条件） (1)表に表示するカラムはemployee_id,employee_name,hire_date,section,address,retirement_date (2)表１と表２のemployee_idが同じものだけを抽出 (3)hire_dateはYYYY/MM/DDの形に変更 (4)retirment_dateは空白（NULL）
OracleのSQLに関する質問です。 テーブルAの項目「材料一覧」には以下の例のように、カンマ区切りでデータが入っています。 例)1行目…小麦粉,卵,牛乳,大豆 　　2行目…小麦粉,アミノ酸 また、同じくテーブルAの項目「材料」には一つの材料が入っています。 例)1行目…小麦粉 　　2行目…卵 このテーブルAの「材料」の値が「材料一覧」に存在しているデータを抽出したくて、 ↓のようなIN演算子を実行してみましたが、対象データが1件も出ませんでした。 SELECT * FROM テーブルA WHERE 材料 IN (材料一覧) 上記のSQLをもう少し加工して、対象データを抽出することは可能でしょうか？ 可能であれば、その方法を教えて頂きたいです。
以下の様なテーブルがあります。 テーブルを結合してカウントを行っているのですが、 tbl1の商品コードに存在しないユーザが存在しない場合や tbl3のフラグが”0”または”1”が存在しない場合、 ゼロ件と出したいのですが出力されません。 どうすれば期待した結果になるか教えて下さい。 ■tbl1 ID SYOHIN_CODE ---- ----------- 1 A01 2 B01 3 C01 4 D01 5 E01 ■tbl2 ID NUM SYOHIN_ID ---- ------- --------- 1 NUM001 1 2 NUM002 2 3 NUM003 3 4 NUM004 4 5 NUM005 1 6 NUM006 1 7 NUM007 2 8 NUM008 3 9 NUM009 4 10 NUM010 1 ■tbl3 ID NUM_ID FLG ---- -------- ---- 1 1 1 2 2 1 3 3 1 4 4 0 5 5 0 6 6 0 7 7 0 8 8 1 9 9 0 10 10 0 ■実行した結果 SYOHIN_CODE FLG CNT ----------- ---- --------------- A01 0 3 A01 1 1 B01 0 1 B01 1 1 C01 1 2 D01 0 2 ■期待する結果 SYOHIN_CODE FLG CNT ----------- ---- --------------- A01 0 3 A01 1 1 B01 0 1 B01 1 1 C01 0 0 C01 1 2 D01 0 2 D01 1 0 E01 0 0 E01 1 0 実行したSQL select T1.syohin_code,T3.flg,count(T2.num) cnt from tbl1 T1 inner join tbl2 T2 on T1.id=T2.syohin_id inner join tbl3 T3 on T2.id=T3.num_id group by T1.syohin_code,T3.flg order by T1.syohin_code ;
プログラミング初心者です。Oracleを使っています。 現在、文字型で入っている時間(TIME)を合計して出す方法を考えています。 書式はHH24:MIであり、例えば08:30という風にテーブルには入っています。 これらの列を合計し、合計が160時間ならば160:00と出したいのですが、方法が分かりません。 SUMで合計が出せるようにTO_NUMBERに入れようとしたのですが、変換することができませんでした。 非常に初歩的な質問だとは思いますが、質問できる人がいないので、分かる方がいれば是非お願いします。
とあるテーブルAとBがあり、二つはあるキーで結合するSQLを頻繁に発行しています。両テーブルとも数万件のデータがあり、パフォーマンスが遅いということだったので、結合の条件としているキーのカラムにインデックスを作成したところ、劇的に速くなりました。 というところまでは良かったのですが、最近、負荷テストを行う目的で、さらに数百万件のテストデータをいっきに両テーブルにINSERTしました。この場合、インデックスは何かしら人の手によるメンテナンスが必要なのでしょうか？（ALTER INDEX REBUILD ONLINEという再構築のSQLがあることを知りました）　それとも、データがテーブルに追加されても既に以前インデックスが作成されている場合は特に人の手による保守は不要なものでしょうか？　今は負荷テスト中ですが、本稼働した後にも何か自動でデータベースのインデックスの保守作業は一般的に必要なものなのかどうか、必要な場合は具体的にどのようにやるのか教えて頂きたいです。 使用しているDBはOracle 11gです。
テキストファイル(test.txt)から文字列を一行ずつ読み込んでDBMS_OUTPUTで表示を最後の行まで繰り返すプロシージャを作りたいのですが、declareで実行する時は何の問題も出ないのにプロシージャを作ろうとするとエラーが発生します。 原因が理解できないのですが返答をお願いします。 create or replase procedure TXT_R as FH UTL_FILE.FILE_TYPE; V_LINE VARCHAR2(32767); BEGIN FH := UTL_FILE.FOPEN('DATA_PUMP_DIR','test.txt','R'); LOOP UTL_FILE.GET_LINE(FH,V_LINE); DBMS_OUTPUT.PUT_LINE(V_LINE); END LOOP; EXCEPTION WHEN NO_DATA_FOUND THEN UTL_FILE.FCLOSE(FH); END; 実行すると ORA-00905: キーワードがありません。 のエラ－が出ます
カーソルを使わずに結果セットを返す方法を知りたいです。 戻り値または、引数で返してもかまいません。 また、同様に動的SQLの結果を返す場合を教えてください。 ※結果セットは複数行の場合です。
データベースについていくつか質問があります。 1.シングルクォートとタブルクォートの違い シングルクォートは、文字リテラルを使いたいときに使い ダブルクォートは、特殊文字や大文字小文字を区別したいときに使うと参考書に書いてあったのですが、ダブルクォートでも文字リテラルを使えたのですがなぜでしょうか!?特に、ダブルとシングルの使用に区別は要らないのでしょうか!? 2.SQLが操作できるフリーソフトでオススメを教えてください。用途は、SQL(オラクルのブロンズ)の勉強に使います。
すみません、SQL初心者なので変な質問かもしれませんが、、SQLの書き方がわからないので教えてください。以下のような二つのテーブルがあるとします。 (Table: EMP2014) EMPNO | EMPNAME | TEL 100 | TARO | 03-1111-2222 101 | HANAKO | 03-2222-3333 (Table: EMP2015) EMPNO | EMPNAME | TEL 200 | JIRO | 03-3333-4444 201 | KYOKO | 03-4444-5555 このテーブルからSQLを実行して、以下のような結果を得たいです。 EMPNO | EMPNAME | TEL 100 | TARO | 03-1111-2222 101 | HANAKO | 03-2222-3333 200 | JIRO | 03-3333-4444 201 | KYOKO | 03-4444-5555 JOINというのは二つのテーブルを左右に並べた形での結合だと思うんですけれど、僕がやりたいのは内容の似たテーブル（上記の場合全く同じカラム）を上下に単純にくっつけて一つの出力結果にしたいです。ビューなどをつくって仮想的に一つの表にできるものなのでしょうか？ とても簡単なのかも知れませんが、、宜しくお願いします。
SQL PLUSの質問です。 データーベースはoracle11gを使用しています。 company_table code | company 001 | ジオニック社 002 | ツィマッド社 003 | アナハイム社 code:コード company:社名 day_table code | day 001 | 1993/3/5 002 | 1932/2/15 003 | 1986/5/23 code:コード day:設立日 どちらのテーブルもPrimary Keyはcodeです。 この2つのテーブルから、「現在月(今は2月)の会社と設立日、設立何年目か」を取り出したいです。 イメージとしては現在は2月ですので、上記の表で行けば、 ツィマッド社 | 1932/2/15 | 83 としたい所です。 select company,day, trunc(months_between(sysdate,day)/12+0.999) from company_table,day_table where company_table.code=day_table.code / これで一応値を取得する事は出来るのですが、全ての会社と設立日、2015年までの設立年数が取得されてしまいます。 現在の月だけ、という条件を付与して値を取り出す方法を教えて頂けないでしょうか。 よろしくお願い致します。
SQLの初心者です。 Aテーブル（a項目,b項目,c項目）とBテーブル（a項目,d項目,e項目）のテーブルがあります。 d項目順でAテーブルの項目のみ出力するにはどうしたらいいのでしょうか。 例えば次のSQL文ではd項目順で出力されますが結合の為、AテーブルとBテーブルの全項目が出力されます。 SELECT * FROM Aテーブル LEFT OUTER JOIN DITKM ON Aテーブル.a項目 = Bテーブル.a項目 ORDER BY Bテーブル.d項目 次のSQL文のようにAテーブルの項目を選択したらAテーブルの項目のみ出力する事はわかります。 SELECT a項目,b項目,c項目 FROM Aテーブル LEFT OUTER JOIN DITKM ON Aテーブル.a項目 = Bテーブル.a項目 ORDER BY Bテーブル.d項目 今回はAテーブルの項目数が少ないのでこれでもいいのですが、項目数が多くなると大変です。 上の様に項目を選択しないでAテーブルの項目を全て出力する事は可能なのでしょうか。 宜しくお願い致します。
いつもご親切にありがとうございます。 Oracleのトリガーについて教えてください。 テーブルA ----------------- 日付　date型 品名　char(15) 営業所 cahr(5) フラグ char(1) データをINSERTする際に、下記のように変更したいです。 (1)日付が2月且つ、営業所が00001の場合は99999に変更、 (2)日付が2月且つ、品名の後ろ5桁が00001の場合後ろ5桁だけを99999に変更 下記のようにトリガーを作成しているんですけど、 (2)をどのように入れたらよいでしょうか？ CREATE OR REPLACE TRIGGER TRG_テーブルA BEFORE INSERT ON テーブルA REFERENCING OLD AS OLD NEW AS NEW FOR EACH ROW BEGIN IF ( to_char(:NEW.日付,'YYYYMM') = '201502' ) AND ( :NEW.営業所 = '00001' ) THEN :NEW.営業所 := '99999'; END IF; END; / よろしくお願いします。
SQL構文を使用して、テーブル内の指定のデータを削除したいと思っています （oracle11gです） 条件抽出テーブル：PRM_A 抽出条件1の対象カラム：NO_1（6ケタで年月が入っている） 抽出条件2の対象カラム：NO_2（0か1が入っている） 抽出内容：NO_1の年月のうち、最小の値かつ、NO_2の値が0である →抽出結果として、6けたの年月が出力される 削除対象テーブル：DEL_TBL_A 削除条件用カラム1：DEL_COL_1 削除条件用カラム2：DEL_COL_2 削除条件：DEL_COL_1が「抽出結果」の1～4桁目（4桁の数値）と一致し、 DEL_COL_2が「抽出結果」の5～6桁目（2桁の数値）と一致する 以上の処理を行おうとして、まずは前半部分（抽出結果の抜き出しまで）を行いました。 select min(NO_1) from PRM_A where NO_2=0 上記で、想定できる結果の出力ができました。 その次に、削除条件を作成しようとしたのですが、下記の記載で実施したところ、 Error [row:3,col:130] ORA-00936: 式がありません。 と出力されました。 select substr((select min(NO_1) from PRM_A ),1,4) from PRM_A where NO_2=0 and (select min(NO_1) from PRM_A) ; 申し訳ございませんが、理由と正しいSQL文がお分かりになられる方がおりましたら、ご教授願えませんでしょうか
オラクルの単一ビューには関数を含まない、データのグループを含まないという記載が参考書にあったのですが、具体的にどういう状況をいっているのか教えて下さい。 すいません。追加で聞きたいことがありました。 同一データベースの異なるスキーマで、同じ表名を使用できる。 同一スキーマ内で、同じ表名と同義語名を使用できる。 この文言の意味合いもいまいち解せないでいます。 ご教授お願いいたします。
オラクルＳＱＬ試験をこれから頑張ろうと思っているのですが、クラムメディアという問題集サイトを最近知りました。 このサイトを利用された方に聞きたいのですが、ここでの感想が非常に的中率が高いといわれていることをたくさん拝見したのですが、これは練習問題の内容がということなのでしょうか。それともテストという時間を計った問題が最後にありますがそのテストの的中率ということなのでしょうか。 感想を読んだ限りでは、５５問中９５％がクラムメディアからでてきたものと書かれていました。 もしくはこのクラムメディアのテスト問題というのは、練習問題のページからランダムに出題されているものなのでしょうか。それとも予想的中問題として別個に用意されている問題なのでしょうか。 よろしくお願いします。
オラクルＳＱＬの問題でＤＥＣＯＤＥ関数について教えて下さい。 SELECT employee_id, DECODE(department_id,80, DECODE(commission_pct,NULL,'NO COMMISSION', salary * commission_pct), 'NOT SALES'} "COMMISSION" FROM employees; 上記のは 『ＤＥＰＡＴＭＥＮＴ＿ＩＤ列が80の場合でかつＣＯＭＭＩＳＳＩＯＮ＿ＰＣＴ列がＮＵＬＬ値の場合は「ＮＯ　ＣＯＭＭＩＳＳＩＯＮ」、ＮＵＬＬ値でない場合は「ＳＡＬＡＲＹ＊ＣＯＭＭＩＳＳＩＯＮ＿ＰＣＴ」が文字列に変換されて戻されます。また、ＤＥＰＡＲＴＭＥＮＴ＿ＩＤ列が80以外の場合は「ＮＯＴ　ＳＡＬＥＳ」が戻されます。』と解説があり、 次に SELECT employee_id, DECODE( NULL IF(commission_pct,NULL), 0,salary * commission_pct, 'NO COMMISSION') "COMMISSION" FROM employees; このコードについては 『ＤＥＣＯＤＥ関数が最初に戻す「ＳＡＬＡＲＹ＊ＣＯＭＭＩＳＳＩＯＮ＿ＰＣＴ」が数値型なので、「ＮＯ　ＣＯＭＭＩＳＳＩＯＮ」が数値に変換できないためエラーになります。』 と解説がありました。 正常に実行できるのは前段のもので後段はできないとのことなのですがどうしてかわかりません。 なぜ後段では数値型に変換する必要があるのか、前段では同じsalary*commission_pctが文字列として扱っているのかわかりません。 ＤＥＣＯＤＥ関数の ＤＥＣＯＤＥ（α、 　　　　　　　　β、γ 　　　　　　　　　δ） αがβのときはγを戻し、それ以外のときはδを戻すという公式があると思いますが、 もしかしてγとδは同じ型でなければいけないというルールがあるのでしょうか。でもたとえそうだとしてもまだ解せない部分があるのですが・・・。ご教授どうかよろしくお願いいたします。これはオラクルブロンズＳＱＬの参考書の模擬試験にあった問題になります。
オラクル初心者ですが、他人が作ったSQLのWhere分で下記表記があります。 どういう意味でしょうか？ where テーブル1.フィールド名1 = テーブル2.フィールド名1(+) AND テーブル1.フィールド名1 = テーブル3・フィールド名1(+) AND テーブル1.フィールド名1 = テーブル4.フィールド名1(+) AND ・・・・・続く ネットで調べると、結合の書き方のようですが、この場合どういった結合となるのでしょうか？ 例えば、通常結合の場合、 SELECT テーブル1.フィールド1, テーブル2.フィールド1, テーブル3,フィールド1 FROM テーブル１ JOIN テーブル2 ON　テーブル1.フィールド1=テーブル2.フィールド1 JOIN テーブル3 ON　テーブル1.フィールド1=テーブル3.フィールド1 同様と考えてよろしいのでしょうか？
SQLのご質問です（Oracle 11g）。 No 商品 1 A 1 B 1 C 2 A 3 A 3 D 4 E 【下記条件】 Aの商品が含まれている場合対象 また、BとCが混じっていても対象 その他の商品（AとBとC以外）が混じっていると非対象 結果 No 1,2が出力 とのSQLを作成したいのです。 条件が上手く浮かびません。 有識者の方ご享受宜しくお願い致します。
※連投すみません。削除も修正もできなかったので連投になってしまいました。 一番重要な説明をコピペミスしてしまいました。 明日になれば削除できるようなので古い方は明日削除致しますm(__)m ---ここから--- 今日は9/24という想定で各部署の10営業日前の日付を取得したいのですが良い方法が思いつきません。 （ここ↓を参考にしたらできそうな気がしましたが私の頭では無理でした。。。） http://okwave.jp/qa/q6677209.html 【休日テーブル】 部署コード,　休日 ----------------- busyo1,　　　9/13 busyo1,　　　9/14 busyo1,　　　9/20 busyo1,　　　9/21 busyo1,　　　9/23 busyo2,　　　9/7 busyo2,　　　9/14 busyo2,　　　9/21 busyo3,　　　9/20 【結果】(各部署の10営業日前の日付) 部署コード,　日付 ----------------- busyo1,　　　9/9 busyo2,　　　9/12 busyo3,　　　9/13 このような「発想の転換」が必要な感じのSQLが本当に苦手です。 全然思いつかずに今日も半日を浪費してしまいました。 何かコツのようなものがあるのでしょうか。 お礼は明日の夜になってしまいますが何卒よろしくお願いします。
日本語でどう説明すればもわからないのでタイトルも意味不明ですが 以下のテーブルからプリウスとアクアだけを取り出したいのです。 ○自動車テーブル○ 車名(PK),　連番(PK),　装備,　　数量 --------------------------------- プリウス,　　　1,　　エアコン,　　2 プリウス,　　　2,　　ブレーキ,　　1 アクア　,　　　1,　　ブレーキ,　　1 アクア　,　　　2,　　エアコン,　　2 レクサス,　　　1,　　　テレビ,　　3 レクサス,　　　2,　　　ビデオ,　　2 ノア　　　,　　　1,　　ブレーキ,　　1 ノア　　　,　　　2,　　　　テレビ,　　1 ○取得したい結果○ 車名 -------- プリウス アクア エアコン2個、且つブレーキ1個が装備されている車名を取得したいのです。 ブレーキ1個が装備されているだけのノアはエアコン2個という条件が満たされていないので取得したくありません。 そもそもこのようなことが可能なのかもわからないのですがjava側で処理をするには件数があまりに膨大なので行き詰まっています。 明日、職場からチェックさせていただきます。 お礼は夜になってしまいますが何卒よろしくお願いします。
現在様々なデータベースを使用していて、プログラムか何かの方法で、 OracleからMySql等ほかのデータベースにデータを移動することは可能でしょうか。 SELECT A INTO Bではできなかったと思います。 100件くらいの名前データだけなので、いちいちCSVに変換して再ロードするのが面倒です。
ORALCEのexpdpおよびimpdpの勉強のために自宅環境で操作していたところ、 impdpにてORA-39166（オブジェクトが見つからない）が発生してしまいした。 いろいろ調べてみたのですが、解決に至ってないためお力添えをお願いいたします。 【環境】 OS : linux ※CentOS（64bit） ORALCE11gXE 【やりたいこと】 studyスキーマのTEST1テーブルをexpdpでエクスポート（content=data_only）し、 同じスキーマ内のTEST2テーブルにimpdpにてデータを入れる。 【発生までの操作】 １．expdp system/パスワード@XE directory=test_dir tables=study.TEST1 log=test_exp.log content=data_only ２．impdp system/パスワード@XE directory=test_dir dumpfile=expdat.dmp log=test_imp.log tables=study.TEST2 content=data_only ２の操作をしたタイミングで以下のメッセージ。 ORA-39002: invalid operation ORA-39166: Object STUDY.TEST2 was not found. 【備考】 ・TEST1およびTEST2はまったく同じテーブル構造です。studyユーザで作成してます。 ・STUDY.TEST2は存在します。 （「sqlplus study/パスワード@XE」でログインしdesc TEST2で確認できるため） ・exdpは正常に終了しており、dumpファイルは「expdat.dmp」で作成されています。 以上です。 ご教授のほどよろしくお願いいたします。
dr0ulib.sql.sbsが見つかりません。という警告文が出てインストールが終了しないのですが、何が原因なのでしょうか？
コンピューターを使うには、データ（電子データ）が必要です。CPU、メモリー、グラフィックボード、チップセット、電源、ディスプレーなどが充実していても、データが空なら単なる鉄の塊で、飾るだけです。 データを保存するにはデータベースが必要と聞いた事があります。本当でしょうか？確かに、データベースにデータを保存する事が多そうですが、データベース以外にもデータの保存スペースがある気がします。私の記憶が確かなら、、キャッシュメモリーはデータベースの構成要素の一であり、キャッシュメモリーにデータがあればデータベースにデータがあるという事と聞いた気がする。 色々と記憶が曖昧で、混乱して、このように質問してます。 データベースにも色々ありますが、その王様はリレーショナルデータベースだとよく聞きます。リレーショナルデータベースは、ありとあらゆるデータを保存できて、何にでも活用できるそうです。本当でしょうか？ 例えば、リレーショナルデータベースの操作にSQLが使われますが、このプログラム文をリレーショナルデータベースに保存しますでしょうか？私の認識だと、SQLはテキスト形式のSQLファイルで、マイドキュメントなどのフォルダーに保存します。 SQLの他、小説、写真、音声、ビデオ、３次元CADなども、リレーショナルデータベースに保存しますでしょうか？ 私の認識だと、リレーショナルデータベースは表（２次元マトリクス）の集合です。表はセルで作られていて、行×列に配置しています。セル１つには、１行文字列、実数（整数と有限少数）、時刻、NULLだけが保存できます。これだと自由度や用途が狭く限られそうですが、セルを膨大に用意できて、これで幅広い自由度を得ます。 リレーショナルデータベースにも小説を保存できる。その方法は、小説を３０字区切りで分割し、主キーを振ること。１つのセルに３０字の文を保存し、その下に次の３０字の文を保存し、これを終わりまで繰り返します。正しいでしょうか？ リレーショナルデータベースにも写真を保存できる。先ず、赤表、青表、緑表の３つを用意する。各表のマトリクスサイズは膨大で写真のピクセルがセルに対応し、行×列に配置します。各セルには画素３原色の強度数（0～255だとgif形式だっけ？）を保存する。その後、赤青緑の３表を合成し、ビットマップで出力します。正しいでしょうか？ リレーショナルデータベースは銀行でよく使われていて、お金の出入りや顧客管理でリレーショナルデータベースは大活躍しているそうです。だけど、本当はもっと用途が広い？ フォルダファイルシステムとデータベースは別物と聞いた事があります。一方で、フォルダファイルシステムの基本はデータベースで、データベースに何かアプリを組み合わせてフォルダファイルシステムが形成されているとも聞いた事があります。どっちが正しいでしょう？どっちも間違い？
AスキーマとBスキーマがあり AにはSというシーケンスが作成されて、GRANTでBに権限付与されています。 BのUSER_SEQUENCESにはもちろん存在しないため、 SELECT MAX_VALUE FROM USER_SEQUENCES WHERE SEQUENCE_NAME でMAX_VALUEの取得でエラーになります。 これを回避する方法ってありますでしょうか？？ もしくはBのUSER_SEQUENCES に追加する方法がありますでしょうか？ どなたかお願い致します。
お世話になっております。 現在、oracleの11gの環境に対して object browser10を使用して環境構築を行っています。 DMPファイルをエクスポートし別環境に対して出力したデータを投入しているのですが この際にインポートの処理を中止したいとき、処理を中止するような方法等はあるのでしょうか？ object browser のプロセスを終了してもバックグラウンドで処理が続けられていますので 処理を中止する方法がありましたらご教授のほどお願いします。 なお、11gの環境にはそのほかにEnterprise Managerが導入されています。 以上、よろしくお願いします。
SQLで以下の様なテーブルがあります。 tableA、tableB、tableCを使って、IDとNUMとRANKを結合し、 ID毎に、 RANKが１つでもあったら、”○”でその数を RANKが１つもなかったら、”×”で0を 取り出したい。 「oracle10g」です。 -- tableA ID,NUM,NAME,・・・・・ 000001,001, 000001,002, 000001,003, 000002,001, 000003,001, 000003,002, -- tableB ID,NUM,RANK 000001,001,A 000001,001,B 000001,001,C 000001,002,A 000001,003,C 000002,001,B 000002,002,B 000003,001,A 000003,002,A 000003,002,C --tableC RANK,NAME A, B, C, 結果として、 ID,RANK,判定,個数 000001,A,○,2 000001,B,○,1 000001,C,○,2 000002,A,×,0 000002,B,○,2 000003,A,○,2 000003,B,×,0 000003,C,○,1 を得たいです。 どのようなSQLにしたらよいか、よろしくお願いします。
環境は次のようになっています Windows7 SP1 64bit VMware Player 5.0.3 for Windows 32-bit and 64-bit CentOS-5.2-i386 オラクルマスターBronze11gの資格を取りたいと思い最近勉強を始めました。 Oracle Database 11g R2 をインストールしようと思い↓のサイトに書かれているとおりに作業を進めました。 http://www.asami.asia/tech/oracle/11gR2-install.html 無事にOracleEnterpriseManagerにログインが成功したものの、エミュレータの電源を一度切り、再びエミュレータを立ち上げるとOracleEnterpriseManagerにはもう繋がらなくなっていました。「https://localhost.localdomain:1158/em/」と入力するとFireFoxには次のようなメッセージが表示されます。 「正常に接続できませんでした localhost.localdomain:1158 のサーバへの接続を確立できませんでした。 サイトアドレスは有効なようですが、接続を確立できませんでした。」 どうすれば再びログインすることができるのでしょうか？
こんにちわ Oracleをインストールしようとしていますができません。 Oracleのインストールを書籍やサイトを見ながら何度も試みていますが未だできたことがありません。 以下に私が行った手順を記載致します。 手順1：http://www.oracle.com/technetwork/jp/indexes/downloads/index.html 上記のサイトから以下の2つのzipをダウンロード ・winx64_12c_database_1of2 ・winx64_12c_database_2of2 手順2： winx64_12c_database_1of2を回答しインストーラを起動 手順3：インストーラにて以下を順番に設定する ・セキュリティ・アップデート ・ソフトウェアの更新 ・インストール・オプション ・システム・クラス ・Oracleホームのユーザ選択 ・標準インストール ・前提条件のチェック ・サマリー 手順４：サマリーの所でインストールボタンが活性化されたので押下 しばらくするとファイルがありませんとのエラーが度々出て、続行を押して無視していると 進行状況59%の辺りから進まなくなります。 エラーは添付画像参照です どうすればインストールができますでしょうか 以上よろしくお願いいたします
以下のようなテーブルがあります。 納品データ 注文番号　売上番号　連番　商品名 11111　　 　2　　　　　　1　　 さしすせそ 11111　　 　2　　　　　　2　　 たちつてと　 11111　　 　3　　　　　　1　　 なにぬねの 11111　　 　4　　　　　　1 　　はひふへほ 売上データ(既存データ) 注文番号　売上番号　連番　商品名 11111　 　 1　　　　　　 1　　 あいうえお 11111　 　 1　　　　　　 2　　 かきくけこ 注文番号は注文毎に付与される番号 売上番号は発送毎に付与される番号 連番は売上番号毎に付与される連番 毎回 納品データを売上データに取り込みます。 連番に関しては、 納品データと売上データで連番は連動しておらず、 売上データに納品データと同等の注文番号があれば、 注文番号の最大連番数を+1した番号で取り込みます。 更新後、売上データは、 注文番号　売上番号　連番　商品名 11111　　　 1　　　　　　 1　　 あいうえお(既存データ) 11111　　　 1　　　　　　 2　　 かきくけこ(既存データ) 11111　　　 2　　　　　　 3　　 さしすせそ 11111　　　 2　　　　　　 4　　 たちつてと 11111　　　 4　　　　　　 5　　 なにぬねの 11111　　　 5　　　　　　 6　　 はひふへほ としたいのです。 SELECT (SELECT 納品データ.連番+(SELECT NVL(MAX(売上データ.連番),0) FROM 売上データ WHERE 売上データ.注文番号 = 納品データ.注文番号) AS 連番) FROM 納品データ で売上データの連番+1はできたのですが、 売上番号が違う場合は、連番が1になるパターンとなり、 納品データ 注文番号　売上番号　連番　商品名 11111　　　 2　　　　　　 1　　 さしすせそ 11111　　　 2　　　　　　 2　　 たちつてと　 11111　　　 3　　　　　　 1　　 なにぬねの　← 11111　　 　4　　　　　　 1 　　はひふへほ ← 上記SQLですと、 更新後、売上データは、 注文番号　売上番号　連番　商品名 11111　　　 1　　　　　　 1　　 あいうえお(既存データ) 11111　　　 1　　　　　　 2　　 かきくけこ(既存データ) 11111　　　 2　　　　　　 3　　 さしすせそ 11111　　　 2　　　　　　 4　　 たちつてと 11111　　 　4　　　　　　 3　　 なにぬねの ← 5にしたい 11111　　　 5　　　　　　 3　　 はひふへほ ← 6にしたい となり、連番となりません。 どのようにSQLを書けばよいのか、困っています。 どうか、ご教示お願い致します。
既にデータベースをOracle 11gR2にて構築していて、初期化パラメータ「NLS_LENGTH_SEMANTICS」をデフォルトのByteベースからCharベースに変更しようとしています。この手順と影響範囲が知りたいです。 (1) 手順 私の理解では単純にSYSユーザにて以下を実行する。データベースの再起動は不要で有効になる。 SQL> ALTER SESSION SET NLS_LENGTH_SEMANTICS='CHAR'; 正しいでしょうか？ (2) 影響範囲 SID上に構築しているすべてのスキーマ上のテーブルに適用される、で正しいでしょうか？ また、既存テーブルと新規テーブルという意味では、既存テーブルには影響を与えない、らしいのですが、そうなのでしょうか？　新しくテーブルを作成した場合にのみCharベースになるということでしょうか。その場合、既存テーブルもCharベースに変更するにはどのような手順を踏めばよいのでしょうか？（例）テーブルのエクスポート→テーブルのドロップ→テーブル再作成→データのインポート？など、思いつきですがよい方法があれば教えてください） 以上、宜しくお願いします。
基本的な質問ですみません。Oracle 12cを初めて使うのですが、すごく単純に、ユーザを作成し、そのユーザでデータベースオブジェクト（テーブルなど）を作成する拡張子が.sqlのスクリプトを流したいです。 11gまでの場合、システムユーザでCREATE USERしたのちに、コマンドプロンプトを立ち上げて C:\Scripts> SQLPLUS <USER>/<PASSWORD> @createtables.sql とするだけで良かったと思います。 今回、12cではユーザの考え方が変わっており、CDBとPDBを作成しました。 > SQLPLUS /NOLOG SQL> CONN SYS AS SYSDBA （上記のようにローカル接続するとCDBに接続される） SQL> ALTER SESSION SET CONTAINER=PDB1; // PDBへ移動 SQL> SHOW CON_NAME // 念のため現在接続中のPDBの名前確認 SQL> STARTUP; （これでマウント状態だったPDB1がOPENしてREAD WRITEになる） この状態でCREATE USER文を実行してPDB1上でユーザを作成。 ここからなんですが、PDBやCDBへのログイン方法はわかたのですが、PDB上で作成したユーザにはどのようにしてログインするのでしょうか？　ログインしてテーブル作成をしたいです。また、テーブル作成のスクリプト文（.sql）があるのでそれを流したい場合は、コマンドプロンプトからどのように実行すればよいでしょうか？ 基本的な質問で恐縮ですが、宜しくお願いします。
Oracle10gでデータ管理していますが、インターフェースを外注した為、自由なデータ加工ができません。この為、keySQLを用いて、データをExcelとして取出し、Access2003にインポートして解析する方法で対応しています。 しかし、Excelで一度に取り出せるレコード数が65500程度に限られ、効率的にデータ取出しが出来ません。そこで、keySQLで、集計してレコード数を減らして取り出したいと思います。 しかし、Accessのクエリーデザイン画面のような集計ボタンが見当たりません。GUI的には集計できないという事でしょうか？クロス集計はできるようなのですが、Accessのような集計は、SQL文を直接記述する方法しかないのでしょうか？ keySQLにお詳しい方がおられましたら、データ集計の仕方をご教示下さい。 当方、残念ながら、まだSQL文を直接記述できるレベルにはありません。
よろしくお願いします。 【環境】 RHEL 5 Oracle 11g R2 【質問】 AUDIT_FILE_DESTパラメータ に　/opt/oracle/app/diag/AUDIT　を指定して ファイルとして出力しています。（必須監査も含めて）通常は正常に動作していますが、なぜか まれに以下のフォルダに監査ログが出力されてしまいます。 $ORACLE_BASE/admin/adump 出力されるログは今のところ以下の１種類の監査ログのみです。 ACTION:[7] 'CONNECT' DATABASE USER:[1] '/' PRIVILEGE:[6] 'SYSBA' CLIENT USER:[6] 'oracle' CLIENT TERMINAL][13] 'Not Available' 質問ですが、なぜこの監査ログのみ adump 以下の記録されるのでしょうか。
以下のようなA,Bテーブルから条件を指定してレコードを取得したい 【Aテーブル】 ID　Bテーブル番号 0001　　　　　　null 0002　　　　　　null 0003　　　　　　null 【Bテーブル】 シーケンス番号　　　ID　　　　登録日　処理済みフラグ 　　　　　　0010　　0001　2014/01/01　　　　　　　　0 　　　　　　0011　　0001　2014/01/02　　　　　　　　1 　　　　　　0012　　0001　2014/01/03　　　　　　　　0 ＜結果＞ 【Aテーブル】 ID　Bテーブル番号 0001　　　　　0001 0002　　　　　null 0003　　　　　null 条件としては以下の条件です。 (1)Aテーブルは全レコード出力する (2)BテーブルのAテーブルシーケンス番号が複数存在する場合、登録日が一番古いレコードを抽出する (3)Bテーブルの処理済みフラグが０のレコード以外はnullとする。 自分で抽出条件を作成したのですが、Aテーブルの0001分しか上手く抽出出来ませんでした。 SELECT * FROM Aテーブル AT (SELECT シーケンス番号, MIN(登録日) AS 登録日 FROM Bテーブル GROUP BY AテーブルID) BT1, (SELECT * FROM Bテーブル) BT2 WHERE AT.ID = BT1.ID AND BT1.登録日 = BT2.登録日 AND BT1.ID = BT2.ID AND BT2.処理済みフラグ = '0' 一度上の命令文でテーブルを作って元のテーブルとマッチングさせるしかないのでしょうか？出来れば一発で抜き出したいです。 ご教授宜しくお願いします。
いつもお世話になっております。 WinXP(32bit)にOracleXE11gをインストールしました。 そして、Win7(64bit)にClientをインストールして使用しようと思ったのですが、 インストールがうまくいっていないような気がします。 11g32bit用のClientをダウンロードし、「C:\app\product\11.2.0\client_1」にインストールしたところ、 問題なく終了したのですが、「C:\app\product\11.2.0\client_1」配下に 「network」フォルダも「bit」フォルダもないのです。 とりあえず、「network\admin\tnsnames.ora」を自分で作成したところ、 SQL*PlusでDBに接続はできました。 oo4oを使用したいと考えていたのですが、それもなく・・・ このインストールは失敗しているのでしょうか？ 原因がわかる方がいらっしゃいましたら、教えてください。 どうぞよろしくお願いします。
現在 ORACLE Database 10G Enterprise Editions を使用しているのですが ORACLE Database 11G Standard Editions に変更しようと計画しています 実際に変更された方がありましたら問題点と解決策を教えていただけますでしょうか よろしくお願いします
いつもお世話になっております。 SQLでのデータチェック方法について教えてください。 【売上テーブル】 日付、商品、代理店、金額 ---------------------- 5/1　消しゴム　AA商店　100 5/1　鉛筆　　　 BB商店　200 5/2　鉛筆　　　 ZZ商店　200 5/2　万年筆　　CC商店　150 【商品マスタテーブル】 品名 ----------- 消しゴム 鉛筆 【代理店マスタテーブル】 代理店 ----------- AA商店 BB商店 CC商店 この中で各種マスタに存在しないデータを抽出したいです。 select * from 売上テーブル where 商品　not in (select 品名 from 商品マスタ) or 代理店　not in (select 代理店 from 代理店マスタ) で抽出できるのはわかるのですが、 抽出結果に何故そのレコードが抽出されたのかをわかるようにしたいです。 日付、商品、代理店、金額　　理由 ------------------------------- 5/2　鉛筆　　　 ZZ商店　200　代理店マスタに存在しない 5/2　万年筆　　CC商店　150　商品マスタに存在しない このような感じで理由も追加することは可能でしょうか？ わがままですみません。 よろしくお願いします。
■DBサーバ Windows Server 2003 Oracle 9i R2(9.2.0.1.0) ■アプリケーション動作環境(複数OS) Windows Server 2012 Std(64bit) Windows 7(64bit) Windows 7(32bit) Windows XP(32bit) VB.net(.Net Framework 4.0)(32bitアプリ) 上記のアプリケーション動作環境からOracle 9iR2へODP.NETを使って 接続したいのですが、利用可能なODP.NETのバージョン(何bit版)はど れでしょうか。
こんにちは。 現在 oracle11を使用しています。 作業時間 を　文字型で '01:45' として格納したデータを Date型の'1.75'というデータに変換したいのですが、どうしたらできるでしょうか。 ご教授ください。
ふと疑問に思ったので質問します！ マイクロソフトのデータベースはジェットエンジンで動いていますが、オラクルのデータベースのエンジンは何という名前なのでしょうか？また、ＭＹＳＱＬとは別のエンジンなのでしょうか？統合されているのでしょうか？
はじめまして。 この質問に関連する内容につきまして、ご回答を頂けたのですが 以下の事項につきまして、追加で質問させて頂きたく存じます。 【過去の質問】 >SQLにて、”指定の文字「-」を検索し、先頭から「-」のひとつ前までを取得”を実現したいのですが、 >これは実現できますでしょうか。（substrやinstrなどでは無理そうなので、お知恵お借りしたいです。） > >例） >01234567-001 >0123456-001 >012345-001 >0123456789-001 > >上記に対して、期待する実行結果は次の通りです。 >01234567 >0123456 >012345 >0123456789 【ご回答】 >select substr(col, 1, instr(col, '-') - 1) >from tbl; >でいいのではないでしょうか。 >'-'が含まれていない場合はnullが返りますので、そのあたりの制御が必要であれば適宜修正してください。 ★追加質問内容 上記のcolがNULL（'-'が含まれない）場合に、colのそのままの値を出力という形にすることは可能でしょうか。 例） 01234567-001 0123456-001 012345-001 0123456789-001 0123456　　← 111345　 　← 上記に対して、期待する実行結果は次の通りです。 01234567 0123456 012345 0123456789 0123456　　← 111345　　 ← お手数ですが、ご教示のほど宜しくお願い致します。
はじめまして。 SQLにて、”指定の文字「-」を検索し、先頭から「-」のひとつ前までを取得”を実現したいのですが、 これは実現できますでしょうか。（substrやinstrなどでは無理そうなので、お知恵お借りしたいです。） 例） 01234567-001 0123456-001 012345-001 0123456789-001 上記に対して、期待する実行結果は次の通りです。 01234567 0123456 012345 0123456789 こんなことは可能でしょうか。
ＳＱＬ文を分析している最中ですが、以下の構文の意味がわかりません。 where Aテーブル.Aフィールド = Bテーブル.Aフィールド and Aテーブル.Aフィールド = Cテーブル.Aフィールド(+) and Aテーブル.Aフィールド = Dテーブル.Aフィールド(+) この構文の「(+)」の意味を教えて下さい。 宜しくお願い致します。
SQLコマンドで、下記を実行すると「2014/04/03」などが取得できると思ったのですが、 「14/04/03」で取得してしまいます。 （aaa_dateは、DATE型で、「2014/04/03」などが入ってます） select TO_DATE(aaa_date,'YYYY/MM/DD') from AAA_TBL YYYYをYYにして、下記を実行すると、なぜか、「2014/04/03」と正常に取得します。 select TO_DATE(aaa_date,'YY/MM/DD') from AAA_TBL 逆の気がするのですが、なぜでしょうか。
以下のようなテーブルがあるとします。 column1 a,b,c <- カンマの数は最大50 b,d c,x SQLを実行し以下のような結果を返したいです。 以下の３つのことをすればできそうなのですが複数列を複数行にする方法がわかりません。 1.strtokenで50カラムに分割（カンマ分割） 2.　50カラムを1カラムにする 3.DISTINCTで重複データの削除 結果 a b c d x カンマの数が50あるので、かなり長いSQLになるのですが SELECT文50個をUNIONしてやればできるかなとも考えているのですが 何か良い方法はないでしょうか。 よろしくお願いします。
Oracle9iでvarchar2(3)に半角スペースを含む′01 ′と′002′が存在する場合、MAXでは′01 ′が取れてくるのはなぜでしょう？
Oracleのストアドについて質問です。 32bit版ではコンパイルが通るのに、64bit版ではコンパイルが通りません。 Ora-00918列定義が未確定がでます。 列名ではなく、列番号で指定するとコンパイルが通るようになります。 ただし、きちんと値をとってきていない。 ・Oracle10.2.0.3 x32(windowsServer2003x32)でOK。 ・Oracle10.2.0.5 x64(windowsServer2008x64)ではコンパイルエラーになります。（Ora-00918） 列定義が未確定がでます。 同じくOracle11.0.1x64(windowsServer2008x64)でも同じエラーが出ます。 文字コードはS-JISです。 Oracle10.2.0.5にアップのパッチを当てています。 64bitでなにかあるのでしょうか？
暗黙的型変換で、 nvl2('aaa','iii',111) これは1を文字だと認識してくれますが upper(aiueo) これはエラーになる。 このように明らかに文字リテラルが入る箇所に ' 省略して入力しても暗黙的型変換が実行されないのはなぜ?
ORACLE　sqlPlusでの話ですが　 例えば、 deptno, dname, loc この三つの属性を持つ、dept表、dept_copy表があったとして INSERT INTO dept_copy SELECT * FROM dept WHERE deptno = 10; このような文は通りますか？ CREATE TABLE文ではこのような * を利用してもエラーにはならないはずなのですが。
VB.NET 2010でOracle11gに接続するプログラムを作っていますが、 接続方法がいまいちわからずに困っています。 プログラムを動かすサーバーはWindows Server 2008 R2の64bitだったので、 Oracle Clientも合わせた方がいいのかなと思い、64bit版をインストールしました。 ASP.NETのWEBアプリでは以下の接続文字列を用いてADO接続できました。 パラメータ値は例です。 （Web.configに記述） <connectionStrings> <add name="oracle" connectionString="Provider=OraOLEDB.Oracle;Data Source=db1;Password=pass1;User ID=user1" providerName="System.Data.OleDb" /> </connectionStrings> 次に、コンソールプログラムを作成し、同じサーバーで上記と同様の接続文字列で 接続しようとしましたが、エラーとなり接続できませんでした。 いろいろ記述を変えても接続できませんでしたが、最終的にOracle Clientの 32bit版を64bit版と違うフォルダにインストールし、以下の接続文字列で接続 できました。（INIファイルに記載） ConnectionString=Provider=OraOLEDB.Oracle;Data Source=db1;Password=pass1;User ID=user1 この状態でWEBアプリの方は何を使っているのかと思い、64bit版のインストールフォルダを リネームしたところ、WEBアプリの方は接続できなくなりました。 現状では32bitと64bitのOracle Clientが両方必要な状況ですが、本来ならどちらかだけで すむと思います。 32bitと64bitで接続文字列が変わるという情報は得られませんでした。 何がまずいのでしょうか？ 最初から32bit版をインストールすれば良かったのでしょうか。
データベースのテーブルのカラムのサイズを定義しようとしています。調べた限りでは、Oracle AL32UTF8においては、以下の容量を消費するとなっていました。 (1) ASCII -> 1 byte (2) 記号文字 -> 2 byte (3) 半角カナ、全角カナ、ひらがな、漢字 -> 3 byte これは、「1」や「a」などの英数字は1バイト、「%」や「#」などの記号は2バイト、「あ」「ア」「亜」などの全ての日本語は3バイトで保存されるということだと思いますが正しいでしょうか？ そうであれば、例えば氏名項目に２０文字を保証したい場合は、一番バイト消費の多い3バイトで見積もり、20 * 3 = 60バイトで定義すればよいでしょうか？ 第3水準文字、第4水準文字は4バイトで保存されるという記事もあったのですが、これらはとても稀なケースなので考慮せずに3バイトで考えておくのが一般的でしょうか？ あとは、バイトで考えずにNLS_LENGTH_SEMANTICSという初期化パラメータをCharにすることで文字数ベースにすることができるとも聞いたのですがこのアプローチは推奨されますか？全てのテーブルに影響があると思うので、大きな決断になると思うのですが普及したやり方なのでしょうか？ 以上、見解を教えて頂けると助かります。以上、宜しくお願いします。
前提：ORACLE 「一番古いレコードを取得する。」というのが条件です。 これを満たすだけであればSEQENCE等で連番を振れば満たせます。 しかし、日付時刻＋連番であればカラム一つで時刻まで把握できます。 (日付時刻を利用することはありませんが、付加価値？として。) というわけで、日付時刻＋連番(桁固定のサイクリック)の主キーを使いたいのですが、 以下のように同時刻で連番が先頭に戻ると順番が守れません。 時刻A９９９９ 時刻A００００　← あとから挿入したのに同時刻の先頭になる プログラムであれば同時刻なら連番を先頭から使うことも簡単ですが、 このよなことをSQL側だけでできるのでしょうか？ よろしくお願いします。
Oracleで一時表領域(TempTbs)用のTEMPファイル(TEMP01.DBF)を新規に作成しようと思いましたが 誤ってTEMP01.DBFに対してインデックス表領域(IndexTbs)を割り当ててしまいました。 ※IndexTbsを割り当ててるDBFファイルはもうひとつ存在してます なので一度下記のコマンドでオフラインにしました。 ALTER DATABASE DATAFILE 'E:\ORADATA\DATABASE1\TEMP\TEMP01.DBF' OFFLINE その後でE:\ORADATA\DATABASE1\TEMP\TEMP01.DBFを誤って別の場所(デスクトップ)へ 移動してしまい、その後で上記所定の位置へ戻し ALTER TABLESPACE IndexTbs DROP DATAFILE 'E:\ORADATA\DATABASE\TEMP\TEMP01.DBF';で 削除しようと思いましたが「ORA-02142:ALTER TABLESPACEオプションがないかまたは無効です」の エラーが表示され削除できません。OracleEnterpriseManagerでTEMP01.DBFファイルの属性を 確認するとステータスが「オフライン(リカバリが必要)」となっています。 正常にオフラインできていないようです。 残っていても問題ないのかもしれませんが、あっても気持ち悪いのでTEMP01.DBFを 削除したいのですが、正しい手順で削除するにはどうすればいいでしょうか？ よろしくお願い致します。
初めてWEBアプリのDB設計を行っています。 あまり時間がなく教育期間がないため、基本的なことがよくわかりません。 疑問 ・WEBページに対してマスタはもつものなのでしょうか。 例） WEBコード　001 　　　WEB画面名称　新規登録 　　　WEBアドレス　HTTP:// など・・・ 最低限これを押さえとけなどの参考ページ等ございましたら ご教授願います。
こんにちは。 みなさま、教えてください。 サーバーにOracle　11gデータベースを使用しています。 今回クライアントに先日リリースされたWindows8.1を導入しようと思っているのですが 最新のOracle Cliant(Oracle Databese 12c Release 1(12.1.0.1.0)はWindows8までの動作確認しか していないようです。 サポートセンターて問い合わせすると、今までのリリース経緯からすると Windows8.1対応リリースは来年10月頃になるのでは・・・ と言っていました。 私としては、それまで待てず当惑しています。 みなさま、このような悩みはございませんか？、
私は今大学でWEBデータベースの講義を受け、その場で実習形式で学んでいるのですがなかなか理解が追いつかないです。やることはやりますが、理解ができていない状態です。なので、理解を深められるようなサイト、または書籍を探しております。 使用ソフトは、エクリプス、トムキャット、A5M2で使用言語はJAVAです。また、今はWEBデータベースということで、カレンダーを作成しながら学んでいるところです。しかし、一から作るのは時間的にも内容的にもということなのでしょうが、ある程度出来上がったものを使っています。まずは何から講義以外で勉強するべきでしょうか。 話がまとまらないので、まとめますと (1)WEBデータベースにあたって何をどの順番で学んでいくのがよいか (2)それにあたっておすすめの参考書またはサイト この2つを回答としてお願いしたいです。よろしくおねがいします
PCを再起動した際にOracleのサービスが正常に開始していない事があります。 [サービス]で確認するとサービスもリスナーも「開始」状態になっているのですが、DBソフト(ObjectBrowserなど)で接続しようとすると接続エラーになります。 普通のWindowsのパソコンにOracle10gを入れている状態です。 パソコン自体が6～7年ぐらい使っている古い物なので、物理的な不調かもしれませんが・・・ 何かわかる方が居ましたら教えて頂きたいです。
YY書式はYearの略ですよね？？
初歩的な質問で申し訳ありません。 以下のような３つのテーブルを結合する際に、ある１つのテーブルの内容を全て 表示したまま、その他のテーブルの内容を付加するような出力をしたいと考えています。 考え方としては、内部結合という事で、INNER JOIN を使うというような事は想像できますが、 ３つのテーブルではそのような事が可能でしょうか？ 最終的には出力想定イメージのような形としたいと考えています。 [口座] 銀行No 顧客No 残高 ------------------- B001 C001 30000 B001 C003 10000 B002 C001 40000 B002 C002 10000 B002 C004 50000 B003 C004 60000 [銀行] 銀行No 銀行名 --------------- B001 foo銀行 B002 bar銀行 [顧客] 顧客No 顧客名 -------------- C001 阿部 C002 村上 C003 渡辺 C004 越智 【出力想定イメージ】 銀行No 銀行名 顧客No 顧客名 残高 ------------------- B001 foo銀行 C001 安部 30000 B001 foo銀行 C003 渡辺 10000 B002 bar銀行 C001 安部 40000 B002 bar銀行 C002 村上 10000 B002 bar銀行 C004 越智 50000 B003 C004 越智 60000 ※ 口座情報に対し、銀行情報や顧客情報がないケースも存在します。 教えて下さい。 よろしくお願いします。
いつもお世話になっております。 datapumpの実行方法（expdp/impdp）について、ご存知の方がいらっしゃいましたら、ご教授の程お願い致します。 ------------------------------ ●環境 　Oracle 11g (11.2.0.3) 以下の手順で、エクスポート/インポート テストを行ったのですが、 expdpで"tables"を指定するとエラーとなり実行できませんでした。 full=y（データベース全体）は動きました。 tablesで指定するものは、"CREATE TABLE"で作成したテーブル名ではないのでしょうか。 また、テーブルスペースを削除"drop tablespace tbl01"したのですが、 expdpでデータベース全体をエクスポートしたものから、impdpしても 削除したものが戻せませんでした。 impdpのコマンドに誤りがあるのでしょうか。 ●expdp実行 ----- ・tablespace作成 $ sqlplus / as sysdba SQL> create tablespace tbl01 datafile '+data/testdb/datafile/tblsp1' size 10m autoextend off; ----- ・sequence作成 SQL> create sequence seq1; ----- ・TABLE作成 SQL> CREATE TABLE TEST_TBL(USER_ID VARCHAR2(8) NOT NULL, DEPT_NO VARCHAR2(8))　tablespace tbl01; ----- ・INSERT実行（5件分） begin for i in 1..5 loop INSERT INTO TEST_TBL (USER_ID, DEPT_NO) VALUES (seq1.nextval, '1234') ; commit; end loop; end; / ----- ・expdp使用する為の準備 ディレクトリの作成と read/write 権限の付与 $ sqlplus / as sysdba SQL> create directory expdp_dir as '/u01/tpump'; SQL> grant read,write on directory expdp_dir to system; ----- ・expdb実行 $ expdp system/pass dumpfile=TEST_DIR:expdp_all.dmp logfile= TEST_DIR:expdp_all.log full=y ＝＝＝＝＝ "SYSTEM"."SYS_EXPORT_FULL_01"を起動しています: system/******** dumpfile=TEST_DIR:expdp_all.dmp logfile= full=y BLOCKSメソッドを使用して見積り中です... オブジェクト型DATABASE_EXPORT/SCHEMA/TABLE/TABLE_DATAの処理中です -中略- SYSTEM.SYS_EXPORT_FULL_01に設定されたダンプ・ファイルは次のとおりです: /u01/tpump/expdp_all.dmp ジョブ"SYSTEM"."SYS_EXPORT_FULL_01"が11:31:19で正常に完了しました ＝＝＝＝＝ $ expdp system/pass tables=TEST_TBL dumpfile=TEST_DIR:expdp_tbl.dmp logfile= TEST_DIR:expdp_tbl.log ＝＝＝＝＝ "SYSTEM"."SYS_EXPORT_TABLE_01"を起動しています: system/******** tables=TEST_TBL dumpfile=TEST_DIR:expdp_tbl.dmp logfile= BLOCKSメソッドを使用して見積り中です... BLOCKSメソッドを使用した見積り合計: 0 KB ORA-39166: オブジェクトSYSTEM.TEST_TBLが見つかりません。 ORA-31655: ジョブに対してデータまたはメタデータ・オブジェクトが選択されていません ジョブ"SYSTEM"."SYS_EXPORT_TABLE_01"が完了しましたが、2エラーが11:33:54で発生しています ＝＝＝＝＝ ●impdp実行 $ impdp system/pass dumpfile=TEST_DIR:expdp_all.dmp logfile= TEST_DIR:impdp_all.log ＝＝＝＝＝ マスター表"SYSTEM"."SYS_IMPORT_FULL_01"は正常にロード/アンロードされました "SYSTEM"."SYS_IMPORT_FULL_01"を起動しています: system/******** dumpfile=expdp_dir:expdp_all.dmp logfile= full=y オブジェクト型DATABASE_EXPORT/TABLESPACEの処理中です ORA-31684: オブジェクト型TABLESPACE:"UNDOTBS1"はすでに存在します ORA-31684: オブジェクト型TABLESPACE:"TEMP"はすでに存在します ORA-31684: オブジェクト型TABLESPACE:"USERS"はすでに存在します ORA-39083: オブジェクト型TABLESPACEの作成が次のエラーで失敗しました: ORA-01119: データベース・ファイル'+DATA/testdb/datafile/tblsp1'の作成中にエラーが発生しました。 ORA-17502: ksfdcre:4 ファイル+DATA/testdb/datafile/tblsp1の作成に失敗しました ORA-15005: name "testdb/datafile/tblsp1" is already used by an existing alias -中略- ※以下のORAエラーが多数発生 例：ORA-31684: オブジェクト型TABLESPACE:"UNDOTBS1"はすでに存在します 例：ORA-39151: 表"SYSTEM"."REPCAT$_PRIORITY_GROUP"が存在します。スキップのtable_exists_actionのため、すべての依存メタデータおよびデータはスキップされます 例：ORA-39111: 依存オブジェクト型OBJECT_GRANT:"SYSTEM"はスキップされ、ベース・オブジェクト型VIEW:"SYSTEM"."SCHEDULER_PROGRAM_ARGS"はすでに存在します -中略- オブジェクト型DATABASE_EXPORT/SCHEMA/TABLE/CONSTRAINT/REF_CONSTRAINTの処理中です オブジェクト型DATABASE_EXPORT/SCHEMA/TABLE/STATISTICS/TABLE_STATISTICSの処理中です オブジェクト型DATABASE_EXPORT/SCHEMA/TABLE/POST_TABLE_ACTIONの処理中です オブジェクト型DATABASE_EXPORT/SCHEMA/TABLE/TRIGGERの処理中です オブジェクト型DATABASE_EXPORT/SCHEMA/POST_SCHEMA/PROCACT_SCHEMAの処理中です オブジェクト型DATABASE_EXPORT/AUDITの処理中です ジョブ"SYSTEM"."SYS_IMPORT_FULL_01"が完了しましたが、146エラーが20:14:48で発生しています ＝＝＝＝＝
現在オラクルマスターブロンズの勉強をしています。 SQLを効率よく理解するため実機で動かしたく、黒本に付属しているDVDROMをインストールしようとしたのですが、11ｇデータベースのインストールがうまくいきません。 警告を無視して無理やりインストールを開始するとデータベース構築の時に容量不足でフリーズしてしまいます。 問題はTempファイルの容量不足と警告がでます。 必要はディスク領域は400MBに対して私のPCは264MBしかありません。 現状試したこと↓↓ ・Tempファイルの余分なファイルを全て削除⇒効果なし ・Tempファイルの容量拡大⇒効果なし ・Cドライブの容量確保⇒30GBの容量があるため、特に問題ない気がする。 ネットでも調べましたが、これ以上の解決策が浮かびません… 完全に白旗を振っている状況です。 OSはWINDOWS　VISTAです。 オラクルに詳しい方、是非ご協力お願いします。 また最悪オラクルDBがインストールができない場合、SQLプラスを使用できる環境もしくは策は何かありますでしょうか？ 宜しくお願いします。
お世話になります。 下のようなテーブルでデータのメンテナンスを行いたいのですが、update,deleteを効率良く行う方法はありますでしょうか？ No カラムA　カラムB　カラムC　カラムD　 ---------------------------------------- 1 aaa 111 あああ 2 aaa 222 いいい 123 3 aaa 333 ううう 4 aaa 444 えええ 5 aaa 555 おおお 456 6 bbb 222 いいい 7 bbb 333 ううう 8 bbb 555 おおお カラムAが「aaa」のレコードと「bbb」のレコードがあり、カラムB,Cは一部のレコードが重複しています。 この状態から、 ・No2のカラムDをNo6のカラムDにセット ・No5のカラムDをNo8のカラムDにセット ・No2,3,5のレコードを削除 したいのです。 ※カラムB,Cが重複している場合、カラムAが「bbb」のレコードにカラムDの値を反映し、カラムAが「AAA」のレコードは削除したいです。 update,delete共に効率良く行う方法があれば、助かります。 初歩的な質問かも知れませんが、御教示いただけますと幸いです。 よろしくお願い致します。
初歩的なＳＱＬの質問で申し訳ありません。 以前にも同じような内容で投稿させて頂きましたが、教えて下さい。 下記のような、ある異なる名前の同項目を持つ２つのテーブルが存在します。 《テーブル》 Ａテーブル　 　社員番号、日付、内容、所属、時間、結果 Ｂテーブル 　社員番号、日付、内容、理由 　※ 内容に関しては、ＡテーブルとＢテーブルで全く違います。 これらの２つのテーブルをマージさせ、社員番号毎の内容毎、日付順に したいと考えています。 以前に以下のようなUNIONを教えてもらいましたが、所属、時間、結果、理由という 項目全てを出力するとした場合、どのように記載すれば良いでしょうか？ UNIONの場合、項目が異なるとエラーとなってしまうかと、、、 《UNIONのSQL》 SELECT * FROM ( SELECT 社員番号, 日付, 内容 FROM Aテーブル UNION SELECT 社員番号, 日付, 内容 FROM Bテーブル ) ORDER BY 日付, 社員番号, 内容 教えて下さい。 よろしくお願いします。
Oracleについて質問です。 sqlldrでデータをロードする際に、入力ファイルのレコードの終端文字を 指定できます。デフォルトは改行コードとなっていますが これを「＠改行コード」にしたいのですがどうすればよろしいでしょうか。 具体的には、 infile '入力ファイル名' "str 'XX'" XXの箇所を「@と改行コード」としたいのですがうまくいきません。 お手数ですがご教示願います。
EVENT --+-------------------------+----------------+ id| EVT| start_date | end_date --+-------------------------+-----------------+ 0 |AAAA| 2013-06-01　10:00 | 2013-06-01 14:00| --+-------------------------+-----------------+ 1 |BBBB| 2013-06-01 12:00 | 2013-04-01 18:00| --+-------------------------+-----------------+ 2 |CCCC| 2013-06-02 10:00 | 2013-06-05 12:00| --+-------------------------+-----------------+ 3 |DDDD| 2013-06-02 13:00 | 2013-06-05 18:00| --+-------------------------+-----------------+ 4 |EEEE| 2013-06-02 14:30 | 2013-06-05 17:00| ↑こんな感じでイベントを管理するテーブルがあります。 イベントの開催時間の重複を加味して何らかのイベントのある 連続した時間帯のみ取り出すSQLを書きたいのですが、 いい案はありますでしょうか？ 結果的には以下の様な情報が取り出したいです。 2013-06-01 10:00 - 18:00 2013-06-02 10:00 - 12:00 2013-06-02 13:00 - 18:00 ID 0と1は連続してるので　10:00 - 18:00 ID 2はどれとも連続してないので　10:00 - 12:00 ID 4はID3の中にあるので無視
SQL文のOrder by句で2つのバインド変数を用いて、ソートする項目・ソート順を決めたいと思い、以下のようなSQLを作成いたしました。 Select row_Number() Over(Order by Case ：ITEM When 'PJコード' then PJコード When '部署コード' then 部署コード end Case ：LINE When '1' then DESC When '2' then ASC end .... バインド変数を直接Order by句に入れますと、結果は帰ってくるのですが、バインド変数の値がすべて無視されてデータが出力されます。 以上の理由より、Case文にてバインド変数の値を参照し、ソートする項目と順番を決めております。 上記のソースで実行しますとORA-00907：右かっこがありませんというエラーが表示されます。 2つ目のCase文（：LINE）を消し、最初のCase文だけを残して、並び順（DESC・ASC）を埋め込むと、実行される状態になります。 Oracleのバージョンは11gです。 ご回答よろしくお願いいたします。
現在、Oracle11g Release2　11.2.0.3（ASM使用）　の環境で、オンラインREDOログファイルが全て消失した場合を想定して、以下の手順で復旧の方法をテストしています。 ----- 1.sqlコマンドでテーブルに1件データを挿入する。 2.フルバックアップ（バックアップセット）を取得する。 3.sqlコマンドでテーブルに1件データを挿入する。 4.累積増分バックアップを取得する。 5.sqlコマンドでテーブルに1件データを挿入する。 6.DBをシャットダウンする。 (RMAN> shutdown immediate;) 7.オンラインREDOログファイルを全て削除する。 8.DBをマウントする。 （RMAN> startup mount;） 9.リストアをする。 （RMAN> restore database;） 10.バックアップの際に除外している表領域をオフラインにする。 （SQL> Alter database datafile '+DATA/orcl/DATAFILE/hoge2' offline drop;） 11.リカバリをする。 （SQL> recover database using backup controlfile until cancel;） （ログの指定は AUTO） 12.DBをオープンする。 （RMAN> alter database open resetlogs;） 13.sqlコマンドでテーブルの中を確認する。 （SQL> select * from HOGEHOGE;） （データが1件） ----- 上記の手順でDBをオープンにするところまで上手くいったのですが、 私の考えでは、13でテーブルを確認するとデータが2件はいっていると思ったのですが、 結果は、1件だけでした。 累積増分バックアップを取得した時点（データが2件入った状態）まで戻したいのですが、 解決の手がかりになる情報などがございましたらご教示いただけますでしょうか。 よろしくお願いします。
教えて下さい。 ある在庫システムを構築していますが、その中で、滞留在庫（６ヶ月動きがない在庫）を抽出 しようと考えています。 関係しそうなテーブルとしては、 　品目マスタ 　仕入データ 　発注データ 　在庫日次データ　※1 というテーブルが存在します。 ※1 在庫日次データというのは、仕入、発注、移動、出荷等のデータが、それらのアクションと 　　　同時にデータとしてそのテーブルに発生します。 イメージ的には、仕入データが発生した日から、在庫日次データにデータがないもをピックアップ すれば良いかと思われますが、どのようなＳＱＬを書けば良いでしょうか？ 初歩的な質問で申し訳ありませんが、教えて下さい。 よろしくお願いします。
こんにちは　shohei3728と申します。 会社にてoracleのシステムの一部を担当している者です。 現在、顧客先に導入しているシステムにて、エラーが発生し困っております。 知恵をお借りしたくこちらに相談させて頂きます。 具体的には下記の現象が発生しております。 ----------------------------------------------------------- バッチ処理にて下記のoracleのimportを行うと下記のエラーが発生しました。 imp user/password@sid file=filename full=y imp-00002:読み取り用のfilenameのopenに失敗しました。 インポート・ファイル：EXPDAT.DMP　> ----------------------------------------------------------- また、現状わかっている内容は以下になります。 ・ファイルはバッチと同じ階層にあり、パスが間違っている事はありませんでした。 ・oracle9i cl と　oracle 10g express　editionの同居 ・windows XP(32bit) 遠方の顧客なため、実際のコンソールを操作する事は難しいです。 （現状わかっている情報は顧客に電話にて操作して貰った内容になります。） 質問内容のレベルは低いかもしれませんが、顧客先にてトラブルが発生しているため、 藁をも掴む思いで書かせて頂いています。 当方の技術レベルもそこまで高くないので、噛み砕いてご助言いただければ幸いです。 ご教授の程、よろしくお願い致します。
RMANを使用してのバックアップとリカバリの検証 Oracleの知識があまりないので、変な事を聞いているかもしれませんが、 RMANのバックアップとリカバリについて以下の現象について、エラーが解決できずにいます。 ＝＝＝現象＝＝＝ Oracle11g Release2　11.2.0.3（ASM使用） 現在、指定の表領域以外のバックアップ（フルと累積増分）を取得し、累積増分を取得した時点までリカバリを行う検証を行っております。 ※バックアップコマンド ・フル 　backup incremental level = 0 format '+DATA/BACKUP/lv0backup_%U' database TAG 'dbbackup' plus archivelog TAG 'archivebackup' delete all input; ・累積増分 　BACKUP INCREMENTAL LEVEL 1 format '+DATA/BACKUP/lv1backup_%U' CUMULATIVE DATABASE TAG 'dbbackup' PLUS ARCHIVELOG TAG 'archivebackup' DELETE INPUT; RMANの環境構成に以下を設定 他はデフォルトです。 　CONFIGURE CONTROLFILE AUTOBACKUP ON; 　CONFIGURE CONTROLFILE AUTOBACKUP FORMAT FOR DEVICE TYPE DISK TO '+DATA/BACKUP/CF_%F'; 　CONFIGURE EXCLUDE FOR TABLESPACE 'TBLSP01';←データファイル6 　CONFIGURE EXCLUDE FOR TABLESPACE 'TBLSP02';←データファイル7 この設定で、以下のコマンドで累積増分バックアップを行った時点までリカバリしようとすると、エラーになります。 ～～～～～ RMAN> run{ set until scn = 1069044; restore database; recover database; alter database open; } 実行コマンド: SET until clause restoreが開始されました(開始時間: 13-08-14) チャネル: ORA_DISK_1が割り当てられました チャネルORA_DISK_1: SID=14 インスタンス=orcl_1 デバイス・タイプ=DISK ファイル6はデータベース全体のバックアップから除外されています。 ファイル7はデータベース全体のバックアップから除外されています。 チャネルORA_DISK_1: データファイル・バックアップ・セットのリストアを開始しています チャネルORA_DISK_1: バックアップ・セットからリストアするデータファイルを指定しています チャネルORA_DISK_1: データファイル00001を+DATA/orcl/datafile/system.313.823464749にリストアしています チャネルORA_DISK_1: データファイル00002を+DATA/orcl/datafile/sysaux.323.823464751にリストアしています チャネルORA_DISK_1: データファイル00003を+DATA/orcl/datafile/undotbs1.274.823464751にリストアしています チャネルORA_DISK_1: データファイル00004を+DATA/orcl/datafile/users.286.823464751にリストアしています チャネルORA_DISK_1: データファイル00005を+DATA/orcl/datafile/undotbs2.280.823464985にリストアしています チャネルORA_DISK_1: データファイル00008を+DATA/orcl/datafile/testspace3にリストアしています チャネルORA_DISK_1: バックアップ・ピース+DATA/backup/lv0backup_0ioha718_1_1から読取り中です チャネルORA_DISK_1: ピース・ハンドル=+DATA/backup/lv0backup_0ioha718_1_1 タグ=DBBACKUP チャネルORA_DISK_1: バックアップ・ピース1がリストアされました チャネルORA_DISK_1: リストアが完了しました。経過時間: 00:01:05 以前のバックアップへのフェイルオーバー restoreが完了しました(完了時間: 13-08-14) recoverが開始されました(開始時間: 13-08-14) チャネルORA_DISK_1の使用 RMAN-00571: =========================================================== RMAN-00569: =============== ERROR MESSAGE STACK FOLLOWS =============== RMAN-00571: =========================================================== RMAN-03002: recoverコマンドが08/14/2013 20:57:47で失敗しました RMAN-06556: データファイル6は、SCN 1069044より古いバックアップからリストアする必要があります ～～～～～ 私には、なぜバックアップから除外されているデータファイル6に対して「～古いバックアップからリストア～」といったメッセージが出てくるのか理解できていません。 おそらくリカバリで使用するコマンドが誤っているのだと思うのですが、このエラーの解決のヒントなどございましたらご教示ください。 よろしくお願いします。
CentOS5.9(i386)にOracle 10g Release(10.1.0.2) for Linux x86 30日トライアル版をインストール使用としていますが、runInstallerを実行すると、"Cheking monitor: must be configured to display at least 256 Colors"になります。 xdpynifoを実行すると、monitor buffer size = 256になっています。 対処方法をご教示頂けますようお願いいたします。
下記のサイトなどを参考にしてOracle Linux 6.4(x86)にOracle11gR2 Linux(x86)をインストールしましたが、ORA-12541:TNS:no Listnerになってしまいます。listner.oraファイルを開いてHOSTをIPアドレスに変更しましたが、状況に変化はなく、原因がわからず、困っております。 原因及び回避方法についてご教示くださいますようお願いいたします。 --------------------------------------------------------- http://www.server-world.info/query?os=CentOS_5&p=oracle11g&f=1 ---------------------------------------------------------
Oracleの動作の仕組みについてご教示ください。 1.初回、OracleクライアントがOracleサーバーのデータベースに接続するときは、接続要求をリスナーが受け付けるが、二回目以降、同じデータベースに接続する際、リスナーに接続要求を行わずに直接データベースとやり取りを行うという認識でいいでしょうか。 2.1の認識で間違いがない場合、Windows、Linuxとも同じでしょうか。また、バージョンによって違いがありますでしょうか。
こんにちは ２つのDBより新しい１つのDBにテータを移行することになりました。 VB.NETでプログラムを作成し移行しようと思っています。 今までは１つのDB内での移行は行った事があります。 今、悩んでいるのは他のDBのテーブルを参照したいのですが方法がわかりません。 よろしかったら教えていただけませんか？ オラクルバージョンは１１Gです。 VB.NET２００８でプログラムを作成するつもりです。 よろしくお願いいたします。
Oracleのトリガーについて質問です。 旧システムから新システムへデータ移行を行おうとしているのですが、 新システムではNEWテーブル（仮名）が新規で追加されています。 データ移行の方法として、旧システムのダンプファイルをエクスポートし、 新ステムにユーザを再作成後インポートしました。 その後、あらかじめ新システムでNEWテーブルのみテーブル指定のエク スポートを行っていたダンプファイルより、追加でインポートを行いました。 これでデータ移行完了と思っていたのですが、NEWテーブルのデータはトリガー により生成されるらしいのですが、どのタイミングで生成されるのでしょうか？ データ移行完了時はデータ0件です。 NEWテーブルをインポートする順番が逆なのでしょうか？ それともインポートではトリガーは起動しないのでしょうか？ または、トリガーの仕組みが消えている（？）のでしょうか？ （納入先に行かないと確認できない状態なので実際のデータベースが確認できません…） Oracleはあまり詳しくないため、わかりづらい質問かもしれませんが よろしくおねがいします。 【環境】 Oracle11g R2 Windows2008Server
Oracle Database Express Editionを使って勉強中の者です。 商品TBL、予約TBL、明細TBLと3つのテーブルを使用して、商品に対して予約と受取の明細がきちんと出ているのか、件数を出すSQLを組みたいと思っています。 例えば、 【商品TBL：shohin】 shohin_no / shohin_nm / price ----------------------------- s001 / name1 / 1000 s002 / name2 / 1500 s003 / name3 / 2000 【予約TBL：yoyaku】 yoyaku_no / shohin_no / status(1:予約, 2:受取) ----------------------------- y001 / s001 / 1 y001 / s001 / 2 y002 / s001 / 1 y002 / s002 / 1 y002 / s002 / 2 【明細TBL：receipt】 shohin_no / status / receipt ----------------------------- s001 / 1 / abc.. s001 / 2 / def.. s002 / 1 / ghi.. 【想定結果】 商品NO / 予約数 / 予約明細数 / 受取数 / 受取明細数 ----------------------------- s001 / 2 / 1 / 1 / 1 s002 / 1 / 1 / 1 / 0 s003 / 0 / 0 / 0 / 0 としたいのですが、どうにも上手くいかず、下記のような結果が返ってきます。 【結果】 商品NO / 予約数 / 予約明細数 / 受取数 / 受取明細数 ----------------------------- s001 / 2 / 2 / 2 / 2 s002 / 1 / 1 / 1 / 0 s003 / 0 / 0 / 0 / 0 私が実行したSQLは下記です。 恐らく何か初歩的な所で間違っているような気がするのですが、自分では分からず…。 一体何がいけないのか、ご教授の程、よろしくお願い致します。 select shohin.shohin_no as "商品NO" ,count(yoyaku_1.shohin_no) as "予約数" ,count(receipt_1.shohin_no) as "予約明細数" ,count(yoyaku_2.shohin_no) as "受取数" ,count(receipt_2.shohin_no) as "受取明細数" from shohin ,(select * from yoyaku where yoyaku.status = '1') yoyaku_1 ,(select * from yoyaku where yoyaku.status = '2') yoyaku_2 ,receipt receipt_1 ,receipt receipt_2 where yoyaku_1.shohin_no(+) = shohin.shohin_no and yoyaku_2.shohin_no(+) = shohin.shohin_no and receipt_1.shohin_no(+) = yoyaku_1.shohin_no and receipt_1.status(+) = yoyaku_1.status and receipt_2.shohin_no(+) = yoyaku_2.shohin_no and receipt_2.status(+) = yoyaku_2.status group by shohin.shohin_no order by 1
Oracle 11gを使用しているSQL初心者です。 テーブルの列名を取得する方法についての質問です。 テーブルの列名を取得するときは以下のSQLで取れると思っています。 select column_name from user_tab_columns where table_name = 'テーブル名'; --実行結果-- COLUMN_NAME ------------------------------ NAME1 NAME2 しかし、テーブルにTIMESTAMP型が含まれていると 「レコードが選択されませんでした。」 と表示されます。 TIMESTAMP型が含まれるテーブルは上記のSQLでは取得できないのでしょうか。 TIMESTAMP型が含まれるテーブルの列名の取得方法をご存知の方がいらっしゃいましたら、 ご教示ください。よろしくお願い致します。
Oracle11gでlistener.logが肥大化し、4GBまでいってしまい、 停止しました。 ログをスイッチし、Oracleは動作したのですが、 アプリケーションサーバからアプリケーションが動作しません。 例えば、SQLPLUSでSQLを発行すると正常ですが、 dllからは動作しません。 なんとなくですが、with句を用いたものが失敗しているようです。 やっぱりアプリケーションサーバを再起動でしょうか？ 日曜日まで再起動ができないため、何か方法があればご教示ください。
将来的にRACのクラスタ構成のDBサーバを導入するのですが、それにあたって事前に勉強しておく目的で、社内の余ったマシンを使って、RACを構築しようとしています。そもそも2台だけで構築は可能なものでしょうか？Oracleの版数は11gR2です。普通にやると外部の共有ディスクが必要のようなのですが、資産としてないので、可能であれば2台のマシンでなんとか構築したいと考えています。 今、実際にOracle Linux 6.4をインストールしました。BindのDNSインストール・設定も完了し、Oracle Grid Infrastructureのインストールを始めたところです。Storage Optionの画面で、 (1) ASM (2) Shared File System が選択出来るところまで来ています。ASMを選んで次に進むと、本来であればディスクの候補のリストが下に表示されるのでしょうが、何も表示されません。ここは、共有ディスクを購入すれば出てくるということなのでしょうか？ Amazonで検索したところバッファローやIODataなどの安価なNASが二万円前後で買えなくもないのですが、そういったものでも使えるはずなのでしょうか？ 2台のマシンにはそれなりの容量の内臓HDDがあるので、これらを流用して何とか構築したいです。。　また、(2)のShared File System（共有ファイルシステム）とは、NFSといった話でしょうか？　あまりASMとの違いがわかっていないのでご教示頂けると助かります。　NFSで構成する、という話であれば、もう一台だけオンボロマシンがないこともないのでOracle Linuxを導入してNFSとして構築できなくもないかもしれませんが、3台構成で複雑になるので避けたいです。。 お手数ですがおわかりの方いらっしゃいましたらご回答お願いします。
以下のようなテーブルで、レベルが4以下で点数が入力されているMAXの行を取得したいです。 よろしくお願いいたします。 職員番号氏名レベル点数 01000山田　花子4 01000山田　花子340 01000山田　花子230 01000山田　花子120 01100田中　あああ410 01100田中　あああ320 01100田中　あああ230 01100田中　あああ140 01200佐藤　あああ4 01200佐藤　あああ3 01200佐藤　あああ230 01200佐藤　あああ140 この場合、取得したいのは　職員番号01000の人は点数40の行、01100の人は点数10の行、01200の人は点数30の行の　合計3行です。
下記のようなテーブルで、　レベル4以下で点数が入力されているMAXの行を持ってくるにはどうしたらよいでしょうか？よろしくお願いいたします。 職員番号氏名レベル点数 01000山田　花子4 01000山田　花子340 01000山田　花子230 01000山田　花子120 01100田中　あああ410 01100田中　あああ320 01100田中　あああ230 01100田中　あああ140 01200佐藤　あああ4 01200佐藤　あああ3 01200佐藤　あああ230 01200佐藤　あああ140 この場合欲しい結果は　職員番号01000の人は点数40点の行、01100の人は点数10点の行、01200の人は点数30点の行　　3行を表示したいです。
Oracle Linuxのインストールされているnode1、node2をRAC構成にするために今Oracle Grid Infrastructureをインストールしようとしています。Cluster Node Informationの画面で今Hostname（及びVirtual IP Name）を2台追加しました。 ・node1.abc.com（VIP: node1-vip.abc.com） ・node2.abc.com（VIP: node2-vip.abc.com） 次にSSH ConnectivityのボタンからOSユーザgridとパスワードを入力し、Setupを押したところ、正常に完了しました。試しに各ノードのターミナル上から $ ssh node1.abc.com date $ ssh node2.abc.com date と打つとパスワード入力抜きで日付が表示されますので、実際に設定は成功していると考えます。しかしこの状態で次の画面に進もうとすると（もしくはTestボタンを押すと）次のようなエラーメッセージが表示されます。 [INS-06006] Passwordless SSH connectivity not set up between the follwoing node(s): [node1, node2] なぜこのようなことが起きるのでしょうか？ どのようにすれば回避できますでしょうか？ 以上、宜しくお願いします。
8桁の生年月日(バーキャラ型の文字列 (例：19830609）) から 基準日(こちらも同様に8桁のバーキャラ型(例：20130613)時点の年齢を求めたいです。 この場合結果は30 できるでしょうか？ <生年月日> ID 生年月日 1 19830609 2 19830601 3 19830501 ＜基準日＞ ID 基準日 1 20130616 2 20120616 3 20110601
旧バージョンのORACLE 10g XE(express版） の入手について 2013年6月現在、11ｇのみ公開されており 10ｇは ダウンロードリンクはありません。 どうしても 10ｇの環境を扱う必要があるのですが 入手できますでしょうか？ 古いＰＣにインストールしたバックアップはないかさがしてみたところ oraexe ディレクトリがみつかりました ただし、コピーした内容ですので実行環境はのこっていません。 何とかなりますでしょうか？
質問です。 下記テーブルで TOKUTENテーブルのHYOKIKAN_FR時点の氏名をNAMEテーブルからGETし TOKUTENテーブルにくっつけて出したいのですが、どうしたら良いでしょうか よろしくお願いいたします。 <NAME> SYOKUINID SIME TKYSTADATE TKYENDDATE 1 あああ 0000000020120331 1 いいい 2012040199999999 2 花子 0000000099999999 3 太郎 00000000 20140101 3太郎２ 2014010299999999 4 田中 0000000099999999 5 鈴木 0000000020101231 5 鈴木２ 2011010199999999 <KIHON> SYOKUINID SYKNCODE SEX BTD 101100 2 19800101 2 01000 2 19900101 3 02000 119990202 4 03000 1 19880808 5 04000 1 19870301 <TOKUTEN> SYOKUINCD HYOKIKAN_FR HYOKIKAN_TO TOKUTEN 00001 20120401 20130331 00002 20120401 20130331 00003 20120401 20130331 01000 20120401 20130331 10 01001 20120401 20130331 01100 20120401 20130331 20 01111 20120401 20130331 02000 20120401 20130331 30 02222 20120401 20130331 03000 20120401 20130331 40 04000 20120401 20130331 50 0500020120401 20130331 60
Oracle(10g)のあいまい検索について。 DB上に「ABC」「DEF」という２つのデータがある状態で、 「ABCDEF」で検索した場合について、 検索結果として、「ABC」と「DEF」の両方を得る方法はありますでしょうか？ （現状では対象データがありませんとなります。） LIKEによるあいまい検索や、Oracle textによる全文検索では、 上記の検索結果を得ることができません。 LIKEやOracle textの場合はあくまで部分一致なので、 検索対象の文字列（[ABC」「DEF」）より長い（「ABCDEF」）文字列での 検索はヒットしないようです。 ご存じの方いましたら、ご教示頂きたいと思います。 以上
お世話になります。 Oracle Sqlでの質問を致します。 Oracleのデータで重複データを削除したく 下記の構文を書いたのですが、 右括弧がありませんと言うエラーが出てしまいます。 見た目括弧はちゃんとあると思うのですが、 どこが悪いのか分かりません。 ご親切な方、ご教示くださいます様、 宜しくお願いいたします。 　　　　　　　　　記 DELETE FROM D入庫データ WHERE ID NOT IN ( SELECT MIN(ID) FROM D入庫データ GROUP BY PPID,台車番号,入庫数量,ロット番号,TO_CHAR（登録日時,'yyyy,mm,dd'） WHERE TO_CHAR(SYSDATE,'yyyy/mm/dd)=TO_CHAR（登録日時,'yyyy/mm/dd'） ）；
Oracle11gGoldの勉強をしているのですが、RMANのチューニングについて理解出来ない部分があります。 ・rmanの非同期I/Oを制御にするには、「DISK_ASYNC_IO」を有効にすべし ・ディスクに対するI/Oスレーブを制御するには、「DBWR_IO_SLAVES」を有効にすべし # I/Oスレーブとは非同期I/Oの際に使用されるバッファ 上の２つを踏まえた上で、次の一文が理解できません。 ・ただし非同期I/Oが有効な場合、I/Oスレーブは使用されません。 # 黒本のP223より 非同期I/Oが有効なら、I/Oスレーブが使用されるのではないでしょうか？ どなたか、RMANのチューニングに詳しい方、ご教示頂けませんでしょうか。
以下の条件を複合したSQL文を考えています。 SQLが分かる方、お手数ですがよろしくお願いいたします。 ●TBL_1、TBL_2のJUDGEが共に「OK」である、IDとJUDGEとTBL_2のDATE ◆TBL_1 ID ,JUDGE,DATE 001,OK ,20100101 002,NG ,20100102 ◆TBL_2 ID ,JUDGE,DATE 001,OK ,20130101 002,OK ,20130102 ◆希望検索結果 ID ,JUDGE,DATE 001,OK ,20130101 おそらく結合という処理が必要なのだと思います。 SQLの知識をお持ちでお時間がある方、よろしくお願いいたします。
自サーバDBでselectしたデータをそのまま他サーバDBへ直接insert出来ますか？　出来るんであればその方法を教えてください。
rmanで別ホストへリストアする際に、Oracleのマニュアルを見ると制御ファイルのautobackupからのリストアを行っています。 制御ファイルを別ホストのrmanのカタログなり制御ファイルに登録する必要があるかと思うのですが、 それはどうやってやればいいのでしょうか。 ちなみに以下を参照しています。 http://docs.oracle.com/cd/E16338_01/backup.112/b56269/rcmadvre.htm#i1007814
初歩的なＳＱＬの質問で申し訳ありません。 教えて下さい。 下記のような、ある２つの異なる名前の同項目のテーブルが存在します。 《テーブル》 Ａテーブル　 　社員番号、日付、内容 Ｂテーブル 　社員番号、日付、内容 　※ 内容に関しては、ＡテーブルとＢテーブルで全く違います。 これらの２つのテーブルをマージさせ、社員番号毎の内容毎、日付順に したいと考えています。 どのようなＳＱＬを書けば良いでしょうか？？ 尚、テーブルに関しては、諸事情であえて２つに分けてあります。 よろしくお願いします。
Oracle初心者です。 機器更新によるシステム移行を行っているのですが、 Oracleより、抽出データをCSVに出力する、プロシージャにて、 「ORA-29280: 無効なディレクトリ・パスです。」 のエラーが出て対処法が分からずに困っています。 以下、プロシージャ部分抜粋 -------------------------------------------------------------------------------- fno1 utl_file.file_type := utl_file.fopen('EXPORT_DIR','TEST1.csv', 'W'); fno2 utl_file.file_type := utl_file.fopen('EXPORT_DIR','TEST2.csv', 'W'); -------------------------------------------------------------------------------- 上記の、「EXPORT_DIR」とは、どこで定義されている変数(?)なのでしょうか？ なんとなく、EXPORT_DIRが正しくないためのエラーと考えているのですが… 処理の流れとしては、TEST.bat → TEST.sql → プロシージャ　　で、 TEST.batには試しに、SET EXPORT_DIR = D:\TEST としてみたのですが、エラーのままでした。 ひょっとして、Oracleに設定すべきもの？ すみませんが、どこでどのように定義するか教えてください。 環境： Oracle11g WindowsServer2008R2
あるカラムを整数で割り、結果が整数で計算できたもののみ 出力を行いたいのですがどうすればよいでしょうか？
オラクルで作成しているのですが、関係演算子が無効です。と出ます。 どこを修正すればよいでしょうか SELECT * FROM 表, ( SELECT col FROM 表 WHERE col1,col2 > ) WHERE col = MIN(col);
人の数が一番多いコードに属する情報を全て取得したいです。 コードに人が何人いるかという部分がわからず、式も頓珍漢な出来になってしまいました。 副問い合わせについても教えていただけるとうれしいです。よろしくお願いします。 SELECT * FROM 表 WHERE コード = (SELECT MAX(コード) FROM 表 )
SQLについてお聞きしたいです。番号カラムの中で最大の数字をもつフィールドと 同じコードを持つデータを、表から全て取得したいと思っているのですが 書き出すとGROUP BYの式が間違っているというエラーが出てしまいます。 SELECT * FROM 表 GROUP BY コード HAVING MAX(番号) =　コード どう調べればいいのか分からず四苦八苦しています。どこを直せばよいでしょうか？
sql文の中で以下のように時間を指定してselectしています。ですが、時間を「sqlの実行時間からn分前までの間」に修正したいと考えています。どなたかご教示いただけませんでしょうか。 select count(*) from tableA where hoge = '0000' and end_time >= cast('2000/1/01 00:00' as timestamp) and end_time < cast('2011/1/31 00:00' as timestamp) たとえば select count(*) from tableA where hoge = '0000' and end_time >= sqlを実施した時間から45分前 and end_time < sqlを実施した時間 のようにしたいです。 ご協力お願い致します。
Oracleのsql*plusで 以下のsqlを実行しています。 select count(*) from tableA ; 上記のの結果としてカウント結果が返却されているのですが、今回はその結果を割り算したいのです。イメージとしては以下のとおりです。 [select結果÷n] さらにいうと上記のような計算を同一sql内で計算できることは可能でしょうか。 また、sql内での計算が難しいようでしたら他方法をご教授していただけませんでしょうか。 勉強不足で、すみません。 ご協力、よろしくお願いします。
ストアドプロシージャの中であるSQLの前に ２秒程度待ちを入れたいのですが、可能でしょうか。 INSERT xxxxxxxxx ２秒待ち UPDATE xxxxxxxxx みたいな形にしたいのです。 どなたかお分かりになる方、ご教授のほど、お願い致します。
コミットされるタイミングに関して。。。 ----------------------------------------------------- REDOログバッファがREDOログファイルに書き出されるタイミングは ・コミットした時 ・3秒毎 ・REDOログバッファが3分の1になった時 ・DBWnがデータファイルに書込むとき ------------------------------------------------------- 上記の認識ですが、この中の3秒毎と言うのが理解できません。 こちらで試してみた結果がこちらです。 プロンプト1にて (1)sql接続 (2)name列確認 結果⇒test01 (3)name列更新 結果⇒test02 (4)コミットせずに3秒以上経過。 プロンプト2にて (5)sql接続 (6)name列確認 結果⇒test01 となります。 3秒毎にコミットされていない！！ (4)でコミットをしてやると、(6)での結果はtest02になります。 3秒毎とはどういったことなのでしょうか。 よろしくおねがいいたします。
環境：Windows 2008 standard edition 64bit Sqldeveloper：sqldeveloper64-3.2.20.09.87-no-jre java：jdk-6u33-windows-x64.exe 今回、Oracleへの接続として、Sqldeveloperを用いて接続しようと考えています。 　※ 厳密には環境の移植（32bit サーバ　⇒　64bit サーバ） その際に、以前の32bit環境では問題なく起動したSqldeveloperが、なぜかこのサーバでは 下記のようなポップアップ表示が出力されてしまいます。 《ポップアップ内容》 　Enter the full pathname for java.exe; その為、java.exe が存在するパスを指定し、OKボタンを押下したところ、今度は以下のような エラー表示となってしまいました。 《エラー内容》 　Cannot find a J2SE SDK installed at path:C:\Program Files\Java\jre6. Sqldeveloperはデスクトップ上から起動させていますが、そもそも64bit版の場合はどこのフォルダへ 格納するのが正しくて、上記のようなエラーを回避する為には何をすれば良いでしょうか？ 初歩的な質問で申し訳ありません。 教えて下さい。
baunceです。 とくに困っているわけではないのですが、ずっと気になって いたのでここで質問させていただきます。 テーブルサイズを求める際に、USER_SEGMENTを参照して求めて いる方があります。 この際、GROUP BY SEGMENT_NAME と記載されている方が多いのですが、これは必要なのでしょうか。 USER_SEGMENTはSEGMENT_NAMEでユニークにはならないのでしょうか。 ちなみに私が携わっている環境ではGROUP BY してもしなくても 同じ結果となるようです。 以上よろしくお願いします。
---------------------------------------- テーブルＡの カラム１、カラム２のデータが １０、作業Ａ ２０、作業Ｂ ３０、作業Ｃ ---------------------------------------- テーブルＢの カラム１、カラム２のデータが １０、2013/1/1 １０、2013/2/1 ２０、1999/1/1 ２０、1999/2/1 ---------------------------------------- のようなデータがあります テーブルＡ、テーブルＢのカラム１はリレーションです この２のテーブルから、テーブルＢの最新日付の カラム１のグループ毎に選択するＳＱＬを教えて下さい ---------------------------------------- 結果 １０、作業Ａ、2013/2/1 ２０、作業Ｂ、1999/2/1 ---------------------------------------- select テーブルＡ.カラム１,テーブルＡ.カラム２,テーブルＢ.カラム２ で、条件をどうしたら、テーブルＢの最新日付を取り出せますか
VB.netからプロシージャーを呼び出してます。 SQLで、inの中などで、動的にパラメータを与えたいです。 Select * from TableX where koumoku1 in (1,2,3,5,10) 例えば上の1,2,3,5,10 をパラメータとして外部から与えたいのですが、 プロシージャー側の実装としては、どのような方法があるのでしょうか？ パラメータの与え方は、 x = "1,2,3,5,10" のように1つの文字列でも良いし x[0]=1,x[1]=2,x[2]=3,x[3]=5,x[4]=10 のように配列みたいな形でも良いです。 よろしくお願い致します。
Oracleで以下のデータから１）、２）の条件でコードをselectしてくるには どのようなSQL文を書けばよいでしょうか。 [DATA] code　date　status　 0001　3-15　A 0001　3-15　B 0001　3-15　C 0002　3-15　A 0002　3-15　B 0003　3-15　B 0004　3-15　A 0005　3-15　C １）3-15においてstatusがAとBを持つcodeを返したい 　→0001,0002が返ってきてほしい ２）3-15においてstatusにCを持つがそれ以外（A,B）は持たないcodeを返したい 　→0005が返ってきてほしい 単純なものなのかもしれませんが、 どうか、お力添えのほど、よろしくお願いいたします。
引数がROWTYPE型のファンクションを呼び出したいのですが、 SELECT TEST_FUNC(MY_TABLE.*) FROM MY_TABLE; で呼び出せないのでしょうか？ （TEST_FUNCの引数はMY_TABLE%ROWTYPE型です） よろしくお願いします。
２つの日付を与えてその２つの日付の間の日付を以下のような表形式で返すSQL文を作りたい。 可能でしょうか？ 例えば、与える日付を以下の２つとして、 2012/01/05,2012/01/11 SQL文の実行結果は、 カラム名 2012/01/05 2012/01/06 2012/01/07 2012/01/08 2012/01/09 2012/01/10 2012/01/11 今回の例では、2012/01/05～2012/01/11までの7日間なので7件が返された。
お世話になっております。 ちょっと気になってグーグル先生に尋ねてみたのですが、尋ね方が悪いのか 納得する回答が得られないので、ご存知の方がいらっしゃいましたらご教示ください。 現在、Oracle11gを使っています。 ふと気になって、以下のSQLを投げてみました。 SELECT ROWNUM FROM ALL_CATALOG; すると「10668」行返ってきました。 この「10668」という数字は何でしょうか？ 「何でしょうか」というよりは、どのようなアルゴリズムで取得されているのでしょうか？ ちなみに接続する際はSQLPLUSとCSEを使用しましたが、どちらも同じでした。 ご存知の方、どうか私をスッキリさせて下さいm(_ _)m 私の上司は「分かんね！」と言い放ったので…。
Visual Studio 2010(c#) ASP.netでWeb開発をしており、 Oracle 10g(10.1.0)　Clientを使用してDBサーバーに接続しています。 「DLL 'OraOps10.dll' を読み込めません: アクセスが拒否されました。」というエラーが出て接続できなかったため、 ネットで解決策を探したところ、ASP.NETの権限を与えたら上手くいくとのことで権限を 与えたところ、下記のエラーが出ました。 「DLL 'OraOps10.dll' の 'GetRegTraceInfo' というエントリ ポイントが見つかりません。」 解決方法をご存じの方、ご教授ください。
はじめまして。 次のような通話履歴テーブルから利用頻度の高い電話番号順に ソートして全件を抽出してきたいのですが、よいアイデアが浮かびません。 わかる方がいらっしゃいましたら、お知恵を貸してください。 id　　電話番号　更新日時　　 --------------------------- 01　　1111　　　2013/02/17　 02　　2222　　　2013/02/17　 03　　3333　　　2013/02/17　 04　　2222　　　2013/02/16　 05　　3333　　　2013/02/16　 06　　2222　　　2013/02/10　 上記のようなテーブルから以下のように抽出しようと考えております。 id　　電話番号　更新日時　　 --------------------------- 02　　2222　　　2013/02/17　 04　　2222　　　2013/02/16　 06　　2222　　　2013/02/10　 03　　3333　　　2013/02/17　 05　　3333　　　2013/02/16　 01　　1111　　　2013/02/17　 以上、よろしくお願いいたします。
テーブルが２つあるとします。 テーブルAにはテーブルBの列名がデータとして登録されてます。 テーブルBには値が格納されてます。 テーブルA Key　　field1　　field2　　field3 ------------------------------ 1　　　item2　　item3　　item5 2　　　item1　　item2　　item5 ------------------------------ テーブルB Key　　item1　　item2　　item3　　item4　　item5 -------------------------------------------- 1　　　　101　　　205　　　　350　　　420　　　510 2　　　　111　　　112　　　　113　　　114　　　115 -------------------------------------------- ここでテーブルAとテーブルBへキーを指定して、 テーブルAのfield1～field3に登録されたすべての列名を元にテーブルBから値を取得したいです。 例として キー1を指定して取得すると 205,350,510 が取れます (item2,item3,item5の列名をテーブルAで指定した為） キー2を指定して取得すると 111,112,115 が取れます キーをパラメータとして与え、 できれば２つのテーブルを結合し、１回のSQLで取得する方法はありますでしょうか？ （1回のSQLでなくても簡易であれば良いですが） よろしくお願い致します。
お世話になっております。 Oracle11gを使っています。 PROCESSESの値を変えようとして、 以下のコマンドを実行しました。 ALTER SYSTEM SET PROCESSES = 10 SCOPE = SPFILE; Oracleを再起動した後、 sqlplusを使ってログインできなくなってしまいました。 表面的には、 ORA-12514: TNS: リスナーは接続記述子で要求されたサービスを現在認識していません。 というメッセージなのですが、サーバのログに以下の記述を見つけました。 ORA-00444: background process "MMAN" failed while starting ORA-00020: maximum number of processes () exceeded PROCESSESの値が小さすぎたようです。 SPFILEに定義されているので、 変更するにはsqlplusで接続して、 再度ALTER　SYSTEM　コマンドを実行すると思うのですが、 そもそもsqlplusで接続できないので、変更することができません。 データベースOpen時に、 nomoutにしてPFILEから起動しようとするとしても、 これもまた、接続できないので、使えない手段でした。 また、SPFILEのバックアップも取っていなかったので、どうにもなりません。 この窮状から復旧する方法について、教えていただければ幸いです。 よろしくお願いします。
どなたかアドバイス願います。 ストアドプロシージャから「DBMS_STATS.GATHER_TABLE_STATS」パッケージを使って アナライズをやりたいと思っているのですができません。 以下のSQLをSQL*Plusから実行するとうまく動作するのですが、 プロシージャから「EXECUTE IMMEDIATE」を使って動作させると コンパイルエラーとなってしまうのです。 ※本当はテーブル名を動的に変更したいと考えているのですが、まずはコンパイルを 通したいと思いまして以下サンプルとしています。 （SQL*Plus経由で以下を実行すると動作します） exec DBMS_STATS.GATHER_TABLE_STATS (OWNNAME=>'SCOTT',TABNAME=>'EX001',METHOD_OPT =>'FOR ALL INDEXED',CASCADE => TRUE); （コンパイルエラーとなるプロシージャ） CREATE OR REPLACE PROCEDURE TEAT01 AS BEGIN EXECUTE IMMEDIATE DBMS_STATS.GATHER_TABLE_STATS (OWNNAME=>'SCOTT',TABNAME=>'EX001',METHOD_OPT =>'FOR ALL INDEXED',CASCADE => TRUE); END TEAT01; (エラーメッセージ） Error(3,19): PLS-00222: この有効範囲内に、名前GATHER_TABLE_STATSの関数は存在しません。 以上よろしくお願いします。
はじめまして。 「ORA-29275: 不完全なマルチバイト文字」についてですが、10gまでのoracleデータベースではデータ登録時にエラーチェックが行われていましたが、11gからパフォーマンス重視の仕様の影響でチェックが行われなくなりました。 これによって、大量のデータの中にORA-29275に該当するデータが混入してしまって困ってます。 オブジェクトブラウザなどの機能を使用してデータの出力を試みても、出力中にORA-29275となり、出力すらできません。 データを適正な形にアップデートしてあげる必要があるのですが、対象のデータを特定する方法はありませんか？（対象の特定ができなければデータを修正できません。）
SQL文がわからなく困っております。 下記のデータ＊01を＊02のデータのようにSELECTするためには、 どのようなSQL文を書けばよいのかお教えいただけますでしょうか？ DBはoracle11gです。 ※01 ID 　　　　 所属部署 ＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿ 　　　1　　　　　a 　　 1　　　　　b 　 　 2　　　　　a 　　 2　　　　　b 　　 2　　　　　c 　　 3　　　　　a 　　 3　　　　　b 　 　3　　　　　c 　　 3　　　　　d ____________________________ ↓↓↓↓↓↓↓↓↓↓↓↓↓↓ ※02 　ID 　　所属部署　　　　所属部署2　　　所属部署3　　　所属部署4 ＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿　　 1　　　　　　　　　a　　　　　　　　　b 2　　　　　　　　　a　　　　　　　　　b　　　　　　　　　c 3　　　　　　　　　a　　　　　　　　　b　　　　　　　　　c　　　　　　　　　d
お世話になります。 DB：Oracle11g OS：Linux5 上記環境のDBサーバへ、Aさん、BさんがTera Term接続して、 2名とも同じスキーマSSS（DBA付与）でsqlplusにてDB接続しました。 Aさんが、TTTテーブルに対してINSERT文を実行し、 1行追記されていることをSELECT文にて確認することができましたが、、 その後Bさんが同じSELECT文を実行しても、Aさんが追記した行が表示されません。 お恥ずかしい質問で恐縮ですが、 Bさんからも、AさんのINSERT実行結果を即時に確認できるようにするための Oracleの（？）設定がありましたら、ご教示ください。 ※目的はAさんが実行したINSERT、UPDATE、DELETEの結果を、 　 Bさんが開いているTera Termのコンソールからも確認したい。
RMANの不完全リカバリをバッチ化しようとしています。 サービスの起動や状態を確認するバッチ(oracle_restore.bat)内で リカバリを行うsqlファイル(oracke_restore.sql)を呼び出して、 実行しようとしています。 不完全リカバリの方法としては、時間を指定してリカバリを行うので、 rmanコマンドに、時間を引数として渡したいのですが、渡し方がわかりません。 バッチ実行時に oracle_restore.bat 2013-01-21 10:55:00 set RESTORE_TIME_YMD=%~1 set RESTORE_TIME_HMS=%~2 こんな感じで、引数を渡して rmanコマンドに rman target sys/pass @C:\oracle_restore.bat %RESTORE_TIME_YMD% %RESTORE_TIME_HMS% こんな感じで渡すことで、 set until time内に正しく時間を渡したいです。 SET UNTIL TIME "TO_DATE('%1','YYYY-MM-DD HH24:MI:SS')"; ↑sqlplusならこれで渡せたのですが。。。 なにか良い方法はありませんでしょうか。 ご教示願います。 OS：WindowsServer2008 R2 Oracle：oracleDB 11g R2
以下のようなことを実現する方法についてお教え頂きたいです。 ■テーブル [XXXマスタ] ID char(8) 上記のテーブルにはIDという項目があるのですが、このテーブルで 使用していないIDのみをSQLで抽出できないかと考えております。 ただし、なるべくならワークテーブルのようなものは利用せずに 行いたいと思っております。 いい方法があれば教えていただきたいです。
テーブル TB の項目 CDがNUMBER型でユニークキーだとします。 このCDで ・ある値以上の空いている最小の番号を取得したい。 としたら１つのSQLで実現できますか？ 例） ＣＤの値が 6・・・・80　150・・・　（81から149は存在しない） という具合に存在していた場合に、101以上で空いている最小の番号 を取得したいのです。 この場合は101です。1が取得されても駄目、81が取得されても駄目です。 また、同じ条件でデータが 6・・・・150　200・・・　（151から199は存在しない） の場合には151が取得したいのです。 このような値を検出するSQLってわかりますか？ 以上よろしくお願い致します。
どなたかご教示下さい。 Oracle PL/SQLにてカーソル定義を下記のように行う場合 SELECT A.* FROM testtable A WHERE A.testID = 123 AND A.testName = 'aiueo'　←このAND条件を場合によって省く 例えば変数Aが0の場合に下記条件を省きたいのです。 AND A.testName = 'aiueo' 可能でしょうか？
現在、PerlでOracle-DBDを使用したスクリプトを作成しています。 テストした結果、コマンドプロンプトからの実行は問題ないのですが、 JP1から起動するとデータベースとの接続でエラーになってしまいます。 なにをやっても解消する気配がありません。 コマンドプロンプトからは実行可能なのでスクリプトは問題ないと思っています。 原因と対応方法についてご教授いただけないでしょうか。 宜しくお願います。 　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　以上
PL/SQLのバインド変数について調べていますが理解できず困っています。 [理解内容] 1．利点 　：SQL文の検索にバインド変数を利用すると、同一のSQLとして実行できる 　 ⇒ 繰り返し処理（ループ）では有効 ２．使用方法 　：静的SQL・動的SQLで使用可能　 　[疑問点] 　　静的SQLではバインド変数をどう宣言すればよいですか？ 　　[SQL*Plus]・[動的SQL]は例文がありました 　　●SQL*Plusでの宣言方法 　　　（例） 　　　　SQL> set null '<null>' 　　　　SQL> set head off 　　　　SQL> variable var_at_sqlplus number 　　●動的SQLの記述方法 　　　(例) 　　　　declare 　　　　　v_sql varchar2(256)； 　　　　　v_id varchar2(3)； 　　　　begin 　　　　　v_sql = 'select id into ：v_id from test'； 　　　　　execute immediate v_sql into v_id； 　　　　end; 　　●静的SQL　・・・【　エラーになる　】 　　　　declare 　　　　　variable v_id varchar2(3)； 　　　　begin 　　　　　select id into ：v_id from test' 　　　　end; どんな事でもかまいませんので回答よろしくお願いします
別DBのデータを扱う場合、Oracle同士であれば普通DatabaseLinkという使い道があるかと思いますが・・・別製品のDBの場合調べたところやはりDatabaseLinkのような機能はないようだということがわかりました。 元データがOracleにあるとして別DBのデータをキーで一致させたデータのうち特定条件に適合したものをOracle側に反映させるといったことを検討しています。 なにかいい方法はないでしょうか？ よろしくお願いいたします。 （別DB・・・種類が多いのです。対象は、次の６種類です。　MySQL、PostgreSQL、SQLServer、DB２、HiRDB、Symfoware）
バックアップに別サーバに同じＯＲＡＣＬＥテーブルを作成することとなりました。 どんなＳＱＬでそのテーブルを作成したのか資料が無くてわかりません。 調べる方法を教えてください。よろしくお願いします。
sqlplusにてbatファイルを起動するだけで前月のデータを取得しようとしていますが、 ネットで検索等してもなかなかうまく行きません。 以下のようにbatファイルを起動すると、常に前月のT_URIのデータを取得させたいのですが、 どのようにすれば宜しいでしょうか？ご教示頂けると助かります。（期間の日付をじかに入力すれば、取得できたのですが、同じように取得したいテーブルが複数あるので） 月初日は常に1日、月末日は常に31日にして、前月をbatファイルかsqlファイル上で計算させる方法はないのでしょうか？ （会社の業務でoracleのデータベースから抜き出そうとしています。） SQLPLUS ABCD/ABCD@ORACLE.XYZ.WW @0031_ymd.sql PAUSE ↓0031_ymd.sql set heading on set echo off set underline off set termout off set pause off set pagesize 0 set trimspool on set feedback off set termout off set linesize 1000 set lines 30000 spool D:\hoge.csv SELECT * FROM T_URI S WHERE AND S.KJN_YMD >= yyyymmdd AND S.KJN_YMD <= yyyymmdd
DBLINKを使用して、Oracle 10gからSQLServer2005に接続してSQLServer2005のテーブルを参照しています。テーブルデータを参照することはできるのですが、データベースとのセッションを切断してもサーバ上にhsodbcプロセスが解放されずに残る現象が発生しています。 当初は、ストアドプロシージャの不具合と考えていましたが、SQLPLUSでデータを参照した後、SQLPLUSを終了させても プロセスマネージャ上でhsodbcが解放されずに残っていたため、 APの問題ではないと考えています。 DBLINK、Oracleの設定で不備があるような気がするのですが対応策はあるのでしょうか。 お手数ですが回答をお願いします。
あるＳＱＬを実行した結果 ある集計行(X1)が出るとします。 集計行(X1) ------- 12 15 23 24 28 31 45 47 ------- ここで、集計行の左の数字でグルーピングして、その中のもっとも小さい数字を 集計行の横に出すとします。（行数は変わりません） 集計行(X1),項目2 ------- 12　,12 15　,12 23　,23 24　,23 28　,23 31　,31 45　,45 47　,45 ------- もとのＳＱＬを 「select X1 from zz where 条件１」 とした場合、どのようにすればこの結果が得られるでしょう？
こんばんは。 Oracle 11gデータベースのいくつかのテーブルを Microsoft Access 2000のテーブルにコピーしたいのですが お勧めのフリーソフトはございますでしょうか？
Oracle11gを使用しています。 制約と同じようにINDEXも無効化することは出来るのでしょうか。 テーブル名と、フラグ（無効化/有効化）を引数として、制約、INDEXの無効化、有効化 を行うプログラムを作成したいと考えています。 制約は、「ALTER TARBLE テーブル名 DISABLE(又はENABLE ) CONSTRAINT 制約名」 にて無効化、有効化することが出来ますが、INDEXも同じように無効化、有効化することは 出来るのでしょうか？ よろしくお願いします。
はじめまして。 Oracle11gで開発しています。 初歩の初歩の質問なのですが。 下記のように複数のレコードをまとめて、 INSERT先のテーブル(レコードを１個に)に入れ込むまでの処理です。 全てNUMBER型のテーブル列で、NOT NULL制御を施しています。 そのようにすれば、明示的にNULLは無くなり、「0」がデフォルトになると思ったのですが、 「tb_trn_aa_day_r.tx_00」はNULLのままでした。 初期化の「tb_trn_aa_day_r := null;」がまずいのでしょうか？ ちなみに、tb_trn_aa_day_r.tx_00～tx_23に「0」をセットしてもなぜか、NULLとなり、 「tb_trn_aa_day_r.tx_sum」が全てNULLとなってしまいます。 初期j化はどのようにすべきでしょうか？ よろしくお願いします。 /* Aデータ初期化 */ tb_trn_aa_day_r := null; IF c_aa_data_r.hour = '00' THEN tb_trn_aa_day_r.tx_00 := TO_NUMBER2(c_aa_data_r.tx); ELSIF c_aa_data_r.hour = '01' THEN tb_trn_aa_day_r.tx_01 := TO_NUMBER2(c_aa_data_r.tx); ELSIF c_aa_data_r.hour = '02' THEN tb_trn_aa_day_r.tx_02 := TO_NUMBER2(c_aa_data_r.tx); ELSIF c_aa_data_r.hour = '03' THEN tb_trn_aa_day_r.tx_03 := TO_NUMBER2(c_aa_data_r.tx); ..... ELSIF c_aa_data_r.hour = '23' THEN tb_trn_aa_day_r.tx_23 := TO_NUMBER2(c_aa_data_r.tx); END IF; dbms_output.put_line(tb_trn_aa_day_r.tx_00); /* 集計データ */ tb_trn_aa_day_r.tx_sum := TO_NUMBER2(tb_trn_aa_day_r.tx_sum) + TO_NUMBER2(c_aa_data_r.tx); /* INSERT処理 */ CREATE OR REPLACE function SYNONIM.TO_NUMBER2(str varchar2) return number is begin return to_number(str); exception when others then dbms_output.put_line('TO_NUMBER2 error: ' || SQLERRM); return 0; end; /
VisualBasic 2010 よりOracle7へ接続しようと考えております。 ※普通ならばOracleのバージョンを上げたほうがよいのは理解しています。 上記の接続方法としてどのようなものがありますでしょうか？。 現在はODBCで接続していますが、接続が遅くて改善できないものかと悩んでおります。 どなたかODBCよりも早く接続できる方法をご存知に方がいらっしゃいましたら ご教授お願い致します。
oracle sql developer(Version 1.5.1 )を使用してsqlを叩いてもエラーが出てくるので ご助言いただきたく思います。 update table set comment = '新規' where code = '111'; 上記のSQL文を実行すると、ora-01747のエラーが出ます。 commentという名前のカラムですが、 ここを別のカラムmailにして実行するとうまくいきます。 カラムの型は以下の通りです。 comment : varchar2(500 BYTE) mail : varchar2(128 BYTE) 唯一気がかりなのは、通常ならば update,set,where だけが濃い青色で表示されるのですが、 commentもなぜか濃い青色で表示されます。 (mailは濃い青色になりません。) ご助言の程、宜しくお願い致します。
以前、MySQLでのマージ方法について質問した者です。 今度は、Oracleでのマージ方法ですが、 重複行が発生して困っております。 状況としては、スキーマが二つあります。db1とdb2です。 それぞれ、同じ構造のテーブルを持っていて、格納しているデータだけが違います。 db1にdb2をマージしようとしているのですが、上手くいきません。（重複行が発生します） 方法として、以下の２パターンを試行しました。 （１）インポート 　　　db1をインポートした後に、同じスキーマにdb2からのダンプファイルでインポート　　 （２）ダイレクトパスインサート 　　　insert/*+ APPEND */ into db1.myTable (SELECT * FROM db2,myTable);. 以下は当方の使用環境です。 Windows7 Pro 64Bit Oracle11g　Standard Edition 他に必要な情報があればお聞かせください。 よろしくお願いします。
現在、visual studio2010の環境で、oracle 11gのＤＢに接続を行っています。 その時、Date型の日付を取得しているのですが、DB上登録されているのに値が空白になっていました。 日付が、1990年以降であれば問題ないのですが、たまたま、1899年代の日付が設定されているデータでした。 oracle 11gでは、1990年以前は、サポートしていないのでしょうか？ よろしくお願いいたしす。
お世話になっております。 件名のエラースタック設定について質問があります。 OSはwindows。 oracleのバージョンは11gです。 現在、複数のeventを設定しようと考えておりまして、以下のようなSQLを実行しました。 （仮として1111と2222のエラースタックを設定すると想定します。） ・alter system set event = "1111 trace name errorstack level 3:2222 trace name errorstack level 3" scope=spfile; 上記のSQLを実行後、下記のSQLにて設定を確認しました。 ・select name,value,display_value,isspecified,ordinal from v$spparameter where name='event'; 出力結果のvalueおよびdisplay_valueに「1111 trace name errorstack level 3:2222 trace name errorstack level 3」と表示されているのですが、これは正しく1111と2222のエラースタックが設定されたということで宜しいのでしょうか？ 宜しくお願いします。
自作のストアドプロシージャのどの関数がいつ呼ばれたかを記録したいと思いました。 例えば FUNC_A という関数があって、その関数の先頭で、その関数を実行しているセッションのSIDと関数名を取得できないものでしょうか。 そのようなパッケージ DBMS_**** みたいなものがあって、下記のような感じで使えたらなあと考えています。 ------------------ FUNC_A IS sid NUMBER; funcName VARCHAR2(30); BEGIN SELECT DBMS_****.GET_EXECUTING_SID INTO sid FROM DUAL; SELECT DBMS_****.GET_CURRENT_FUNC INTO funcName FROM DUAL; ... (sid と funcName を現時刻とともに記録） END; ------------------ このような目的に合致したパッケージ、あるいはこの目的を実現する方法などありますでしょうか。 よろしくお願いします
こんにちは。 SQLの学習をしているのですが、Sequenceの問題で解き方が分からないため質問させて頂きます。 問題は以下となります。 A sequence was created with the DDL statement shown below: CREATE SEQUENCE my_seq START WITH 5 INCREMENT BY 5 CACHE 5 User1 successfully executes the following statements in Connection1: VALUES NEXT VALUE FOR my_seq INTO :con1hvar VALUES NEXT VALUE FOR my_seq INTO :con1hvar User2 successfully executes the following statement in Connection2: VALUES NEXT VALUE FOR my_seq INTO :con2hvar After User1 & User2 are finished, User3 executes the following statement in Connection3: SELECT NEXT VALUE FOR my_seq FROM sysibm.sysdummy1 Which value will be returned by the query? A. 20 B. 25 C. 50 D. 55 Answer: D 上記の解き方をご存じの方はご回答お願い致します。
いつもお世話になっております。 以前下記についてお伺いいたしました。 今回はその続編です。 http://oshiete.goo.ne.jp/qa/7772587.html 何卒ご教授ください。 よろしくお願いいたします。 例えば下記のようなテーブルがあるとします。 【運賃テーブル】 日付　　　出発　 到着　運賃 10月1日 東京 青森 8000円 10月1日 東京 大阪 5000円 10月1日 東京 福岡 8000円 10月1日 青森 大阪 6000円 10月1日 青森 福岡 9500円 10月1日 大阪 福岡 5000円 10月1日 大阪 青森 9800円 10月2日 東京 青森 null 10月2日 東京 大阪 5000円 10月2日 東京 福岡 8500円 10月2日 青森 大阪 6000円 10月2日 青森 福岡 9500円 10月2日 大阪 福岡 null 10月2日 大阪 青森 9000円 10月3日 東京 青森 8000円 10月3日 東京 大阪 5000円 10月2日 東京 福岡 8500円 10月2日 青森 大阪 6000円 10月2日 青森 福岡 9500円 10月2日 大阪 福岡 5500円 10月2日 大阪 青森 9000円 仮に運賃を日付で比較した場合（上記を水平展開した場合） 下記のようになります。 【運賃比較】 　　　　　　10月1日 10月2日 10月3日 東京 青森 8000円 ------ 8000円 東京 大阪 5000円 5000円 5000円 東京 福岡 8000円 8500円 8500円 青森 大阪 6000円 6000円 6000円 青森 福岡 9500円 9500円 9500円 大阪 福岡 5000円 ------ 5500円 大阪 青森 9800円 9000円 9000円 ここからが前回と違うのですが 上記の場合、nullがあったら、さらにその前日と 比較する方法を教えていただきたいのです。 ※ 最悪、比較データがない場合、過去1週間前 　　までさかのぼる必要がでることもありえます。 つまり上記でいえば 10月3日の料金は前日値と比べ… 【運賃変更】 東京 青森　変更なし 東京 大阪　変更なし 東京 福岡　変更なし 青森 大阪　変更なし 青森 福岡　変更なし 大阪 福岡　変更あり 大阪 青森　変更なし もしくは 大阪 福岡　変更あり の様に、「大阪 福岡」に変更があったことを アラート表示させたいのです。 【その他条件】 ・このSQLコードは毎日回します ・前日にもデータがなく、前々日のデータと 　比較しなくてはならないこともあります。 　もしくは過去1週間ほどさかのぼらないと 　比較対象のデータがないこともあります。 ・case文を使って【運賃比較】の様なテーブルを作り 　ローカルでVBA等で比較させることも考えましたが 　データが大量すぎて、その方法は使えませんでした。 ・【運賃テーブル】の様な状態でデータをexportし 　それをローカルのExcelでピボットをかけるという方法も 　同様な理由で不可能でした。 何卒よろしくお願いいたします。
サーバーAでOracleデーターベース(10g)が稼働しています（インスタンスは1つ）。 サーバーBに全く同じデータベースインスタンスを構築することを考えています。 サーバーBにはOracleはインスト済みです。 データだけを移すなら expdp/impdb を使ってスキーマ別に移すところですが、 データベースの様々な設定： アーカイブログの設定やSGAのサイズ等など、、、 も完全に同じものを構築したいと思っています。 ----------------------- 1. DBCA を使用 サーバーAでDBCAを使って、既存インスタンスからテンプレートを作成します。 次にそのファイルをサーバーBに移して、サーバーB上でDBCAを使って当該テンプレートからインスタンス作成 => この方法を一度試したのですが、よくわからない点がありました。テンプレートを使っている割には、インスタンス生成の各種パラメータを入力せねばなりません。入力した設定は無視されてテンプレートの値が使われるのでしょうか？それとも、入力した内容が優先されるのでしょうか？あるいはこの方法ではインスタンス生成のパラメータは移せないのでしょうか？ 2. expdp/impdp でFULL=Y データベースをまるごとコピーというならこの方法でもいい気がしますが、まずはサーバーB上にインスタンスを作ってからimpdpをすることになると思います。 するとインスタンスの設定は移されないということになるのでしょうか？ 3. その他の方法 何かもっと有効な方法がありますか？ ------------------------------------- 何卒ご教示のほどをお願いします。
テーブル名:AAA カラム: 'fname' ,ename テーブル名:BBB カラム: "id",fcode テーブル名:CCC カラム : "id",'fname',date 上記三つのテーブルAAA,BBB,CCCにそれぞれカラムがあります。 最終的に ename fcode date　の3カラムを結合した状態でSELECTします。 ただし、条件として AAAのfname列とCCCのfname列を紐付けし、尚且つ BBBのid列とCCCのid列を紐付けし、尚且つ CCCのdate列が2012-10-31以上のものだけをSELECTしたいです。 上記を踏まえて下記二点ご質問致します。 (1)私が考えたSQL文は select a.ename ,bc.fcode ,bc.date from AAA a , (select b.fcode ,c.fname ,c.date from BBB b , CCC c where b.id = c.id and c.date >= '2012-10-31' ) bc where a.fname = bc.fname ; です。先にBBBとCCCから紐付けしその結果とAAAを紐付けしています。 このSQL文で間違いがないかどうか判定していただきたく。 (2)もっとスマートな書き方（短く書けるなど)がありましたら、 ご助言いただきたく。 ちなみにデータベースはオラクル仕様です。 宜しくお願い致します。
以下の処理をしようと考えています。 Aテーブルをカーソルで検索 　　　　→0件だった場合にはエラー　・・・　(1) 　　　　→データが入っていた場合には処理 　　　　→カーソルのデータがなくなったら処理を正常終了 カーソルに入っているデータが0件だった場合、Oracle上ではエラーとはみなされず、処理が正常終了してしまいます。 カーソルデータが0件だった場合にエラーを発生させるにはどのようにコーディングすればよいですか？
こんにちは。Oracle11を使ってます。 大規模システムで大容量のテーブルを毎日バッチで取込む必要が出てきました。 そのテーブル自体カラムが３０前後で、４０００万件あります。 その処理時間に頭を悩ませていましたら、ＭＥＲＧＥ句に巡りあいました。 ＡテーブルからＢテーブルに入れるのですが、列定義(Colum数も全く違う列も存在)が若干違うのですが、それでもこれを使うことは可能でしょうか？ Ａ　　　　Ｂ ----- ----- A1　　　　B1 A2　　　　A2 A3　　　　A3 A4　　　　A6 A5　　　　- またべたのやり方ですと、Aテーブルを全件ループして、ＰＫ連結させて、Select-Ｉｎｓｅｒｔ or Select-Updateになると思うのですが、やはりデータがほとんど同じ場合と全件全部違う場合は、処理時間も軽減されるのでしょうか？
いつもお世話になっております。 表題の件について教えてください。 使用SQL：Oracle 例えば下記のようなテーブルがあるとします。 【運賃テーブル】 日付　　　出発　 到着　運賃 10月1日 東京 青森 8000円 10月1日 東京 大阪 5000円 10月1日 東京 福岡 8000円 10月1日 青森 大阪 6000円 10月1日 青森 福岡 9500円 10月1日 大阪 福岡 5000円 10月1日 大阪 青森 9800円 10月2日 東京 青森 8000円 10月2日 東京 大阪 5000円 10月2日 東京 福岡 8500円 10月2日 青森 大阪 6000円 10月2日 青森 福岡 9500円 10月2日 大阪 福岡 5000円 10月2日 大阪 青森 9000円 仮に運賃を日付で比較した場合、下記のようになります。 【運賃比較】 　　　　　　10月1日　10月2日 東京 青森 8000円 8000円 東京 大阪 5000円 5000円 東京 福岡 8000円 8500円 青森 大阪 6000円 6000円 青森 福岡 9500円 9500円 大阪 福岡 5000円 5000円 大阪 青森 9800円 9000円 この場合、値上がりがあったら、下記の様に 値上がり（値下がり）があった路線について一目で分かる SQLコードはどの様にかけば良いのか教えてください。 【運賃変更】 出発 到着 10月1日 10月2日 東京 福岡 8000円 8500円 大阪 青森 9800円 9000円 もし上記が可能であるならば、【運賃比較】テーブルの様に データを選択剃る方法についてもご教授ください。 よろしくお願いいたします。
現在、「1週間で学べるORACLE MASTERの基礎が学べる本」という本を片手にORACLEを初めて触っております。 お恥ずかしい話、2日目の「OEM起動」でつまづいて先に勧めませんので、是非お知恵をお貸しください。 現在作業はVM環境にWin7 x64bitをインストールしホストオンリー環境で構築しています。 テキストでは推奨環境に以下の手順で操作をすすめています。 ネットワーク環境を構築（Loopback アダプタ追加　IP10.10.10.10,GW 255.255.255.0 hosts ファイルにて←の名前解決を追記） 再起動 Oracle11gをインストール リスナーの作成 →　DBの作成　○ここでエラーになります。 DBの削除 OEMの起動 ・ ・ ・ DB作成をしている最中に以下のようなエラーがでます。 ！警告 次のエラーが原因でEnterprise Managerの構成に失敗しました 構成データのリポジトリへのアップロード中にエラーが発生しました。 詳細は　..\dbca/orc/emConfig.logにあるログファイルを参照してください。 ..bin/emcaスクリプトを手動で実行することにより、後でEnterprise Managerを使用してこのデータベースの構成を再試行できます。 ※パスは割愛 裏では別ウインドウで正しくDBを作成できましたとあるので、このエラーを無視してOEMの起動まですすめると、 https://localhost:1158/emでOEMにつなごうとした時にサイトが表示できないとエラーになってしまいます。 この時、テキストには ・Loopbackアダプターの構成されているか ・リスナーが開始されているか ・dbconsoleプロセスが起動しているか を確認しろとあったので、Loopbackアダプタ、リスナーの開始については問題ないことを確認。 ORACLE_SIDを設定し、dbconsoleを確認しようと emcl status dbsonsoleと入れたところ、 Environment variable ORACLE_UNQNAME not defined. Please set ORACLE_UNQNAME to database unique name. というエラーが表示されて手詰まり状態です。 set ORACLE_UNQNAMEとありましたので、orclをsetしてみましたが、エラーメッセージが変わっただけで問題解決にいたりません。 是非、この問題について何かわかればよろしくお願いいたします。
オラクルの条件で時間を指定する方法と格闘中です。 ログのようなデータがたくさんあってそこから、 18時～翌2時のデータはいくつあるか。 というSQL文を書きたいのですが、 うまくいきません。以下のようなSQLなのですが、 どなたかアドバイスいただけないでしょうか？ SELECT COUNT(*) as CNT, ID FROM テーブル名 WHERE TO_DATE(DATE型カラム, 'HH24:MI') >= '18:00' AND TO_DATE(DATE型カラム, 'HH24:MI') < '02:00' GROUP BY ID ORDER BY CNT; ちなみにこんなエラーが出ています。 SQLエラー: ORA-01843: 指定した月が無効です。 よろしくお願いいたします。
以下のようなSQLを記載した場合に問題となる可能性はあるでしょうか？ 実際にこのようなSQLを書くことはないかもしれませんが、 列別名と、テーブルの項目名を同じにしています。 select XXX as XXX from tblA
色々サイトとかをみたのですが、発見できなかったので記載します。 【環境】 Oracle Database 11g linux 6.2 【実現したい事】 あるDBがあって、同じサーバ内に別名でDBを構築したいです。（スキーマとかも一緒） ※期間的な所もあって、一番早く複製できる方法を希望 ＜DB＞A⇒＜DB＞B 大変お手数ですが、手順を詳細に記載して頂けると助かります。。。。 何か情報として他に必要であればご指摘願います。
ｔｒｃファイルを削除する（n日分削除する）スクリプトを作成したいのですが、オラクルユーザにならないと /u01/oracle/diag/rdbms配下へアクセスできません。 スクリプトで（ルートユーザでない）ここのディレクトリへアクセスさせるには何か方法はないでしょうか？
Oracleの10g以降？には、トランスフォーマ　（発行されたSQLを、自動で効率の良いSQLに変換する）という処理が存在します。 そこで、このトランスフォーマについて質問です。 (1)変換前と変換後のＳＱＬを見る方法はありますか？ 　※tkprofでトレースを取得すれば、みれたことがあるような気がするのですが・・・ (2)トランスフォーマを行わないようにするための、初期化パラメタなどはありますか？ ネットで検索してみても、関係無い方のトランスフォーマしか出てこなくて困ってます。 ご存じの方がいましたら教えてください。
Oracle Database 11g の 「トランザクション処理」について質問。 認識：UPDATE文が発行されるとキャッシュに更新前の情報(UNDOセグメント)が生成される。 REDOログバッファにREDOログを生成する。 UPDATE文が正しく行われたことを、プロンプトに返す。 この時、REDOログファイルにはまだ書き込まれていない。 データファイルにも書き込まれていない。 質問：このコミットされていない状態で、障害が起きた(メモリが飛んだ)場合、 コミット前の状態にしか戻れないですか？ データベースの概要のACID特性の一貫性は、 トランザクションの一貫性ということですか？ また、UPDATA文を発行し、プロンプトが返ってくるが、 これは嘘になりえるっていうことでしょうか？ よろしくおねがいします。
初心者です。 oracle 9i で下記の tmp テーブルがあります。 カラムはNoとFlgの２つだけです。 Flgに「A」が存在し、かつ、Flg 「B」が存在しないNoを取得したい場合 どのようにクエリを作ればよいのでしょうか？ <tmp テーブル> No　　　Flg 1　　　　A 1　　　　B 2　　　　A 3　　　　B 4　　　　A 4　　　　C 5　　　　A 5　　　　B 5　　　　C 上記テーブルから結果として、No 2 と 4 だけを取得したいのです。 where Flg='A'のあとにnot existsとかでできそうな気がしたのですが どのように条件指定すればよいのでしょう？
Oracleで下記のようなデータ処理を実現する方法を調べています。 (1)特定の条件でデータを抽出する。 　select X from TABLE1 where Y="test" (2)(1)で抽出したデータを別の抽出条件の値として1つずつ使用し、 　別のsqlにてデータを抽出し、件数を取得する。 select count(*) from TABLE2 where Z = aaa 　※aaaには(1)の結果を順に入れる。 ２，３件であれば手作業で(2)を実施すればよいのですが、(1)の結果が数100件 になっているため、(2)をループ処理させたいです。 PL/SQLが必要なのでは？と思いつつ、使ったことがありません。 少し調べてはみましたが、よくわからず、困っています。 特に難しい処理ではないと思ってはいるのですが、期日まで時間がなく、質問 させていただきました。 一時的なデータ確認のためだけなので、専用にプログラムを組むのはしたく 無いと思っています。 参考になる情報をいただければ幸いです。 もちろん、(2)のサンプルコードなどいただければ大変助かります。 どうぞよろしくお願いします。
以下のような集計を、VIEWを使わずに１回のＳＱＬでできますでしょうか。 【対象TBL】 CD FLG KINGAKU A, 0, 100 A, 0, 200 A, 1, 1000 B, 0, 50 B, 1, 60 【出したい結果】 CD KINGAKU_0 KINGAKU_1 A, 300, 1000 B, 50, 60 普通のSUMで出る以下の結果を、サブクエリなどで横展開しようと試みてるのですが、 うまく出来ません。。 CD FLG KINGAKU A, 0, 300 A, 1, 1000 B, 0, 50 B, 1, 60
sqlを勉強したいのですが... どのような参考書を使えば良いですか？ 独学で出来るのでしょうか？ 20代後半から勉強しても出来るようになるものでしょうか？ 基礎をマスターするのにどれくらいの時間がかかりますか？ このスキルを使って就職できるようになるまでどれくらい 時間がかかりますか？ 資格などはありますか？ 何か勉強する前に知っておくべきことがあれば教えて下さい。 よろしくお願いします。
はじめまして Oracle初心者のエンジニアです。 あるプロシージャを実行すると 添付のようなアラートが出てエラーになります。 ただ、エラーにならないで処理が成功する人もいて 原因不明です。 原因や対処法をご存じの方、ご教授お願いできますか？ ちなみに他のプロシージャは正常に実行できます。 オブジェクトブラウザの出力 【 実行後パラメータ値 】 V_SHEMA_NAME : BTOB 【 DBMS_OUTPUT 値 】 BTOBスキーマへデータ反映失敗: -53203ORA-53203: セキュリティ違反です。
SQL初心者です。 基本的な質問ですみません、教えてください。 LEFT JOINとRIGHT JOINについて、どちらのテーブルを左側、どちらのテーブルを右側にするのかが分かっていません。どういう基準で左側、どういう基準で右側と考えれてばいいのでしょうか？ 宜しくお願いします。
【Table1】 Col1 Col2 Aa A Ab A Ba B Bb B Ca C Ca D 【Table2】（Data1は固定） Data1 Data2 Aa A Ab B→A Ba C→B Bb A→B Ca B→C Ca C ※Col1に重複がある場合、重複結果の1行目のレコードをData2に入れる (今回の場合CをData2に入れる) Data1は固定で、Table1を使ってData2を上記の様に修正するSQLが書けなくて困っています。 Col1が重複してない場合の修正するSQLを書いてみましたが（合っているかはわかりませんが...）、 重複する場合のSQLも追加して最終的に１つのSQLで、すべて修正できるようにしたいです。 update Table2 T2 　set Data2= 　(select Col2 from Table1 　where Col1= 　　(select Col1 from Table1 T1 　　where T2.Data1=T1.Col1 　　group by T1.Col1 　　having count(T1.Col1)=1 　) ) わかりにくい部分もあると思いますが、ご教授お願いします。
はじめまして。 SQLで部分的にGROUP BYで集計したいのですが、 どうもしっくりくるSQLがかけません。 多分CASEあたりを使うと綺麗で高速なSQLがかけると思っています。 皆様のお知恵をお借りしたく投稿しました。 具体的には以下のような出納帳データで 出納帳 日付　　　　　金額 2012/8/20　1000 2012/8/20　2000 2012/8/21　-1000 2012/8/21　-2000 2012/8/22　3000 2012/8/23 4000 2012/8/24 -3000 2012/8/24 -4000 2012/8/27 5000 ↓集計 日付　　　　　金額 2012/8/20　1000 2012/8/20　2000 2012/8/21　-3000(-1000と-2000を集約) 2012/8/22　3000 2012/8/23 4000 2012/8/24 -7000(-3000と-4000を集約) 2012/8/27 5000 というように、マイナスの金額は集約してしまいたいのですが、どのようなSQLが最適でしょうか？ とりあえず、UNIONかなと思い、 (SELECT 日付, 金額 FROM 出納帳 WHERE 金額>=0 UNION ALL SELECT 日付, 金額 FROM 出納帳 WHERE 金額<0 GROUP BY 日付 ) ORDER BY 日付 とプラス金額とマイナス金額にわけUNIONしたのですが、 もっと綺麗(高速)にやる方法があるのではないか？と思い投稿いたしました。 なにかヒントございましたら、ご教授ください。 DB環境：Oracle 11g
中途でIT企業に入ったものです。 SQLを勉強していますが、UNIONやMINUSという集合演算子を 学習しています。 これは実際の開発業務では、どういったケース（業務の要件？）で 使用されるのでしょうか？。 例えばMINUSだと、「前月で売れたが今月は売れてない商品」を抽出する、 などのケースで使用するのでしょうか。 参考に教えて頂けると助かります。
[環境] ・Windows 2003 Server R2 ・Oracle 9i ・ASP.NET 1.1.4322 ・IIS V6.0 お世話になります。 早速ですが、上記環境下にて不思議なエラーが発生してしまったため 質問しました。 現象としては ASP.NETで作成した画面から、ボタンを押下し あるProcedure(Package Body)をCallしているのですが、 そのProcedureが呼び出されると必ず出力されるはずのログが出力されず、 クライアント側にエラーとして返ってきます。(クライアント側のログは出力される。) しかし、IISを再起動した後に同様の処理を行うと正常に処理が完了するのですが、 翌日になると同様の手順でエラーが発生します。 (何かしらきっかけがありそうですがわからず…。) また、本番環境と全く同じ(別スキーマだがデータが違うだけ)である テスト環境があるのですが、そちらだと上記エラー等は発生しません。 エラーが発生する原因として、何が考えられるでしょうか。 ご教示の程よろしくお願い致します。
いつもお世話になります。 oracleのシーケンスの欠番を確認したいのですが、以下のようにサービス、インスタンスの再起動を試してみたのですが欠番はおきませんでした。 ・サービスの再起動 コントロールパネルから、サービスを開いて、「OracleServiceXE」、「OracleXETNSListener」の再起動。 シーケンスをselectした結果、欠番確認できず。 ・インスタンスの再起動 コマンドプロンプトを起動し、sqlplusから、sysdbaでoracleに接続。 shutdown、startupコマンドを行い、インスタンスを再起動。 シーケンスをselectした結果、欠番確認できず。 インスタンスの再起動を行えば欠番がおきる、というのをサイトで見たのですが、欠番は起きませんでした。なぜ起きないのでしょうか。 何か手順に不備があるのでしょうか。 alter system文による欠番は確認しています。 しかし、意図的にこのコマンドを発行しなければよいので、確認したいのは、通常運用時、データベースが起因してシーケンスの欠番が発生してしまう、ということです。 再起動などは普通に行うと思うので、その際に欠番が発生することを確認したいのです。 宜しくお願いします。 oracle：Oracle Database 11g Express Edition Release 11.2.0.2.0 OS：Windows Vista Home Promium 64bit
こんにちは。さっそくですが、 白男川 恵さん著作による 「Oracle Master Bronze 演習問題 SQL基礎I」 の問95について質問させていただきます。 問題文 CAT_ID列の値が20であるPRICE列の最大値を求めたい。 実行すべきSQL文として正しいものを選びなさい。 とあり、正解は (B) SELECT cat_id, MAX(price) FROM itemlist HAVING cat_id = 20 GROUP BY cat_id (C) SELECT cat_id, MAX(price) FROM itemlist WHERE cat_id = 20 GROUP BY cat_id なのですが、 WHERE句の使用法としては　大体の場合 WHERE (ターゲット) = (値） となると思うのですが、ターゲットのところが グループ関数でないのでこの場合は正解としてもよい、 ということでしょうか？ 以下のサイトを別のタブで見ていただきたいのですが、 http://www.atmarkit.co.jp/fdb/rensai/tsql05/tsql05_1.html 「WHERE句とGROUP BY句を併用した場合、 WHERE → GROUP BYの順でクエリが評価されるため、 グループ化された結果をWHERE句の段階で利用できないのです。」 「HAVING句とGROUP BY句を利用した場合、 GROUP BY → HAVINGの順でクエリが評価され、 グループ化された結果に対し条件を指定することが可能です。」 http://www.atmarkit.co.jp/fdb/rensai/tsql05/tsql05_2.html 「HAVING句はGROUP BY句によってグループ化が行われたデータに対し、 絞り込みの条件を指定できます。 このため、絞り込み条件に集計関数を含めることが可能です。」 この設問の場合には WHERE→GROUP BYの順でも GROUP BY→HAVING の場合でもWHERE のターゲットがグループ関数で得られた値 で条件指定するわけではないので文法的にも正しく おなじ結果が得られる こういう解釈でよろしいのでしょうか？ ご存知の方、教えていただけないでしょうか？ よろしくお願いします。
Oracleでストアドパッケージを作っています。 key1　key2　key3　sdate　　　edate 1　　 1　　 1　　 2012/07/12 2012/09/11 2　　 2　　 2　　 2012/06/01 2012/07/31 こんなデータがあった時、以下のように日付の範囲を展開した レコード群を得たいのですが、やり方が思いつきません。 key1　key2　key3　date 1　　 1　　 1　　 2012/07/01 1　　 1　　 1　　 2012/08/01 1　　 1　　 1　　 2012/09/01 2　　 2　　 2　　 2012/06/01 2　　 2　　 2　　 2012/07/01 事情により、Typeは使えません。 展開後、別途SQLで利用するつもりです。 ストアド内だけで実装可能でしょうか？
Oracleで秒以下の単位を含む加算の仕方を教えてください。 下記のサンプルでtargetTimeが0.5秒ずつ増えていくようにしたいのですがうまくいきません。 ちょっと書き方を変えればいいだけの事のような気がするのですが、いろいろ試したのですがうまくいきませんでした…。 よろしくお願いします。 SET SERVEROUTPUT ON FORMAT WRAPPED DECLARE targetTime TIMESTAMP(6) := TO_TIMESTAMP('2012/08/14 06:00:00', 'YYYY/MM/DD HH24:MI:SS'); vAddTime NUMBER(20, 10) := (1 / 86400) * 0.5; i integer := 0; BEGIN dbms_output.put_line('加算する値'); dbms_output.put_line(vAddTime); while (i < 10) loop dbms_output.put_line(targetTime); targetTime := targetTime + vAddTime; i := i + 1; end loop; END;
環境:oracle 9i Oracleを触り始めて1週間程度の初心者です。 以下の3つのテーブルを外部結合し、集計結果を取得するSQL文をご教授いただけないでしょうか。COUNT関数やGROUP BY句などを使えばよさそう、というところまではわかるのですが、そこから先がどうも見当がつきません。。 どうぞ宜しくお願い致します。 【tbl1】 日付　　社員名　　摘要　　労働時間 date　sya_nm　status　　hours ------------------------------------------ 8/10　　田中　　出勤　　　8 8/15　　田中　　欠勤　　　0 8/20　　田中　　出勤　　　8 9/10　　田中　　出勤　　　8 8/20　　佐藤　　遅刻　　　6 8/25　　高橋　　出勤　　　8 【tbl2】 社員名　事業所　区分　時給 sya_nm　jig_cd　div　pay ------------------------------------------ 田中　　　1　　在籍　1000 佐藤　　　1　　在籍　1000 鈴木　　　1　　退職　1000 高橋　　　2　　在籍　1000 【tbl3】 給与下限　給与上限　　税 pay_from　pay_to　tax --------------------------------- 0　　　　10000　　100 10000　20000　　200 ↓ 事業所(1)在籍者の8月分の支払情報をSelect文で取り出す。 (出勤日数＝tbl1の出勤＋遅刻) 社員名　出勤　欠勤　遅刻　時間　　給与　　税　　 ----------------------------------------------------------------- 田中　　　2　　1　　0　　16　16000　200 佐藤　　　1　　0　　1　　　6　 6000　 100
Oracleバージョン10 です。 group byの項目の並び順を変えると結果が異なるのですが、何か原因は考えられるでしょうか？ 例えば以下のSQL ------------------ SELECT T1.COL1, T1.COL2, T1.COL3, TRUNC(T1.COL4,'MONTH') COLM, SUM(T1.COL5) FROM TABLE1 T1 GROUP BY T1.COL1, T1.COL2, T1.COL3, TRUNC(T1.COL4,'MONTH') MINUS SELECT T1.COL1, T1.COL2, T1.COL3, TRUNC(T1.COL4,'MONTH') COLM, SUM(T1.COL5) FROM TABLE1 T1 GROUP BY TRUNC(T1.COL4,'MONTH'), T1.COL1, T1.COL2, T1.COL3 ------------------ このMINUS結合の結果でデータ（差分）が出力されます。 MINUS結合の前と後で違いがあるのは、GROUP BYの並び順のみです。 TRUNC関数を記載してますが、どうもこのTRUNC関数を除くと、 差分が出力されなくなるようです。 （TRUNCを辞めて、ただのT1.COL4 にした場合） なので、TRUNC関数が何か関係してるかも知れません。 原因が分かりません。オラクルの障害が何かなのかも知れません。 何か原因は考えられるでしょうか？
環境：Oracle 11g ＳＱＬで階層問い合わせに関して教えて下さい。 今、ある部品テーブルに対し、直下のレコードのみを抽出しようとしていますが、ある共通の 構成をＡ部品群、Ｂ部品群の中に入れた場合、なぜか同じ結果が２回表示されてしまいます。 以下にサンプルのデータとＳＱＬを作成しましたので、何がおかしいか教えて頂きたいと思います。 【Ａテーブル】 品目番号,親品目番号 A A1,A B,A B1,B ↑　Ａ部品群 C D,C B,C B1,B ↑　Ｂ部品群 　※　Bが共通の構成です。 【ＳＱＬ】 select 品目番号 as 下位品目番号,親品目番号 from A_TABLE where 品目番号 != 'B' AND 親品目番号 = 'B' start with 品目番号 = 'B' connect by prior 品目番号 = 親品目番号 【結果】 下位品目番号,親品目番号 B1,B B1,B ２回表示されてしまいます。 単純に親品目番号=’B’としてしまえば正しく拾えますが、上記のＳＱＬを多様している為、 何が間違っているか教えて頂ければと思います。 初歩的な質問で申し訳ありませんが、教えて下さい。
OracleのCreate文で、カラムに複数の制約を付ける方法を↓のサイトで見つけたのですが、 http://luna.gonna.jp/oracle/ora_const.html ちょっと、カラム名を変えたりして、このように↓書いてみたのですが、 create table Genereation_T ( Genereation_ID　CHAR(3) not null, Genereation_Type VARCHAR2(10), Ins_dt DATE, Udp_dt DATE, Del_flg NUMBER(1), CONSTRAINT cons_p1 PRIMARY KEY(Genereation_ID), CONSTRAINT cons_u1 UNIQUE(Ins_dt), CONSTRAINT cons_f1 FOREIGN KEY(Udp_dt), REFERENCES Genereation_MASTER(Udp_dt), ); 「行10でエラーが発生し、キーワードがありません。」という表示がされます。 もう一個テーブルが必要なのでしょうか？ エラー解消がわかる人お願いします。
centos5.8 + Oracle10gの環境で、netcaを使おうとすると、日本語が化け（？）ます。 不思議なのが、タイトル部分は、日本語が表示されていて、それ以外の部分の日本語は表示されていません。 http://blog.goo.ne.jp/nokonoko2006/e/2ad87e85fd69317cc647167fe63eedf2 上のサイトを参考に、font.properties.jaファイルを修正しましたが、症状は変わりませんでした。 javaの問題のような気もしていますが、どうすれば日本語が表示されるようになるか教えてください。 よろしくお願いします。
お世話になります。 Oracle初心者です。 別のスキーマのテーブルをアップデートすべく、 PLSQL（プロシージャ）作成したのですが、 コンパイルすると、ORA01031：権限が不足しています。 と出てしまいます。 どなたかご教示下さいます様、 宜しくお願い致します。
Oracle 11g オブジェクトブラウザーを使用して、SQL文を作成します。 SQLの書き方がよくわからず困っております。 どうか助けてください。お願いします。 ・月毎の累計ポイントテーブル、 ・月毎の請求金額テーブル 2つのテーブルを作成し、 顧客毎にポイント管理をしています。 月毎の累計ポイントテーブルの項目は、 顧客NO ｜ 年月 ｜ 累計ポイント 000001 201205 100 000002 201205 200 000003 201205 300 月毎の請求金額テーブルの項目は、 顧客NO ｜ 年月 ｜ 金額 000001 201206 1000 000002 201206 1000 000003 201206 1000 というイメージになります。 ポイント確定処理時には、 新たに、年月をプラス1した累計ポイントデータを作成します。 顧客NO ｜ 年月 ｜ 累計ポイント 000001 201205 100 000002 201205 200 000003 201205 300 ↓追加 000001 201206 200 000002 201206 400 000003 201206 500 実現させたいことは、 月毎の請求金額テーブルの金額に ポイント還元率(固定1％)をかけて切り捨て（1000円＝100ポイント）したポイントを ポイント累計テーブルに該当月のレコードを追加していきたいというものです。 顧客NOが、累計ポイントテーブルに存在して、 請求金額データにない場合は、そのまま前月分の累計ポイントをコピーします。 逆もありで、 請求金額テーブルには、 累計ポイントテーブルにない顧客NOが存在する場合があります。 その場合は、新たに発生したポイントだけを累計ポイントとして追加します。 上記条件でのSQLの書き方がわからず困っております。 累計ポイントテーブルと請求金額テーブルの両方全部を足したら良いという 安直な考えのもと、FULL OUTER JOIN で実現させようとしましたが、 どうも間違えているようでして。 そのあたりも含め、どんな書き方が良いか教えていただけると助かります。 宜しくお願いします。
SQLの初心者です。 A・・・日付（テキストデータ） B・・・ユーザ名とします。 C・・・テーブル名 select A,B form　C where (本日から7日以内） で取得したいのですが、どうしてもうまく行きません。　WHERE SYSDATE -7 and SYSDATE という気持ちにしたいのですが、教示していだけませんでしょうか？よろしくお願いします。
2つの表をunionでマージした結果を副問合せで使用し、この副問合せを他の表とwhereで結合するとORA-00918: 列の定義が未確定です。がでます。こんな感じです。 副問合せそのものは単独で実行してもエラーにならないので結合に問題があるようです。 どなたか回答お願いします。行き詰っています。 select as.xx1,asxx2 from (select *　from aa union select *　from bb) as, af where as.xx1=af.xx1;
例えば、あらかじめテーブルなどを読み、その内容により、 SQLの文そのものを非常に変えたいとします。 SQLその１ select * from TABLEA where A = 1 SQLその２ select * from TABLEA where A = 1 and B = 2 and C = 3 and D = 4 上記は例ですが、内容などにより複雑な条件式を追加したい。 ベースのSQLは非常に長い為、 例えば　完全に切り分けるのでは無く、共通の部分は共通ソースとしたい。 また、プリプロセッサみたいに、条件式が追加された場合 あたかも、初めからそのSQLのみがあり、他の制御文などをSQL文自身には追加したくない。 動的SQLでは無い方法でそのような事が可能でしょうか？ -----　イメージ ----- select * from TABLEA where A = 1 IF (条件がある時のみ） B = 2 and C = 3 and D = 4 END IF; ------------------- 実際には、SQL文の中にPLSQLの制御文をうまく追加できない。
ORACLE MASTER BronzeおよびSilverの資格取得を検討しております 先ずはBronzeからと私なりに色々と調べてみましたが、確認も含めご質問させていただきます (1)Bronzeの認定資格を得るにあたり、認定パスが必要かと思いますが、 　 　A：【11g SQL基礎I [1Z0-051]】or【Bronze SQL基礎I [1Z0-017]】 　　と 　B：【Bronze DBA11g[1Z0-018]】 　の試験合格を経て認定資格が得られるのでしょうか？ 　もしくはAのどちらかを合格することで認定資格を得て、Bを受けられるということでしょうか？ (2)【11g SQL基礎～…】と【Bronze SQL基礎～…】に違いや差はありますか？ 　それぞれの良し悪しやどちらがオススメなどあれば教えてください (3)10gや11gとありますが、これはVerのようなものですか？ 　現状受けるのであれば11gでいいですか？ (4)企業によると思いますが、転職で実務経験のない者でも当資格は評価されますか？ 　また、その際階級として最低でもSilver以上は必要ですか？ (5)黒本で独学、Mysqlは少しかじった程度の知識です 　オススメの書籍があれば教えてください 初歩的な質問もございますが、 お詳しい方、是非ともご教授願います よろしくお願いいたします
すみません、オラクルに接続しようとすると、 「ＯＲＡ－０１０３３：Ｏｒａｃｌｅの初期化またはシャットダウン中です」とメッセージが表示され、 接続できません。 そこでｓｙｓｄｂａで接続し、shutdownを行った後にstartupを行うと、 「ORA-12514: TNS: リスナーは接続記述子でリクエストされたサービスを現在認識していま せん」とメッセージが表示され、復旧できない状態です。 どのようにすれば復旧・接続できるようになるのでしょうか？ ちなみにオラクルはoracle11gです。
distinctをexistsに変換した方がパフォーマンスが良いようで、 例えば以下の例があるとします ---------------------------------- （前）SELECT DISTINCT a.ID1, a.NAME1 FROM TABLE1 a, TABLE2 b WHERE a.ID1 = b.ID2 （後）SELECT a.ID1, a.NAME1 FROM TABLE1 a 　　　WHERE EXISTS ( SELECT 'X' FROM TABLE2 b WHERE a.ID1 = b.ID2) ---------------------------------- もっと複雑なSQLの場合、EXISTSに変換できるのでしょうか？。複雑なSQLとは、 「複数のテーブルからカラムを取得」「テーブル結合が２つ以上」「外部結合」 などのSQLで、以下に例を示します。 （例）SELECT DISTINCT a.ID1,a.NAME1,b.ID2,b.NAME2,c.ID3,c.NAME3 　　　FROM TABLE1 a,TABLE2 b,TABLE3 c 　　　WHERE a.ID1 = b.ID1(+) 　　　　　AND a.ID1 = c.ID1(+)
Windows版Oracle 9iでv$sysstatをチェックしたいら table fetch by rowid が　1.123456789E+10 という指数形式になって整数でなくなったのですが、これはOracleを再起動しないと元の整数値表示には戻らないのでしょうか？ 要は１０桁・９９億を越したことが原因なのですが、桁数を増やすとか、１００億を越さない前に値をリセットするなどの方法があればと思っています。
Oracleに適用されているパッチの情報はどこを確認すればわかるでしょうか？
以下のようなSQLがあるとします。 ------------------------ SELECT * from (select * from TABLE-A where 条件色々) AA, TABLE-B BB where BB.x(+) = AA.x ------------------------ TABLE-Aの件数は非常に多く（例100万)、条件は複雑です。 TABLE-Bの件数は少ないです（例30件） この時、実行計画が HASH JOIN RIGHT OUTER TABLE ACCESS FULL TABLE-B のように出ましたが、どのように解釈すれば良いのでしょう？ TABLE-Bは件数が少ないのでACCESS FULLでも問題ないでしょうか？ HASH JOIN RIGHT OUTER　のコストが高くなってて気になってます。 たとえば、この場合のより適切な実行計画ってありますか？
Windows版　Oracle 9iで、下記のＳＱＬを実行した値で質問なのですが・・・ <<SQL>> Select name, value from V$SYSSTAT where name like 'table%'; <<SQL結果>> NAME VALUE ---------------------------------------------------------------- ---------- table scans (short tables) 41298 table scans (long tables) 171 table scans (rowid ranges) 0 table scans (cache partitions) 0 table scans (direct read) 0 table scan rows gotten 151275758 table scan blocks gotten 11959596 table fetch by rowid 23079146 table fetch continued row 1048 table lookup prefetch client count 0 Webで検索すると、 Full Scan率は「table scans (long tables)　/ ( table scans (short tables)+table scans (long tables) )」とあったり、 「table fetch by rowid　＜　table scan rows gotten」は頻繁にFull Scanしている状態とあって、「table scan rows gotten」がFull Scanの行数に思えるですが、実測した下記の値からは違うように思えるのですが、どのように解釈すれば良いのでしょうか？ table scans (short tables) 41298 table scans (long tables) 171 ---- table scan rows gotten 151275758 table fetch by rowid 23079146
PGAメモリに関してですが １．あるSQLがあるとして、そのSQLでどの程度PGAメモリを消費するかを 　　確認する事は出来るのでしょうか？ ２．PGAメモリを消費しやすいSQLとはどのようなSQLなのでしょうか？ 　　簡単なSQLより複雑なSQLの方が消費しやすいと思ってます。 　　その中で特に何か消費しやすいSQLの特徴はあるのでしょうか？ 　 (例）大量データへのアクセス 　　　　INDEXを利用しないFULL ACCESS 　　　　副問い合わせ 　　　　多数のテーブル結合 　　　　関数などの利用 　　　　order by、group by 　　　　（etc）
OEMで実行計画を見てます。 負荷の高いSQLの場合、「トップアクティビティ」からSQLを選択して見てます。 「トップアクティビティ」に出てこない、負荷の低いSQLの場合、 どのようにすればOEMからSQLの実行計画が見れるのでしょうか？
Excel：2010 Oracle：10g 接続：ADODB Oracleで質問すべきか、VB側にすべきか迷いましたが、こちらに質問させていただきます。 ExcelVBAからOracleに接続し、ストアドを実行して複数行のデータを取得後 エクセルの各セルに取得データを設定するマクロを作成しております。 コマンドのExecuteを行った後、レコードセットが取得できていないようで 「オブジェクトが閉じている場合は、操作は許可されません」 となってしまいます。 ストアド自身は、Oracle側でエラーなく動いています。 カーソルで取得したデータをエクセル側に渡すには、それ用のOutputの変数（配列？）が必要なのでしょうか？ よろしくお願いいたします。 ストアドプロシージャ（一部SELECT文は長いため、省いています） -------------------- CREATE OR REPLACE PROCEDURE A.P930 ( varCD IN VARCHAR2, varDate IN VARCHAR2 ) AS CURSOR C_SIM IS SELECT CD, NAME FROM T WHERE CD = varCD AND CNTRCT_DATE = varDate; SIM_REC C_SIM%ROWTYPE; BEGIN OPEN C_SIM; LOOP FETCH C_SIM INTO SIM_REC; EXIT WHEN C_SIM%NOTFOUND; END LOOP; CLOSE C_SIM; END; / VBA側 Connection接続はOK -------------------- Sub LIST() 変数宣言等省いています Set myCmd = New ADODB.Command With myCmd .ActiveConnection = DBADOCon .CommandType = adCmdStoredProc .CommandText = "P930" .Parameters.Append .CreateParameter("varCD", adVarChar, adParamInput, 3, strLineCd) .Parameters.Append .CreateParameter("varDate", adVarChar, adParamInput, 6, strMonth) Set myRs = New ADODB.Recordset Set myRs = .Execute End With If myRs.RecordCount = 0 Then　　　　　←ここでエラーになります 'エラーメッセージ表示 Exit Sub End I
検索の仕方で質問があります。 WinXPでの開発です。 データベースはOracle、開発ソフトはC++Builder5です。 以下のようなテーブルとデータがあります。 TB2,TB3のidは必ずTB1に存在します。 TB3のdataには、カンマ区切りの文字列が入っています。 dataのカンマ区切りの内容は "コード,サイズ1,サイズ2" となっています。 実際はこのような単純なデータではないので、カラム分けするのは 設計時に難しかったようです。 ------------------------------ CREATE TABLE TB1 ( id number, name varchar2(20) ); 1 sample1 2 sample2 3 sample3 ------------------------------ CREATE TABLE TB2 ( id number, keyno number ); 1 100 3 200 ------------------------------ CREATE TABLE TB3 ( id number, data char(200) ); 1 aaa,0.1,0.2 2 bbb,0.3,0.4 ------------------------------ たとえば TB2.keynoが100であり、TB3.dataのサイズ1が0.1のデータのTB1.nameを取りだす という場合、どのようなSQL文になるのでしょうか？ TB3のデータは読み込んだ後に一旦文字列を分解して コード、サイズ1、サイズ2を取得しないことには検索出来ないと思います。 一番高速な手法はどうなるでしょうか？ トリガーを使って、作業用のテーブル作ってやればいい、 みたいなことを言われたのですが、トリガーは違うのでは？と思いながら 手法を悩んでいます。 ローカルデータベースのようなファイルを使ってやる方法になるのでしょうか？ アドバイスをお願いします。
教えて下さい。 ＳＱＬに関してです。 ある２つのテーブルの集計（数量の合算）をＳＱＬで行いたいと考えています。 そこで、UNION ALL を使い集計させる事ができましたが、その中で、１つのテーブルに 条件を加えたいと考えています。 つまり、副問い合わせのような形にできないかと考えています。 《テーブル》 　T_在庫日次 　　 　　品目番号 　　場所コード 　　数量 　　処理区分 　T_在庫月次 　　 　　品目番号 　　場所コード 　　数量 《現状のＳＱＬ》 Select 場所コード,品目番号, SUM(数量) AS 数量 From ( Select 場所コード,品目番号, 数量 From T_在庫日次 UNION ALL Select 場所コード,品目番号, 数量 From T_在庫月次 ) Group By 場所コード,品目番号 上記のＳＱＬに対し、T_在庫日次　の処理区分が　‘10’ のデータに対するT_在庫日次とT_在庫月次の数量の 合計を求めたいと考えています。 ＳＱＬの記述で計算までして取得する事はできないでしょうか？？？ 教えて頂ければ幸いです。 よろしくお願いします。
あるテーブルがあって、Viewがそのままテーブルを参照してます。 そのViewをそのまま参照しているViewが階層的にあるとします。 テーブルA　← View１ ← View2 ← View3 [SQL的イメージは] ・creat table テーブルA (・・・） ・create view1 as select * from テーブルA ・create view2 as select * from view1 ・create view3 as select * from view2 質問したい事として、 View1 を参照するのとView3を参照するのは、View1を参照するのが 階層化が無い分、速いのでしょうか？ それともそのまま参照している場合、あまり速さは変わらないのでしょうか？
DBMS_METADATA.GET_DDLを使い定義情報を取得しようとしています。 尚、各定義情報は名前を指定せず、全て取得したいです。 テーブル、ビュー、Indexは以下のようにして取得できました。 （select DBMS_METADATA.GET_DDL('TABLE',table_name) from user_tables;） パッケージ、パッケージボディ、ファンクション、プロシージャーの取得方法が 分かりません。 一応、以下のように名前を指定すると取得できました。 select DBMS_METADATA.GET_DDL('PROCEDURE','名前') from dual; 名前を指定せず、全て取得する方法が分かりません。 パッケージ、パッケージボディ、ファンクション、プロシージャーに関して 全て取得する方法をご教授おねがいします。
受付テーブルと顧客テーブルがあります。 受付テーブル（受付日、顧客Ｎｏ、受付時間、受付内容） 顧客テーブル（顧客Ｎｏ、顧客名カナ、顧客名、顧客住所） 上記のテーブルがあるとします。 やりたい事は顧客Ｎｏを結合し 最新の受付日、前回受付日、前々回受付日を新しい受付日の順番に顧客毎に抽出したいのです。 仮に前回受付日と前々回受付日の内容が無ければＮＵＬＬ値を返します。 抽出したいフィールドは受付日、前回受付日、前々回受付日、顧客Ｎｏ、顧客名カナ、顧客名、顧客住所、受付内容です。 どんな構文になるのでしょうか？ どのようなＳＱＬになるでしょうか？ うまく伝わっているでしょうか？ よろしくお願いします。
oracleのインストールの問題について。バージョン（１０．２．０．０）です。 同じオラクルのCDで Windows2003Server とWindows7 にインストールしました。 １．まず同じCDでこの２つのOSに正常にインストール可能でしょうか？ ２．Windows7 の方で以下の問題が起きました。 　（１）OEMを起動すると、「java.long.Exception :Exception in sending Request::null」　と出る 　（２）sqlplusをたちあげようとすると 　　　　「SP2-1503 Oracle Call Interfaceを初期化できない」 　　　　「SP2-0152 Oracleが正常に機能していない可能性があります」　と出る このような問題が出る場合、どのような可能性があるのでしょうか。
DBに関しては、SQL文とMySQLで初歩の初歩を講座で受けたぐらいのレベルです。Oracleで設計、構築がしたく、Oracleの本を買い「Oracle　Enterprise Maneger」をインストールしましたが、パソコンが重くなるのでアンインストールしました。よく調べると「Oracle　Enterprise Maneger」はDB管理者が使い現場でも1つのパソコンにインストールするぐらいで、通常の設計、構築をするDBをやるSEは使わないと聞きました。では、Oracleの全くの初心者が設計、構築をするには、どのツールで勉強はじめればいいですか？参考になりそうなサイト、本、ツールなどありましたら、教えてください。
オラクルの環境をコピーして全く別の所に構築したい。 ただ、以下のような条件があります。 １．実体の無い物（ビュー、ファンクション、シノニムなど）は 　　そのままコピーしたい。また、Create文の情報もほしい。 ２．実体のあるテーブルですが、非常に件数が多い物があります。 　　その為、ある特定の件数（例えばMax１０００件まで）でコピーしたい。 　　また、Create文の情報もほしい。 ３．テーブルの中身ですが、機密性の高い情報がある可能性があります。 　　なので、そのようなカラムにはマスキング（データ変更）したい。 　　そのようなカラムがどこにあるかは事前に分かりませんので、 　　作業中に判断しながら行っていきたい。 　　（作業はお客様先で、時間的な制約があります） これらを実現する為には、どのようなツールで、どのようなコマンドで 行うのが適切でしょうか？
処理速度改善に向けて、３つ質問があります。 解答は１つでも良いのでお願いします。 １．検索条件が複数ある場合、もっとも絞れる物から検索するのが早いのでしょうか？ 　　（Indexはその順番に伴い変更する事を前提） 　　例： where X = 3 (1000件中10件に絞れる） and Y = 4　(1000件中100件に絞れる） and Z = 5　(1000件中900件に絞れる） 上記のように、より絞れる物から検索する。 ２．文字列で検索する場合、以下は同じ結果でしょうか。そしてパターン２の方が早いでしょうか 　　・パターン１ 　　where X <> 'Z' ・パターン２ 　　where X > 'Z' and X < 'Z' ３．条件式にTO_CHARが入った場合、indexカラムの場合、遅くなるでしょうか？ 　　下記SQLを直すとした場合、どのように直せるでしょうか？ SELECT * from X,Y where TO_CHAR(X.DATE,'YYYYMM') = Y.DATE2(+)
Oracle Database Client(lib64版）をlinux環境（CentOS5.8）へインストールしていますが、 上手く出来ません。今までインストール作業をして、何度もエラーが出ましたが何とか エラーは解消する事が出来たのですが何故かインストールができません。（と思っています） インストールできていたのであれば、 rpm -aq|grep oracle と打てば何かしらのレスが返ってくるものだと思っているのですが。。。 当然、phpコマンドで php -v と打つと PHP Warning: PHP Startup: Unable to load dynamic library '/usr/lib64/php/modules/oci8.so' - libclntsh.so.11.1: cannot open shared object file: No such file or directory in Unknown on line と出ます。（oracleクライアントがインストールされていないので当たり前ですが。。。） どなたかこの状態での打開方法、参考になる情報等ございましたらご教示の程を お願いします。 また、認識違いのご指摘でも結構です。
階層構造に対するＳＱＬに関して教えて下さい。 以下のような階層構造になっているデータが存在していますが、単純にトップを指定し、それ以下の 組織を表示させる事は簡単かと思われますが、下位層の品番を指定、その人が所属している部署のトップだけを 抽出するようなＳＱＬはどのように記述すれば良いでしょうか、、、 恐らくCONNECT BY を使うかと思われますが、記述の仕方がわかりません。 以下のケースでは、TANAKAさんを指定した場合、TANAKAさんは兼務している為、トップとしては、 SUZUKIさんとSASAKIさんが抽出されるSQLとしたいです。 【テーブル内容】 EMPNOENAMEMGR（上司） 1SUZUKI 2SATO1 3YAMADA1 4TANAKA3 5FUKUDA1 6ENDO5 7KOIKE6 8SASAKI 4TANAKA8 よろしくお願いします。
教えて下さい。 VB2008を利用し、ODP.NET経由でクライアントから接続していますが、その際に、以下の 記述を行い、SQLを投げましたが、サーバ側では発生はせず、クライアントだけどうしても以下の ようなエラーとなってしまいます。 《記述内容》 　'SQLをセット 　Dim adp As New OracleDataAdapter("SELECT 番号,メーカー名 FROM T_品目マスタ", Connection) 　'データセットをクリア 　ds.Clear() 　'データセットの中に品目マスタ_Tというテーブルを作成し、そこへ格納する。 　adp.Fill(ds, "品目マスタ_T") 《エラー内容》 　ORA-00923　FROMキーワードが指定の位置にありません。 単純SQLなので間違いはないと思い、よくよく調べてみると、SQLの項目（SELECT項目）にカタカナが存在 すると、このようなエラーとなってしまうようです。 そもそもカタカナがＮＧという事はないかと思われる為、何かクライアント側の設定が不足しているので しょうか？ それともこのFillでの検索は、カタカナがＮＧなのでしょうか？？？ 教えていただきたいと思います。 よろしくお願いします。
Oracle Database 11g Express Editionをインストールし、各設定をした後、 SQL-PLUSにて接続を試みています。 その際に、 sqlplus ユーザ名/パスワード@サーバIP の場合接続ができるものの、 sqlplus ユーザ名/パスワード@サービス名（XE） では接続ができません。 エラーの内容としては、 　ORA-12154 TNS 指定された接続識別子を解決できませんでした となってしまいます。 “TNSPING XE”、”TNSPING サーバIP”は、いずれも問題なく通ります。 また、tnsnames.ora　は、 XE = (DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.3.59)(PORT = 1521)) (CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = XE) ) ) と記載がある為、問題はないかと思われます。 名前解決がうまくいってない気がしますが、どこを修正すれば良いでしょうか、、、 環境変数は特にいじっていません、、、 初歩的な質問で申し訳ありません。 教えて下さい。 よろしくお願いします。
Oracle Database Express Edition 11g （Oracle Database XE）を使用していますが、 その際に、Application Expressを用いてユーザの作成をしましたが、画面では作成 されているものの、SQLPLUSでログインできません。 また、 　SELECT * FROM ALL_USERS; にも表示されません。 Application Expressが正しく接続されてないかと思いきや、表を作成したところ、正しく 表は作成されました。。。 そもそもApplication Expressで作成されたユーザというのは、SQLPLUS等で接続できない ユーザなのでしょうか、、、 関係性がわからず、、、教えて頂きたいと思います。 よろしくお願いします。
よろしくお願いします。 SQL*PLUSで、ホスト名を入れると、ORA-12154エラーとなってしまいます。 ホスト名を入力しないと、正常に接続可能です。 ちなみに、DBはローカルにあります。 以下、TNSNAMES.ORAの内容です。 =========================== ORCL = (DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = cl-000788.iafc.local )(PORT = 1521)) (CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = orcl) ) ) ================================= どこか、設定が間違っているのでしょうか？ よろしくお願いいたします。
Oracle 10g のインストールで苦戦しています。 機種違いで他のWindows7のPCには問題なくインストール出来ていますが、 問題の機種(Windows7)ではインストールを試みたところ、 コマンドの画面が起動して自動的に閉じた後、 何分待ってもインストーラーが起動しない状態となります。 ウイルスソフトも気になって削除してみましたが出来ませんで。 Oracleのログもインストールが停止されたという内容でしか残っておらず、 レジストリへの書き込みも一切ありませんでした。 コケている可能性がお分かりの方がおられましたらご教示お願いします。
宜しくお願いします。 表領域の物理設計などと言われるデータ・ファイルの配置ですがＯｒａｃｌｅが使用するＨＤＤをRAID ０＋１で構成した場合、「システム表領域、UNDO表領域、一時表領域は独立して作成すること」や「ＲＥＤＯログは他の表領域と別にする」などなどは、下記のどの管理が良いのでしょう？ １．RAID 0+1 を単一パーティションとし、システム表領域などをディレクトリで分ける ２．RAID 0+1 を複数パーティションとし、システム表領域などをパーティションで分ける ３．その他
Oracle9iをチューニングするにあたってデータファイルをどのように纏めるかについて、ご教授ねがいます。 １．データファイルを単一ファイルで構成するか、複数ファイルで構成するかの基準は何かありますか？ 当然、ＯＳの制約で複数ファイルに分割する必要があるのですが、ＯＳの制約内であれば単一ファイルで構成した方が良いのでしょうか？ ２．レコード数が単調に増加する場合、大きめのデータファイルを用意しＯＳの制約に近づいた時点で複数ファイルで構成するように運用すれば良いのでしょうか？ ３．そもそも、データファイルを単一ファイルと複数ファイルで運用する場合でレスポンスは大幅に違うのでしょうか？
ORACLEでNCHAR/CHARの違いについて教えて下さい。 文字列の記述に以下の２つの書きかたがありますが、 １．NCHAR(40) ２．CHAR(40 CHAR) これらにはどのような違いがあり、どう使い分けると良いでしょうか？ よろしくお願い致します。 以上
Oracle9.2(9.2.0.8) DB のデータを Win7(64bit) のClient(11.2) および ODP.NET (.NET 3.5) から検索しています。 この時、 DB の IP アドレスが 192.168.0.2/24 Client の IP アドレスが 192.168.1.3/24 のようにサブネットが異なる場合に複数(数十)レコードの返答があるクエリを発行するとクライアント側がハングしてしまいます。 同一サブネットIP(192.168.0.3 等)からの検索ではこのような問題は発生しません。 本事象の原因として思い当たることはないでしょうか？ よろしくお願いします。 尚、サブネット間は VPN 接続を使用しており、数百キロ～数千キロ離れています。
「～」を文字コード変換する時に javaの中で、「０x３０１c」→「０xff5e」という変換をしておりますが、 「・」を文字コード変換を同様にしたいのですが、 文字コードがわかりませんので、教えてください。 また、他にも怪しいと思われる文字コードを教えてください。
テーブルの列の定義をvarchar(250)⇒varchar(500)に変更するのはＡＬＴＥＲで変更してやればいいと思うんですが例えば１つのテーブルで上記のような列定義変更を膨大な数行う必要がある場合効率のよい方法ないでしょうか？
DBMS_STATSのdegree句についてご存じの方、教えて下さい。 １．degree句を設定すると対象テーブルの統計情報取得処理がn並列で 　　稼働し、処理時間の短縮が図れるということでしょうか。 ２．適切な並列数はどのように設定すればよいでしょうか。 　　多ければいいというものではないですよね。 以上、よろしくお願い致します。
オラクルを初めて２週間の初心者です。 tableA表からE_Codeをグループ化し、E_Codeの１の値が何個あるか、２の値が何個あるかカウントした値を求めたいのですがＳＱＬ文がわかりません。GROUP BYやCASE文などネットを見ながら試行錯誤しチャレンジしましたが、エラーとなり求めたい結果が取得できませんでした。 この場合どのようなＳＱＬ文を書いたらいいのでしょうか。 --tableA-- E_Code｜K_Code 001　　｜　　　1 001　　｜　　　1 002　　｜　　　1 002　　｜　　　１ 002　　｜　　　1 003　　｜　　　１ 004　　｜　　　2 005　　｜　　　1 005　　｜　　　1 006　　｜　　　1 007　　｜　　　2 007　　｜　　　1 007　　｜　　　2 求めたい出力結果↓ ----------------------------- E_Code | 1の個数 | 2の個数 001　　｜2　　　　｜ 002　　｜3　　　　｜ 003　　｜1　　　　｜ 004　　｜　　　　　｜1 005　　｜2　　　　｜ 006　　｜1　　　　｜ 007　　｜1　　　　｜2
MySQL、PostgreSQL、SQLサーバー、ORACLEデータベースについて 仮に、ユーザが５０００万人のSNSを作った場合、MySQLやPostgreSQLで対応できますか？ 検索に時間がかかったりするのでしょうか？ その場合、DBをORACLEにしたほうがいいのでしょうか？ ■費用について もし、DBサーバーを１台設置して、ORACLEにした場合、初期費用や毎月のコストはどのくらいになるのでしょうか？ ORACLE対応のDBサーバーの金額等も教えて頂ければ幸いです。 あと、ＳＮＳの会員が10万人までだとしたら、 MySQL、PostgreSQL、SQLサーバー、ORACLEのうちだと、どれがコスト的に一番効率的でしょうか？
いつもお世話になります。 相関サブクエリについて、教えて頂きたいことがあります。 以下のサイトに相関サブクエリについての説明がされています。 http://gihyo.jp/dev/serial/01/sql_academy2/000902 このサイトによると、 ----------------------------------------------------------------- 「行われている動作 リスト2の2つ目のSELECT文においても，最初に評価，実行されるのがサブクエリであるという点は変わりません。・・・」 ※リスト2　 相関サブクエリ（性別による集合カット） SELECT * FROM Employees E1 WHERE age = (SELECT MAX(age) FROM Employees E2 WHERE E1.sex = E2.sex); ----------------------------------------------------------------- と説明があります。 理解できないのが、「最初に評価，実行されるのがサブクエリ」という内容です。 私の理解では、相関サブクエリは、内側のクエリが外側のクエリを参照するクエリのことで、まず外側のクエリが実行される。 その後、その結果の各レコードに対してサブクエリを実行していく、というように理解しています。 しかし、上記サイトでは先にサブクエリが実行されるという説明がされており、ちょっと混乱しています。 相関サブクエリは正しくはどういう挙動をするものなのでしょうか、また正しい説明がされているサイトなども教えて頂けないでしょうか。 宜しくお願いします。
はじめまして 当方、初心者で勉強の身です。ご回答頂けたら幸いです。 Oracle１０ｇを使っています。 表１ カラムA(PK) CHAR型 カラムB(PK) CHAR型 カラムC(PK) CHAR型 カラムD(PK) CHAR型 A　　　　　B　　　　　C　　　　　D --------------------------------- AUD　　　2012　　　1　　　　　 30 AUD　　　2011　　　12　　　　　26 EUR　　　2010　　　7　　　　　 1 EUR　　　2011　　　6　　　　　21 EUR　　　2012　　　5　　　　　 1 JPY　　　2011　　　6　　　　　26 JPY　　　2011　　　12　　　　　25 というデータであれば A　　　　　B　　　　　C　　　　　D --------------------------------- AUD　　　2012　　　1　　　　　 30 EUR　　　2012　　　5　　　　　 1 JPY　　　2011　　　12　　　　　25 というデータを抽出したいと考えています。 具体的には、Aをキーにして、B（年）、C(月)、D(日)の年月日の最新日付を取りたいですが どうすればよいでしょうか。 お手数をおかけしますが、よろしくお願い致します。
お世話になります。 実はsga_max_sizeを変更するとDBが起動しなくなりました。 そのため、元に戻そうと考えました。 変更する前にDBを停止しＳＰＦＩＬＥをバックアップしていましたので DB停止後、SPFILEをコピーしました。 するとDBは起動し問題なく動作しているようにみえています。 この復元方法は正しいのでしょうか？また問題はないでしょうか？ PFILEからSPFILEを作成しなおす方法もあると思いますが・・・
oracle１０ｇを使用しております。 統計情報について質問させていただきます。 テーブルAについて、[statistics = none]を指定しExportします。 統計情報取得コマンドを実行します。 analyze table TABLE_A compute statistics; 後に、テーブルAを削除します。 drop table TABLE_A; バックアップファイルを基に、テーブルAをImportします。 このとき、テーブルAの統計情報はExport実行時と同じになるのでしょうか？
主キーを定義すればレスポンスは問題ないといっていいものでしょうか？ システムのテーブル検索処理の設計で 保有期間を延長し、５百万件近いのテーブルを保有し検索する処理をつくり 過去分の検索処理を作ろうとしているのですが 「主キーがあるのだから問題あるはずはない」という意見が出ていました。 出来るだけ検索量（サイズ、件数）を絞り込み行おうとしたのですが却下されていまいました。 主キーにすれば問題ないという考えは正しいものなのでしょうか？
VB.net2005 ODP.net を使用して開発をしています。 OracleCommand.Parameters.addで追加したのコレクションについて 既にコレクションが追加されているかどうかを 判定したいのですが方法が判らず、困っております。 もしご存知の方おりましたらご教授願います。
oracle10gを使用しています。 テーブル単位のExportを行うシェルを作成しようと思っております。 テーブルをfilesizeを指定し分割したいのですが、 "エクスポート・ファイル: EXPDAT.DMP >"を検知、新たにファイル名を指定、Enter の書き方がわかりません。お力添え宜しくお願いします。 ファイル名は最初にexp_dump01.dmpを指定し、以降はexp_dump02.dmpと 番号をインクリメントさせたいと思っております。 現在、以下のようなシェルを作成しました。 #!/bin/sh #変数指定 CON='エクスポート・ファイル: expdat.dmp >' RET='エクスポートは警告なしで正常終了しました。' ICOUNT=1 #コマンド実行 expコマンド #結果取得 VAR=`command` #取得結果が次のファイル名を要求している場合 while [VAR=CON] do ファイル名をインクリメントしたものを指定 done #取得結果が正常終了を示した場合 if [VAR = RET] echo 'Exportが終了しました。' fi #次のコマンド実行
　　こんばんは。 EnterpriseManagerが起動できません。 DOS窓でコマンド入力しているのですが C:\>set ORACLE_SID=orcl C:\>emctl start dbconsole OC4J Configuration issue. c:\oracle\product\10.1.0\Db_1/oc4j/j2ee/OC4J_DBConsole_<アドレス>_orcl not found. となります。 そんな所にoracleフォルダなんてないんですが。 それとＤＢＣＡ作成時に、エラーダイアログが出ました。 内容は、 1) 環境変数ORACLE_UNQNAMEを一意のデータベース名設定 2)D:\app\～\11.2.0\dbhome_1\bin\emctl.bat start dbconsole といった内容です。 環境変数ORACLE_UNQNAMEはシステム環境変数の部分に追加するんでしょうか？ またORACLE_SIDやORACLE_HOMEも追加したほうがいいでしょうか？ ここの所が理解しずらいです。 インストールだけでここまで手こずるのは初めてです。 巷の噂だと少し間違えただけでアンイストだとか 正直言って屈指の難易度を誇るソフトだと思う。 不安定すぎてやってられない。 もう自分じゃどうにもなりません；； よろしくお願いします。 投稿日時 - 2008-07-30 13:18:46
お世話になっております。 現在、以下のプログラムではなくＳＱＬのみで 以下を表現できないか考えております。 型番　　倉庫　　オプション ＡＡ1 ABC 0 AA1 BBC 2 AA2 ABC 0 AA3 ABC 3 AA4 ABC 2 AA4 BBC 2 以上のようなデータが存在したとします。 型番でカウントを行いたいのですが、同一の型番は1行でカウントします。 また、同一の型番のオプションがすべて2か3の場合はカウントさせません。 結果、AA1,AA2の2行がカウントされます。 このような結果を出す方法を考えてみましたが、 簡単そうで奥が深いようでいまだ思いつきません。 どなたかピンとこられましたら、 ぜひアドバイスお願い致します。
oracle10gを使用しております。 oracleのimportについて質問いたします。 テーブルAをExportしてdumpファイルを作成し、テーブルAより任意のレコードを削除、 commitを行います。 後に、テーブルレコードを削除前に戻したいと思った場合、 dumpファイルを用いて、削除したレコードだけを元に戻すことは可能でしょうか？ 現状ではテーブルAを削除し、dumpファイルをimportしてテーブル、レコードを復元しておりますが、 これ以外に方法はありますでしょうか。 回答、宜しくお願いします。
データベース自体全くの初心者ですが、仕事でOracleを使うことになりました。 3ヶ月程で基本をモノにしたいのですが、まずは何から手をつければいいのでしょうか。 いきなりOracleの参考書を手に取るよりも、データベース（SQL？）の基礎知識から勉強した方がいいでしょうか。 おすすめの参考書等あればご教示下さい。
sql初心者です、皆様ご教授お願いいたします。 以下のようなselect文の結果が・・・ select aaa,bbb,ccc from XXX order by aaa 以下のようになった場合・・・ 埼玉 100 AAA 東京 200 BBB 東京 200 CCC 東京 300 CCC 千葉 400 CCC 以下のような表示を行う事はsqlで可能でしょうか？ 埼玉 100 AAA 東京 200 BBB （〃）（〃） CCC （〃） 300 （〃） 千葉 400 （〃） つまり「一つ前のレコードと同じ結果だった項目は”〃”等の任意の文字列を出力する」です。 宜しくお願いいたします。
oracle10gを使用しております。 テーブルに億桁のレコードが登録してある場合、 テーブルExportを行うと時間がかかってしまう＆出力dumpファイルが 大きくなってしまうといった弊害があると思うのですが、 テーブルレコードを数万単位に分割してExportすることは可能でしょうか？ また、その分割したファイルをImportする際は、Export前と同じく 一つのテーブルでレコードを管理することが可能でしょうか。 大雑把な質問で申し訳ありませんが、宜しくお願いします。 また、今回Export時に使用するコマンドは以下になります。 exp スキーマ名/パスワード constraints=y grants=y indexes=y tables=テーブルA file= テーブルA.dmp log=テーブルA.log
お世話になります。 Excelで[データ]-[外部データの取り込み]-[データの取り込み]-[新しいソース] -「ODBC DSN」-「接続するODBCデータソース」-「OracleDNS」 -「Oracle ODBCドライバ接続」ではＯｒａｃｌｅに接続する事は出来、データも Excel上に表示する事が出来ました。 しかし、下記HPの http://www.atmarkit.co.jp/fdb/rensai/excel2oracle02/excel2oracle02_2.html サンプルコードを元にVBAコードを作成したのですが、 'データベース接続処理がうまくいっていない様で、 Err_Han: ' エラー処理 MsgBox (Err.Description) で、「ORA-12154:TNS: 指定された接続識別子を解決できませんでした」 と言うエラーになってしまいます。 ＶＢＡにてADOの参照設定とかしていないのですが原因はそれでしょうか。 どなたかご親切な方、ご教示くださいます様、宜しくお願い致します。
いつもお世話になっております。 この度は、手前のＳＱＬ文において DELETE文のレスポンスが上がらずに難儀しています。 現在DELETE処理はバッチにて行っています。 最初にSELECTにて抽出を行ったものをバックアップにとり、 次は同様の条件でDELETE文で処理しています。 この際に、SELECTでは１秒程度で済んだ処理が、 DELETE文ではレスポンスが返ってこないという状況です。 何がまずいのか、どう工夫すればいいのか 色々変えてみましたがレスポンスは改善されません。 SQLと条件は以下です。 【SQL文】 SELECT 複数の項目 FROM TABLEA A WHERE NOT Exists(SELECT 'X' FROM TABLEB B WHERE A.ITEMNO = B.ITEMNO) AND NOT Exists(SELECT 'X' FROM TABLEC C WHERE A.ITEMNO = C.ITEMNO AND to_char(LAST_DAY(ADD_MONTHS(SYSDATE,-4)),'YYYYMMDD') < C.REPYMD) AND NOT Exists (SELECT 'X' FROM TABLEA2 A2 WHERE A.ITEMNO = A2.ITEMNO AND to_char(LAST_DAY(ADD_MONTHS(SYSDATE,-4)),'YYYYMMDD') < to_char(A2.CREATEDATE,'YYYYMMDD')) AND NOT Exists(SELECT 'X' FROM TABLEC C WHERE A.ITEMNO != C.ITEMNO AND to_char(LAST_DAY(ADD_MONTHS(SYSDATE,-4)),'YYYYMMDD') < to_char(A.CREATEDATE,'YYYYMMDD')) 上記のSELECT文の後に処理されるDELETE文は 「SELECT 複数の項目 FROM TABLEA A」　⇒ DELETE FROM TABLEA A　としたもので、 条件は全てSELECT文と同様のものを使用しています。 ◆条件を言葉で明記すると以下のようになります。 １．Bテーブルに存在するものは削除対象外とする ２．AテーブルのアイテムIDとCテーブルのアイテムIDは一致する。 　　AテーブルのCREATEDATEとCテーブルのREPYMDのいずれかが３ヶ月以内のアイテムは 　　削除対象外とする ３．AテーブルもしくはCテーブルにしか存在しない場合は、各日付が３ヶ月以内のアイテムは 　　削除対象外とする 以上のようになっています。 どなたかアドバイスをいただければ幸いです。 宜しくお願い致します。
以下のような5つのレコードがあった場合に --- AAAAAAA　X AAAAAAA　Y AAAAAAA　Z BBBBBBB　P BBBBBBB　Q 以下のように2行に集約して結果を表示したいのですが、どのようなSQL書けばいいでしょうか? --- AAAAAAA　X,Y,Z BBBBBBB　P,Q X,Y,Zおよび、P,Qは昇順で左からカンマ区切りで1つの項目に出したいです。 やはり、PL-SQLを書かないとだめですかね? SQLに詳しく、ご存知の方がいらっしゃれば、ご教授願います。
お世話になります。 インターフェースにｅｘｃｅｌを使用し、 oracleをデータベースとして活用した 仕組みを開発したいと考えております。 ネットで下記コードを参照しましたが、 excelのvbaを起動するpcから下記コードで 別のサーバー内のoracleに接続する際、 パスの記述はどの様にしたら宜しいのでしょうか。 また、CONNECTSTRINGに代入する文字列は oracleの何処を調べれば分かりますでしょうか。 なんとも初心者すぎる質問内容で大変恐縮 致しますが、何卒ご教示頂けます様、 宜しくお願い申し上げます。 　　　記 Sub prcAdoOracleDB() Dim adoCON As New ADODB.Connection '(1)ADOを使いORACLEのDBを開きます adoCON.Open "Driver={Microsoft ODBC for Oracle};" & _ "CONNECTSTRING=ADRSORA; UID=HAPPY2; PWD=ISLAND;" '(2)データベースのクローズ adoCON.Close End Sub
０～多と１～多の記述について教えて下さい。 部署――社員　のときで、 ・１つの部署に、０人からｎ人所属している。 ・１人の社員は、０からｎの部署に所属している。 というとき、部署側も社員側も、オプショナリの記載は黒丸●の記載ではなく、白丸○だという認識でした。しかし問題集を解いていると、解答では部署側は●となっていました。なぜでしょうか？
oracleに登録された数億件のデータを数日に分割して削除するため、 数億件のデータを5千件ずつ削除する方法を教えてください。 delete from テーブル名　where 条件　set rowcount = 5千; commit; これだと削除処理する件数が5千件であって、 先頭から5千件分見ることとは違うのでしょか？ やりたいことは、 初日：一件目～5千件 二日目：5千1件目から一万件目 ・・・・・・ という感じで削除処理を行いたいです。 皆様の力を貸してください。宜しくお願いします。
お世話になります WindowsXPSP3＋Access2003SP3＋OracleXEを使用して 顧客管理システムを作成しています 「Microsoft ODBC for Oracle」のデータソースを利用して Accessより接続を行っておりますが 「Oracle in XE」というデータソースで接続する必要があり そちらで接続したところ レポートのデータが一部出なくなってしまいました （「Microsoft ODBC for Oracle」に戻すと表示されます） ODBCの違いでこういった現象が出るものなのでしょうか？ 宜しくお願い致します
oracle 10g Release 10.2.0.2.0を使用しています。 SQLにてDELETE文実行時のサーバ負荷、処理時間を確認したく、 次のSQLを実行しましたが、「V$SQLが無い」と怒られました。 SELECT * FROM V$SQL； oracleのバージョンを確認するSQL（select * from v$version;）は 問題なく実行できます。 V$SQLが使用できない理由、もしくは別の方法で処理負荷、処理時間を 確認できる方法とうあれば教えていただきたいです。 宜しくお願いします。
SQL文で「シングルクォーテーション」や特殊文字？を利用した文字列を作成方法がわかりません。。どなたか詳しい方ご教示いただけませんでしょうか？ SQLで問い合わせ結果を文字列が含んだ形式で出したいと思っています。 ＜例＞ select 'これは、''||T.T1||''の''||T.T2||''の結果です。期間は、''||T.T3||''までです。' from T where ・ ・ ・ ＜例＞ このような感じで作っています。 テーブル名：T T1：文字列型 T2：文字列型 T3：日付型（yyyy/MM/dd） です。 T1とT2のみの文字列でしたら問題は無いのですが、T3の日付型を含んでしまうと何故かうまくデータが抽出できません。 何かいけない点があるのでしょうか？ 特殊文字についてもよくわかっていないのもいけないのですが・・・ よろしくお願いいたします。
10ｇをつかってます。 ストアドプロシージャ内のexecute immediate内で変数は使えないのでしょうか？
独自に TYPE を定義した表のデータを export したのですが、exp した dmp ファイルの imp で 下記エラーが発生してしまいます。 「ORA-01861: リテラルが書式文字列と一致しません」 export 元環境 OS： HP-UX 11i v2（64bit） Oracleバージョン：9.2.0.8 Enterprise import 先環境 OS：Windows7 Pro (64bit) Oracleバージョン： 11.2 Express Edition 対処方法、または原因の切り分け方法について、ご教示願います。
sqlplus testuser/passwd@TESTの形式ではログインできますが、sqlplus testuser/passwdだとORA-01034、ORA-27101が発生します。 ORACLE_SIDは正しくセットしていますが、どのように調査すればよいか分かりませんので、教えて下さい。 以下は実行結果です。 USER[2]% sqlplus testuser/passwd@TEST SQL*Plus: Release 11.2.0.1.0 Production on 水 1月 11 22:19:45 2012 Copyright (c) 1982, 2009, Oracle. All rights reserved. Oracle Database 11g Enterprise Edition Release 11.2.0.2.0 - Production With the Partitioning, OLAP, Data Mining and Real Application Testing options に接続されました。 SQL> exit Oracle Database 11g Enterprise Edition Release 11.2.0.2.0 - Production With the Partitioning, OLAP, Data Mining and Real Application Testing optionsとの接続が切 断されました。 USER[3]% setenv ORACLE_SID TEST USER[4]% env | grep ORACLE ORACLE_SID=TEST ORACLE_HOME=/opt/app/oracle/product/11.2.0/dbhome_1 ORACLE32_HOME=/home/oracle2/32Bit ORACLE_TERM=sun5 USER[5]% sqlplus testuser/passwd SQL*Plus: Release 11.2.0.1.0 Production on 水 1月 11 22:20:17 2012 Copyright (c) 1982, 2009, Oracle. All rights reserved. ERROR: ORA-01034: ORACLE not available ORA-27101: shared memory realm does not exist SVR4 Error: 2: No such file or directory プロセスID: 0 セッションID: 0、シリアル番号: 0
10ｇを使ってます。 １．ワークテーブル作成 ２．そのテーブルにインサート の一連のスクリプトをsql/plusかなんかでやると問題ないのに それをストアドにしたら２．の時にテーブルが存在しないと言うことで コンパイルエラーになってしまいます。 こうゆう場合どうすればコンパイルエラーを回避できるのでしょうか？ １．と２．を分割して二つのストアドにしないといけないのでしょうか。
ＳＱＬでこんな事ができないかと考えています。 実際のデータの内容として、発注データと仕入データが存在し、結果として 発注残の数量を拾いたいと考えています。 １、発注データ 発注番号、品名、数量・・・・ ２、仕入データ 仕入番号、発注番号、数量・・・・ ※　仕入は分納もある為、１つの発注番号に対し、複数データが存在します。 結果として、 　発注番号、発注残数量 これらを繋ぎ合わせ、なんとか１つのＳＱＬで発注残が取得できないかと 考えていますが、不可能でしょうか？ これをプログラムで作成する事は可能かと思われますが、かなりボリュームが 大きくなってしまう為、ＳＱＬでなんとかならないかと考えています。 教えて下さい。　よろしくお願いします。
10gを使っています。 ストアドプロシージャ内のexecute immediate内に"'"（シングルクォーテーション）が あった場合はどう扱えばいいのでしょうか？ エスケープしないことでエラーになっているようです。
oracle言語（DB系言語）を使った自社パッケージってあるんですか？そもそも自社パッケージってなんですか？
OcaleMasterにむけて勉強中です。 Oracle11.2をOracleLinux5にインストールして以下を行いました。 1.ユーザー「test」を作成。権限はconnectロールのみ。 2.sqlplusにtestでログイン(sqlplus test/***) 3.テーブル「t1」を作成/行移動を有効。 4.t1に対し挿入・更新を実行する。 5.flashback tableを実施すると以下のようなエラーが発生しました。 SQL> flashback table test.t1 to scn 1015246; flashback table test.t1 to scn 1015246 * 行1でエラーが発生しました。: ORA-00604: 再帰SQLレベル1でエラーが発生しました。 ORA-01031: 権限が不足しています。 6.testにflashback any tableシステム権限/sysdba権限を付与 7.sqlplusにtestで再度ログイン(sqlplus test/***) 8.flashback tableを実施するとやはり同様のエラーが発生しました。 9.sqlplusにsysdbaでtestで再度ログイン。(sqlplus test/*** as sysdba) 10.flashback tableを実施すると成功しました。 参考書などの記載を見る限り、基本的に自分のテーブルであれば権限は不要と思ったのですが（少なくともSYSDBAでないと不可というものではないはず!?)、No5、No8でエラーとなってしまったのは、どこに問題があったものでしょうか。 何か情報ありましたら教えてください。
オラクルのソフトウェアライセンス費用のコストダウンの仕方を考えています・・・ とあるシステムの運用をしていますがそろそろリプレイス時期が近づいて来ました。 まぁそれなりに費用がかかることは織り込み済みなのですが・・・景気も景気なのでコストを削減しなさいと厳命されています。 そこでとりあえずサーバは仮想で現在の物理サーバより台数を減らして諸費用を削減しています。 その企画書を上司に出したらもっと削減はできないか検討しろと突き返されました。 基本的に今のアプリを移行することが一番安上がりです。 （使うDB変えたりアプリを買い換えは一応見積もってみたけど論外な金額になりました） あと減らすとしたら保守費用？ライセンス費用？といったところしかないかと思っています。 この対象のシステムは本番運用環境とてすと環境があります。 上司と相談していて「てすとの稼働率は低くていいんだから本番にてすと用インスタンスでも作りゃコスト削減だからやれよ！」 みたいに言われました・・・ 私としては正直えっ？？？と思っています。 たぶんリソースとかでは問題ないかと思いますが有事の際困るのではとおも一瞬頭をよぎりましたが反論できる材料がなかったのでその場では調べてまた報告しますにしました。 サーバ異常時について考慮を入れていないとは思うのですが・・・（たぶん上司は確率的に低い、最悪バックアップから戻せよって考え） 私的にはアプリの状況から同一サーバにはしたくありません。 しかし、コスト的にも厳しいのです。 １０ｇの導入を進めていますが、なんとかオラクルのライセンスコストをカットするいい方法はないでしょうか？ また、上司の意見は有りでしょうか？？？
色々試行錯誤していますが、求めた結果になりません。 下記URLに詳細を明記した画像を載せましたので、ご覧ください。 宜しくお願い致します。 http://www2.ocn.ne.jp/~aiken/okwave-index.html
はじめまして。 各部門に所属している人の件数を配列に格納して処理したいと考えています。 （例）テーブル名：buhyo SQL：select bumon_cd,count(*) from buhyo group by bumon_cd order by bumon_cd 上記SQLの結果↓ 部門コード(bumon_cd)　　　　　count(*) --------------------------------- A11　 　　　　　　　 　　　　　　　　 100 A12 　　　　　　　 　　　　　　　　　　150 A13 　　　　　　　 　　　　　　　　　　200 上の結果であるA11と100、A12と150、A13と200をそれぞれ配列に入れたくて PLSQLで以下のロジックを作成しましたが、うまくいかなくて困っています。 ＜ロジック＞ DECLARE CURSOR KEKKA IS SELECT BUMON_CD,BUMON_CD,COUNT(*) RCNT FROM BUHYO GROUP BY BUMON_CD ORDER BY BUMON_CD; TYPE BUMON_TAB IS TABLE OF KEKKA%ROWTYPE INDEX BY PLS_INTEGER; WK_ARRAY BUMON_TAB; BEGIN FOR WK_BUMON IN KEKKA LOOP I := I + 1; WK_ARRAY(I).BUMON_CD = WK_BUMON.BUMON_CD; WK_ARRAY(I).RCNT = WK_BUMON.RCNT; DBMS_OUTPUT.PUT_LINE(WK_ARRAY(I).BUMON_CD || ',' || WK_ARRAY(I).RCNT); END LOOP; END; / これで出力しようとしてもWK_ARRAY配列に部門コードと件数が入りません。 どのようにすれば各部門とその対になる件数を配列に入れることが 可能でしょうか？ご教授ください。 よろしくお願いします。
あるテーブルのキー項目をnumberからvarchar2に変更します。 テーブルの全件を仮テーブルを作成してコピー 元テーブルをTRUNCATE後、型変換 仮テーブルのデータを元テーブルへコピー という流れで、それぞれSQL文はできましたが、 仮テーブルのデータを元テーブルへコピーを実現する SQLが思い浮かびません。 insert into AAA select * from BBBだと、属性もコピーされてしまう？ とのことで、ご教授お願いいたします。
テーブルが2つあり、 テーブル１　ＩＤ１　ＩＤ２　ＩＤ３　[PRIMARY-KEY制約]　ID1 ID2 テーブル２　ＩＤ１　ＩＤ４　ＩＤ２　[PRIMARY-KEY制約]　ID1 ID４ のテーブルがあります。 テーブル２にてFOREIGNKEY制約（ＩＤ１とＩＤ２）を実施すると ora-02298が発生してしまいます。 どのようにすればFOREIGNKEY制約をかけれますか？
電話番号のデータを文字列分、'#'で置換したいのですが、 update test set tel_no = replace(tel_no,tel_no,'#'); では、'#'一文字になってしまいます。 電話番号が10桁の場合、##########と置換するための OracleのSQLを教えてください。
オラクルのサービスを停止して オラクル１０Ｇのシステムと　ＤＢ領域のＨＤをデフラグしても大丈夫でしょうか
開発環境 OS：CentOS DB：Oracle Database 11g 上で，Pro*Cを使用して，DBにアクセスする関数を作成しました（正確には，してもらいました）． 上記で作成した関数を，別に作成したプロセスから呼び出しているのですが プロセスの挙動が，期待しないものになります(ゾンビにはならないが，以降の動作をしない)． OracleのHPを見ると，Pro*Cは，signalをユーザプロセスに投げるように 読めます（SIGCHLD，SIGPIPE？？）が，それ以上の情報を見つけられていません． おそらく，Pro*Cを利用する場合の「お約束」があるのかと思いますが どの辺を調べればいいかお教えください．
oracle 複数列のデータ中身を別のテーブルの１列にインサートしたい ご存知の方、オラクルプロの方、 若輩者の私にアドバイス等ご指導受けたまりたく存じます。 以下のようなテーブルがあったとします。 テーブルA MID　｜　K1　｜　K2　｜K3 ------------------------- 011　｜ああ ｜いい ｜うう　 012　｜ええ　｜おお　｜かか 特定の列を選択しての、Updateには成功しました。 update テーブルA　set　K1　= (select K1|| ' ' ||K2|| ' '||K3 from テーブルA where MID = '011') where MID = '011'; これを別のテーブルに全行Insertしたいのです。約５千行はあり、環境の制限によりSQL文のみしか使えません。 テーブルB MID　｜K1 ----------------------- 011　｜ああ　いい　うう 012　｜ええ　おお　かか 以下のようなSQLで正しいでしょうか？ insert into テーブルA (K1) select K1|| ' ' ||K2|| ' '||K3 from テーブルB; 上記の方法で実施しましたが、下記のようなエラーメッセージが表示されます。MID項目が主キーのため、NULL不可なことはわかりますが、指定していないMIDが何故でてくるのでしょう？ SQL Error: ORA-01400: テーブルA (MID) にはNULLは挿入できません。 環境情報： Oracle 10g　 検証環境：Oracle SQL Developerあり 本番環境：Oracle SQL Developerなし、SQLのみ使用可
Oracleで大量レコードを削除する場合、 どういった方法を取ればよいですか？ 削除予定レコード数は約2万件です。 以下は使用しているOracleのversionを調べたものです。 Oracle Database 10g Release 10.2.0.2.0 - 64bit Production これだと、partitionが使用できないと思われるので (Enterprise Editionじゃないから)どなたかお力添えをお願いします。
お世話になっています。 現在下記のようなSQLを組んでいます。 ビュー１の集計結果 UNION ALL ビュー2の集計結果 UNION ALL ビュー3の集計結果 実行結果　例 年月 　　　 人数　　金額 201104　　　3 　　　20000 201105　　　2 　　　10000 201104　　　1 　　　5000 GROUP BY句で年月を集計したビューをUNION ALLでつないでいるため、 当然のように同じ年月が何度も出てくるため、テストがしづらくなっています。 やりたいこととしては、さっきの実行結果をさらに年月で集計することを 考えています。 年月 　　　 人数　　金額 201104　　　4 　　　25000 201105　　　2 　　　10000 対策として、下記のように集計したビューをUNION ALLでつないだ結果を さらに集計するSQLを作りました。 SELECT　 FROM（ ビュー１の集計結果 UNION ALL ビュー2の集計結果 UNION ALL ビュー3の集計結果 ） GROUP　BY その結果、下記のエラーが発生しました。 ORA-00935:グループ関数のネスト・レベルが深すぎます。 環境はoracle11gです。 あとは、SQLのFROM句の（）の部分をビューとして作成し、 更にそのビューを呼び出して集計するくらいしか思いつかないです。 今回作ろうとしてるのはテスト用のSQLのため、SQL文と実行結果を残したいので、 できればビューやプロシージャーは作らずに、SQLのみで作成したいと考えています。 何か良い方法はありますでしょうか？ 宜しくお願い致します。
(1)11g SQL基礎I [11g SQLI](1Z0-051) (2)Bronze SQL基礎I [Bronze SQLI](1Z0-017) の上記の2つがありますが、どう違うのでしょうか？ できれば、将来性のある方を受けたいのですが、 (1)が11g、(2)がが10g、11gに共通すると思って良いのでしょうか？ それであれば(1)の方が将来性があるのでしょうか？ また、この後、11gでは無理だと思いますが、12gが出る頃には SillverやGoldを受けたいのですが、それも視野に入れてご回答 宜しくお願い致します。
マテリアライズドビューの更新時エラーを検知する方法を教えて下さい。 できればマスターサイトで検知したいのですが・・・。
お世話になります。 今回、あるTBL１のフィールド：[氏名]を入力すると同テーブルのフィールド：[社員番号]が自動で セットされるようなトリガーを作成しようとおもっています。 しかし、変更表の更新には複合トリガーを使用しなければ出来ないというのはわかったのですが、 うまいことコンパイルできません。下記に前提条件と自分なりに作成したトリガーをを記載しますので どなたか助けてください。 <前提条件> ・セットされる社員番号はプライマリーキーとなっている。 ・更新される条件はTBL1のフィールド：[データ区分]が2or3のとき <作成したトリガー> CREATE OR REPLACE TRIGGER TRG_SET_AUTO_SHAIN_NO FOR INSERT ON CM_PORTAL_SHAIN COMPOUND TRIGGER REFERENCING OLD AS OLD NEW AS NEW WHEN (NEW.DATA_KBN in (2,3)) DECLARE GRP_CD VARCHAR2(3); SEQ_NO NUMBER(4); NEW_SET_NO VARCHAR2(7); AFTER STATEMENT IS BEGIN IF :NEW.DATA_KBN = 2 THEN select SQ.GROUP_CD,SQ.SEQUENCE_NO + 1 into GRP_CD,SEQ_NO from CM_HAKEN_GROUP_SEQUENCE_MT SQ where SQ.GROUP_CD = '999'; ELSE select SQ.GROUP_CD,SQ.SEQUENCE_NO + 1 into GRP_CD,SEQ_NO from CM_HAKEN_GROUP_SEQUENCE_MT SQ where SQ.GROUP_CD = '888'; END IF; NEW_SET_NO := substr(GRP_CD,LPAD(SEQ_NO,4,0)); INSERT INTO CM_PORTAL_SHAIN (SHAIN_NO,SHIMEI_LOCAL,DATA_KBN) VALUES (NEW_SET_CD,:NEW.SHIMEI_LOCAL,:NEW.DATA_KBN); AFTER EACH ROW IS BEGIN INSERT INTO CM_PORTAL_SHAIN (SHAIN_NO) VALUES (NEW_SET_NO) END; / ちなみにこれでコンパイルするとエラーが発生します・・・ どこがいけないのでしょうか？
完全リカバリのUNDOデータの由来、扱いについて教えて下さい。 完全リカバリの大まかな流れとして、 1.リストア 2.アーカイブ、オンラインREDOログでロールフォワード 3.UNDOでロールバック 4.完了 となるかと思いますが、 UNDOデータはどこから持ってころれるのでしょうか？ もしUNDO表領域から持ってくるのであれば、ロールフォワード分をロールバック出来るだけのUNDOが残ってる保証はないかもしれない、と疑問を持ちました。 (現実的にはまずないのかもしれませんが) となると、完全リカバリが失敗するケースもあるのでしょうか？
データベースを初めて作成します。 11gをインストールまで済みました。 データベースをコンフィグレーションから実行しています。 ただ標準で設定するのではなく、ｃｔｌファイルやsystem、tempファイルなどを 別々のフォルダに設定してほしいとの依頼を受けました。 またEドライブも作成し、アーカイブファイルの二重化で、DドライブとEドライブに作成してほしいおのことでした。 コンフィグレーションでできそうなのですが、よくわかりません。 コンフィグレーションを使用しなくても良いので、設定方法を教えていただけないでしょうか。 もしくは参考になるURLを教えていただきたく思います。
SQL初心者です。 oracle 9iの環境で「あるカラムに英字を含まないレコードを取得する」というのがあります。 私は10gを使用しているのでREGEXP_LIKE(カラム名_NO,'[A-Z]')とするつもりでした。 ところが9iはREGEXP_LIKEをサポートしていないということです。 ではどうすればできるのかというので困っています。 10gのselect文 select * from table_a where regexp_like(item_a,'[A-Z]') これを9i環境ではどのように記述すればよいのでしょうか？
SQLの結合条件について ・table_A ID | ATAI 01 | AAA 01 | XXX 02 | ABC 03 | DEF table_B ID | ATAI 01 | 不要 02 | 必要 03 | 必要 04 | 不要 上記のようなテーブルAとBがあるとします。 やりたいこと １．テーブルAに存在するIDをBのIDから抽出 ２．テーブルAの「ATAI」の値が’AAA’のIDは抽出対象から外す。 ※テーブルAの01IDに’AAA’と’XXX’がありますが、Bの抽出対象から外したい。 ２.がうまくいきません。 select B.ID from table_A A,table_B B where A.ID = B.ID 上記のSQLに２．の条件を足して、結果を02と03にしたいです。 ※CASEは使わずにお願いします。
oracleの関数で 例）項目 ADATA VARCHAR2(100) このADATAには (1)先頭から数字が8桁で次に文字（スペース含む）が入っているケース (2)先頭から数字が14桁で次に文字（スペース含む）が入っているケース (3)先頭の１バイト目から文字 という３つのパターンがあります。 レコードごとに(1)か(2)か(3)かを判別したいのですが、何かスマートな方法ないでしょうか？ ×１文字ずつ数値かどうか比較し、ループする。 ○先頭から数値が何桁続いているか取得し、(1)８　(2)１４　(3)０みたいに取得できる関数はないでしょうか？ どなたかよい方法ご存知の方、ご教授ください。 以上よろしくお願い致します。
オラクル11g　Bronze DBA を勉強中です。 自宅のPC(Vista Home Premium SP2)にて現在自習中です。 自習のためOracleのインストールを付録のDVDより行いました。 インストールは旨くいったのですが、DB作成時にエラーが発生します。 メモリやディスク領域等は十分あります。 PCがサポート対象外のエディション（VistaはBusiness、EnterpriseおよびUltimateエディションと記載がありました。）です。 なんとか、現在のPC（Vista Home Premium SP2）で試験勉強を出来る環境を 構築したいのですが、良い方法はないのでしょうか？ ご存じの方いらしたらご教授お願いします。
SQL初心者で仕事でSQL文を考えています。 どのようにすればいいのかよくわからないので教えてください。 現在、商品マスタと価格テーブルがあります。 (商品マスタ) 商品コード　商品名 　0001　　　　商品A 　0002　　　　商品B 　0003　　　　商品C 　0004　　　　商品D (価格テーブル) 　商品コード　価格　　登録日 　　0001 　　　100円　　11/1 　　0001 　　　110円　　11/2 0002 200円 11/1 0002 190円 11/2 0001 105円 11/3 それぞれの商品(商品コード)には毎日価格を登録するようになっています。 今日が11/3である場合、商品コード=0001、商品Aは登録がされていますが その他の商品は登録されていない状況です。 碌このような状況で「今日の価格は全商品登録されているか」 ということをSQLでチェックすることはできるのでしょうか。 2回のSQLに分けて個数を比較するが普通ですか。 たとえば、 (1)select count from 商品マスタ (2)select count from 価格 where sysdate = 登録日 (1)-(2)が0でないのですべて登録できていないと判断する。 複雑すぎてよくわかりません。 よろしくおねがいします。
XMLで記述したファイルがあります。これを、バイナリとしてオラクル上のデータベース上のblobカラムに格納（及び格納後、SQLによる読み込み）することは出来ますか？ 背景： あるソフトウェアで、XML形式のファイルをバイナリに変換してデータベース上のblobテーブルに格納しているそうです。この変換作業がこのソフトウェア会社独自のアルゴリズムによる何か特権的なものなのか、それとも何かスタンダードな変換ツールや仕様があってそれを使えばそういうことが出来るものなのかがわかりません。まずは、何もソフトウェアを買わずに単純に個人レベルでそういうことができるのか、出来るのであれば実際にやってみたくて質問致しました。この分野に素人で恐縮ですが宜しくお願いします。
いつもおせわになります 信頼性が高く大手の企業でよく導入されるオラクルですが フリー版、商用利用可の「Oracle Database XE」が存在します しかし、WEB系のアプリケーションを見ると 殆どがMySQLかPostgeSQLを使っていますが なぜ、「Oracle Database XE」を使わないのでしょうか？ 多くの言語、技術を極めたいというような、学者肌の方たちは別ですが 一般的な、アプリケーションを作るというのが目的の人は、 十分動くのにコストをかけて別の技術を覚えたりしないと思うので それが原因なのでしょうか？ もしくは、「Oracle Database XE」には実戦で運用するのは不都合な点があるのでしょうか？ DBに詳しい方、「Oracle Database XE」を使って実際にWEBアプリケーションを運用したことがあるかた、お教え頂けると幸いです。
SQLで3つのテーブルを結合させた上に、データを評価させることは出来ますでしょうか？（SQL９９準拠） イラストのようなテーブル構成になっています。 http://photozou.jp/photo/show/2140834/105850985 GAKUREKIテーブルのG_JISSEKISHUKEIの数とJISSEKIテーブルのS_CODEとS_SHOZOKUのデータをgroup byしてcountした結果を 付きあわせたいと思っています。 通常であれば、GAKUREKIテーブルとJISSEKIテーブルを結合して比較するだけで良いかと思うのですが、 GAKUREKIテーブルのS_SHOZOKUとJISSEKIテーブルのS_SHOZOKUが結びつけることができません。 JISSEKIテーブルのS_SHOZOKUと結びつけることが可能なデータは、SHAINテーブルのS_ICHINENMAESHOZOKUです。 このような結びつけをすることは出来ますでしょうか？ いろいろ試してみたのですが、テーブルを複数くっつけるとエラーになる？のでしょうか・・・？ ちなみにこのイラスト上のデータでデータを評価した場合、 GAKUREKIテーブルのS_CODEが、「1005」、G_JISSEKISHUKEIが「2」にも関わらず、 JISSEKIテーブルのS_CODE「1005」とS_SHOZOKU「ZZZ」のデータをgroup byしてcountした結果が、「1」のため不適切なデータと 言えます。 （※JISSEKIテーブルのS_CODE「1005」とS_SHOZOKU「S02」のデータの場合は問題なし） 複雑条件になってしまいますが、SQL単体で可能でしょうか？ もしくは、何か別ソリューションを用いたほうが良いのでしょうか・・・ 対象DBはOracle１０ｇです。（ちなみに普段はOra使用ですが、評価DBとしてそれぞれ最新版のSQLserver、MySQL、DB2、HiRDBを使ってみています。構文も変わりますか？）
http://okwave.jp/qa/q7096734.html こちらでお世話になり希望していた要件が実現できました。 本当に助かりました。ありがとうございます。 そこでなのですが、この条件で抽出すると私の認識不足で完全なデータが得られない場合が、あることがわかりました。 Aテーブル構成 KY項目１＿＿＿＿＿KY項目２＿＿＿＿＿Int型データ・・・ Bテーブル構成 KY項目１＿＿＿＿＿KY項目２・・・ KY項目２についてですが、A、Bそれぞれのテーブルで同一データが入っていると限らないことがわかりました。（同一データしか無いと思っていました・・・） なので例えばAテーブルに入っているKY項目２がBテーブルKY項目２と同一の場合は教えていただいたように Aテーブル.KEY2=T.KEY2と結べば問題ないのですが、 AテーブルのKY項目２と同一データがBテーブルのKY項目２に存在しない場合、無条件でデータ「XXXXX」と比較するというようにしたいのですが・・・ 条件分岐で調べたところCASE式でも使えばいいかと思ったのですが・・・こういった場合どう記述したらいいのでしょうか？
初心者です。バッチプログラムの単体テストで、異常ケースでエラーを起こさせたいのですが、どのように実行したらいいのかわからず困っています。プログラムの内容は、Aテーブルのデータを全件、同じ構造をしたBテーブルに登録するというものです。ユニークキーのデータを追加して一意制約エラーをおこすにも、そもそもAテーブルにユニークキーのデータを追加して登録することができないと思うのですが、どのようにやるのですか？
SQLで「結果同士」の比較をするにはどのように記述したらいいのでしょうか？ Ora10gです。 例えば、構成としてAテーブルは KY項目１＿＿＿＿＿KY項目２＿＿＿＿＿Int型データ とします Bテーブルも KY項目１＿＿＿＿＿KY項目２・・・ といったデータ構成だとします。 Bテーブルのデータを group by KY項目１, KY項目２でカウントした時の件数とAテーブルのInt型データの数が一致しているか比較したいのですが、どのようなSQLでできますでしょうか？
ＯbjectBrowserやＣSEのようなツールを探しています。 要件としては、 「Ｏracle 10gで動作すること」　です。 ※ＣSEを愛用していたのですが、Ｏracle 10g関連でレジストリが汚れてしまい、テーブル一覧が表示されなくなってしまいました。。 あまり関係ないと思いますが、 ＯSはＸP SP2です。
お世話になります。 Ｏｒａｃｌｅ１１ｇで開発をしています初心者です。 下記の様なＳＱＬ文で、 テーブル内の全データが抽出されないのですが 何故でしょうか。 同じ内容の行が複数あっても、１行しか抽出され ないのです。 本当に初心者の質問で申し訳ございませんが、 ご教示頂きたく宜しくお願い致します。 　　　　　　　　　記 SELECT 登録日時,品番,品名,入庫数,NULL AS 出庫数 FROM T入庫 UNION SELECT 登録日時,品番,品名,NULL AS入庫数,出庫数 FROM T出庫
「総務部.受付ID-1」というフィールドを削除したいと思い以下を実行しました。 alter table VISITOR_SCHDULE drop 総務部.受付ID-1 しかしキーワードがありませんというエラーが表示されてしまいます。 フィールド名に.（ドット）と-（ハイフン）が使用されているからなのでしょうか？ 前任者より引継ぎましたので、なぜこのようなフィールド名にしたかは不明です。
SQLでテーブルのある項目に入っている日付がSYSDATEから数日経過した場合、NULLに変換する処理をしたいのですが・・・ 例えば、SYSDATEが「2011/10/22」だとします。 テーブルの内容が下記のようだとします。 日付 -------------- 2011/12/24 2011/10/22 2011/10/14 2011/09/30 2011/11/11 そして、SYSDATEより７日経過したデータをNULLにする処理を走らせると結果をこうしたいのです。 日付 -------------- 2011/12/24 2011/10/22 2011/11/11 ここまでは、特に難しいことではないのですが、この処理に加えて「土」、「日」を考慮する処理を入れたいのです。 例えば、NULL対象データが土曜だったら９日経過するまで消さない、日曜だったら８日経過するまで消さないような処理にしたいのです。 これを単純なSQL文だけでできないでしょうか？ あと余談ですが・・・例えば企業の休み（お盆、正月、もしくは祝日など）を考慮したい場合、休みのデータを持ったテーブルを作るほうが無難ですか？それともSQL単文でも可能でしょうか？（長い文かつ効率が悪くても・・・）
現在Oracle11g をインストールした状態です。 （学習用に無料のものをダウンロード） SQLPlusを実行しようとしたのですが、 パスワードの入力がうまくできません。 解決方法を知りたいです。 1.ユーザーの入力は可能。 2.パスワードの入力だけなぜかキー入力が表示されない。 　ALT+半/全を押すと入力は出来るが、ENTERを押した瞬間に入力内容が消える。 3.入力が非表示なだけなのかと思い、 　何度かチャレンジしたがパスワードの入力が行われていない。　 試しにコマンドプロンプトでsqlpllus /nologを叩いてみましたが All rights reserved.と表示されているので 動いてはいるようでした。 何が原因なのかさっぱり分からず、 ネット上で色々調べてみましたが 結局わからず途方に暮れています。 どなたかご教授お願いします。
sqlplusにてデータベースにアクセスできません。 どなたか知恵をお貸しください。 環境は、LinuxにOracle10gをインストールしました。 インストールと同時にデータベース(orcl)を作成しました。 インストールしたマシンにて、sqlplusを実行してみようとしているところです。 Oracleのインストール、データベースの作成が終了し、 コマンドラインから"sqlplu /nolog"を実行し、データベースに 接続しようとしましたが、エラーと表示されます。 コマンド、エラーは以下の通りです。 SQL> conn sys/manager as sysdba ERROR ORA-12162: TNS:net service name is incorrectly specified Oracleのインストール、データベースの作成を行った Linuxのユーザは"oracle"です。 この場合、ユーザ名はoracleが正しいのでしょうか？
お世話になります。 Ｏｒａｃｌｅ初心者です。 二つのテーブルから下記の様にデータを抽出 したいのですが、その方法をご教授くださいます様、 宜しくお願い致します。 　　　　　　　　記 テーブル１ 品番　　全長 ａａａ 1111 ｂｂｂ 2222 ｃｃｃ 3333 テーブル２ 品番　　入数 ｂｂｂ 5 ｄｄｄ 6 ｇｇｇ 7 ＳＱＬ結果 品番 全長　　入数 aaa 1111 bbb 2222 5 ccc 3333 ddd 6 ggg 7
お世話になります。 商品マスタと商品カラーマスタと商品サイズマスタがあります。 商品マスタの一覧を出したいのですが、 商品に付随しているカラーやサイズも一緒に表示したいのです。 商品マスタ（商品ID・商品名） 商品カラーマスタ（商品カラーマスタID・商品ID・カラーID） 商品サイズマスタ（商品サイズID・商品ID・サイズID） カラーマスタ（カラーID・カラー名） サイズマスタ（サイズID・サイズ） という構成です。 商品カラー、商品サイズは商品に対して複数あります。 表示したい一覧は 商品ID・商品名・カラー・サイズ で 商品１つに対して１行で表し カラー列、サイズ列は「赤・黒・茶」「S・M・L」というように 書きたいのです。 SQLでズバッと取得する方法はありますか？ １行１行、商品ごとに カラー・サイズをループしなくてはいけないのでしょうか？ 教えてください。 よろしくお願いします。
Oracle Client 11gR2 for HP-UX のインストールについて 以下のサイトの「3.3.1 Oracle Universal Installerの実行」によると、 http://download.oracle.com/docs/cd/E16338_01/install.112/b57780/inst_task.htm#BABGAEIF インターネットに接続できるサーバを使用して、 ./runInstaller -downloadUpdates を実行し、ソフトウェアの最新の更新を動的に取得すると書かれているのですが、 インターネットに接続できる同構成のサーバは用意できないので、他に最新の 更新を取得する方法はないのでしょうか？
お世話になります。 商品マスタがあります。 年・品番・品名のフィールドです。 年が違えば、同じ品番でもデータとしては違うものとして存在します。 2010年の商品マスタをリスト表示したいのですが 2011年にもある品番は省きたいのですが、 どのように書けばいいのでしょうか？ よろしくお願いします。
要領を得ない質問になりますが、よろしくお願いいたします。 尚、『出直して来い』に類する罵倒は甘んじて受けますが、その際にも何等かのご指導を頂ければ幸いです。 ［質問］ 題名にも書きましたが、下に書きました「質問の経緯」から考えて、私はＯｒａｃｌｅマスターのどれを目指せばよいのでしょうか？ 行いたい事を簡単に書けば、『営業部門などからの要求に応じる為に、複数のＤＢにアクセスしてリレーショナルＤＢ構築及び帳票出力』です。 ［私のＤＢに対する現在の能力］ 「ＳＱＬ」や「Ｏｒａｃｌｅ」は触った事が無いので知識レベルはゼロとしてください。 「Access」は「バージョン2003」を使っておりますが、知識レベルは市販されている自習本(富士通オフィース機器)での応用は何とか理解している程度。ＶＢＡは一切勉強しておりません。 ［質問に至る経緯］ 現在、グループ会社内で共通使用している基幹システムはＭｃＦｒａｍｅというパッケージソフトです。 それまではコボル［大半が親会社の担当部署が自社作成したプログラム］で稼動していましたので、コボルを少しかじった程度の私でも初歩的なカスタマイズやホストコンピューターからのデータ取得が行なえましたし、私には対処できない物は親会社の担当部署の人間がプログラムを作ってくれたり、抽出データを自動送信してもらっておりました。 しかしＭｃＦｒａｍｅに切り替わってからは、任意のデータ抽出やプログラムのカスタマイズが自由に行えません［私だけではなく、親会社の担当部署も］。 その理由を親会社の担当部署に問合せた所『色々とあるが、これはＯｒａｃｌｅで作られているので、最低限でも公式資格を取得しないとアクセス権の付与候補者にすることも出来ない。何か変更する度に百万円前後の費用が発生するから我慢して』との返事が返ってきました。 そこで『Ｏｒａｃｌｅマスターを取得すれば、ＤＢへのアクセスは認めてくれますね』と再質問を行い、承諾を取りました。 しかし『ところで、Ｏｒａｃｌｅマスターには色々有るけれど、どれを取ればいいのですか』と聞いても言葉を濁すだけで『ゴールドですかね』としか返事が返ってきませんでした。 Ｏｒａｃｌｅのバージョンも判りません。
仕入明細テーブル 伝票NO　　　インデックス番号　　　部数 出費詳細テーブル 伝票ＮＯ　　出費先　　出費額 以上のデータがあります。 仕入明細テーブルでインデックス番号でグルーピング化して部数の合計値が2000以上のインデックス番号と同じ値の出費詳細テーブルの伝票ＮＯのレコードを削除しなさい。 delete 出費詳細 where 伝票ＮＯ　in (select インデックス番号, sum(部数)　from 仕入明細 　　　　　　　　　　　　group by インデックス番号 　　　　　　　　　　　　having sum(部数) >= 100); これだと出来ませんよね？ sum(部数)が100以上のものを抽出するためにはselectでsum(部数)としなくてはいけないのですが これだとダメですよね？伝票ＮＯと同じか比較するのインデックス番号なので、selectでsum(部数)としないのは可能でしょうか？
毎々お世話になっております。 一時表領域が肥大化してきたため、オンラインで縮小処理をしました。 http://www.roy.hi-ho.ne.jp/montague/lilical-oracle.html TEMP01を使用していたため、TEMP02を作成しTEMP01をオフラインにしました。 そしてdropしようとすると失敗しました。エラーが出たらしいのですが、後輩が消してしまったため わかりません。またTEMP01の物理ファイルも削除してしまったようです。 今の一時表領域をみるとTEMP02がオンラインになっていました。正常に使用もされていましたが、 TEMP01が中途半端に残っています。TEMP01もオンラインになっていますが、サイズは0MBとなっています。TEMP01をオフラインにするSQLを入力するとオフラインになりましたというメッセージが出ます。しかしDROPしようとすると、使用できない旨のエラーがでます。 解決方法が分からなくて困っています。 バックアップファイルもないため困っています。 このような状況になった方はおられますでしょうか？お手数ですがご教授ください。
Oracle11gのlistener.logについて教えてください。 ＃少し急いでおります、至急回答いただけると幸いです。 Windows2003Server ＋ Oracle11gの環境でシステム稼働中なのですが、 tnslsnr\[ホスト名]\listener\trace\listener.logが 1.5GBになってしまっているので、これを削除したいです。 11gのリスナーロギングの仕組みとして、 \tnslsnr\[ホスト名]\listener\alert\log.xml にログ出力すると同時に、 tnslsnr\[ホスト名]\listener\trace\listener.log にも出力されるということを聞きました。 log.xmlは触らず、listener.logだけ削除してしまっても 問題ないでしょうか？ log.xmlとlistener.logが互いに関連を持っていて、 同期が取れていないと、リスナーサービスに何か問題がでるのでは？ と懸念しています。 調べたところ、 10g以前ではいったんリスナーサービスを停止し、 listener.logのローテートをする記事は見たのですが、 11gから仕組みが変わっているらしく、 同じやり方で良いのか気になり質問させて頂きました。 初歩的な質問かもしれませんが、 よろしくお願いします。
今までPostgreSQLを使用しており、遠隔地に設置してあるデータベースの操作はブラウザ上からphpPgAdminを使用しておりました(例：レンタルサーバーなど)。 このたびOracleを使用するに当たり、同様の事を行いたいと思いましたが、phpPgAdminに相当するツールにどのような物があるかわからなかったため、アドバイスいただける方がいらっしゃいましたら、ご教示の程よろしくお願いします。 以上、よろしくお願いします。
HP-UXにOracle11gRAC R2をインストールして、非同期入出力の検証を行おうと考えています。 http://download.oracle.com/docs/cd/E16338_01/server.112/b56317/appb_hpux.htm 上記のマニュアルを読むと以下のように書かれています。 1, HP-UX tuscユーティリティを、前述の手順のGlancePlusで選択したものと同じOracleパラレル問合せスレーブにアタッチします。 ↑ これはわかりました。 2, 使用している環境で入出力バウンド問合せを実行します。 ↑ さっぱりわかりません。 マニュアルには入出力バウンド問合せの具体的なやり方について書いておらず、 入出力バウンド問合せが何かも書いていません。 どなたか入出力バウンド問合せの意味や具体的なやり方などをご教示いただけないでしょうか。
カーナビのインチ計算について質問です。 今、僕は７インチのカーナビを使ってます。 それで７インチ縦横のセンチ メートルを教えてください
Oracleで日付の計算をさせたいのですが・・・ 例えば、DBに入っているデータの日付の1か月後を抽出したいとします。 DBの中に入っているデータが、「2011/01/31」だったとします。 関数を使って1か月後を計算すると「2011/02/28」になるかと思います。 欲しいデータはこのような形ではなく“1か月後の日付が無かったら後ろ倒し”させたいのです。 上記の例で言えば「2011/01/31」の1か月後は「2011/03/01」としたいのです。 こういうのをやりたかったらプロシージャを組まなくてはいけないのでしょうか？ 出来ればバッチファイルの中で実現したいのですが・・・
お世話になります。 Oracle初心者です。 delete文の条件で他テーブルの列の値（列名は両方テーブルとも同じ） と同じ所の行を削除したいと思っているのですが、 コンパイルエラーになります。 基本的な書き方が悪いのでしょうか。 どなたかご親切な方、御教示頂きたく宜しくお願い致します。 　　　　　　　記 delete from ( select 受注NO from T受注明細 where T受注明細.受注NO = D売上.受注NO)
お世話になります。 下記ご存知の方いましたら、ご回答お願いします。 現在、既存でOracle10gをしたC/Sのシステムが稼動しています。 各クライアントには10gのOracleClientがインストールされています。 事情によりサーバーの変更が必要になりOracleのバージョンを11gにあげることになりました。 その際、各クライアントも11gをインストールする必要がありますでしょうか？ クライアントの台数は100台以上あるため、インストール不要であれば10gのままで いきたいと思うのですが、それによる弊害などがあるのなら、クライアント側も 全て再インストールをしなければ、と思います。 お手数ですが、ご教授願います。
ストアド、ファンクション、viewをあるスキーマ丸ごとエクスポートするのを バッチで（手順化）したいのですが、どのようにすれば可能でしょうか。 テーブルはエクスポートしたくないです。 現在方法がわからないのでobject browserでそれぞれのスクリプトを 指定してエクスポートしています。 どなたか教えていただけないでしょうか。 よろしくお願い致します。
Oracleのプロシージャについて教えてください。 現在、Aテーブル（カラム１、カラム２、カラム３、カラム４）：件数40万件 　　　　Bテーブル（カラムA、カラムB、カラムC）：件数50件 と言うテーブルがあります。 この中でデータ置換を行う必要があり、 Aテーブルのカラム２とBテーブルのカラムBが一致したらAテーブルの カラム３にBテーブルのカラムCで更新するプロシージャを作成しています。 通常のUpdate文で３０００件単位でCommitを切るようにしていますが時間がかかります。 皆さんはこういう場合どういう手法でやられていますか？ ご教授ください。 ちなみに、 サーバOS：Windows2008SERVER クライアントOS：Windows7 Oracle11 です。
oracleの初歩的な質問になって申し訳ないのですが教えてください。 以下の(1)～(4)の手順を実行したところ私が予定していた出力結果が表示されませんでした。 (1)DBインストール→インスタンス作成 (2)テーブルの作成 create table test1(line1 varchar2(10),line2 varchar2(10),line number); (3)データの挿入 　insert into test1 values('01','鈴木',40); (4)データの確認 select * from test1; (4)で確認したところ、line2が??????になっていました。想定では「鈴木」となるはずでした。 文字コードに問題があると思うのですが、対処方法がわかりません。 line2に入力した値が入れた値が見れるようにするには何を、どのように修正すればよいのか教えてください。 ※補足 使っている環境はUTF-8です。 ログインシェルには特に文字コードを何も設定していません。 ■show parameterコマンドの確認結果 nls_language string AMERICAN nls_territory string AMERICA
以下のＳＱＬをシンプルに一つにしたいのですが、どのように書いたらよろしいでしょうか？ どうぞご返答頂けますようお願い申し上げます。 --test1_tblの抽出 select a1 as a1, b1 as b1 from a_tbl where c=1 --test2_tblの抽出 select a1 as a1, e1 as e1 from b_tbl where rowid in (select min(rowid) from ee group by a1) and a1 is not null and a1 !=' ' order by a1 --test1_tblとtest2tblの結合 select t0.a1 as a1, t0.b1 as b1, t1.e1 as e1 FROM test1_tbl t0, test2_tbl t1 WHERE (t0.a1 = t1.a1)
下記のようなSQLがあるとき、最も検索結果が多くなる●（抽出条件）を 取得したいのですが、わかるかたいらっしゃいますか。 （●画面から入力される抽出条件。） select * from A where A.a1 like '●%' or A.b1 like '●%' 質問が簡易ですみませんが、よろしくお願いします。
oracleデータベースの更新履歴が分かる方法について。 8ｉや9ｉで、ある指定したDBにいつアクセス（更新）されたか分かる方法はありますか？その手順含め教えてください。
あるカラムに同じ値を持つレコードの2件目以降を削除するSQLを教えて下さい。 例） テーブル名：T キーカラム名：K 同じ値を持つかチェックするカラム名：S SELECT K,S FROM T; K S ---- 1 a 2 b 3 b 4 c 5 d 6 e 7 e 上記の場合、K=2または3と、K=6または7の２レコードを削除したい。
テーブル＝T） KEY DATA 001　あ 002　い 003　う 004　え 005　お SQL） SELECT DATA FROM T WHERE KEY = 003 ; 上記のSQLでは、「う」のデータしか取得できませんが、 「003」の前後１件、合計３件の「い」「う」「え」を取得する方法を教えて下さい。 ちなみに、 SELECT DATA FROM T WHERE KEY >= 003 AND ROWNUM <= 2 と SELECT * FROM （ SELECT DATA FROM T WHERE KEY < 003 ORDER BY KEY DESC ） WHERE ROWNUM < 1 のUNIONでは上手く行きませんでした。 よろしくお願いします。
Oracleマスターを受験するため、dbcaやemを実際に動かしたいのですが、otnからOracleのトライアル版のリンクが消えてるようです。 規約等調べてみると、学習目的なら普通に使ってもよさそうな気がしますが、ちょっと自信がないので手をこまねいています。 代替案等あれば、教えてください。 ちなみに環境は、mac book air。lionです。virtual boxで、Linuxのトライアル版を使うつもりでした。
以下のSQLの作成で悩んでいます。 【内容】 抽出元テーブルの中で、あるコードが同じデータは、 ある項目を全て同じ値にして取得したい。 （例） ■抽出元テーブル コード SEQ FLG 　1　　　　1　　　1 　1　　　　2　　 　1　　　　3　　 　2　　　　1　　　0 　2　　　　2 　2　　　　3 　3　　　　1　　　1 コードは同じ物が１つ又は複数あります。 コードが同じ物にはSEQで番号が連番されます。 FLGの項目がありますが、SEQ=1のデータしか設定されていません。 ■求めたい結果 コード SEQ FLG 　1　　　　1　　　1 　1　　　　2　　　1　　 　1　　　　3　　　1 　2　　　　1　　　0 　2　　　　2　　　0 　2　　　　3　　　0 　3　　　　1　　　1 全てのデータでFLGを求めて取得します。 取得の仕方はコードが同じでSEQ=1の値を取ります。 抽出元テーブルと結果のデータ件数は同じになります。 抽出元テーブルと結果の違いは、FLGに値が埋まっているかどうかの違いのみです。 このテーブルのFLGはUPDATEする事は出来ません。 別表なども利用しないで、 selectのSQL文だけで対応したいです。 どのような方法で対応できるでしょうか？ オラクルのバージョンは10gです。 よろしくお願い致します。
親子のデータを展開したVIEWを作成したいのですが、調べてみると 階層問い合わせというものがあるということまで分かりました。 （階層問い合わせ自体よく分かっていません） その内容でSQLを以下のように記述してみたのですが、どうも思惑と 若干違います。思惑は親コードは最上位のものを出して、そこに子供で ぶらさがっているKOCDを全部羅列したいのです。 どのようなSQLにすれば可能でしょうか。ご教授のほど、お願い致します。 記述したSQL SELECT OYACD,KOCD FROM TBL1 START WITH OYACD = 0 CONNECT BY PRIOR KOCD = OYACD TBL1の内容 OYACD KOCD -------------- 1000110002 1000110003 1000120001 2000120002 2000120003 010001　親＝0が最上位の親 SQLの結果 OYACD KOCD -------------- 010001　　 1000110002 1000110003 1000120001 2000120002　　ここと 2000120003　　ここのOYACD　現在はひとつ上の親が出ている このSQLの結果のOYACDで20001が最上位のOYACDの10001として 見えるようなSQLにしたいのですが、どうすれば可能でしょうか。 このように見えて欲しい OYACD KOCD -------------- 010001　　 1000110002 1000110003 1000120001 1000120002　　ここと 1000120003　　ここを最上位の親を表示したい。
テーブル更新中にDBMS_STATSは実行できるのでしょうか。
Ｏｒａｃｌｅ１１ｇをＬｏｃａｌ上とＶＭ１、ＶＭ２に構築（内容は同じ）（Ｗｉｎｄｏｗｓ７） 同じアプリをＬｏｃａｌ（ＬｏｃａｌのＯｒａｃｌｅ）、ＶＭ１（ＶＭ１のＯｒａｃｌｅ）、ＶＭ２（ＶＭ２のＯｒａｃｌｅ）で実行 ＶＭ１上のみアプリ（ＭＦＣ）がメモリリーク発生 ＬｏｃａｌのアプリをＶＭ１のＯｒａｃｌｅに接続→アプリのメモリリーク発生 ＶＭ２のアプリをＶＭ１のＯｒａｃｌｅに接続→アプリのメモリリーク発生 アプリ（ＭＦＣ）自体はセレクト文の連続実行程度でＶＭ１のみリークが発生します。 Ｗｉｎｄｏｗｓのパッチ適応は同じ アラートログ、リスナーログにエラー表示等はありません ＶＭ１のＯｒａｃｌｅの使用メモリは400Ｍ程度です 再起動をしてみたり、表領域を大きくしてみましたが発生します。 他にどんな所を調べみたらいいかアドバイスをお願いします。
AccessをフロントエンドとしてOracleに接続をしたいのですが・・・InstantClientを使って接続するときの設定は？ クライアントをダウンロードしてきてtnsnames.oraの設定までしてあります。 ここまでやってあるのですがOracleに接続する手段がこの先どうしたらいいかわかりません。 会社の先輩にこのMDBあげるからつないどきなーと渡されましたが↓ どうしたらいいかよくわからないので教えてください。 このほかに設定する必要ってありましたでしょうか？
以前に「Oracle9iデータベースのサーバ間移行について」とのことを質問させていただきましたが、 その続きになるかと思います。 Oracle9i(9.2.0.1.0)のデータベースからコールドバックアップにて取得したファイルを他のサーバへ移動するときに移動元のOSが「Windows2003Server 32bit」、移動先OSが「Windows 2003 Server 64bit」となるのですが、なにか問題があるのでしょうか？ マスターの方々、ご教授お願いします。
現在使用しているサーバが古くなった為、新しいサーバを購入しそちらにデータベースの移行を考えております。 そこで、できるだけシンプルに以前の環境を変えずにサーバ間の移行を行いたいのですが、どのような方法がいいでしょうか？ 最初は、エクスポートインポートで行おうとしたのですが、データのみ移動だとチューニングを行った内容まで移行できなそうなので、データと現在の設定まで移行できる方法を探しております。 コールドバックアップというのがあるようなのですが、当方初心者のためいまいちわかりませんでした。 現環境と新環境ともにOS、Oracleのバージョンは同じです。 オラクルスペシャリストの方々ご教授お願いします。 環境 OS：Windows2003Server Oracle：9i (9.2.0.1.0)
OracleのSQLにおいて、 日付の値を指定した文字だけ切り出して取得する方法がわかりません。 例えば、日付型の"9999/01/15"という値から "9999/01/"という値だけ切り出すことは可能でしょうか？ 基本的な質問で申し訳ございませんが、 どなたかご教授いただけませんでしょうか？ よろしくお願いいたします。
テーブルＡ 　伝票No. 　発送日 　到着日（6桁） テーブルＢ 　伝票No. 　送り先 　到着日（４桁） というテーブルがあるとします。 伝票No.が同じデータで、かつ、発送日がシステム日付の場合に ２つのテーブルの到着日を翌日にするには どのようなＳＱＬ文を書けばいいのでしょうか？ よろしくお願いいたします。
お世話になります。 以下のようにOracleにてストアドプロシージャを作成して、 それをＡｃｃｅｓｓからコールしております。 そしてそのDBMS_OUTPUTの結果をファイル出力したいのですが、 試しに「sqlstmt = "BEGIN proc_SeikyuMeisai(:yyyymm); END;"」の部分を 「sqlstmt = "spool aaa.csv BEGIN proc_SeikyuMeisai(:yyyymm); END; spool off"」 や、ストアド側でspoolしてみましたがダメでした。 UTL_FILEを使うしかないのでしょうか？ ご存じの方おられたらご教示いただけますでしょうか？ 宜しくお願い致します。 【Access2003側】 ' セッションの作成 Set OraSession = CreateObject("OracleInProcServer.XOraSession") 'データベースへの接続 Set OraDatabase = OraSession.OpenDatabase("Hoge", "hoge/hoge", ORADB_DEFAULT) '■ ストアド実行 ■ sqlstmt = "BEGIN proc_SeikyuMeisai(:yyyymm); END;" 'バインド変数の設定 OraDatabase.Parameters.Add "yyyymm", 0, ORAPARM_INPUT OraDatabase.Parameters("yyyymm").serverType = ORATYPE_NUMBER '引数設定 OraDatabase.Parameters("yyyymm").value = Forms!F月次データ取込.txt日付1 'SQL文の実行 OraDatabase.ExecuteSQL sqlstmt DoCmd.Hourglass False '砂時計 'バインド変数の削除 OraDatabase.Parameters.Remove "yyyymm" '■ORACLEへの切断■ OraDatabase.Close 'オブジェクトの破棄 Set OraDatabase = Nothing Set OraSession = Nothing MsgBox "正常に出力されました。" 【Oracle10g】 Create or replace procedure Proc_SeikyuMeisai ( P1_YYYYMM IN number ) IS WK_KANID varchar2(10); WK_CODE varchar2(6); WK_SUU varchar2(12); WK_TEN varchar2(9); WK_KAI varchar2(2); -- カーソルタイプの定義 TYPE typeMyCursor IS REF CURSOR; -- カーソル変数の定義 curSeikyutypeMyCursor; curID varchar2(10); curMAX number; curMEISAI varchar2(1000); curTEN number; curKAI number; vSql varchar2(1000); BEGIN vSql := 'select KANNO, MEISAI_MAX, _MEISAI, HOU_TENSUU_KEI, TOTAL_KAISUU from SEIKYUUMEISAI' || P1_YYYYMM; -- カーソルオープン open curSeikyu for vSql; loop fetch curSeikyu into curID, curMAX, curMEISAI, curTEN, curKAI; exit when curSeikyu%NOTFOUND; WK_KANID := curID; for nLpCnt IN 1..curMAX loop WK_CODE := substrb(curMEISAI, 3, 6); WK_SUU := substrb(curMEISAI, 34, 12); WK_TEN := substrb(curMEISAI, 89, 9); WK_KAI := lpad(curKAI, 2, 0); dbms_output.put_line(WK_KANID || ',' || WK_CODE || ',' || WK_SUU || ',' || WK_TEN || ',' || WK_KAI); end loop; end loop; end; /
SQLで以下のようなレコードを引くことは出来るでしょうか。 オラクル９です。 フィールド１　　フィールド2　　フィールド3　　フィールド4　　5...　（1～4でキー） A　　あ　　１　　2011/01/01　　... A　　い　　１　　2011/01/01　　... 以上のように、複数のキーの中でひとつだけ違うレコードを出すSQLはどう組めばよいでしょうか。 「あ」と「い」両方出したいのと、「う」があっても「あ」と「い」に限定できれば最高です。 よろしくお願い致します。
オラクルマスターの受験を画策中ですが、履修コース（講習）について気になることがある為、質問させていただきます。 履修コース（講習）の講習期間は３日間程度と知りましたが、調べていくうちに講習期間中は１日中拘束での講習のようにみえます。仕事を休まず、履修コース（講習）を受ける方法はないものでしょうか。 何か平日の夜に履修コース（講習）を受講する方法をご存知であればご教授願います。 ちなみに私の状況は」以下の通りです。 勤務形態：客先常駐 勤務地区：東海地方 会社補助なしで個人受験で行うことを予定 以上よろしくお願いします
半角数字ってどうやってだすんですか
Oracle上の2つのテーブルからの条件でマッチする件数をSQLで作成しています。 内容としては、テーブルAの区分＝1　かつ　テーブルBの種別がスペースの件数です。 テーブルAの該当するデータは10件中3件、テーブルBの該当するデータは50件中15件で、本来両方がマッチするのは2件です。 SELECT COUNT(*) FROM テーブルA,テーブルB WHERE テーブルA.区分 = '1' AND テーブルB.種別 = ' ' ; 上記のSQL文で件数をカウントしたのですが、どうも結果では30件とカウントされてしまいます。 なんとか2件として結果を出したく、参考資料を調べているところなのですが、今のところ参考になる文献が見つからず悩んでます。もし簡単にカウントできるSQLがあったり、分かる方がいれば手助けして頂きたいと思い、今回投稿しますのでご教授賜りたく思います。よろしくお願いします。
ORACLE10g　EXISTS文について質問があります。 まず次のようなTBLが存在します。 休業MT 店舗CD | 休業区分 |　 開始日 　| 　終了日　| AAA　　　　　09　　　　 20110311　　20110311 AAA　　　　　09　　　　 20110313　　20110325 AAA　　　　　03　　　　 20110330　　20110330 月売上TR 店舗CD | 　年月　　|　 客数 　| 　売上数　|　稼動タイプ AAA　　　　201103　　　100　　　　　300　　　　特殊 AAA　　　　201104　　　200　　　　　400　　　　フル 月売上TRの稼動タイプの判別を行う場合 以下の条件があります。 ・休業MTに同月、同店舗のレコードが存在しない場合にフルを適用 ・休業MTの休業区分 = 09 且つ その休業日合計が同月内で7日以内場合に稼動タイプにフルを適用。 ・休業MTの休業区分 = 03 である限り、同月に何回休業してもフルを適用 上記の条件をCASE文ですべて実現しようしたとき、 2番目の条件の休業日合計が7以下のものをうまく抽出できません。 CASE文やEXISTS文で集計項目に対して条件をつけることは可能でしょうか? できれば、サンプルSQLを教えていただきたいです。 よろしくお願いします。
“SQL文を作るSQL”の書き方ってあるのでしょうか？ 例えばなのですが、表同士を大量に結合して条件に当てはまったものをアップデートするようなSQLを書く場合、文法を間違うとエライこちゃ！になる場合がありますよね。 そういう場合って結合するんじゃなくて結合したSELECT文を使って条件だしをして1件1件単純アップデートをした方が安心ですよね。 （定期処理であれば効率が悪いですが・・・だったらプロシージャですか・・・というところになりますがごくたまにや1回きりのデータ変更など） そういったことをやるほうほうはありますでしょうか？ 仕様はSQL99です。
手元にOracleが入ったサーバーがあったのですが、故障して動かなくなってしまいました。なんとかオラクルのフォルダは取り出すことが出来ました。データを復元したいと思っております。 フォルダの中身を見たところ、「XXXXX.ora」や「XXXXX.dbf」というファイルが残っておりました。 最終的にはCSVなどに戻したいところですが、まずはOracleに取り込みたいと思っております。ちなみに元のテーブル名、構成などは不明です。 Oracleは11ｇです。 インポートする方法や中身を表示させる方法などがあればお教え頂ければと思います。
お世話になります。 LONG型のカラムに長い文字列がセットされてるのですが、その文字列の中からある特定の文字列を別の文字に置換したいのです。 SELECT ～ REPLACEを使おうと思ったのですが、LONG型では使えないらしく、PLSQLにて以下のように作成しました。 DECLARE CURSOR CURSOR1 IS SELECT * FROM T_テーブル; HIGH_VALUE_WORK VARCHAR2(32760); BEGIN FOR REC_CURSOR1 IN CURSOR1 LOOP HIGH_VALUE_WORK := REC_CURSOR1.カラム; HIGH_VALUE_WORK := REPLACE(HIGH_VALUE_WORK, 'あああ', '　　　'); REC_CURSOR1.カラム := HIGH_VALUE_WORK; END LOOP; END; / しかしテーブルを確認しても変更されてませんでした。 更新直後に試しにセレクトかけてDBMS_OUTPUTすると正しく更新されてました。 Oracleは10gR2です。 ご存知の方どうかよろしくお願いします。
社会人を初めて日が浅い者です。 先日、会社からオラクルマスターブロンズを受験するように言われ、試験で見事玉砕しました。 データベースという単語を知ったのは、試験を受ける5日前でした。 受験したのはDBAとSQLともに11gで、同時に受験しました。 黒本を買って受験日までに2周読み、なんとか知識をつけていきました。 しかし、本試験は初めて聞く単語や構文がたくさん出題され、どうにもお手上げ状態でした。 試験結果は会社の配属に関わるそうです。 そこで質問です。 １．オラクルマスターブロンズは短期間集中的に勉強すれば合格する資格なのか。 ２．合格するためには、どの程度の知識を身につけなければならないのか。 （３．会社の意図は何か・・・） ３．はスルーして頂いてもかまいません。 よろしくお願い致します。
LinuxOS上（CentOS 5.6）上でOracleの11gR1を使っています。 データベースにアクセスする際にSQLPLUSを使っているのですが、テーブル表示の際にコラムのタイトルが表示されなくなってしまいます。 例： 11:07:07 ORACLE > SHOW HEADING heading ON 11:07:16 ORACLE > SELECT * FROM EXAMPLE; 1||ONE　　　　　　　　　　　　　　　　　　　　　　　←　コラムのタイトルが表示されない 2||TWO 3||THREE ※ORCLE_HOME/sqlplus/admin/login.sqlにてそれぞれTIMEをON,　PROMPTを” ORACLE > ”、セパレーターを”||”に変更してあります。 またsqlplus -R 3 （ファイルシステムの変更を禁止するレベル）で入り、パラメーター関連を読み込まない状態では、 SQL> select * from example; COLUMN_01 COLUMN_02 ---------- ---------- 1 ONE 2 TWO 3 THREE SQL> show heading heading ON とちゃんと表示されます。 インターネットをいろいろ調べていてもHEADINGのパラメーターをONにするぐらいしか見つからず、途方にくれております。 実務に致命的な支障はないのですが、「このテーブルなんだったっけな」と確認したい時にわざわざ「DESC」コマンドを打たなくてはなりません。 是非タイトルを表示できるようにできないでしょうか。 おわかりになる方、同じことを経験された方、どうぞよろしくお願い致します。
Oracle11gを使用しています。以下のような３つのテーブルがあります。 （１）駅マスタテーブル create table tbl_station ( ID NUMBER PRIMARY KEY, Name varchar2(32), ); （２）レストランマスタテーブル create table tbl_restaurant ( ID NUMBER PRIMARY KEY, Name varchar2(32), ZipCode varchar2(8), Prefecture varchar2(32), City varchar2(32), StreetAddress varchar2(64), PhoneNumber varchar2(20), NearestStation NUMBER, constraint fk1_tbl_restaurant foreign key (NearestStation) references tbl_station(ID) ); （３）評価トランザクションテーブル create table tbl_gradings ( RestaurantID NUMBER, UserID varchar2(255), Gradings NUMBER, Primary Key (RestaurantID, UserID), constraint fk1_tbl_gradings foreign key (RestaurantID) references tbl_restaurant(ID), constraint fk2_tbl_gradings foreign key (UserID) references EXTERNALUSERTBL(EXTERNALTBLUSERID) ); 以下のようにデータを入力してみました。 （１）駅マスタテーブル ID, Name 1, 新宿 2, 渋谷 3, 銀座 （２）レストランマスタテーブル ID, Name, ZipCode, Prefecture, City, StreetAddress, PhoneNumber, NearestStation 1, レストラン1, 100-1000, 東京都, 新宿区, 西新宿1-1-1, 03-1111-1111, 1 2, レストラン2, 300-3000, 東京都, 中央区, 銀座1-1-1, 03-3333-3333, 3 3, レストラン3, 100-1001, 東京都, 新宿区, 東新宿1-1-1, 03-1111-2222, 1 4, レストラン4, 200-2000, 東京都, 渋谷区, 渋谷1-1-1, 03-2222-2222, 2 （３）評価トランザクションテーブル RestaurantID, UserID, Gradings 1, User1, 5 1, User2, 3 2, User1, 5 このような場合に、以下のようなデータを出力するクエリを書きたいのですが、書き方がわかりません。 内容：全てのレストラン情報を評価の平均値とともに重複なく表示。 出力イメージは以下のようなものです。 ID, レストラン名, 郵便番号, 都道府県, 市区町村, 町名番地, 電話番号, 最寄駅, 平均評価 1, レストラン1, 100-1000, 東京都, 新宿区, 西新宿1-1-1, 03-1111-1111, 新宿, 4 2, レストラン2, 300-3000, 東京都, 中央区, 銀座1-1-1, 03-3333-3333, 銀座, 5 3, レストラン3, 100-1001, 東京都, 新宿区, 東新宿1-1-1, 03-1111-2222, 新宿 4, レストラン4, 200-2000, 東京都, 渋谷区, 渋谷1-1-1, 03-2222-2222, 渋谷 最寄駅名、評価を出力することから３テーブル全てを結合し、さらにAVG関数を使って平均の評価値をレストラン毎に計算する必要があり、僕には難しいです。。おわかりの方、宜しくお願いします。
いま、同一商品番号の最新日付を利用した条件が うまく作れず悩みながら色々試していますが、 うまくいきません。 やりたいことは、 1，AテーブルとBテーブルの 商品番号が同じ場合は除外します。 2，残されたデータから次はCテーブルの中にある 同一商品番号で、最新の日付が当月の場合はデータを残す。 つまり、前月以前のデータは除外となります。 1まではできています。 Select ＊ from aテーブル where not exists (select 'X' from bテーブル where a.商品番号 = b.商品番号) この先上記sqlにつなげてmax関数くくった最新日付と システム日付を年月のみで比較する等試みましたが、 求めた結果になりません。 上記sqlでビューを作成してといったことは、 今回やらずに一つのsqlのみでできないかと 試行錯誤です。 よきアドバイスございましたら、 宜しくお願い致します。
簡単なアプリケーションを作ろうとしています。内容は、レストランのデータベースです。画面には、単純にレストラン名、住所、電話番号、営業時間、評価を表示させたいです。この「評価」は、このアプリケーションを使用する３人のユーザが入力する１～５の値の平均値としたいです（ユーザはメンテナンス画面から１レストランにつき１回まで評価値入力可能）。つまりユーザAが４、ユーザBが５、ユーザCが１を入力した場合、4+5+1/3=3.3を表示します。テーブルを設計した経験がないので教えてほしいのですが、この場合、どのようなテーブルを作れば最もシンプルできれいに出来るのでしょうか。まずレストランテーブルを作成する必要があると思いますが、「評価」があるために１テーブルでは不足だと思います。評価カラムの値はユーザが値を入力すれば変動することになるので、別テーブルを参照させるようにすべきなのでしょうか？評価テーブルというものを考えてみましたが、ユーザ名とレストランIDの複合をプライマリキーとし、評価値カラムをもたせるとしても、どこに平均値を持たせればいいのかわかりません。テーブル設計の模範例を教えて頂けると助かります。宜しくお願いします。
お世話になっております。 SQLでの質問です。 --テーブル---------- F_1F_2 AAABBB AAACCC BBBXXX CCCDDD DDDYYY １．F_1のAAAを条件にF_2のBBB・CCCを取得し、 F_1のBBB・CCCと、F_2のXXXとDDDを取得します。 ２．次に、取得したF_2のXXX・DDDを条件に、F_1のDDD、F_2のYYYを取得します。 これを1つのSQLで実行したいのですが、副問合せを駆使しても、良いSQLが思い浮かびません。 有識者の方、ご享受頂きたいです。 宜しくお願い致します。
今度大学でSQLまたはOracleどちらかの授業、そしてVBの授業を必修でとらなければいけません。が、頭が良いとは言えない私ですのでプログラミング言語やデータベース言語等のコンピューター系言語が関わるシステム系のことは先ほど少し調べてみましたが、さっぱり理解できません。 SQLとOracle、どちらが比較的易しいでしょうか？ クラスネームが[Introduction to SQL][Introduction to Oracle]でしたので、恐らくそんな深く突っ込んだところまではやらない・・・と思いたいです。ですがデザインはすこしぐらいはやるみたいです。VBは[VB 1]です。 大学がアメリカの大学ですので、日本語でも何やらわからないものを英語で・・・となると大きな不安が付きまとうのです。（言語自体はアルファベットですが、説明が・・・） また、SQL（Oracle）とVB、どちらを先に履修すればもう片方が理解しやすいよー。などは無いでしょうか？それとも全く別物だからどっちを先に履修しても違いはない、ということでしょうか？ やるとなれば日本語のサイトを使いながら必死こいてやります。皆さま少しだけアドバイスをください。
はじめましてよろしくお願いします。 ORACLE10gを使用してMARGE文を作成しています。 そこで質問なのですが、下記はサイトで拾ったサンプル文なのですがUSING～で使用している セレクト対象となるUSER_MASTER_IMPORTの変わりにサブクエリを使用したい場合はどうすればよいでしょうか? MARGEしたいサブクエリのVIEWを作成すればよいのでしょうか? <SAMPLE> MERGE INTO USER_MASTER USING USER_MASTER_IMPORT ON ( USER_MASTER.USER_ID = USER_MASTER_IMPORT.USER_ID) -- 既存レコードの更新 WHEN MATCHED THEN UPDATE SET USER_NAME = USER_MASTER_IMPORT.USER_NAME, DEPT_NO = USER_MASTER_IMPORT.DEPT_NO, MODIFIED_ON = SYSDATE -- 新規レコードの作成 WHEN NOT MATCHED THEN INSERT ( USER_ID, USER_NAME, DEPT_NO ) VALUES ( USER_MASTER_IMPORT.USER_ID, USER_MASTER_IMPORT.USER_NAME || '(新人)', USER_MASTER_IMPORT.DEPT_NO ) 識者の方がいればご教示いただきたく存じます。 よろしくお願いいたします。
全く違うサーバに載っているDBのデータ同士を結合するいい手段はないでしょうか？ DBは両者ともOracleですが9と10という違いがあります。 SERVER１に載っているDBは商品管理のためのものです。主キーは「品ID」です。 SVR２に載っているDBは、保証期間の管理をするためのものです。主キーは「品ID＆メーカーID」です。 唯一データのつながりを作れそうなのは両者の主キーのみです。 あとのデータには何にもつながりはありません。 どちらかのサーバに片方のDBのテーブルを作るとかビューを作ればいいかと思いましたが、その方法についてはNGとされています。 （とりあえずその方法でやる場合できますでしょうか？？？） DBに何かを作ることなくデータの結合をさせれないでしょうか？ SQLplusなりSQLクリエイトツールなりどんな方法でもDB自体汚さない限り問題はありません。
PL/SQLを使用して、条件に合致するレコードのみをアップデートしようとした場合 この条件が他のテーブルを参照しなければいけない時どのようなロジックで実現できるでしょうか? 例えば下記のようなアップデート対象テーブルがあります。 トランT 取引先｜　年月　｜店舗区分１　｜売上 　AAA　　 201105　　 　　１　　　　　10000 マスタT 取引先｜　開始日　｜　終了日 　AAA　　 20100501　　20110608 トランTは月別店舗別の売上を管理しているテーブルで マスタTは店舗の休業日数を管理いているマスタテーブルになります。 更新を行いたいのはトランTのフィールド「店舗区分１」でその条件は 前年同月に休業日が発生している店舗の「店舗区分１」を'2'に変更したい場合どのようにすれば これを実現できるでしょうか? やり方は複数あると思うのですがPL/SQLで実現できればと思っています。 しかし、PL/SQL初心者の為これに必要なコマンドや関数などがわかりません。 調べてみてもこのようなケースのサンプルなどが無く困っています。 どなたか詳しい方がいればご教示頂きたく存じます。 よろしくお願いします。
どなたかSQLについてわかる方教えてください。 以前にLike検索は全件検索だから遅いというのを聞いたのですが、 Selectの条件としてWhereに「Like　"A%" and Like "B%"」と設定した時と 「Like　"A%"」と「Like　"B%"」とを設定した処理を２回に分けて検索した時とでは の検索処理速度的にどちらの方が早いのでしょうか？ あと、サーバの負荷はどちらの方がかかるのでしょうか？ よろしくお願いします。
お世話になります。 Oracle9iとｖｂ６を使ってXPの環境で下記の内容のデータ変更のバッチを作りたいのですが、 方法がわかりません。ご教授頂ければ助かります。 ｃｄ１とｃｄ２は特定の場合以外は同じ値が入っている。 Aテーブル　ｃｄ１、ｃｄ２、ｃｄ３ Bテーブル　ｃｄ１、ｃｄ２、ｃｄ６ Aテーブルのｃｄ１とｃｄ２　がBテーブルに存在しない場合はｃｄ３＝０を代入する。 というような内容です。 以上　宜しくお願いします。　
Oracle9iからOracle10gへデータベースを変えようとしています。 データベースのみの変更のためアプリには手を入れなくても動くだろうと安易に考えていますが 何か変更しなければいけないところ（例：ロジックやコントロール）はあるのでしょうか？ [現在の環境] WindowsXPPro Oracle9i VB6 SP5 [今後の環境] WIndows7Pro Oracle10g VB6 SP5 補足） VBフォーム上にORADCコンポーネントを使用してグリッドにDB情報を表示しています。 このあたりのコントロールもそのまま使用することはできるのでしょうか？ ご存知の方ご教授いただければと思います。
環境は Linux + oracle 10g R2です。 簡単な無名プロシージャを書いていてはまって しまいました。 分かる方でしたら、あっというまに指摘していただけそうなので こちらに質問しました。 無名ブロック内で以下の事を行いたいのですが、うまく動作を確認できません。 ※以下は意味の無い処理となっていますが、今回説明用に短くしてみました。 ◇実現したい事 １．CREATE TABLE文の実行 (ここではEX01テーブルを作成します） ２．CREATE したテーブルにたいしてINSERT ３．CREATE したテーブルのDROP ◇私の実行結果 $ sqlplus scott/tiger@orcl SQL> SELECT TABLE_NAME FROM USER_TABLES WHERE TABLE_NAME ='EX01'; レコードが選択されませんでした。 -- 私の思いでは以下のプロシージャは正常に動作するのでは？ -- と思うのですが、以下の通りエラーとなってしまいます。 -- SQL> BEGIN 2 DBMS_UTILITY.EXEC_DDL_STATEMENT('CREATE TABLE EX01 ( C1 NUMBER,C2 VARCHAR2(10))'); 3 INSERT INTO EX01(C1,C2) VALUES(1,'AAA'); 4 DBMS_UTILITY.EXEC_DDL_STATEMENT('DROP TABLE EX01'); 5 END; 6 / INSERT INTO EX01(C1,C2) VALUES(1,'AAA'); * 行3でエラーが発生しました。: ORA-06550: 行3、列13: PL/SQL: ORA-00942: 表またはビューが存在しません。 ORA-06550: 行3、列1: PL/SQL: SQL Statement ignored -- -- なので、処理を分割して行ってみました。 -- まずはCREATE TABLEのみ -- SQL> BEGIN 2 DBMS_UTILITY.EXEC_DDL_STATEMENT('CREATE TABLE EX01 ( C1 NUMBER,C2 VARCHAR2(10))'); 3 END; 4 / PL/SQLプロシージャが正常に完了しました。 -- -- CREATE TABLEは正常に動作したようです。 -- SQL> INSERT INTO EX01(C1,C2) VALUES(1,'AAA'); 1行が作成されました。 -- -- INSERT文も正常に動作したようです。 -- SQL> BEGIN 2 DBMS_UTILITY.EXEC_DDL_STATEMENT('DROP TABLE EX01'); 3 END; 4 / PL/SQLプロシージャが正常に完了しました。 -- -- なんとDROP TABLEも正常に動作したようです。 -- SQL> SELECT TABLE_NAME FROM USER_TABLES WHERE TABLE_NAME ='EX01'; レコードが選択されませんでした。 SQL> そうなんです。3行まとめて記載するとエラーとなるのですが、 上記の通りそれぞれ分けて実行すると正常に動作するのです。 これはどこが悪いのでしょうか？ 情けない事に、今日の午後はこれでほとんどつぶれてしまいました。 どなたか助けてください。 以上よろしくお願いします。
oracle超初心者です。 sqlplusでINSERT INTOを使用して、以下の文字を挿入したいのですが、 うまく挿入されません。 どうすればいいのか教えてください。 宜しくお願いします。 入力したい文字：AAA&&00 私が書いたsql： INSERT INTO GGGGG ( NO, MOJI, DATE) VALEUS( 1, 'AAA&&00', SYSDATE); 上記だと、MOJIにAAAと挿入されてしまいます。
お世話になります。 SQLで日付の最大値を取得する方法です。 テーブルのデータ内容は以下のようになっています。 | 社員番号 | 社員名 | 日付 | 順序 | +---------+-------+-----------+-----+ | 100 | AAA | 2011/05/01 | 2 |　　　←　このレコードを取得したい +---------+-------+-----------+-----+ | 100 | AAA | 2011/05/01 | 1 | +---------+-------+-----------+-----+ | 100 | AAA | 2011/04/01 | 1 | +---------+-------+-----------+-----+ | 200 | BBB | 2011/04/01 | 2 |　　　←　このレコードを取得したい +---------+-------+-----------+-----+ | 200 | BBB | 2011/04/01 | 1 | +---------+-------+-----------+-----+ 取得したいレコードは、 社員ごとの最大日付の最大順序をもつレコードです。 （上記の1行目と４行目のレコードを取得したい） この場合、 下記のようなＳＱＬを考えます。 --------------------------------- SELECT 社員番号, 社員名, 日付 FROM テーブル名 WHERE 社員番号 = 'xxx' AND 日付 = (SELECT MAX(日付) FROM テーブル名 ) AND 順序 = (SELECT MAX(順序) FROM テーブル名 ) ---------------------------------- 但し、上記の場合、 社員ごとに最大値レコードが取得できません。 どなたかレコード取得方法について 教えていただけないでしょうか？ よろしくお願いいたします。
SQLの取得方法を考えてます。 テーブルＡ キー番号　利用フラグ　　内容 　　1　　　　　　1　　　　　りんご 　　2　　　　　　0　　　　　みかん 　　3　　　　　　0　　　　　なし 　　4　　　　　　1　　　　　すいか 　　5　　　　　　1　　　　　ぶどう 上記のような５件のデータがあるとします。 出力する時は、１件（縦もち=>横もち）にします。 キー番号が小さい順で、利用フラグが1の物を出力します。 利用フラグが1の物は最大でも3件しかありません。 その為、出力テーブルも3件分しかありません。 利用フラグが1の物が3件無い場合は、ある分だけ出力します。 上記データの時の出力結果想定 テーブルＢ キー番号１　内容１　　キー番号２　内容２　　キー番号３　　内容３ 　　1　　　　　りんご　　　　　4　　　　　すいか　　　　5　　　　　ぶどう これをどのようなＳＱＬで実現できるでしょうか？ 方法がよくわかりません。
主キー、副キーの組み合わせでレコード数をカウントして条件にあったものでかつ特定条件のレコードを出したいのですがどのようにしたらいいでしょうか？ 例えば画像のようなテーブルとします。（テーブル名はTANAです） 棚コードが主キー、商品コードが副キーとしたときこの組み合わせでカウントしてレコード数が１つしかないものを抽出します。 select 棚コード, 商品コード from TANA group by 棚コード, 商品コード having count(*) = 1; をすれば 棚コードと商品コードの組み合わせで 「T1」＆「OP123」 「T5」＆「A7777」 が抽出できるかと思います。 この条件に加えて、担当者が「鈴木」か「山田」のものだけを拾い上げるにはどのようなSQLを書けばいいでしょうか？ （例だと山田しか出てきませんが・・・） 詳しい方よろしくお願いいたします。Ora10gが対象です。
sql文に'"*%|が含む場合の対処法に関して 現在システム構築を行っているのですが、お客様の仕様で掲題の文字を制限することができず、LIKE検索などの場合の対処法に困っています。 エスケープ文字などを使用することで対応できることは分かっているのですが、 今回の使用が全ての文字を入力可とするなので、エスケープ文字に割り当てる文字が ありません。 (ちなみにエスケープ文字を"^"とした場合、"^^"としたら後の"^"は文字列として扱われるのか？) こんなときにどんな対応をとったらよいのでしょうか？ 誰か知っている方がおられたら教えてください。 開発環境は以下です。 言語：java OS：Windows7 DB：Oracle11g サーバー：Solaris 以上
PL/SQLの実行計画を取得したいのですが、autotraceを指定しても その結果が表示されません。結果表示のためにはsqlplusと違った 考慮が必要なのでしょうか。oracleに詳しい方、教えてください。 よろしくお願い致します。
複数のSQL条件を設定する方法について以下の内容 を実現したいと思っています (1)番号が17000以上 (2)そのなかで番号がMINの値を持ってくる TBL　作業 品目　　番号　　　　　日時　　　　数量 A　　　　１５０１０　　　０５/２３　　２０ A　　　　１５０２０ ０５/２４　　２０ A　　　　１７０１０　　　０５/２５　　２０←ーー抽出 A　　　　１７０３０　　　０５/２６　　２０ A　　　　１７０８０　　　０５/２７　　２０ B　　　　　　・　　　　　　　・　　　　　・ C　　　　　　・　　　　　　　・　　　　　・ D　　　　　　・　　　　　　　・　　　　　・ ご教授宜しくお願い致します。
SQLの実行計画について教えていただきたいです。 【現状】 9iと10gそれぞれの環境で /*+ ALL_ROWS */ を使用したあるSQLの 実行計画を出したところ、全く異なった実行計画になっていました。 コストは9iが2000、10ｇが150で、10gでは数秒で結果が返ってくるのに対し、 9iではいつまで経っても結果が返ってきません。 9i環境と10g環境とではテーブルの構造やINDEXは同じですが データの中身は別で、件数は9iが100万件、10gが150万件です。 【教えていただきたいこと】 このように9iと10gとで実行計画や処理の時間が異なる原因は データの中身が違うこと以外では何が考えられるでしょうか。 解決策があれば合わせてお教えいただきたいです。 /*+ ALL_ROWS */を使えば9iでもSQLをコストベースにできると 思っているのですが、それが間違いなのでしょうか。。。 そもそも実行計画がよく分かっていないので申し訳ないのですが、 何かお気づきのことがあればお教えいただきたいと思います。 よろしくお願いします！
SQLで質問です。 下記のようなテーブル(TBL) があったとして、 YMD HIN 20110520 '商品３' 20110520 '商品５' 20110520 '商品６' 20110522 '商品４' 20110522 '商品５' VIEWのみで以下ような形に見せるようなVIEWって VIEWだけで可能でしょうか。 YMD　　　　HIN 20110520　'商品３ 商品５ 商品６' 20110522 '商品４ 商品５' グルーピングキーYMD単位でHIN||' '||HIN||' '||・・・みたいに データが存在するだけ連結していくようなイメージです。 ストアドなどでループして連結していく以外にVIEWのみで実現できるような SQL書けるよという人いましたら教えていただけないでしょうか。 以上よろしくお願い致します。
「オラクル」の「初期パラメーターファイル（init[SID名].ora）」にどの様な役割りが託されているのかを、教えて頂けますでしょうか？ オラクル関連の書籍を読み始めて間が無い段階に留まっていますので、 先に進めなくなりましたから、御教授を宜しく御願い申し上げます。
例えばあるテーブルのbangou（重複はない）という項目が 11 12 13 14 15 16 22 23 24 31 32 このように存在した時に 使用済み番号 11-16 22-24 31-32 このように３行表示するためのＳＱＬってどうすれば可能でしょうか。 ポイントは ・連続した番号は１行で表現したい。 実際はデータが数万行あり、連続しているものが多いが、歯抜けも連続しているためです。 以上よろしくお願い致します。
oracle9iで、SQLServerのようなテーブル変数みたいなものは、ありますか？ 一時テーブルや、テーブル関数(表関数)ではありません。 ストアドパッケージで、一つの条件で使いまわし使用したいので。
ORACLE9iのリカバリ方法を教えてください。 Windows server 2003 R2、Oracle9iを使用しています。 Cドライブにoracleをインストール、Dドライブにoracleのデータを格納しています。 Cドライブのハードディスクが駄目になったので、Cドライブのハードディスクを交換して Windows server 2003 R2をインストールして Windowsの標準機能のバックアップ(バックアップデータには、system stateも含んでいます。)からバックアップしておいたデータを復元させました。 ファイル単位のデータや、オラクルのサービスは復旧したのですが、オラクルのテーブルなどが開きません。 SI ObjectBrowserでオラクルを開こうとしたとき、 「ORA-01219:データベースがオープンしていません。固定の表／ビューに対する問合せのみ可能です。」 というメッセージが表示されます。サービスの再起動をしましたが、同じようなエラーがでます。 SQLPLUSで、alter database openのコマンドを入れてデータベースをオープンさせようとしたところ、 次のようなエラーが出てきました。 ORA-01122:データベース・ファイル８の照合検査でエラーが発生しました。 ORA-01110:データ・ファイル8：'D:ORACLE^ORADATA\SFRES\USER01.DBF' ORA-01207:ファイルが制御ファイルより新しくなっています。-古い制御ファイルです。 どなたか、解決方法をご存知の方、ご教授ください。
TeraTerm上で [ora10gas@doao shell]$ ./get_daisya.csh 上のようにシェルを実行してみたのですが、 /bin/ls: 照合パターンに合いません. と表示されます。 これしか情報が出せませんが、こういうときはどこを確認したら解決できるか ご教授していただけませんか。 以上、よろしくお願いします
管理ツールのodbcで接続プールを設定する際に、 oracle10gデフォルト設定の60秒から、プール時間を変更し、適用ボタンを押して実行しても 再度同設定画面を開くと元の60秒に戻ってしまいます。 なぜでしょうか? 管理者権限が無いからとかの理由で変更が適用されないのでしょうか? ご存知の方がいれば教えていただきたいです。 よろしくお願いいたします。
ORACLEアーカイブログのサイズを調べたのですが、「ブロック単位」の意味がわかりません。 やりたいことは、出力した「ブロック単位のアーカイブログサイズ」を「GBで表したい」です。 ご教授願います。 私の調査結果を記載します。 以下のビューがアーカイブログ情報を保持していると判明した。 【V$ARCHIVED_LOG】 このビューが保持しているカラム「BLOCKS」が、アーカイブのログサイズを持っている。 【BLOCKS NUMBER アーカイブ・ログのサイズ（ブロック単位） 】 ※ここがブロック単位であるため、○GBに変換できない・・・。 上記のカラムの情報をSELECTした結果、「ブロック単位のサイズ」が出力された。 BLOCKS　= 1028995 これをGBに直したいのですが、どうしたらよいのでしょうか？ 参考にしたサイト：http://otndnld.oracle.co.jp/document/products/oracle10g/102/doc_cd/server.102/B19228-04/dynviews_1.htm
Oracle(10.2.0.5)のパッチを当てた後、データベースをオープンすることができませんでした。 原因と対処法にについてわかりましたら、教えて頂けますか。 SQL> startup ORACLEインスタンスが起動しました。 Total System Global Area 1258291200 bytes Fixed Size 2067624 bytes Variable Size 318767960 bytes Database Buffers 922746880 bytes Redo Buffers 14708736 bytes データベースがマウントされました。 ORA-01092: Oracleインスタンスが終了しました。強制的に切断されます
OS HP-UX(11.31) Oracle(10.2.0.5)をメディアからインストールしたいと思います。 ただし上記はパッチですので、上記を実行してもエラーが発生します。 元のOracle(10.2.0.1)を実行したところ、(./runInstaller) Oracle Universal Installerを起動中… インストーラ要件の確認中… 6Sバージョンを確認中…必須11.23　実際11.31　失敗しました となり終了してしまいます。 HP-UXのバージョンが11.31と新しいため失敗しているエラー内容みたいですが、 インストールするにはどうしたらよいでしょうか。 HP-UX11.31で、Oracleをインストールする方法を教えてください。
お世話になります。 ORACLEのMAX()関数を使用して、 下記内容を取得するSQLを作成しています。 ・商品テーブルから商品コードを取得したい ・上記の取得条件として、商品テーブルの日付項目が最新日付のレコードのみを 取得したい ・上記の取得条件に加えて、指定したいくつかの商品に該当するもののみを 検索対象としたい 【SQLサンプル】 SELECT 商品コード FROM 商品テーブル WHERE 商品コード IN (101, 102, 103) AND 在庫区分 = '0' AND 日付 = (SELECT MAX(日付) FROM 商品テーブル WHERE 商品コード IN (101, 102, 103) AND 在庫区分 = '0' ) AND ランク = (SELECT MAX(ランク) FROM 商品テーブル WHERE 商品コード IN (101, 102, 103) AND 在庫区分 = '0' ) 上記以外の書き方で何か良い書き方があれば、 ご教授願えますか？　よろしくお願いいたします。
お疲れ様です。 質問をお願い致します。 OS：WindowsXP DB：Oracle10g PL/SQLで、DBより対象データを取得し、MDBファイルの作成、書込み行いたいのですが、可能なのでしょうか。 ネットで調べたところ、MDBファイルに書き込みは可能と分かったのですが、 ファイルの作成の情報が無かったので、質問させて頂きました。 参考になるサイトなどがあれば教えて頂けますでしょうか？ また、こちらでも重複して質問させて頂いております。 http://forums.oracle.com/forums/thread.jspa?threadID=2219258&tstart=0 どうぞ、宜しくお願い致します。
oracleのStatspackレポートに出てくる9iまでの「Hash Value」もしくは10g以降の「Old Hash Value」について教えてください。 この値は「SQLに固有に振られるID」だと考えていたのですがこの認識はあっていますでしょうか？ ※大文字小文字・スペースの数・改行の位置が異なるだけでも異なる値になり、別のSQLと判断されてしまうということは知っています。また、oracleのバージョンが異なっても同じアルゴリズムが使用されていることも知っています。 「Hash Value」という言葉から連想する私の想像の範囲に過ぎませんが ・SQLの文字列をhash計算により算出しているのだろう ・基本hash値だけで「ほぼ」一意に定まる ・稀に衝突も起こりうる ・実質的には変化する値であり、実は「ID」ではなく、一貫性は保障されない ではないかと思います。 なのですが、一意であると保障されなければ実用性が下がってしまうと思います。 例えば再起動したら変化してしまう可能性があるとかだと。 衝突は絶対にありえないのでしょうか？ どんな状況でも変わることのない値なのでしょうか？ 再起動しても、インスタンスが異なっても変わることはないのでしょうか？ 稀に変化してしまう値なのでしょうか？ この点について教えてください。よろしくお願いします。
昨日迄の問い合わせへ御協力を賜れました御蔭で、 ”Oracle”の利用の際に、10.10.10.10番のIPアドレスを固定化させている、 という設定の必要性が分かりましたが、 未だに私が理解していない部分もが残っておりますので、 纏めて伺っておきたい、と考えまして、今回の質問を提出させて頂きました。 そこで御尋ねを致します。 『ループバックの時には、たとえWAN側へ抜けていかなくても、 ポート開放の設定もが必要になり得るのでしょうか？』 御忙しい中へ度々に御邪魔を致しますが、 もし宜しければ御指導を御願い申し上げます。
Oracleの参考書を初めて読ませて頂いた時に、 次の疑問にぶつかりましたから、教えて頂けますでしょうか？ VLANの機能が搭載されていないルータの配下に、 其処のDHCPサーバのセグメントとは違うIPアドレスのPCを置いている場合にも、 ループバックは可能なのだろう、と思われますが、 そのループバックは、WAN側へ出て行った後に行われているのでしょうか？ その書籍の中には、"10.10.10.10:1521"番のIPアドレスの固定の必要性が記載されていましたので、VLANの知識さえもが乏しい私の拙い理解では、 違うセグメントのIPアドレスのPCからの送信がルータでブロックされまいか、 と思われまして、その段階で、引っ掛かってしまいました。
OracleDataBaseの教科書へ記されている情報によりますと、 ループバックアダプタ側へ"10.10.10.10:1521"番のIPアドレスを固定化させるそうですが、 そもそも、ループバックなのに、どうして、"127.0.0.1"番のIPアドレスを適用させていないのでしょうか？
いつもお世話になっております。 ORACLE SQLで文末にある特定文字を削除する方法が分かりません。 ご存知の方がおられましたら、ご教授頂けますでしょうか。 【ご質問内容】 以下のような文字列がありとします。 (文字列) 今日はいい天気ですね。||明日は晴れますかね。||||| 文末の|を全て削除したいのですが、 どのような方法で実施すればよいのでしょうか？ 文末の|の数は何個になるか不特定です。 文末に|がない時もあります。 よろしくお願いいたします。
お世話になります。 SELECT文で複数の値の中から一致するものを検索する場合に、 以下の内容を満たすかどうかを結果として返したいです。 (1) A、Ｂ、Ｃ の値のうち、Ｃ があるかどうか (2) A、Ｂ、Ｃ の値のうち、いずれかを含んでいるかどうか 上記（１）、（２）のいずれの結果も取得したいのですが、 １つのＳＱＬで結果を取得することは可能でしょうか？ とりあえず、 SELECT 項目名 FROM ＴＥＳＴ WHERE 項目名 IN (A, B, C) で取得件数が０件かどうか（※上記（２））を判断し、 結果をプログラム側（ＶＢ側）に保持させる。 取得件数が１件以上である場合、 取得結果を１件ずつループして Cを含むかどうか調べて、 もしＣがあればその結果をプログラム側で保持しておく。 という方法しかわかりません。 ＳＱＬでこれを実現することは可能でしょうか？ よろしくお願いいたします。
windows7にオラクルクライアント10gを入れたいのですが入りません。サーバがオラクル10gの10.0.2のためクライアントもオラクル10gを入れたいのですがどうしたら入りますか？
以下の条件でのＳＱＬのデータの取得方法が分かりません。 ２つのテーブルがあるとします。 ・テーブルＡ キー　　　項目1 10　　　　　X 20　　　　　Y ・テーブルＢ キー　　項目2　　項目3 10　　　　　5　　　　C 10　　　　　6　　　　D 12　　　　　6　　　　E ここで取得する条件として ■テーブルＡにあるのは、必ず取得します。 ■テーブルＡのキーとテーブルＢのキーは繋がり、繋がったテーブルＢの情報は 　別レコードとして取得します。 ■テーブルＡのキー１つに対して、テーブルＢのキーは無いかも知れないし、 　複数件あるかも知れません。 　無い場合はテーブルＡの情報のみを出力し、複数件ある場合はその全てを出力します。 ■テーブルＢの項目2が同じ値のデータがある場合、テーブルＢを出力したレコードと 　同じレコードに、項目2が同じデータの情報を出力します。 　項目2が同じデータが無い場合はこの情報は出力しません。 　項目2が同じ値のデータは最大2件しかありません。 上記の例の場合に出力したい結果 ・出力テーブルＣ キー　　フラグ　　　項目1　　項目2　　項目3　　　項目2が同じキー　　項目2が同じ値 10　　テーブルＡ　　　X 10　　テーブルＢ　　　 　　　　　5　　　　C 10　　テーブルＢ　　　 　　　　　6　　　　D　　　　　　　　12　　　　　　　　　　　　E 20　　テーブルＡ　　　Y （テーブルＣ のフラグとは、テーブルＡの情報かテーブルＢの情報かを示します） これを出来ればSQL、出来なければPL/SQLで取得したいのですが どちらの場合でも取得の方法に悩んでいます。 どのような方法で取得できるのでしょうか？
Oracle10g(10.2.0.5)をインストールしようと思います。 OSはHP-UXです。 １．これはパッチ？なので、このままインストールできないんでしょうか？ 　　まずOracle10g(10.2.0.1)をいれないといけないのでしょうか。　 　　10.2.0.5のrunInstallerを起動し画面は表示されましたが、インベントリの作成権限がないとそれに　　関するフォルダが作成されてありませんでした。 2．まず10.2.0.1をインストールしようとしたところ、OSの要件を満たせずrunInstallerから画面を表示で　　きませんでした。バージョンが新しすぎてだめなようです。 上記バージョンをインストールするための方法を教えて頂けますか。
OS HP-UXにoracleをインストールしようとしています。 oracleメディアに～.zipがあります。 まずメディアに入っているzipファイルを インストールしようとしているサーバにcpコマンドでコピーしました。 そしてunzipで解凍したところ、Diskフォルダが解凍されました。 その中のrunInstallerをX環境で実行させたところ、 「実行パーミッションがありません」というエラーが発生しました。 コピー、解凍、インストールもoracle権限で行おうとしています。 oracle権限でインストールしようとしています。 解決策について教えてください。
全くOracleのことを知りません。 ですが、Oracleなどのメーカー系資格が必要とのことで、 今とても困っています。 どのような勉強をして、どのような試験を受けるべきなのか教えてください。 Oracleの試験らしきページ http://www.oracle.com/jp/education/certification/allcertification-172551-ja.html で、「認定資格一覧」とあるのですが、この中の一つでも取っとけば「Oracleの資格を取った」と言えるのでしょうか？ 多すぎて分かりません。 あと、小田圭二著「絵で見てわかるOracleの仕組み」を買ってみたのですが、 最初のページから分かりませんでした。(I/Oって何？SQL文って何？) Oracleを学ぶ前に何かするべきなのでしょうか。
tnsnames.oraの中の(CONNECT_DATA=に SIDだったりSERVICE_NAMEだったりしますが、どのような違いがあるのでしょうか？ どちらでもつながるのでいいかとは思いますが、何かメリット・デメリットでもあるのでしょうか？ それとも過去の遺物が未だ共存しているだけでしょうか？ SIDはインスタンスにつけられた名前だと知っていますが、SERVICE_NAMEってなんですか？
ロ－カルネイミングパラメタのTNSNAMS.ORAに書き込む内容について教えてください。 CONNECT_DATAにSlDとSERVｌCE＿NAMEとかっていう項目がありますよね これって両方設定しなくてはいけないのでしょうか？ それぞれどういった役目を果たしているのかが理解できてはいないのですが・・・ なぜかわからないのですがHOSTにIPアドレスで書いたときSERVｌCE＿NAMEでDBにつなぐことができるのですが、HOSTにホス卜名で書いたときはつながません。しかし、逆にSlDではつなぐことができます。 さっぱり理由がわかりません・・・ DB以外のことでIPやホスト名を使っても問題なしです。DBにつなぐことだけおかしいです。 DBのデ－タは８I→９I→１０Gと引き継いできています。 サーバはWinR2 2008です。
OraのフロントエンドとしてACCESを使おうと思うのですが、つなぐ手段として教えてください。（Ver問わずで） 一般的なのはOraのクライエントをSIしてデ－タソ－スアドミニス卜レ－タで設定してあげるというのが一般的だと思いますが、他にもつなぐ手段ってあるのでしょうか？ あんまり一般的でない方法とかもあれば知りたいです。 クライエントをインスコせずにつなぐこととかできないでしょうか？ エクセルのように扱える？ような部分もあるので便利ですが、設定とかまでできない人にデ－タソ－スアドミニス卜レ－タをいじってもらうのが酷な部分もありまして・・・ よろしくお願いします。
SQL*Loaderの制御ファイル内で、 以下のような日付データを変換するにはどうしたらよいでしょうか? ・2010-12-06 00:00:00.000 以前は'2010-12-06 00:00:00'の形式だったので "to_char(to_date(:DENPYO_DATE,'YYYY-MM-DD HH24:MI:SS'),'YYYYMMDD')" のようにして変換が可能だったのですが、仕様変更がありましてこれに対応しなければいけなくなりました。 ちなみに安易な考えで以下のようにしたのですがさすがにだめでした... "to_char(to_date(:DENPYO_DATE,'YYYY-MM-DD HH24:MI:SS.000'),'YYYYMMDD')" 方法をご存知の方がいれば是非、ご教示いただきたく存じます。 よろしくお願いいたします。
OracleDBに作成・設定したログオントリガーが、 どの程度データベースのパフォーマンスに対して影響があるかを調査したいです。 テストの手法としては、 フリーの負荷テストツールを使用する事を考えていますが、おすすめのツールを教えていただけないでしょうか。 非同期で、１秒間に１０～２０接続程度を想定しています。 また、OEMでパフォーマンス監視を行っているのですが、テストの際に確認すべき必須項目などもあわせて教えていただけるとうれしいです。 よろしくお願い致します。
SQL*LoaderでCSVをインポートする際に、 次のようなCSVデータがあるとします。 DENPYO_NO ｜ SALES_QTY ｜ PRICE　 1001-01-0001　　　　　1　　　　　　2000 1001-01-0002　　　　　2　　　　　　4000 このデータのDENPYO_NOフィールドの左4桁を取得して別のフィールドにインポートすることは 可能でしょうか? 説明がわかりにくいと思いますが、テーブルに取り込んだ時に以下のようにしたいです。 SECTION ｜ DENPYO_NO ｜ SALES_QTY ｜ PRICE 1001　　　　　1001-01-0001　　　　　1　　　　　　2000 1001　　　　　1001-01-0002　　　　　2　　　　　　4000 要は一つのCSVフィールドを使用して、複数のテーブルフィールドを更新可能か? ということです。また、そのときの制御ファイルのフィールド項目の定義はどのように記述したらよいのでしょうか? よろしくお願いします。
ODBC経由でオラクルデータを参照しています。 通常問題なく参照できるのですが、たまに「Oracle ODBCドライバ接続」 のポップアップ画面が表示されます。 表示される原因がわかりません。 どなたか教えてください。よろしくおねがいします。
以下のCREATE文を実行し、設定されたオプションが正しく設定されていることを確認したいのですが、確認方法がわかりません。どうかご教授願います。 以下のSQLで確認した結果、PCT_USED等が表示されませんでした。 このSQLで上記を確認できる場合、表示されない項目は何か理由があるのでしょうか？ ---------------------------------------------------------------- 確認SQL SELECT OWNER ,TABLE_NAME ,TABLESPACE_NAME ,PCT_FREE ,PCT_USED ,INI_TRANS ,INITIAL_EXTENT ,NEXT_EXTENT ,MAX_EXTENTS ,PCT_INCREASE FROM dba_tables ----------------------------------- CREATE TABLE free_table( old_name VARCHAR2(5), new_name VARCHAR2(5) ) tablespace TESTDAT01 pctfree20 pctused70 initrans1 storage( initial1M next1M maxextents UNLIMITED pctincrease 0 ) ---------------------------------- 確認したい値 tablespace TESTDAT01 pctfree20 pctused70 initrans1 storage( initial1M next1M maxextents UNLIMITED pctincrease 0 ------------------------------ どうかご教授よろしくお願いします。
OracleでAccessからの接続だけをリスナーで拒否したいです。 できるだけパフォーマンスに影響しない方法を模索しています。 何か良い方法は無いでしょうか。 リスナーログからAccessを判別してセッションを切断する方法は考えたのですが、 接続の度にリスナーログを読み込みするのはパフォーマンスに影響しそうなのでＮＧかなと 個人的には思ってます＞＜
先日、PL/SQLの開発について、こんな質問を受けました。 「SQLを組むさい、処理速度を速めるためにやっていることは？」 と。 で、ちょっと考えて 「Selectなら、Indexを考慮してSelect文を作成し、実行します。 処理時間がかかる場合は、実行計画などをみて、 Select文にヒント句をつけて、処理速度を改善します。」 と答えました。 答えたあと、質問者された方は、なんだかがっかりした感じでしたが、 私の回答は不適切だったのでしょうか？ それとも、どういう回答が良かったのでしょうか？ よろしくお願いします。
外部結合に関する質問です。 表A 　 　　　　 　|　　表B ID　　 名前　　　|　　ID　　 所持品 1　　　田中　　　|　　1　　　りんご 2　　　佐藤　　　|　　1　　　バナナ 3　　　鈴木　　　|　　3　　　バナナ このように「誰が、何を持っているか」を表した表AとBがあるとき、 以下の条件でデータを取得したいと考えております。 ・ 所持品がある人は、名前と所持品の組み合わせを表示 ・ 所持品がない人は、名前だけを表示 ・ りんごをもっていない人は、名前と所持品の組み合わせに 　加え名前だけの結果も表示 ・ UNIONは使いたくない ( 欲しい結果 ) 　名前　　　　所持品 　田中　　　　りんご 　田中　　　　バナナ 　佐藤　　　　（空）　　　← 所持品なし 　鈴木　　　　バナナ 　鈴木　　　　（空）　　　← りんごなし SELECT A.名前, B.所持品 FROM A, B WHERE A.ID = B.ID(+) では『鈴木 （ 空 ）』 が取得できません。。。 UNIONを使えばできたのですが、都合上UNIONを使わず 上記のような結果を取得したいと考えています。 どなたかお知恵をお貸しいただけませんでしょうか。 よろしくお願いします。
Oracleデータベースのパフォーマンスが悪いと相談を受けましたがどういった手順調査するのがいいのでしょうか？教えて下さい。
SQL*Plus以外で値を一覧できるツールを探しています。 Oracle SQL Developer や MS-Access、ObjectBrowserなどが無い環境でも、 Oracleのディクショナリビュー含めて値を見たり、 外部キーを見たり、他を見たりして、 ER図を見ているかの如く、さっと対象を選択できるようなツールがあれば、 教えていただきたいと思います。 結局は、SQL*Plusで値を見て判断するしかないでしょうか？ 「動かしてみて、実行計画を見る」とかしかないでしょうか？ よろしくお願いいたします。 OpenOffice（のデータベース）が Oracle社のものになってから結構使えるようになっていたりするでしょうか。
Oracle SQL Developer や MS-Access が無い環境でも、 Oracleのディクショナリビュー含めて値を見たり、 外部キーを見たり、他を見たりして、 ER図を見ているかの如く、さっと対象を選択できるようなツールがあれば、 教えていただきたいと思います。 結局は、SQL*Plusで値を見て判断するしかないでしょうか？ 「動かしてみて、実行計画を見る」とかしかないでしょうか？ よろしくお願いいたします。 OpenOffice（のデータベース）が Oracle社のものになってから結構使えるようになっていたりするでしょうか。
環境：2000Server、Oracle8i やりたいこと：OracleDBに接続可能な状態かを、バッチで自動調査したい。 今までlinux環境でやっていた処理を、上記環境でも行わなくてはいけなくなりました。 作業用クライアントでバッチを実行して、自動でチェックする想定です。 以下、今までlinux環境で使用していたソースです -------------------------------------------------- sqlplus -l -s USER/PASS@SID <<EOF | grep AAA select 'AAA' from dual; EOF if ($? == 0) then ～ -------------------------------------------------- 上記シェルを実行し、 ・DBに接続できる ・select文が正常に実行できる（問い合わせができる） ことを確認し、sqlplusを自動で抜けて、 戻り値が０ならOKとしていました。 これと全く同じことをwindows環境で行いたいのですが、 どのように記述すればいいのでしょうか？ 詳しい方、ぜひ教えてください。
お世話になります。 SQL文で、下記内容のデータを取得する方法がわかりません。 ・TESTテーブルからＡ、Ｂ、Ｃの３項目のデータを取得する。 ・但し、この中のＣ項目については、WHERE句の条件を満たす データの最大値を取得する。 ・項目ＡおよびＢの取得条件は、項目Ｃと同一条件とする。 ・目的は、項目ＡおよびＢに関しては、WHERE句の条件を満たす 　全てのレコードを取得し、項目Ｃにおいては最大値のみ取得したい。 上記内容を取得しようと考えた場合、 現時点で下記のＳＱＬ文を作成して実行しましたが、 うまくデータが取得できません。 SELECT A, B, C FROM TEST WHERE C = (SELECT MAX(C) FROM TEST) AND Z = 'xxxxx' AND Y = 'x' AND X = 'Y' ※項目X, Y, ＺはTESTテーブルのカラムです ※上記ＳＱＬを、Ａ、Ｂのみ取得用とＣのみ取得用に 　 それぞれ分解して実行すると、それぞれの結果は 　 正常に取得できます。 ２つの結果を１つのＳＱＬで取得することは可能でしょうか？ どなたかご教授願えますか？よろしくお願いいたします。
Sql*Loaderを使用してCSVファイルを取り込む際に、取り込むCSVデータが5桁以上の場合はエラーとしたいのですが。 制御ファイルにどのような記述をすればよいかわかりません。どうか、ご教授お願いいたします。 ちなみに　5桁未満の場合は、0埋めを行っております。 具体的には、以下のような結果を出したいのですが。 ○　1　　 ⇒　00001（０埋めして取り込む） ○　00001 ⇒　00001（取り込む） ○　00000 ⇒　00000（取り込む） ×　000001 ⇒　（取り込まない） ------------------------------------------------------------- 現状、以下のソースだと「1234567」のCSVデータをロードすると、 「34567」で取り込まれてしまいます。（エラー発生しない。） 【Sql*Loaderの制御ファイル】 LOAD DATA 　　（省略） TRUNCATE TRAILING NULLCOLS ( No_colum "LPAD(:No_colum,5,'0')" , No2_colum "LPAD(:No2_colum,5,'0')" ) 【tmp_tableの情報】 カラム：No_colum vchar2(サイズ：5) カラム：No2_colum vchar2(サイズ：5) ------------------------------------------------------------- どうか、ご教授よろしくお願いいたします。
Oracle 10gで統計情報が取得されたことを確認するSQL文を教えてください。 統計情報の取得方法としては、 Primary Key、Indexを再作成した後、DBMS_STATS.GATHER_SCHEMA_STATSを使用して統計情報を取得しております。 よろしくお願いします。
以下のVIEWをPROCEDURE内で使用しています。 CREATE OR REPLACE VIEW VW_KAIIN (CODE,NAME,TEL,STARTYMD) AS SELECT * FROM KAIIN WHERE STARTYMD <= TO_CHAR(SYSDATE,'YYYYMMDD') ※STARTYMDには有効な開始日付が入ります。 条件部分でSYSDATEではまずいことになり、 特定の日付を指定しなければならなくなりました。 VIEW自体にパラメータ渡しはできないということで、 CREATE OR REPLACE PROCEDURE TABLE_B_UPDATE (I_YYYY IN TABLE_A.YYYYY%TYPE, I_MM IN TABLE_A.MM%TYPE, I_DD IN TABLE_A.DD%TYPE,) PROCEDURE内でI_YYYY、I_MM、I_DDを条件に変更した VIEWを動的に作成して、処理をしたいのですが、 こういった事は可能でしょうか？ そのまま書いてみましたが、CREATE部分でエラーが出てしまい、コンパイルできませんでした。 もし不可能である場合は、代替案をご教授いただけるとありがたいです。 どうかよろしくお願いします。
ORACLEで各テーブルに設定してある「pctfree」と「PCTUSED」 の値を確認したいのですが、 どこを確認すればよいかわかりません。 目的としては、「CREATE TABLE文で「pctfree」と「PCTUSED」 を設定しているので、これが正しく設定されているかを確認したい。」です。 どうかご教授お願いいたします。
以下の(1)～(9)オプションの意味を、ORACLE初心者でも理解できるレベルで教えていただけないでしょうか？ (1)tablespace AAAAAAAAA ＝表領域名 (2)pctfree10 ＝この割合を超えるとブロックに挿入不可能になる。 (3)pctused80 ＝用済領域のうち、データブロックごとに確保される最小限の割合。この割合を下回ると挿入可能な　ブロックとなる。 (4)initrans1 (5)storage( (6)initial　1M (7)next　1M (8)maxextentsUNLIMITED (9)pctincrease0 ) 自分で調べてはみたものの、理解できませんでした。 わがままな質問で申し訳ございません。 ご教授願います。
いつもお世話になります。 オラクル初心者です。 宜しくお願い致します。 下記の様な、ｆｏｒ～ｌｏｏｐで、 tmpM商品単価（主キーなし）と言う一時表テーブルから M商品単価（主キーは「品番」）へインサートをする際、 tmpM商品単価には、「品番」フィールドにダブった品番 がある為、単価実行日を降順に並べ替え古い行は、 where not exists(～）で、インサートされない様に考えました。 しかし、下記構文では、コミットされる前だからなのか、 ダブった品番の行もインサートされようとされ、エラー となってしまいます。 どなたかご親切な方、ご教授下さいます様、 宜しくお願い致します。 　　　　　記 create or replace procedure dbInsSyouhinmaster ( out_valoutpls_integer ) as cursor c_1 is select 品番,商品分類,売上単価,単価実行日,登録日時,登録者 from tmpM商品単価 a where not exists(select * from M商品単価 b where trim(a.品番) = trim(b.品番)) order by 単価実行日 DESC; begin out_val:=0; for r_emp in c_1 loop if c_1%FOUND then INSERT INTO M商品単価 (品番,商品分類,売上単価,単価実行日,登録日時,登録者) VALUES(r_emp.品番,r_emp.商品分類,r_emp.売上単価,r_emp.単価実行日, r_emp.登録日時,r_emp.登録者) ; end if; out_val := out_val + 1; end loop; end;
こんにちは、外部結合の仕方についてお聞きしたいのですが、 このSQL１で抽出されたデータにさらに TABLE3テーブルのデータを追加したくＳＱＬ２を作成したのですが、 うまくいきません。 ON TABLE1.[Code]=TABLE3.[Code]の部分をどのように記述すればよいのでしょうか？ ＳＱＬ１－－－－－－－－－ TABLE1.[tamp] [Child], TABLE2.* FROM [p].[Price] TABLE1 LEFT OUTER JOIN [p].[Receive] TABLE2 ON TABLE2.[Code]=TABLE1.[Code] ＳＱＬ２－－－－－－－－－－ TABLE1.[tamp] [Child], TABLE2.*, TABLE3.* FROM [p].[Price] TABLE1 LEFT OUTER JOIN [p].[Receive] TABLE2 ON TABLE2.[Code]=TABLE1.[Code] LEFT OUTER JOIN [p].[Product] TABLE3 ON TABLE1.[Code]=TABLE3.[Code]
下記のようなテーブルがある場合に Aテーブル　　　　　Bテーブル 品目(主)　　　　品目(主)　子品目(主)SEQ 　パン１　　　　　パン１　　小麦粉　　　１ 　　　　　　　　　　パン１　　ジャム　　　２ 　　　　　　　　　　パン１　　バター　　　３ 結合条件 　A.品目 = B.品目 この時に１件のみ取得できるようにしたい。 Bテーブルから取得したいのは、SEQ３のデータ。 SELECT A.品目, B.子品目, SEQ FROM　 A,B WHERE A.品目 = B.品目(+) とすると、下記３行のデータが取れてしまう。 パン１　　小麦粉　　　１ パン１　　ジャム　　　２ パン１　　バター　　　３ これを↓だけ取得したいのです。 パン１　　バター　　　３ 外部結合ではそもそも取得できないのでしょうか？ どのようなSQLを書けばいいのか教えてください。
SQL*Loaderでデータを取り込む際に、対象データの左桁をゼロ埋めにする方法を教えてください。 例えば、取り込み対象の項目が、5桁未満の場合はゼロ埋めを行う。 ・取り込み対象：111 ・ゼロ埋め後の結果：00111(この値を取り込む） 上記を実装する方法が分からず困っております。 SQL*Loaderは初めて使用するため、調べる方法も見つけられませんでした。 何か良い方法がありましたら、お教え願えないでしょうか。 また、上記を実装するための参考になるサイト等を教えていただけないでしょうか。 よろしく御願い致します。
緊急ではないけど とても好奇心があります 添付画像の五本の線を描いた順番を当ててください ＋ 解答例： えいあうお
無償版のOracle Database 10g XEを使用しているのですが、 CSVファイルをロードして、テーブルを作成する過程で、テーブル名を付けるところで、 日本語を混ぜて、Shift-JISで「TBL_AAA_第０１表_統計データ」と入力し、次へ進むと、 エラーとなりテーブルを作成できません。「TBL_AAA_第０１表」とすると作成可能ですが、何のテーブルか分からなくなります。 Oracleの文字数制限は30バイトだと記憶しているのですが、入力したテーブル名は計算すると27バイトで制限以内になります。 このテーブル名は使用できないのでしょうか？
tenbinです。 今Oracle DataBaseがサーバーAにインストールされています。 これをサーバーBにまったく同じようにコピーしたいのですが、 どんな方法が一番簡単でしょうか。 サーバーBには同じ設定でオラクルをインストールする必要があると思いますが、 その後、簡単にOracleの設定(ログやバックアップ設定を含む)とデータベース情報を コピーする方法はありますでしょうか？ エクスポートやインポートだと、データベースの情報しかコピーできないと認識しています。 わかる方がいらっしゃいましたら、教えてください。よろしくお願いします。 サーバーA/B コンピューター名とIPアドレス以外環境は同じです。 OS：Windows Server 2008 Oracle：11g ※ラインセンス２つあります。
環境はoracle9iです。 ■テーブルの構成 |年度|月|部署コード|商品コード|金額| ■テーブルの内容 |2010|01|AAA|001|1000| |2010|02|AAA|001|2000| |2010|01|AAA|001|3000| |2010|01|AAA|002|3000| |2010|02|BBB|003|4000| |2010|01|CCC|001|5000| |2010|03|CCC|001|6000| 上記のようなテーブルがあり、 これを年度,月,部署コード,商品コードでサマリした値を表示したいです。 と、ここまでなら上の4つでGROUP BYしてあげれば良いのですが、 そこに年度,部署コード,商品コードでサマリした 「累計金額」列を加える必要があります。(イメージは下記のとおりです。) ■抽出結果の構成 |年度|月|部署コード|商品コード|金額|累計金額| ■抽出結果の内容 |2010|01|AAA|001|4000|6000| |2010|02|AAA|001|2000|6000| |2010|02|BBB|003|4000|4000| |2010|01|CCC|001|5000|11000| |2010|03|CCC|001|6000|11000| GROUP BYと別の集計単位で列を作ることが可能か、 可能であればどのようなSQLを書くべきか、 というところを教えてください。
Oracle10gを使用しています。 SQLで、ASCII ( string ) でASCIIコードが取得できるように、 JISコードを取得する方法はないのでしょうか。
オラクルマスターの資格取得を目的として、Oracle 11g の環境を構築したいと考えています。 WinXP Homeで、インストールを試みましたが失敗。VMWare上のCentOSでも失敗してしまいました。 できれば、Oracle 11gがインストールされた仮想マシンなどが配布されていると嬉しいのですが、そういったものは手に入りませんでしょうか？？ 無理であれば、お金をかけずにWinXPか仮想マシン上で11gの環境を構築したいと思います。 何度も失敗していますので、確実に構築できる方法があれば、教えていただけますでしょうか？？ よろしくお願いいたします。
お世話になっております。 今回新たにWEBアプリケーションを作成する予定です。 その際、そのアプリケーションに対しては MySQL か PostgreSQL を利用いたします。 ただ、マスタ関連のデータが、別の Oracle(10g) サーバに格納されています。 この新規のアプリケーションから、Oracle への DBLink を作成し、 選択、登録、更新、削除、の操作は可能でしょうか？ MySQL や PostgreSQL は最新の安定バージョンとなるかと思います。 少し調べてみたところ、MySQL や PostgreSQL に DBLink の機能があるみたいですが、 どれほど実用的でしょうか？ こういった点ができない、または困るなどもありましたら教えていただけますでしょうか？ また、MｙSQL や PostgreSQL から Oracle へ DBLink する場合、 Oracle のライセンスなどが必要になったりはしないでしょうか？ (※単なるクライアント扱い？） もし、ご存知のかたがいらっしゃいましたらご教示よろしくお願いいたします。
Oracle10gはOSがcentOSでも動きますか。
お世話になっております。 以下の場合どのようにSQLを書くかで困っています。 どうかお願いします。 DBはOracle10gです。 テーブルA 区分　　　integer コード　　 integer（上記区分が0の場合は得意先のコード、1の場合は商品のコードが登録されています。） 得意先マスタ コード integer 名称 varchar 商品マスタ コード integer 名称 varchar 上記のテーブルAを読んで、 区分が0の場合は得意先マスタの名称 区分が1の場合は商品マスタの名称 をもってきたいのですがやり方がわかりません。 どうかよろしくお願いします。
お世話になります。 開発経験がOracleの9i以降からとまっているのですが、 9i当時、外部結合する際、 SELECT A.ColumnA2, B.ColumnB2, FROM A,B WHERE A.ColumnA1 = B.ColumnB1(+) などと、(+)や(-)で実装できていたと思いますが、 10/11でも同様の記述方法で取得することが可能でしょうか？ よろしくお願いいたします。
オラクルのヴァージョン違いでデータを移すにはどのようにしたらいいですか？ あるＤＢを運用しています。（Ｗｉｎ２００３） 2台あって一台のヴァージョンは8iでもう一つは9iです。 会社の情シスから古いから新しいヴァージョンにしなさいと催促されています。 特にアプリも変える気がないのでオラクルのヴァージョンアップを実施しようと策を練っていますが、どうせなら11ｇかなと思っていますが情シスから茶々が入り新しすぎて不安だから10ｇにしなさいと言われています。 そこでなのですがヴァージョンアップで気を付けなければいけないこととデータの移行はどのようにすればいいでしょうか？
Excelのハイパーリンク情報を基にオラクルＤＢよりファイルデータをダウンロードするシステムがあります。 画像のような構成なのですがとてつもなく使われていて最近セッションがマジハンパない状態になります。 上限値を超えて困っています。 接続したら瞬時に切れるようなタイムアウト設定にすればいいじゃんと言われそうですがＷＥＢから使うシステムの補助システムなのですぐ切れたら使い物になりません。 そこで画像の？の部分にバッファとなるアプリをなんとかできないものかと思っていますがいい案はないでしょうか？
以前データ差分の抽出で　Minus 関数を使うと差分が取れることを教えていただいたのですが 抽出に条件が付く場合を教えてください。 Table1 には　営業所、支店、コード、品番が Table2 にも　営業所、支店、コード、品番が入っており Table1.営業所=Table2.営業所 and Table1.支店=Table2.支店 and Table1.コード=Table2.コード で Table1にあってTable2にない品番を取り出したいのです。 お願いいたします。 TABLE 1 営業所支店コード品番 東京世田谷0010010 東京世田谷0010020 東京世田谷0010030 東京世田谷0010040 東京世田谷0010050 東京新宿0010010 東京新宿0020030 大阪難波0010010 大阪難波0020010 大阪難波0030020 大阪難波0040030 TABLE 2 営業所支店コード品番 東京世田谷0010010 東京世田谷0010030 東京世田谷0010050 東京新宿0010010 東京新宿0020030 大阪難波0010010 大阪難波0020010 大阪難波0030020 大阪難波0040030 結果 営業所支店コード品番 東京世田谷0010020 東京世田谷0010040
テーブルA、B、Cとも共通して以下のカラムを持っています。 SAGYO_NO （VARCHAR) SAGYO_DT（DATE型） TANTO （VARCHAR) NAIYO（VARCHAR) SAGYO_NOを指定したA、B、Cのうちで(WHERE SAGYO_NO = '01')、 SAGYO_DTが最新のものの、 SAGYO_DT、TANTO、NAIYOを一回のSQLで取得したいのですが、 うまくできなくて困っています。 いい案がありましたらお願いします。 （例） テーブルA 01 2011/03/01 AAA BBB 01 2011/03/08 CCC DDD テーブルB 01 2011/03/05 EEE FFF テーブルC 01 2011/03/02 GGG HHH ⇒上記の場合、テーブルAの'2011/03/08','CCC','DDD'を取得したいです。 よろしくお願いいたします。
ＤＢ初心者です。 オラクルＤＢでエクセルの置換処理のようなことをＤＢ上で任意のタイミングでやりたい のですがどのような方法がありますでしょうか？ ○詳細内容 変換前(※コードといいながら名称が入っている) ＴＢＬ　製造 日付　　　　　　　　　コード　　　　　　　　　　数量　　　 3/1　　　　　　　　　　品目Ａ　　　　　　　　　　５０　 ＴＢＬ　品目 コード 名前 10001　　　　　品目Ａ 10002　　　　　品目Ａ　 -------->製造ＴＢＬのコードと品目ＴＢＬ名称が同じ物を抽出し、 10003　　　　　品目Ａ　　　　　　　　 品目ＴＢＬのコードのMAXの値に変換 10004　　　　 品目Ｂ 変換後 ＴＢＬ　製造 日付　　　　　　　　　コード　　　　　　　　　　数量　　　 3/1　　　　　　　　　　10003　　　　　　　　　　５０　
お世話になります。 現在、Visual Basic 6.0 にて 開発をおこなっております。 下記内容で DBからデータを取得し、スプレッドシート（GrapeCity社の製品）に データを表示させる必要があるのですが、 実現方法がよくわからず、非常に困っています。 ・スプレッドシートに取得データを表示する際、 すべての行において データがNULLの列に関しては、 その列自体を表示せず、その次の列を前につめて表示させる まず、上記を実現しようとする場合、 1. データ取得時のSQL文にて、上記内容を満たすようなデータを 取得する 2. 全レコードを取得後、Visual Basic側で構造体に格納した各列の値を 保持した変数の中身をひとつひとつNULLかどうかチェックをする の２つの方法を考えているのですが、1回で条件を満たすようなSQL文が 作成可能なのかどうかも、まだはっきりしていません。 また、上記１、２のどちらがより良い方法なのかも、よくわかりません。 （あるいは、それ以外の方法があれば、それをぜひ知りたいのですが、） どなたか、大変申し訳ないのですが、ご教授願えますか？
Oracleのテーブルを作るのに、ある列を自動で「全体の通し番号」みたいなユニーク（一意）な番号を振りたいく、 シーケンス(sequence)を作成しテーブルを作ろうとしているのですがうまくいきません。 どこがわるいのでしょうか。 create sequence "yamaaf_seq"; CREATE TABLE TBL_AFFILIATE_SESS( UNIQ_ID NUMBER(11,0) DEFAULT nextval('yamaaf_seq') NOT NULL, ORG_CODE VARCHAR2(64) NOT NULL, primary key("UNIQ_ID"));
soralisにオラクルをインストールしたサーバがあります。 コンソールから sqlplus接続　→　select文発行　→　sqlplusから抜ける といった動作を１命令でできないでしょうか？ できるらしいと聞いたのですが、調べてもイマイチ見つかりません。 これを発行した後、戻り値を調べて、 正常にデータベースに接続できたか確認するつもりなのですが・・・ 初心者なので、なるべく詳しく教えてください。 お願いします。
Oracle11gでSQL文の質問 merge文を３つ以上の表を使いたいのですが mergeの実行で表Aに表B,表Cの値の挿入はできますか？ mergeは表Aと表Bの２つの表の間のやり取りだけのでしょうか？ よろしくおねがいします
Windows2000サーバにOracle8iをインストールしています。 クライアントからサーバに対して オラクルのインスタンスとリスナーが起動していることを確認したい場合、 oracle.exe と listener.exe が起動していることを確認できれば 「OK」と言えますか？ 「データベースに接続できる状態」と言えるでしょうか？ 毎日の定例作業として行う予定です。 あまりオラクルに詳しくないので、 知識のある方、ぜひ教えてください。
お世話になります。 前提として 次のようなctlファイルがあります。 OPTIONS(ROWS=500,BINDSIZE=700000) LOAD DATA INFILE '/home/oracle/TEST/00_BIN/YOSAN.csv' TRUNCATE INTO TABLE MT_YOSAN ( 日付 TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"', 店舗コード TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"', 予算 TERMINATED BY ',' NULLIF 昨年実績=BLANKS, 昨年実績 NULLIF 昨年実績=BLANKS ) ロード対象のCSVですが、次のようなROWデータになります。 "2011/02/22","01010",30000,25000 テーブル仕様は次のようになっています。 日付 　　　　　VARCHAR2(20)　NOT　NULL 店舗コード　　VARCHAR2(20)　NOT NULL 予算　　　　　 NUMBER(10) 昨年実績　　 NUMBER(10) これを実行した際に昨年実績のカラムに25000の先頭の2しかロードされません。 ログファイルを開くと他のLenは*に対して最後の昨年実績列は１が設定されていました。 この事象の原因と対処法がわかる方がいればご教示いただきたく存じます。 よろしくお願いいたします。 またsqlldr実行時は引数controlとlogのみ指定しています。
oracle database の初心者です。 先週から買ってきた本に付録としてついていた Oracle Database 11g の30日間トライアル版を使って勉強中なのですが、 今日になってユーザー名、パスワードを入力すると ERROR: ORA-01033 ORALCE initialization or shutdown in progress プロセスID： 0 セッションID： 0、 シリアル番号： 0 となってログインできなくなったので、いろいろ調べたのですが全く分かりません。 解決方法など出来るだけわかり易くご回答のほうよろしくお願い致します。
ORACLEを使用していますが、 主キーに重複があるレコードの登録は可能でしょうか？ ちなみにＤＤＬには、「ONSTRAINT インデックス名 PRIMARY KEY」の構文を記述しています。 また、登録できないとすれば、どのようにＤＤＬを修正すれば良いでしょうか？
条件２つの場合updateがエラーになるのですが 下記ＳＱＬではだめなのでしょうか。 table_AのAdd=table_B.Add で table_B.name=3 の時 table_A.name=2 UPDATE table_A SET table_A.name=2 WHERE　 table_A.Add=table_B.Add AND　 table_B.name=3　->Error
下記のようなデータがあります。 col1 col2 ========== 001 AAA 001 BBB 001 CCC 002 AAA 002 CCC 003 BBB 003 CCC 004 AAA col2 にBBB を持たないレコードを抽出したいのですが どのようにSQLを記述すればよいかご教授ください。 得たい結果 002 004 どうぞよろしくお願いいたします。
ある海外製品のパッケージをインストールしています。Oracle 11gR2をWindows上で使用しています。 パッケージインストール時に、テーブル作成文の他、サンプルデータのinsertスクリプトが付属しているので実行したのですが、「SQLエラー: ORA-01843: 指定した月が無効です。」というエラーになってしまいます。カラムはDATEで定義されていて、挿入データが以下のようになっています。 TO_DATE('28-Jul-1948 12:00:00 AM', 'dd-Mon-yyyy HH:MI:SS AM') OSやOracleデータベースが英語の環境ではこのエラーは発生しなかったので、日本語環境で発生しているものと思われます（キャラクタセットはJA16SJISTILDEです）が、日本語環境にも問題なく上記サンプルデータを挿入するには、スクリプトをどのように修正するとよいでしょうか？ご存じの方、教えてください。宜しくお願いします。
テーブル１のフィールドa テーブル2のフィールドa を比較してテーブル１のフィールドaの中にテーブル2のフィールドaと中と重ならないものをだしたいのですが、ＳＱＬはどう書けばいいでしょうか。 （例題は数値ですが実際は文字列です） テーブル１ A 1 2 3 4 5 6 7 8 9 10 テーブル2 A 1 2 3 4 5 結果 6 7 8 9 10
　現在PostgreSQL上にあるDBをOracleに移行しようとしていますが、Oracleに詳しくないためご教示いただきたく存じます。 　2000万行ほどの売り上げテーブルがあります。 　そこである商品やジャンルで絞り込みをおこない（または全く絞り込みをせず）最近20件を検索したいと思っています。（正確に言うと、次ページ、前ページなどでその前後を取得する機能も必要です。） 　で、この最近の20件、というところで躓いています。 　いろいろと検索してみると select * from ( select 検索項目... from sold where 絞り込み条件 order by sold_date desc ) where rownum<20; なんていう例が載っていたりするのですが、これだと絞り込みがない場合に内側のselect文で2000万件なめてしまうので論外です。（試しにやってみたら30秒くらいかかりました） 　別段レアなケースでもなく、こういう要件はとても一般的だと思うのですが、Oracleではどのように実装するのが一般的なのでしょうか。 　よろしくお願いいたします。
Oracle10gを使っています OracleTextの索引はレコードの挿入や更新では自動的に更新されないとのことですが、それではどのタイミングで更新するのが適当なのでしょうか？ サーバーの性能にも左右されるのでしょうが、できればレコードの挿入等の度に索引の再構築をしたいのですがパフォーマンスに問題ありでしょうか。 ちなみに、テーブルは１つ、索引をつけているカラムは６つ、それぞれ５００文字程度の日本語、１時間に10件程度のレコード挿入です。挿入のたびに BEGIN CTX_DDL.sync_index('索引名'); END; を実行します。 また、再構築が同時に発生した場合はなにが起こるのでしょうか。 分かりにくい文章で申し訳ございません。テスト環境がないため本番環境で開発しているので自分で試してみることができず困っています。よろしくお願いします。
お世話になります。 WIN７　Oracle11g　の環境で dim rs as new adodb.recordset sql = "select max(sal) from file_name where pcname= '" & PCN & "'" rs.open sql,cn,adopenstatic,adlockoptimistic を実行すると ora-00937　のエラーになってしまいます。 oracle9iでは、エラーにならなかったのですが、なにか変ったのでしょうか。 どなたかご教授頂ければ助かります。
データベースで「ＢＥＧＩＮ」、「CREATE_FUNCTION」おかあると思いますが何ができるのでしょうか？ ＳＱＬファイルとかに記述するような感じですか？ 例えば上記のものを使ってシステム日付を取得してＳＱＬを発行して得たデータのファイル名に日付を持たすなんていうこともできますでしょうか？
Win7 64bitにOracle11g64bit版をインストールしています。 32bitアプリケーションからODBC経由で接続しようとすると、 Microsoftデータリンクエラー [Microsoft][ODBC Driver Manager] 指定されたDSNには、ドライバーとアプリケーションとのアーキテクチャの不一致が含まれています というエラーメッセージが出力されて接続することができません。 32bitアプリケーションからODBC経由で64bitのOracleサーバーに接続することはできないのでしょうか。 何か回避策があれば教えてください。よろしくお願いいたします。
oracleのsql文の取得制限でrownumがありますがrownumは何順でデータを取得するのでしょうか
商用用のLinuxでOracle RACにてOracleを負荷分散する場合最大何台サーバーを並列に繋ぐことができるのでしょうか。
以下のSQLを実行した場合、レコードを1件取得して欲しいのですが、 なぜか上手く取得できません。 ご存知の方がいらっしゃいましたら、教えてください。 -- SQL1 --------------------------------------------------- select 　　MAIN.MAIN_NAME, 　　nvl(SUB1.CODE is NULL, 0) as SUB_CODE1, 　　nvl(SUB2.CODE is NULL, 0) as SUB_CODE2 from 　　MAIN_TABLE MAIN 　　　left join SUB_TABLE SUB1 on MAIN.CODE = SUB1.CODE 　　　　　　　　　　　　　　　　　　　and SUB1.ZYOUKEN = '1'　　　　(1) 　　　left join SUB_TABLE SUB2 on MAIN.CODE = SUB2.CODE 　　　　　　　　　　　　　　　　　　　and SUB2.ZYOUKEN = ''　　　　　(2) where 　　MAIN.CODE = 'XXX' ----------------------------------------------------------- 質問１． どうも、(2)の部分を空文字(?)ではなく何か値を入れると正常に1件 取得できるようなのですが、なぜ外部結合しているにもかかわらず 0件になってしまうのかが良く分かりません。 質問２． やはり条件に空文字を使用するのはよろしくないでしょうか？ ※補足 念のため、以下のSQLを実行したところ、こちらは問題なく1件取得 できているので、抽出条件は間違っていないです。 -- SQL2 --------------------------------------------------- select 　　MAIN.MAIN_NAME from 　　MAIN_TABLE MAIN where 　　MAIN.CODE = 'XXX' ----------------------------------------------------------- 以上です。宜しくお願いします。
SQL*Loaderのコントロールファイル内のパラメータ設定についてですが、 ネットで調べた結果 ロード方法をAPPENDとすると既存データがある場合は新しい行として追加とあるのですが、 これはテーブルのPKが重複していても新しく行がついかされるということでしょうか? 逆にREPLACEはPKが重複しているデータに上書きされるということでしょうか? よろしくお願いいたします。
いつもお世話になっております。 Oracle１１ｇと.NET Ｃ＃で開発をしている初心者です。 下記の様なInsertの構文を書きました。 結果、c_1にInsertするレコードが無かった場合、 out_val := 0； としたいのですが、 その書き方が分かりません。 色々試したのですが、 出来ませんでした。 本当に初歩的な質問なんだと思うのですが、 ご教授頂きたく、宜しくお願い致します。 　　　　　　記 create or replace procedure dbInsD売上予測 ( out_valoutpls_integer ) as CURSOR c_1 is select 注文NO,受注NO,売上日,品番,数量,登録日時,登録者 FROM D売上台帳 a WHERE NOT EXISTS(SELECT * FROM D売上予測 b WHERE a.受注NO = b.受注NO); begin for r_emp in c_1 loop if c_1%FOUND then INSERT INTO D売上予測 ( 注文NO,受注NO,売上日,品番,数量,登録日時,登録者 ) values( r_emp.注文NO,r_emp.受注NO,r_emp.売上日, r_emp.品番,r_emp.数量,r_emp.登録日時,r_emp.登録者 ) ; end if; end loop; out_val := sql%rowcount; end;
現在、ShellでSQL*PLUSを起動し、 テーブルをTruncateしようとしているのですが、 直接コマンドで実行すると可能なんですが、Shellで実行すると接続してすぐに切断されSQLが実行されません。 <Souce> ora_pass=TEST/TEST@DB log_pth=/home/oracle/TEST/04_log/ scrLOG=${log_pth}SHELL.log echo "S" sqlplus $ora_pass <<EOF > $scrLOG truncate table W_BSL_INV; EOF echo "E" ちなみにSelect文はｓｃrLOGに正常に出力されます。
いつもお世話になっております。 Oracle１１ｇとＣ＃.NETで開発している初心者です。 ストアドプロシージャによるテーブルからテーブルへの インサートがうまくいかず悪戦苦闘しております。 下記の様な記述をしており、コンパイルは通ったのですが、 D売上見通台帳のIDをプライマリーキーにしており、 実際.NETで動かしてみると、一意制約違反でエラーとなって しまいます。 どなたかご親切な方ご教授頂きたく、 宜しくお願い申し上げます。 　　　　　　記 create or replace procedure dbInsert台帳追加 ( out_valoutpls_integer ) as cursor cur is SELECT 注文主,受注NO,売上日,品番,品名,数量, 登録日時,登録者 FROM D売上台帳 WHERE 売上日 = TO_CHAR(sysdate,'YYYY/MM/DD') ; cur_rec cur%rowtype; begin open cur; loop fetch cur into cur_rec; exit when cur%notfound; INSERT INTO D売上見通台帳 ( ID,注文主,受注NO,売上日,品番,品名,数量, 登録日時,登録者,更新日時,更新者 ) VALUES ( seqD売上台帳ID.nextval,cur_rec.注文主,cur_rec.受注NO,cur_rec.品番,cur_rec.品名, cur_rec.数量,cur_rec.登録日時,cur_rec.登録者,cur_rec.更新日時,cur_rec.更新者 ) ; end loop; close cur; out_val := sql%rowcount; end;
仕事の関係で、テーブル定義の際にユニークインデックスをどの列の組み合わせにするのか考える必要があるのですが、今までユニークインデックスの存在自体知らず、困っています。 自分自身でネット等で調べた結果以下のことは理解できました。 　１．ユニークインデックスで指定された列は値が一意でなければならない。 　２．主キーの列にはNULL値は不可だが、ユニークインデックスの列はNULL値も可。 　３．主キーは一つのテーブルにつき、一つしか設定できないが、 　　　ユニークインデックスは複数設定できる。（同じ列は指定できない） 　４．主キー設定時、実は暗黙的にユニークインデックスとNOT NULL制約が作成されている。 ここまでは分かったのですが、主キーとは別で、明示的にユニークインデックスを指定する必要性とはなんなのでしょうか？ 主キーとは別で明示的に指定した方が良い場合と、その実例をどなたか教えて頂けないでしょうか？ よろしくお願いします。
内部SQLで使用している「employee」表を「emp」とし、内部SQL実行結果を「emp」としています。 この場合、大外のSQLで使用している「emp」は、「emploheeを指すemp」か、「内部SQL実行結果を指すemp」なのかわかりません。 ご教授よろしくお願いします。 select emp.name, 　 emp.year, emp.day from (select name, year, day from employee emp where ～ GROUP BY name, year, day) emp where ～ GROUP BY emp.name, emp.year, emp.da /
VIEW同士をUNIONすることは可能でしょうか? というより、実行してみたのですが、データ型が一致していない列があり出来ませんでした。 View作成時にのデータ型を設定する方法などはあるのでしょうか? 識者の方がいればご教示いただきたいです。 よろしくお願いいたします。
いつもお世話になっています マテリアライズドビューを作成しました。 抽出等は正しく動作しているのですが、Ｋｅｙ(TBLMV_TENCD,TBLMV_KAICD)に設定した項目以外は NOTNULLが”YES”になってしまっています。 以下の処理をどのように変更すればよいか、教えて頂けないでしょうか？ よろしくお願いします。 （ORACLE10を使用しています） （TBLA、TBLB、TBLC共に全項目NOTNULL＝"NO"になっております） ※ALTERで行うような気がするのですが、もしそうだとしてもどのように変更すればいいのか検討がつきません（新規にALTER文を追加するなら出来そうですが、まとめることが出来ないかと思い質問させて頂きました） CREATE MATERIALIZED VIEW TBLMV BUILD IMMEDIATE USING NO INDEX REFRESH FORCE ON DEMAND AS SELECT TBLA_TENCD AS TBLMV_TENCD , TBLA_KAICD AS TBLMV_KAICD , TBLA_KINGAKU AS TBLMV_KINGAKU, ※NOT Null="YES"→"NO"にしたい TBLA_DATE AS TBLMV_DATE ※NOT Null="YES"→"NO"にしたい FROM TBLA LEFT JOIN TBLC ON TBLA_KAICD = TBLC_KAICD WHERE ・・・・・ UNION ALL SELECT TBLB_TENCD , TBLB_KAICD , TBLB_KINGAKU, TBLB_DATE FROM TBLB LEFT JOIN TBLC ON TBLB_KAICD = TBLC_KAICD WHERE ・・・・・ ; ALTER TABLE TBLMV ADD CONSTRAINT TBLMV_P01 PRIMARY KEY ( TBLMV_TENCD, TBLMV_KAICD ) USING INDEX STORAGE ( INITIAL 1M NEXT 1M MINEXTENTS 1 MAXEXTENTS 10) ;
例えば、下記のようなデータがあるとします。 |店舗CD|　|在庫数| 　01001　　　　1　　 　10001　　　　2 このデータをCASE文で店舗CDがLIKE '0*'のときにはas店舗在庫数へ それ以外の場合にはas倉庫在庫数へ振分けを行いたいですが... 具体的には下記のようなイメージになります。 |店舗CD|　|店舗在庫数|　|倉庫在庫数| 　01001　　　　　　1　　　　　　　　0 　10001　　　　　　0　　　　　　　　2 下記が自分で記述した内容です。 SELECT CASE WHEN MAIN.店舗コード LIKE '0*' THEN MAIN.在庫数 　　　 ELSE 0 END as 店舗在庫数, CASE WHEN MAIN.店舗コード NOT LIKE '0*' THEN MAIN.在庫数 ELSE 0 END 倉庫在庫数 FROM TBL_A これで実行するとすべての在庫が倉庫在庫数へ振り分けられます。 どうすればイメージどおり抽出できるでしょうか? 識者の方がいれば是非ご教示いただきたいです。 よろしくお願いいたします。
Visual Studio2010で、 C#、Windowsアプリケーションで、 Oracleに接続したいと考えています。 ------------------------------- private void button1_Click(object sender, EventArgs e) { string constr = "User Id=scott;Password=tiger;data source=orcl"; OracleConnection con = new OracleConnection(constr); con.Open(); 　MessageBox.Show("接続に成功しました"); } ------------------------------- ■環境 ・OS・・Windows7(64bit) ・Visual Studio2010 Express Edition ・Oracle11g（お試し版） ・グローバル・データベース名：orcl ・データベース・パスワード：manager ------------------------------------- 現状、デバッグ実行すると、 con.Open(); で、「OracleExceptionはハンドルされませんでした。 ORA-12154:TNS:指定された接続識別子を解決できませんでした。」 と表示されてしまいます。 （sqlplusで、 ID・・scott PASS・・tiger で接続は出来ています。） 【サービス】 ・OracleJobSchedulerXE・・・開始（自動） ・OracleMTSRecoveryService・・・開始（自動） ・OracleServiceXE・・・開始（自動） ・OracleXEClrAgent・・・開始（自動） ・OracleXETNSListener・・・開始（自動） *********************************************** 色々と試したのですが、 解決に至りません。 ご存知の方、宜しくお願い致します。
oracle10gをインストールしましたが、 接続できません。現状は、以下のとおりです。 【インストール済み】 ・Oracle Database 10g Express Edition 【サービス】 ・OracleJobSchedulerXE・・・開始（自動） ・OracleMTSRecoveryService・・・開始（自動） ・OracleServiceXE・・・開始（自動） ・OracleXEClrAgent・・・開始（自動） ・OracleXETNSListener・・・開始（自動） ------------------------------------------- 「データベースのホームページに移動」にアクセスしたいです。 http://localhost:8080/apex (127.0.0.1にしてもダメでした。） どうすればよいでしょうか？ 以上、宜しくお願い致します。
お世話になっております。 Oracle初心者です。 下記(1)～(3)までの内容を経て(4)のSELECT文が出来る様に ＦＲＯＭ句や副問い合わせを考えていたのですが、 私にはまだ出来ませんでした。 どなたかご親切な方、ご教示頂きたく宜しくお願い致します。 　　　　　　　　　記 (1)select ID,入庫数 from 入庫台帳 group by ID,入庫数 (2)select ID,出庫数 from 出庫台帳 group by ID,出庫数 (3)現在庫数＝入庫数－出庫数 （入庫台帳のID＝出庫台帳のID） (4)SELECT ID,品番,品名,現在庫数
ローカルホストから、他のマスタDBにDBリンクを作成しました。 しかし、DBリンクは作成できなのにいざ参照しに行くと下記のエラーが出ます。 select * from Tablename@Linkname ORA-01017: ユーザー名/パスワードが無効です。ログオンは拒否されました。 どうしてでしょうか、他のサイトにはこれで参照できるといっていたのですが... また、違う質問になりますがこれで参照しにいけるなら なんでSnapshotやマテリアライズドビューなどが存在しているのでしょうか？ 初歩的な質問ですみませんがどなたか教えてください。
SQL*LoaderでCSVデータをロードする時に以下のようなデータの場合 "2010年","A/W","01","TOP","02","KNIT","007","長袖","00","無地","01:TOP","無地",,1,689,0,0,0,0,"P","WALK IN",689 Number型(10,2)の列に最後の数値(689)が入りません。 おそらく、終端記号がないのでデータを認識できないと思うのですが、 どうにかしてロードする方法はありますか？
2010年12月からサーバ機にORACLE10ｇを入れて運用してます。先日、Windowsのアップデートを実施したところ、２日程度経過した時点で、Oracle ODBC Driverのメッセージウィンドウが表示され、「！Unable to allocate ODBCPROC structure」と表示されています。メッセージウィンドウの「ＯＫ」を何度クリックしても、直ぐに再表示され消えません。原因調査方法と対策を教えて頂きたいのですが。かなり困っています。
いつもお世話になっております。 以下のような処理を実現したいのですが、どうしてもいい方法が見つかりません。 実現するINSERT文を教えて頂けないでしょうか？ よろしくお願いいたします ー処理ー TBL_Aを１レコードづつ読み込み、グループ情報のあるVIEWよりview_GRPCD取得し、TBL_Bへ出力する。 但し、グループ情報には、以下のように同一TENCDに対して複数のグループがヒットする為、日付の降順、 グループコードの降順で一番最初にヒットしたレコードのGRPCDを採用する。 【TBL_A】 │TENCD │SYOCD │URIAGE│ ┼───┼───┼───┼ │10100 │ 0100 │1,000 │ │10200 │ 0100 │2,000 │ │10300 │ 0300 │3,000 │ │22200 │ 0200 │2,200 │ 【View】 │NO│GRPCD │TENCD │ YMD │ ┼─┼───┼───┼───┼ │01│ 010 │10100 │02/01 │ │02│ 010 │10200 │02/01 │ │03│ 010 │10300 │02/01 │ │04│ 020 │10200 │01/01 │ │05│ 030 │10100 │05/01 │→TENCD:10100はこれを採用 │06│ 030 │10300 │03/01 │→TENCD:10300はこれを採用 │07│ 040 │10100 │03/01 │ │08│ 040 │10200 │03/01 │→TENCD:10200はこれを採用 │09│ 040 │10300 │03/01 │ │10│ 050 │10400 │05/01 │ 下記のほうに記載しているＳＱＬで作成されるTBL_Bは以下のようになります 【TBL_B】(誤り) │TENCD │GRPCD │SYOCD │URIAGE│ ┼───┼───┼───┼───┼ │10100 │ 030 │ 0100 │1,000 │ │10200 │ 040 │ 0100 │2,000 │ │10300 │ 030 │ 0300 │3,000 │ 本来TBL_Bは以下のようにView上に存在しないTBL_Aのレコードでも出力させたく 以下のような結果を求めたいと思っています。 【TBL_B】(正解) │TENCD │GRPCD │SYOCD │URIAGE│ ┼───┼───┼───┼───┼ │10100 │ 030 │ 0100 │1,000 │ │10200 │ 010 │ 0100 │2,000 │ │10300 │ 010 │ 0300 │3,000 │ │22200 │ 000 │ 0200 │2,200 │※※※このレコードを作成することが出来ません※※※ ※SQLにある「NVL(View_GRPCD,0)」でVIEW上にないレコードの場合、GRPCDにゼロをセットして 　出力できるかと思ったのですが、VIEW上にないレコードは作成されませんでした。 　これを実現する方法を教えて頂きたいと思います。 ■TBL_B(誤り)は作成できるＳＱＬ CURSOR CUR_A IS SELECT TENCD,SYOCD,SUM(URIAGE) FROM TBL_A GROUP BY TENCD,SYOCD ORDER BY TENCD,SYOCD; BEGIN OPEN CUR_A; LOOP FETCH CUR_1 INTO w_TENCD, w_SYOCD, w_URI; EXIT WHEN CUR_A%NOTFOUND; INSERT INTO TBL_B( SELECT w_TENCD, NVL(View_GRPCD,0), w_SYOCD, w_URI FROM (SELECT View_TENCD,View_WRICD,View_GRPCD, RANK()　OVER(PARTITION BY View_TENCD ORDER BY View_YMD DESC, View_GRPCD DESC) w_RANK FROM View WHERE View_TENCD = w_TENCD) WHERE w_RANK = 1); END LOOP; CLOSE CUR_A;
SQL*Plusをスクリプトファイルを使って実行した際、実行SQLの出力はできないものでしょうか？ 以下のようにスクリプトファイルを使ってSQL*Plusを実行し、その結果をログファイルへ 残しています。この時ログファイルには、実行結果は出力されるのですが、実行SQLは 出力されないようです。なんとかして実行SQLと、実行結果を作業ログとして残したいと 考えているのですが、何かよい方法はないものでしょうか？ [ama@rh01 test]$ sqlplus scott/tiger@orcl @test01.sql > test01.log ■環境 Red Hat Linux 4 Oracle10g ■以下test01.sqlの中身です。 ---ここから-------------- create table ex01 ( c1 number, c2 varchar2(10), c3 varchar2(40) ); insert into ex01(c1,c2,c3) values(1,'AA1','BBB1'); select * from ex01; update ex01 set c2='aa1' where c1 =1; select * from ex01; exit; ---ここまで-------------- ■以下ログファイルの中身です。 ---ここから------------------ [ama@rh01 test]$ cat test01.log 省略 With the Partitioning, OLAP and Data Mining options に接続されました。 　　　　　　　　　　　　　　　　　　　　　　←ここにcreate文を出力したいです。 表が作成されました。 　　　　　　　　　　　　　　　　　　　　　　←ここにinsert文を出力したいです。 1行が作成されました。 　　　　　　　　　　　　　　　　　　　　　　←ここにselect文を出力したいです。 C1 　　　　　　C2 　　C3 ---------- ---------- ---------------------------------------- 1 　　　　　　　AA1 　 BBB1 　　　　　　　　　　　　　　　　　　　　　　←ここにupdate文を出力したいです。 1行が更新されました。 　　　　　　　　　　　　　　　　　　　　　　←ここにselect文を出力したいです。 C1 　　　　　C2 C3 ---------- ---------- ---------------------------------------- 1 aa1 BBB1 Oracle Database 10g Enterprise Edition Release 10.2.0.1.0 - Production With the Partitioning, OLAP and Data Mining optionsとの接続が切断されました。 [ama@rh01 test]$ -------------------ここまで--------------- どなたか良いアドバイスいただけたらと思います。 どうぞよろしくお願いします。
oracleで関数を作成してその関数で"C:¥temp"ディレクトリにあるエクセルファイルのバイナリデータをテーブルにINSERTしようとしています。 "DBMS_LOB.FILEOPEN"するさいにディレクトリもしくは、ファイルが存在しないためエラーがおきてしまい困っています。 ディレクトリもファイル名も何回もチェックしてあっていました。 またディレクトリオブジェクトの値もチェックしました。 それ以外の根本的な原因がわかりません。 ご教授の方お願いします。 また、"DBMS_LOB.FILEOPEN"関数と"BFILENAME"関数でどういったパラメータを指定すればいいかおしえてください。 よろしくお願いします。 ソースは、以下のようになります。 FUNCTION upload_attach_file_test( iv_ list_id IN VARCHAR2, --ファイルID iv_patch_file IN VARCHAR2 --ファイル名 ) RETURN NUMBER IS dst_loc BLOB; src_loc BFILE; v_amt NUMBER := dbms_lob.lobmaxsize; src_offset NUMBER := 1; dst_offset NUMBER := 1; BEGIN --ディレクトリオブジェクト取得 SELECT directory_path into lv_test FROM all_directories WHERE directory_name = 'test'; --BLOB読み込み src_loc := BFILENAME( lv_test, 'test.tmp'); DBMS_LOB.FILEOPEN(src_loc, dbms_lob.file_readonly); INSERT INTO test ( test_id, test_blob ) VALUES ( iv_list_id, empty_blob() )RETURNING test_blob INTO dst_loc; DBMS_LOB.LOADBLOBFROMFILE(dst_loc, src_loc, v_amt, dst_offset, src_offset); -- ファイルクローズ DBMS_LOB.FILECLOSEALL(); RETURN lv_test; END;
以前質問した内容と似ているのですが、 ロード元のCSV内に小数点2位までの数字が入った項目あるのですが これをNUMBER(10)のテーブルにロードするとエラーが出ます。 なので制御ファイル内のロード先列指定部分で 金額　"trunc(:金額,0)" で小数点を切り捨てようとしたところ数値が無効エラーがでます。 うまいこと小数点を省いてロードするためにはどうしたらいいですか?
",2010/11/27 16:25," このような形式の日付データをsqlldrでテーブルにインポートする際に 制御ファイル内の項目設定部分で 売上日付 "to_char(:売上日付,'YYYY/MM/DD')", とすると数値のエラーが出ます。 テーブル側の当該項目のデータ型はVARCHAR2です。 ちなみに 売上日付 "substr(:売上日付,1,10)", にすると問題なくロードできました。 が、2010/12/3のような形で丸められるため都合が悪いです。 YYYY/MM/DDでロードするにはどうしたらいいでしょうか?
いつもお世話になっています。 UPDATEの書き方について教えて下さい。 以下のようなUPDATE文を作成しました。 処理的には必要な結果を返してくれていますが、もう少しシンプルには ならないでしょうか？ UPDATE文がまだ理解出来ていないのですが、”WHERE EXISTS(”以降に 書いているＳＥＬＥＣＴ文は、ＳＥＴ文の値算出時にも同じＳＥＬＥＣＴ文を書いて いるのですが、それを代用することは出来ないのでしょうか？ （SELECTの結果をWHERE文の中で簡単に呼び出して使えないのでしょうか？） ※うまく内容が伝わってないかもしれませんが、どうぞよろしくお願いします。 ＜＜＜更新処理＞＞＞ UPDATE TBL01 SET( TBL01_MARNO, TBL01_UPDYMD )=( SELECT TBL02_MARNO, TO_NUMBER(TO_CHAR(SYSDATE,'YYYYMMDD')) FROM (SELECT TBL02_TENCD, TBL02_REN, TBL02_MARNO, TBL02_UPDKBN, RANK () OVER (PARTITION BY TBL02_TENCD, TBL02_REN ORDER BY TBL02_YMD DESC, TBL02_DAT DESC ) WRK_RANK FROM TBL02 WHERE TBL02_OKFLG = 1 ) WHERE TBL02_TENCD = TBL01_TENCD AND TBL02_REN = TBL01_REN AND WRK_RANK = 1 AND TBL02_UPDKBN = 2 ) WHERE EXISTS( SELECT 'TRUE' FROM (SELECT TBL02_TENCD, TBL02_REN, TBL02_MARNO, TBL02_UPDKBN, RANK () OVER (PARTITION BY TBL02_TENCD, TBL02_REN ORDER BY TBL02_YMD DESC, TBL02_DAT DESC ) WRK_RANK FROM TBL02 WHERE TBL02_OKFLG = 1 ) WHERE TBL02_TENCD = TBL01_TENCD AND TBL02_REN = TBL01_REN AND TBL02_UPDKBN = 2 AND WRK_RANK = 1 );
現在、oracleの学習を始めようと思い、 「oracle database 11g release1(11.1.0) for windows(30日間トライアル版）」を インストールしました。 これで、準備OKなのかとおもいましたが、 ひとつ疑問がありまして、 「oracle client」というものがあるようですが、 私がインストールしたものと何が違うのでしょうか？ 「oracle client」とはどういった時に必要ですか？ 同じくお試し版のようなものはありますでしょうか？ 又、CSEを入れるといいよと聞いた事がありまして、 ダウンロードしようと思いましたが、 windows7に対応していないようでした。 window7で利用できるもので、CSEに似たような ものはありますでしょうか？ 以上、宜しくお願いします。
DBからCSVにしてデータを取り出そうと、ネットで検索して みようみまねでやってみました。（下記の場合カンマ区切りですが） タブ区切りで整列したデータを抽出したいのですが、特に、 (4)のように隣合う項目の間がかなり離れていて見えにくい状態で CSVファイルが作成されてしまいます。 (1)のように整列した形で、タブ区切りのCSVデータを抽出するには、 どのようにしたら宜しいのでしょうか？ (2)、(3)は、試してみた実行ファイルです。 環境は、oracle10g windowsXPです。 (1)目的の結果の表示------------------------------- 653-5689　ZM05　田中太郎　YOKOHAMAS　4　4　　9　097005・・・・・ 以下試してみたbatファイルとsqlで抽出 (2)batファイル---------------------------------- sqlplus ABCD/ABCD@oracle.host1.ser @abc.sql (3)sqlファイル----------------------------------- set echo off set heading off set termout off set pause off set pagesize 0 set trimspool on set feedback off set colsep "," set term off spool hoge.txt select * from T_JUTYU; spool off exit (4)結果--------------------------------- 653-5689 ,ZM05 田中太郎 ,YOKOHAMASI 4, 4, , ,9 ,097005 , 1 ,18 , , , , , 0 ,asahi asahi ,08-12-23,08-12-23, ------------------------------------------------まで結果
について教えて下さい。 ・サインインして、 ・同意し、 ・Oracle Database 10g Release 2 (10.2.0.1) Express Edition for Microsoft Windows ・Oracle Database 10g Express Client 「OracleXEClient.exe」をクリックし保存。 ダウンロードした、ファイルをクリックしたのですが、 （アイコンは、真っ白いファイル） 「ファイルを開くプログラムの選択」ダイアログが出てしまいます。 どうすれば良いのか、教えて頂きたいです。 宜しくお願いします。
自宅のPCに、oracleから諸々、ダウンロードしたいと考えています。 まず、 「今すぐオラクルのアカウントを作成 」をクリックし、 「MyProfileユーザーの作成 」を行ったのですが、 登録できませんでした。 行った内容は以下の通りです。 アカウントを作成時、 「ユーザー名」・・・・・・・gmailのメールアドレスを入力 「パスワード」・・・・・・・・上記、gmailのパスワード 氏名や、住所など必須項目は、 任意の値を入力して、作成ボタンをクリック。 「　「Password」フィールドの検証エラーを解決してください。　」 が表示されました。 どうすれば良いのか、お教えいただきたいです。 宜しくお願い致します。
いつもお世話になっています。 以下の処理を実現するＵＰＤＡＴＥ文を教えて頂きたく、質問にあげさせて頂きました。 ※現在、処理を「実績登録用ＵＰＤＡＴＥ」と「予定登録用ＵＰＤＡＴＥ」のそれぞれ作成すれば 　いけそうなのですが、１つのＵＰＤＡＴＥ文では実現出来ないでしょうか？ 　・・・実績登録用は作成したので、最後に付けています 以上、よろしくお願いします。 【処理】 トランより店マスタの更新を行う。 ・トランの区分が”１"の場合は、店マスタの実績欄へトランの日付情報をセットする。 　※店マスタの実績日は過去３日分を累積している為、　実績２を実績３へ、実績１を実績２へ 　　移してから、トランの日付を実績１欄にセットする 　※区分”１”のレコードは、店コード毎に１件しか存在しない ・トランの区分が”２"の場合は、店マスタの予定欄へトランの日付情報をセットする。 　※店マスタの予定日は、当処理が実行される時点では既にクリアされており、毎回トランに存在する 　　直近３日分を予定欄へセットする 　※区分”２”のレコードは、店コード毎に複数件存在する） 例） トラン（キー：店ＣＤ・日付） 　店ＣＤ　日　付　区分　 ┼───┼───┼──┼ │ 0001 │01/10 │ 1 │→マスタの実績１に登録されます │ 0001 │01/15 │ 2 │ │ 0002 │01/20 │ 2 │→マスタの予定１に登録されます │ 0002 │01/30 │ 2 │→マスタの予定２に登録されます │ 0003 │01/10 │ 1 │→マスタの実績１に登録されます │ 0005 │01/10 │ 1 │→マスタの実績１に登録されます │ 0005 │01/20 │ 2 │→マスタの予定１に登録されます │ 0005 │01/30 │ 2 │→マスタの予定２に登録されます │ 0005 │02/10 │ 2 │→マスタの予定３に登録されます │ 0005 │02/20 │ 2 │→マスタにはMAX３件までしか登録出来ないのでスキップ │ 0005 │03/01 │ 2 │→マスタにはMAX３件までしか登録出来ないのでスキップ マスタ（キー：店ＣＤ） 　店ＣＤ│実績１　実績２　実績３│予定１　予定２　予定３│ ┼───┼───┼───┼───┼───┼───┼───┼ │ 0001 │01/05 │12/30 │12/25 │ │ │ │ │ 0002 │12/30 │12/15 │11/30 │ │ │ │ │ 0003 │01/01 │12/20 │12/10 │ │ │ │ │ 0004 │01/07 │01/06 │01/05 │　　　│ │ │ │ 0005 │01/01 │12/20 │12/10 │ │ │ │ 【希望する結果】 　店ＣＤ│実績１　実績２　実績３│予定１　予定２　予定３│ ┼───┼───┼───┼───┼───┼───┼───┼ │ 0001 │01/10 │01/05 │12/30 │01/15 │ │ │ │ 0002 │12/30 │12/15 │11/30 │01/20 │01/30 │ │ │ 0003 │01/10 │01/01 │12/20 │01/07 │ │ │ │ 0004 │01/07 │01/06 │01/05 │　　　│ │ │ │ 0005 │01/10 │01/01 │12/20 │01/20 │01/30 │02/10 │ ■実績更新用ＵＰＤＡＴＥ UPDATE マスタ SET ( 実績１,実績２,実績３ )=( SELECT 日付,MAX(TRN.実績１),MAX(TRN.実績２),MAX(TRN.実績３) FROM マスタ LEFT JOIN トラン TRN ON 店ＣＤ = 店ＣＤ WHERE 区分 = 1 GROUP BY トラン.店ＣＤ, トラン日付) WHERE EXISTS( SELECT 'TRUE' FROM マスタ WHERE マスタ.店ＣＤ = トラン.店ＣＤ AND マスタ.日付　 = トラン.日付 AND トラン.店ＣＤ = 1 );
いつもお世話になっております。 ビューについて、教えて下さい。 以下のビュー「ＡＢＶＷ」を作成しましたが、ＴＢＬＡやＴＢＬＢの内容が変更された場合、 ビュー上のデータは自動で置き換わるのでしょうか？ CREATE　VIEW ＡＢＶＷ 　SELECT * FROM ＴＢＬＡ UNION ALL SELECT * FROM TBLB 以上、よろしくお願いします。 ※いろいろなサイトではマテビューはリフレッシュ機能のようなものがあると書かれており、 　マテビューを作成しようとしたのですが、ＴＢＬＡ／ＴＢＬＢは”キーなし”が原因なのかは 　わからないのですが、うまく作成できず、普通のビューで行うことにしました。
明けましておめでとうございます。本年もよろしくお願いします。 覚えたてのRANK関数を使って以下の処理を実現したいのですが、うまくいきません。 エラー”ORA-01427: 単一行副問合せにより2つ以上の行が戻されます”が出てしまいます。 どのように対処すれば良いか、教えて頂けないでしょうか？ ※SQL文は最後尾に記載しています。INSERT文の方は、うまくいってます(2000文字越えのため 　ＩＮＳＥＲＴ文は載せていません） 　UPDATEの方は、UPDATE文を除いてSELECT文では店コードは各１件しか表示されないのですが・・・ また、ＳＱＬ文も長々となってしまい、後々メンテ時には苦労しそうなので、RANK文以外に 何かいい案があれば教えて頂きたいと思います。 ※マージは使用しない方針らしいので、それ以外で何かないでしょうか・・ 以上、よろしくお願いします。 【処理】 トランより抽出したレコードの店ＣＤより、マスタのデータを更新する。 存在しない店ＣＤの場合、追加を行う。 ただし 　トラン上に同一店ＣＤのレコードが複数存在する場合は、登録日の新しいもの優先する。 　登録日が同じ場合は、登録者の大きい方を対象とする。 　登録日、登録者ともに同じ場合は、連番の小さい方を優先する 例） トラン（キー：日付・連番） 　日　付　連番　登録日　登録者　店ＣＤ　データ ┼───┼──┼───┼───┼───┼───┼ │12/10 │001 │12/09 │ 80 │ 0001 │DATA-A│ │12/10 │002 │12/10 │ 10 │ 0001 │DATA-B│→登録日が新しい方を優先 │12/10 │003 │12/10 │ 10 │ 0003 │DATA-C│ │12/10 │004 │12/10 │ 50 │ 0005 │DATA-D│ │12/10 │005 │12/10 │ 80 │ 0005 │DATA-E│→登録日が同じ場合、登録者の大きい方を優先 │12/10 │006 │12/10 │ 20 │ 0005 │DATA-F│ │12/10 │007 │12/10 │ 10 │ 0006 │DATA-G│→登録日、登録者が同じ場合、連番の小さい方を優先 │12/10 │008 │12/10 │ 10 │ 0006 │DATA-H│ マスタ（キー：店ＣＤ） 　店ＣＤ　データ ┼───┼───┼ │ 0001 │DATA-Z│ │ 0002 │DATA-Y│ │ 0004 │DATA-W│ │ 0005 │DATA-V│ │ 0006 │DATA-R│ 【結果】 マスタ（キー：店ＣＤ） 　店ＣＤ　データ ┼───┼───┼ │ 0001 │DATA-A│→更新 │ 0002 │DATA-Y│ │ 0003 │DATA-C│→追加 │ 0004 │DATA-W│ │ 0005 │DATA-E│→更新 │ 0006 │DATA-R│→追加 ■更新用のＳＱＬ 　UPDATE マスタ SET( データ )=( SELECT データ FROM (SELECT * FROM (SELECT RANK() OVER(PARTITION BY 店ＣＤ ORDER BY 登録日 DESC, 登録者 DESC, 連番 ) wRANK, 店ＣＤ, データ FROM トラン WHERE EXISTS(SELECT * FROM マスタ WHERE トラン.店ＣＤ=マスタ.店ＣＤ) ) WHERE wRANK = 1 ) );
お世話になります。 ＳＱＬ初心者です。 ストアドを作成しているのですが、その中の下記の様なインサート分で、 条件を、インサートされる側の売上台帳テーブルにT受信データの受注Ｎｏが ない行のみをインサートさせたいと思っているのですが、どうやって記述 して良いかわからず悩んでいます。 どなたかご親切な方、ご教授下さいます様、宜しくお願い致します。 　　 　　　　　　　　　記 insert into 売上台帳 (支店コード,受注No,伝票No,品番,品名,数量,オーダー宛先,売上日, 住所,電話番号,更新日時,更新者) select支店コード,受注No,伝票No,品番,品名,数量,オーダー宛先,売上日, 住所,電話番号,更新日時,更新者 from T受信データ where 支店コード = 002 ;
64bitOSのwindows7 home editionのパソコンを購入してoracleの express editionで勉強をしようと考えているのですが動作環境について質問 があります。 oracle 10g express editionのサーバー/クライアントの動作環境について自分なり に調べた結果下記のページが検索されました。 http://download.oracle.com/docs/cd/B25329_01/doc/install.102/b25143/toc.htm#BABHICJH このページを見ると 32-bitのOSしか対応していないのでしょうか。 oracleは64-bitも対応したとどこかのホームページで見た覚えがあるのですが不確かです ホームページに Windows XP Professional Service Pack 1 or laterと書いてあるので windows7　home editionでも動作するでしょうか　professionalじゃないと動作しないでしょうか もしwindows7　home edtionが対応していない場合でもhome edtionの環境でも問題なく動作しますよ という経験がある方はおしえてください。 また、昔ですがoracle9iの体験版をサポートしていないＯＳ　xp home edtionで動作したとい事が以前ありましたので 質問をまとめます（クライントＰＣとサーバＰＣに） １．64bit-osは対応していますか ２．windows7 home edtionは対応していますか ３．もし1、２が製品サポート対象外であった場合でも1,2の環境で動作したよという体験段、経験が 　　あれば教えて下さい。サポートしてないけど動作するからパソコン買ったらというアドバイス等
いつもお世話になっています。 ＰＬ／ＳＱＬ、ＯＲＡＣＬＥ９．ｉ環境にて、以下の処理を実現するＳＱＬ文を教えて頂けないでしょうか。 ※目標は、１つのＳＱＬ文で何とかしたいと思っています。 どうかよろしくお願いいたします。 【例】 TBLAにTBLBの内容を追加します。 その時、同一ＩＤのレコードの場合、各ＩＤ毎のＳＥＱの最終番号を洗い出し、 最終番号＋１づつ設定します。 Ｋｅｙ：ＩＤ・ＳＥＱ TBLA ID │SEQ │DATA ──┼──┼───── 0001│001 │AA1 0001│002 │AA2 0001│003 │AA3 0002│001 │BB1 0002│005 │BB2　※削除処理の関係上、このようにＳＥＱは歯抜けになっている場合もあります 0003│003 │CC1 TBLB YMD │ ID │DATA ──┼──┼───── 1201│0001│AA5 1201│0001│AA6 1201│0001│AA7 1201│0003│CC1 1201│0004│DD1 1201│0004│DD2 【結果】 TBLA ID │SEQ │DATA ──┼──┼───── 0001│001 │AA1 0001│002 │AA2 0001│003 │AA3 0001│004 │AA5 0001│005 │AA6 0001│006 │AA7 0002│001 │BB1 0002│005 │BB2 0003│003 │CC1 0003│004 │CC1 0004│001 │DD1 0004│002 │DD2
初めて質問します。 下記のようなデータが存在します。 テーブルA NO DATE GYO 1 2010/12/01 1 1 2010/12/01 2 2 2010/12/01 1 2 2010/12/01 2 2 2010/12/01 3 3 2010/12/02 1　<= 4 2010/12/03 1 4 2010/12/03 2 上記データにて、<=の行の値を取得し変数へ代入したとします。 変数.NO =3 変数.日付 =2010/12/02 変数.GYO =1 上記、変数を元に１件前のレコードを抽出したいのですが SQL文でのいい方法がわかりません。 取得したいレコード 1 2010/12/01 1 1 2010/12/01 2 2 2010/12/01 1 2 2010/12/01 2 2 2010/12/01 3 どうかお願いいたします。
現在、夜間バッチで海外FTPサーバーからCSVファイルをDWHサーバーに格納後、 同DWHサーバー内のOracleテーブルにInsertするという処理の開発をしているのですが、 CSVの取得はDOSバッチとTeratermのマクロで取得しようと思っています。 しかし、CSVファイルのInsert処理はPL/SQLで開発を行おうと考えています。 それは、Insert後にそのテーブルと別サーバーのOracleテーブルを使用してデータの加工を行い、 その結果をDWHテーブルにロードしなければいけないからです。 ちなみに、今まではVBしか触ったことしかなくPL/SQLやバッチの作成はは初めてです。 そこで質問なのですが、PL/SQLで他のサーバーのテーブルとリレーションは出来るのでしょうか? (VBAでは1つのサーバーにしか同時接続できなかったため) またその場合のフローチャートのイメージが出来ないのですが、箇条書き程度で結構ですので教えていただけないでしょうか?(どこでストアドプロシージャに処理が移行するのかなど....) 長い文章でわかりにくいと思いますが、識者の方がいれば教えていただければ幸いです。
SEでDB系をやりたく、「Oracle Bronze １１ｇ」を取得したいのですが、汎用系SE2年ほどやり、DB系はSQLを少し研修受けたぐらいです。 最短で資格を取るのによいアドバイスありましたら、教えてください。ちなみに、1Z0-051J、1Z0-018Jを取得するつもりです。（まぁ、資格が全てではありませんが）
いままではソフト系の開発を行っていたのですが、 今度、DBまわりの業務を行うことになりテーブル設計書を作成しております。 初めてなので、社内のテーブル定義書を参照しながら作成していると 番号、列名、列ID、データ型、桁数、NULL、PKの次から【IX1】...【IX10】という項目が並んでおり Googleで調べましたがインターネットエクスチェンジの略などの基本情報は載っていましたが、 実際にテーブル設計に関係のある項目かどうかは具体的に理解することは出来ませんでした。 識者の方がいれば、テーブル設計書においてこの項目の意図することはなにかを教えていただきたいです。 以上、よろしくお願いします。
EnterpriseManagerのログで、 em-application.logのファイルサイズが大きいことと、 http-web-access-yyyy-mm-dd.log(yyyy-mm-ddは日付)ファイルが日付ごとに作成されることで、 ハードディスクがパンクしそうになっています。 ファイルサイズなどを指定することによって、 古いものから消えるような設定にできないのでしょうか？ 御存知の方、教えていただけると嬉しいです。 初心者なので、何をどうしたらいいのか分からない状態です。 使用しているDBはOracle11gです。 宜しくお願い致します。
お世話になります。 AテーブルとBテーブルを比較し、Aテーブルにしかないデータ一覧を表示するSQL文を作成しました。 SELECT * FROM Aテーブル WHERE NOT EXISTS(SELECT * FROM Bテーブル WHERE CODE=Aテーブル.CODE AND NAME=Bテーブル.NAME) 下記の場合はどのように記述すればいいのでしょうか？ 検索結果はAテーブルに存在しているが、BテーブルまたはCテーブルには存在していないデータ。 以上よろしくお願いいたします。
Oracle11g Client Release 2 (11.2)を Windows2000 sp1にインストールしたいと思っています。 しかし、Ｏｒａｃｌｅ　ＮＥＴ　11.2.0.1.0のインストールでエラーが出て進みません。 エラーは 「OUI-10150：エラー：コンポーネントＯｒａｃｌｅ　ＮＥＴ　11.2.0.1.0内の s_installTypeForCAの設定中にランタイム例外が発生しましたnull。 このコンポーネントのインストールを続行できません。 ●すべての製品のインストールを中止します。 ○このコンポーネントのインストールのみを中止します。」 となっています。 ＩＥはＩＥ６sp1です。 （sp2でないといけないかも知れませんがこれもアップデートする方法が 現在見つかりません） どなたかインストールの経験がある方、ヒントをお教え下さる方、 よろしくお願いします。
Oracleのバージョンは８、自分のＰＣには Oracle８Client（Application User） がインストールされています。 見よう見まねで制御ファイルを記述し、バッチファイルを作成したところ、 （　sqlldr USERNAME/PASSWORD@SID control= test.ctl　） コマンドプロンプトには以下のように表示されました。 「C:\SQL>sqlldr USERNAME/PASSWORD@SID control = test.ctl 'sqlldr'　は、内部コマンドまたは外部コマンド、 操作可能なプログラムまたはバッチファイルとして認識されていません。」 実行できない原因はどこにあるか教えてください。 １．そもそもSQL Loaderを利用できる環境になっていない （そのままでは使えなくて何かしら設定が必要とか） ２．コマンドがまちがっている （test.ctlのパスを記述しないとだめとか、SIDは要らないだとか） ３．制御ファイルがまちがっている どの可能性が一番高いでしょうか？
クライアント側　oracle_Client10.2.3 windows2003 サーバ側　oracle11g(64bit)Windows7(64bit) で接続したいのですが、tnsnameのhostをサーバ側のＩＰに変更しました。 tnspingでTNS_12542のエラーがでます。 リスナーの登録ができていないと思います。 仕方をおしてください。
いつもお世話になっています。 以下の処理を実現するＵＰＤＡＴＥの記述を教えて頂けないでしょうか？ よろしくお願い致します。 （ＯＲＡＣＬＥ９ｉ、ＰＬ/ＳＱＬを想定しています） 【店舗Ｔ】に、【売上Ｔ】の売上区分が”2”のレコードを対象に、予定日が指定日より近い順に 最大５日分設定する。 ※対象となる【売上Ｔ】のレコードは、予定日が指定日以降のみ対象とする ※【売上Ｔ】は各店舗毎に、０件から数十件まで存在する。 ※【店舗Ｔ】の売上履歴は毎回クリアし、売上Ｔより求める 【店舗Ｔ】 │　　│　　　売　上　予　定　情　報　　　　　│ │店舗│直近１│直近２│直近３│直近４│直近５│ ┼──┼───┼───┼───┼───┼───┼ │Ａ店│　　　│　　　│　　　│　　　│　　　│ │Ｂ店│　　　│　　　│　　　│　　　│　　　│ │Ｃ店│　　　│　　　│　　　│　　　│　　　│ │Ｄ店│　　　│　　　│　　　│　　　│　　　│ 【売上Ｔ】 │店舗│予定日│売上区分│ ┼──┼───┼────┼ │Ａ店│12/10 │　2 │○対象 │Ａ店│12/20 │　2 │○対象 │Ａ店│12/30 │　1 │※売上区分が”1”の為、対象外 │Ａ店│12/31 │　2 │○対象 │　　│　　　│　　　　│ │Ｃ店│12/01 │　2 │※指定日(12/10)より前の為、対象外 │Ｃ店│12/05 │　2 │※指定日(12/10)より前の為、対象外 │Ｃ店│12/11 │　2 │○対象 │Ｃ店│12/11 │　1 │※売上区分が”1”の為、対象外 │Ｃ店│12/15 │　2 │○対象 │Ｃ店│12/21 │　2 │○対象 │Ｃ店│12/25 │　2 │○対象 │Ｃ店│12/30 │　2 │○対象 │Ｃ店│12/31 │　2 │※５件を超えた為、対象外 │　　│　　　│　　　　│ │Ｄ店│12/15 │　1 │※売上区分が”1”の為、対象外 │Ｄ店│12/18 │　1 │※売上区分が”1”の為、対象外 ---12月11日の結果--- 【店舗Ｔ】 │　　│　　　売　上　予　定　情　報　　　　　│ │店舗│直近１│直近２│直近３│直近４│直近５│ ┼──┼───┼───┼───┼───┼───┼ │Ａ店│12/20 │12/31 │ │　　　│　　　│ │Ｂ店│　　　│　　　│　　　│　　　│　　　│ │Ｃ店│12/11 │12/15 │12/21 │12/25 │12/30 │ │Ｄ店│　　　│　　　│　　　│　　　│　　　│
いつもお世話になります。 ORACLE9i・PL/SQL上で複雑！？なUPDATE&INSERTがあり、それぞれを別々に 処理することにはしました。 ただ、UPDATE、INSERTをそれぞれ一回で完了させるＳＱＬが掛けません （私には複雑すぎるので・・） どなたか以下の処理を実現する、ＵＰＤＡＴＥ文、ＩＮＳＥＲＴ分を教えて頂けないでしょうか？ 例） 店舗別の【予算Ｔ】があります。 ・予算額欄が、ゼロの場合、ＵＰＤＡＴＥを行う 　(1)【店舗Ｍ】の「業種区分」を求める 　(2)「業務区分」より、【業務分類】の「予算Ｇ」を求める 　(3)「予算Ｇ」より【グループ別予算】の予算額を求める 　(4)求めた予算額で、【予算Ｔ】の「予算額」を更新する。 ・【予算Ｔ】に存在しない店舗の予算レコードのＩＮＳＥＲＴを行う 　(1)【予算Ｔ】に存在しない店舗の「業種区分」を【店舗Ｍ】より求める 　(2)「業種区分」より【業務分類】の「予算Ｇ」を求める 　(3)「予算Ｇ」より【グループ別予算】の予算額を求める 　(4)求めた予算額、店舗の情報を【予算Ｔ】にレコード登録する。 【予算Ｔ】 │店舗│予算額│ ┼──┼───┼ │Ａ店│ 5000 │ │Ｃ店│ 0000 │ │Ｄ店│ 3500 │ 【店舗Ｍ】 │店舗│コード│業務区分│ ┼──┼───┼────┼ │Ａ店│00001 │001 　　│ │Ｂ店│00002 │001 　　│ │Ｃ店│00003 │003　　 │ │Ｄ店│00004 │003 　　│ │Ｆ店│00030 │002 　　│ 【業務分類】 │業務区分│予算Ｇ│ ┼────┼───┼ │ 001 　│　A │ │ 002 　│　A │ │ 003 　│　B │ │ 004 　│　C │ 【グループ別予算】 │予算Ｇ│予算額│ ┼───┼───┼ │ A │10000 │ │ B │05000 │ │ C │05000 │ │ D │03000 │ ーー結果ーー ・ＵＰＤＡＴＥ 【予算Ｔ】 │店舗│予算　│ ┼──┼───┼ │Ａ店│ 5000 │ │Ｃ店│ 5000 │ │Ｄ店│ 3500 │ ・ＩＮＳＥＲＴ後（最終結果） 【予算Ｔ】 │店舗│予算　│ ┼──┼───┼ │Ａ店│ 5000 │ │Ｂ店│10000 │ │Ｃ店│ 5000 │ │Ｄ店│ 3500 │ │Ｆ店│10000 │
いつもお世話になっています。 早速ですが質問したいことがあります。 環境は、ORACLE11gです。 よろしくお願いします。 PL/SQLにて、テーブルAに対してINSERTを行い、テーブルAにINSERTした データを元にデータを作成し、テーブルBにINSERTをしたいと考えています。 COMMITは、プログラムの処理が全て終わった後に行います。 一応プログラムを作成し、想定どおりの動作を確認できたのですが、一点だけ 気になることがあります。 テーブルAにデータをINSERTしてから、COMMITせずに、テーブルBのデータを 作成するために、テーブルAのデータを取得します。その際、最初に登録した テーブルAのデータは、テーブルBを作成する際、必ず取得できるのでしょうか。 （一応作成したプログラムでは取得できていますが、必ず取得できるものなのか 　を教えていただきたいです。） COMMITは、仕様上プログラムが全て終わった後にしか行えません。 質問は以上です。 質問文がごちゃごちゃして見難くてすみませんが、ご回答よろしくお願いします。
いつもお世話になっております。 以下の処理を実現するＳＱＬをＡＣＣＥＳＳで作成してみました。 結果は正しく求められるのですが、もっとスマートな書き方があるように思いますが、いい案が思いつきません。 よろしくお願いします。 （実際にはＯＲＡＣＬＥ９ｉを使って、ＰＬ／ＳＱＬで行う予定です・・・ORACLEに適切なSQLを教えて下さい） ●【店舗Ｍ】にある分類より、【ＧＰＭ】の大分類が"Ｂ”を対象に、ディーラ・ナンバ毎のレコードを作成する 【店舗Ｍ】 │店舗│分　類│ ┼──┼───┼ │Ａ店│ 1 │ │Ｂ店│ 2 │ │Ｃ店│ 2 │ │Ｄ店│ 2 │ │Ｅ店│ 1 │ │Ｆ店│ 4 │ 【ＧＰＭ】 │ナンバ│分　類│大分類│ ┼───┼───┼───┼ │ Ｇ１ │ 1 │　A │ │ Ｇ１ │ 2 │　A │ │ Ｇ１ │ 4 │　A │ │ Ｇ２ │ 1 │　B │ ※処理対象 │ Ｇ２ │ 2 │　B │ ※処理対象 │ Ｇ３ │ 2 │　B │ ※処理対象 │ Ｇ３ │ 3 │　B │ ※処理対象 │ Ｇ４ │ 4 │　B │ ※処理対象 │ Ｇ５ │ 1 │　B │ ※処理対象 │ Ｇ５ │ 2 │　B │ ※処理対象 │ Ｇ５ │ 3 │　B │ ※処理対象 │ Ｇ６ │ 4 │　C │ ーー結果ーー 【Ｂ店舗別ナンバ】 │店舗│ナンバ│大分類│ ┼──┼───┼───┼ │Ａ店│ Ｇ２ │ B │ │Ｅ店│ Ｇ２ │ B │ │Ｂ店│ Ｇ２ │ B │ │Ｃ店│ Ｇ２ │ B │ │Ｄ店│ Ｇ２ │ B │ │Ｂ店│ Ｇ３ │ B │ │Ｃ店│ Ｇ３ │ B │ │Ｄ店│ Ｇ３ │ B │ │Ｆ店│ Ｇ４ │ B │ │Ａ店│ Ｇ５ │ B │ │Ｅ店│ Ｇ５ │ B │ │Ｂ店│ Ｇ５ │ B │ │Ｃ店│ Ｇ５ │ B │ │Ｄ店│ Ｇ５ │ B │ －ＳＱＬ－ 　INSERT INTO Ｂ店舗別ナンバ ( 店舗, ナンバ, 大分類 ) 　 SELECT 店舗Ｍ.店舗, ＧＰＭ.ナンバ, ＧＰＭ.大分類 　 FROM 　 ( SELECT 店舗Ｍ.* FROM 店舗Ｍ 　 WHERE EXISTS ( SELECT * FROM ＧＰＭ WHERE ＧＰＭ.分類 = 店舗Ｍ.分類 )), 　 ( SELECT ＧＰＭ.* FROM ＧＰＭ 　 WHERE EXISTS ( SELECT * FROM 店舗Ｍ WHERE 店舗Ｍ.分類 = ＧＰＭ.分類 )） 　 WHERE ＧＰＭ.大分類 = B ;
いつもお世話になっています。 ＳＱＬのＵＰＤＡＴＥについて、教えてください。 （例） 売上実績には、売上日を過去３回前まで保存しており、 売上トランの売上区分が”１”の情報を元に、売上実績の売上日情報を更新しています。 【売上実績】 │店舗│今　回│前　回│前々回│ ┼──┼───┼───┼───┼ │Ａ店│12/05 │10/25 │10/01 │ │Ｂ店│11/15 │10/18 │09/05 │ │Ｃ店│11/30 │10/05 │09/15 │ │Ｄ店│12/01 │12/01 │11/01 │ │Ｅ店│12/07 │11/07 │10/07 │ │Ｆ店│11/18 │10/17 │08/11 │ 【売上トラン】 │店舗│売上日│売上区分│ ┼──┼───┼────┼ │Ａ店│12/08 │　1 │　※繰越対象 │Ａ店│12/08 │　2 │ │Ｂ店│12/08 │　2 │ │Ｃ店│12/08 │　1 │　※繰越対象 │Ｄ店│12/08 │　2 │ │Ｆ店│12/08 │　2 │ ーー結果ーー 【売上実績】 │店舗│今　回│前　回│前々回│ ┼──┼───┼───┼───┼ │Ａ店│12/08 │12/05 │10/25 │　※繰り越される │Ｂ店│11/15 │10/18 │09/05 │ │Ｃ店│12/08 │11/30 │10/05 │　※繰り越される │Ｄ店│12/01 │12/01 │11/01 │ │Ｅ店│12/07 │11/07 │10/07 │ │Ｆ店│11/18 │10/17 │08/11 │ ※Ｋｅｙは”店舗” 　UPDATE 売上実績 　　Set 売上実績.今回 = 　　　　　　　(Select 売上トラン.売上日 From 売上トラン 　　　　　　　　　　Where 売上トラン.店舗 = 売上実績.店舗 AND 売上トラン.売上区分= 1 ), 　　　　前回 = 今回, 　　　　前々回 = 前回 　　　　　　Where Exists ( Select 売上トラン.* From 売上トラン 　　　　　　　　　　　　　Where 売上トラン.店舗 = 売上実績.店舗 　　　　　　　　　　　　　　AND 売上トラン.売上区分= 1 ) 上記処理をＰＬ／ＳＱＬで行いたいのですが、正しい処理結果が作成されるのでしょうか？ よろしくお願いします。 ※ORACLE環境がなく、ACCESSではうまく動作しなった為、質問させて頂きました・・・
以下のテーブル テーブル名：ｔ１(num1,kingaku) ,t2(num1,kingaku2) ここでt1.num1(1,2,3) ,t2.num1(3,4,5) とあった場合num1をキーとしてnum1(1,2,3,4,5)となるようなテーブルを作成したいのですが、 どのようなsqlでできるでしょうか？ dbはoracle,posgre,mysqlなどでお願いします。
お世話になります。 ”SELECT Ａテーブル.* Ｂテーブル.* 　FROM Ａテーブル LEFT JOIN Ｂテーブル ON Ａテーブル.KEY = Ｂテーブル.KEY”を 行った場合、Ａテーブルにしか存在しないデータのＢテーブル側の値は常にNULLに なるようなのですが、この場合ゼロを固定に設定することは出来ないでしょうか？ よろしくお願いします。 ※ＯＲＡＣＬＥ ９ｉ、ＰＬ／ＳＱＬ上での処理を考えています
はじめまして。 PL/SQLにて、SELECTした複数件のデータ全てを一括して別テーブルに出力する方法は、 バルグ！？といった方法を使用しないと出来ないのでしょうか？ 今までＣＯＢＯＬのＲＤＢしか関わったことがないので、初歩的な質問で申し訳ないですが、 よろしくお願いします ※色々なサイトを見てある程度納得したのですが、念のため、現状での回答を頂きたく 　質問にあげさせて頂きました。 ※ORACLE　９になります 例えば以下の場合、Ａテーブルには、Ｂテーブルの２２、３３の内容が作成されてほしいのですが、 エラーとなってしまうのでしょうか？ Aテーブル：データなし Ｂテーブル 　DAT1　DAT2 -------------- 　　11　　A 　　22　　B 　　33　　C INSERT INTO A(A.DAT1,A.DAT.02) SELECT B.DAT1,D.DAT2 FROM B WHERE B.DAT1 > 15
Oracle XEとC#4とでは、0001/1/1からの日数に少し差があるみたいなんです。何ででしょうか？ Oracle > select '0101' n, date '0101-01-01' - date '0001-01-01' m from dual > union all select '0201' n, date '0201-01-01' - date '0001-01-01' m from dual > ～ > union all select '2001' n, date '2001-01-01' - date '0001-01-01' m from dual > union all select '2010' n, date '2010-01-01' - date '0001-01-01' m from dual C# > static void Main(string[] args) { > 　　DateTime z = new DateTime(0, DateTimeKind.Utc); > 　　foreach (int i in new int[] { 101, 201, 301, 401, 501, 601, 701, 801, 901, 1001, > 　　　　1101, 1201, 1301, 1401, 1501, 1601, 1701, 1801, 1901, 1970, 2001, 2010, }) { > 　　　　TimeSpan s = new DateTime(i, 01, 01, 0, 0, 0, DateTimeKind.Utc) - z; > 　　　　Console.WriteLine("{0:0000}{1, 10}", i, s.TotalDays); > 　　} > 　　Console.ReadLine(); > } | | C# | Oracle | 差 | | 0101/01/01 | 36,524 | 36,525 | -1 | | 0201/01/01 | 73,048 | 73,050 | -2 | | 0301/01/01 | 109,572 | 109,575 | -3 | | 0401/01/01 | 146,097 | 146,100 | -3 | | 0501/01/01 | 182,621 | 182,625 | -4 | | 0601/01/01 | 219,145 | 219,150 | -5 | | 0701/01/01 | 255,669 | 255,675 | -6 | | 0801/01/01 | 292,194 | 292,200 | -6 | | 0901/01/01 | 328,718 | 328,725 | -7 | | 1001/01/01 | 365,242 | 365,250 | -8 | | 1101/01/01 | 401,766 | 401,775 | -9 | | 1201/01/01 | 438,291 | 438,300 | -9 | | 1301/01/01 | 474,815 | 474,825 | -10 | | 1401/01/01 | 511,339 | 511,350 | -11 | | 1501/01/01 | 547,863 | 547,875 | -12 | | 1601/01/01 | 584,388 | 584,390 | -2 | | 1701/01/01 | 620,912 | 620,914 | -2 | | 1801/01/01 | 657,436 | 657,438 | -2 | | 1901/01/01 | 693,960 | 693,962 | -2 | | 1970/01/01 | 719,162 | 719,164 | -2 | | 2001/01/01 | 730,485 | 730,487 | -2 | | 2010/01/01 | 733,772 | 733,774 | -2 | もしかして、どこか間違ってますか？
教えて下さい。 ＡとＢというテーブルが存在し、それぞれ Ａテーブル 社員番号、金額 Ｂテーブル 社員番号、部署コード という項目となっています。 ※　かなり簡単なテーブルに省略してありますが、、、、 上記のＢテーブルの部署コード毎にＡテーブルの金額を集計したいと考えていますが、 そのようなＳＱＬはどのように書くのでしょうか。。。 単純にｆｒｏｍ句で２つのテーブルを指定し、ｗｈｅｒｅ句で社員番号で結合し、ｇｒｏｕｐ　ｂｙ で部署コードを指定してもできなかったものですから。。。 初歩的な質問で申し訳ありませんが、教えて頂ければ幸いです。 よろしくお願いします。
oracle超初心者です。 　会社から“勉強してね”と言われたのですが、何からはじめればよいのかわからず、 とりあえずOracleの黒本のブロンズを購入しましたが、読みはじめですぐ挫折、 ちんぷんかんぷんで...（汗） 　挫折後、「１週間でOracle Masterの基礎が学べる本」を購入し読んで見たのですが、 本の内容がどうやらOracle 11gの内容のようで、違う本を読んでいるんじゃないかと 手を止めてしまいました（汗x2） 自分の環境は、windowsXPです。 すみませんが、どなたかよろしくお願いします。
Windows7（64bit)でOracle11g(64bit)をインストールしようとしすると、エラーが発生します。 進行状況8％あたりでとまります。 管理者として実行、ＸＰの互換性とかにチェックを入れて動作させてみました。 エラー内容 //////////////////////////////////////// エラー発生 原因 - 使用可能な追加情報はありません。 アクション - ログを参照するか、Oracleサポート・サービスに連絡してください サマリー  - invalid entry size (expected 4686 but got 4721 bytes) ///////////////////////////////////////// 一度、インストールには成功していましたが、ＯＳを削除、再度Oracleをインストールしようとしたらエラーが発生しました。 ログファイルも作成せれていず、Winodwsイベントログにもなし。 Ｏｒａｃｌｅをインストール失敗後のアンインストールはきっちりしたつもりです。 Loｇもないので上記エラーを体験、回避できた方解決策お願いします。
ローカルにオラクルをインストールして開発をしていました。 しばらく時間があいた後、開発を再開しようとするとDBへの 接続ができなくなっていました。 sqlplusではDB操作可能なので、DBそのものは落ちていないと 思うのですが… リスナーのステータスを確認すると（lsnrctl status SID）下記のエラーが出ます。 (DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=MY-PC)(PORT=1521))(CONNECT_DATA=( SERVER=DEDICATED)(SERVICE_NAME=SID)))に接続中 TNS-12535: TNS: 操作はタイム・アウトしました。 TNS-12560: TNS: プロトコル・アダプタ・エラー TNS-00505: 操作タイムアウトです。 32-bit Windows Error: 60: Unknown error 何が問題でどうすればよいのかわからないのですが、何か対応策があれば教えてください。 DBを再構築することも考えたのですが、原因がわからなければ同じ事が起こる（起こす？） ような気がするので。 よろしくお願いします。
お世話になります。 select文でデータを抽出する時、物理ファイルにはない列を追加して 表示する事は可能でしょうか。 また、その追加した列に値（同じ値でいいのですが）も入れて表示 したいと思っておりますがその方法が良く分かりません。 どなたかご親切な方、 ご教授下さいます様、宜しくお願い致します。
インデックスが貼ってあるdate型のカラムがあるのですが、うまくインデックスがあたりません。 検索条件を下記のようにしています。 working_date = TO_DATE('2010/11/26') date型は秒数を保持していることが影響しているのでしょうか？ ファンクションインデックスを貼って、下記のようにすればインデックスは当たってます。 　TO_DATE(working_date,'YYYY/MM/DD') = '2010/11/26' ご存知のかたがおられましたら教えてください。
現在以下の様な状態で、サーバＡのスキーマＡからサーバＢのテーブルを参照しています。 ＤＢＬＩＮＫ（Ａ）を外すとサーバＡのスキーマＡからサーバＢのテーブルをSELECTする事が 出来なくなってしまいますか？ スキーマＡでサーバＢの必要なテーブルが 全てシノニムで定義されていたので、イメージ的に スキーマＢのＤＢＬＩＮＫが残っていれば サーバＡのスキーマＡ→スキーマＢ→サーバＢのテーブルって感じで 参照出来そうな気がするのですが、どうなのでしょうか？ サーバＡのスキーマＡ　→　ＤＢＬＩＮＫ（Ａ）　→　サーバＢ 　↓ シノニム 　↓ サーバＡのスキーマＢ　→　ＤＢＬＩＮＫ（Ｂ）　→　サーバＢ
ora-00907エラー：右かっこがありませんが出ます。なぜでしょうか？？ strSQL = strSQL + "select K.Hiduke 日付,S.Syouhinmei　商品名,S.Tanka　単価,K.Suryou　数量,(S.Tanka * K.Suryou) 金額"; strSQL = strSQL + " from SyohinHyo　S,Kounyurireki K"; strSQL = strSQL + " where K.Syouhinbangou = S.Syouhinbangou and K.Hiduke"; strSQL = strSQL + " between to_date(" + comboBox1 +",'YYYY-MM-DD') and "; strSQL = strSQL + " to_date(" + comboBox2 + ",'YYYY-MM-DD')";
お世話になります。 オラクルのバージョンは９ｉです。ＶＢ６で作ったプログラムをクライアントに入れサーバはデータベースサーバとして使用しています。サーバとクライアント３台で作業しています。 最近、プログラムの実行時間が以前の２倍近くになりサーバの統計情報をとり再設定したのですが一向に改善されません。ただ、サーバを再起動すると以前の実行時間に近い時間まで戻ります。 原因として何が考えられるかわからず困っています。 ご教授していただければ助かります。 以上　よろしくお願いします。
ストアドプロシージャを出力したいと思っているのですが オブジェクトブラウザからですと、対象のSPを選択し、スクリプト出力することで ファイル出力できると思いますが、 sqlplusなどから、同様にファイル出力を行うことは可能でしょうか？ 初歩的なご質問で恐縮ですが ご回答頂けると大変助かります。 よろしくお願い致します。
SELECT COUNT( * ) FROM テーブル１で出たデータを別テーブルの数量に書き込みたいのですがどういう風にＳＱＬを書けばいいですか？？
oracleのupdateについて お世話になっております。 oracleのupdateについて教えてください。 (1)以下のような更新のupdateを実行し、 update dept set updt_flag=1 where id=1111; (2)commitをする間に別ユーザが以下のupdateを実行したとします。 update dept set updt_flag=0 where id=1111; 上記のような状況を再現した際、 (2)のupdateは(1)のcommitが完了するまで待つという結果になりました。 ここで質問なのですが、 最初のupdateが完了するまで別のupdateは待っているというのが 暗黙のルールなのでしょうか？ 初歩的な質問ですみません。 よろしくお願いいたします。
create table 新TABLE as select * from コピー元TABLE; としたい場合に、"コピー元TABLE" に、LONGROW型項目があり、 失敗してしまいます。 何か、回避策はないでしょうか？ 宜しくお願い致します。
あるシステムのDB管理を行うにあたり、 Oracleを使用しているのですが、 Oracleのバージョンの違いにより、 DMPファイルのインポートが行えない事はございますでしょうか？ 詳細は以下です。 ローカル環境のシステム Oracle 10g / 10.2.0.1.0 社内環境のシステム Oracle 11g / 11.2.0.1.0 社内環境システムよりバックアップを行い出力されたDMPファイルを ローカル環境へインポートを試みたところ、 以下のエラーが発生し、インポートができません。 *************************************************************************** 接続先: Oracle Database 10g Release 10.2.0.1.0 - Production IMP-00010: 有効なエクスポート・ファイルではありません。ヘッダーは検証に失敗しました。 IMP-00000: エラーが発生したためインポートを終了します。 接続先: Oracle Database 10g Release 10.2.0.1.0 - Production IMP-00010: 有効なエクスポート・ファイルではありません。ヘッダーは検証に失敗しました。 IMP-00000: エラーが発生したためインポートを終了します。 *************************************************************************** 解決方法をご存知の方がおられましたら ご教示いただけると有難いです。 以上、宜しくお願い致します。
バッチ処理にてCOMMIT間隔が大き過ぎてエクステントの拡張が発生しました。 エクステントを拡張は避けたく、COMMIT間隔を小さくしたのですが、 改善効果を、確認したいと思っております。 他のトランザクションもある試験環境なので、alter文？にてバッチ処理が 使用するロールバックセグメント番号を指定し、改善前／後で、V$ROLLSTATで確認 したいのですが、実施方法をご教授頂けないでしょうか？ ※ロールバック・セグメント番号　＝　V$ROLLSTAT.USN
あるシステムのDB管理を行うにあたり、 Oracleを使用しているのですが、 Oracleのバージョンの違いにより、 DMPファイルのインポートが行えない事はございますでしょうか？ 詳細は以下です。 ローカル環境のシステム Oracle 10g / 10.2.0.1.0 社内環境のシステム Oracle 11g / 11.2.0.1.0 社内環境システムよりバックアップを行い出力されたDMPファイルを ローカル環境へインポートを試みたところ、 以下のエラーが発生し、インポートができません。 ********************************************************** IMP-00058: Oracleエラー12154が発生しました。 ORA-12154: TNS: 指定された接続識別子を解決できませんでした IMP-00000: エラーが発生したためインポートを終了します。 ********************************************************** システムの構成はローカル環境、システム環境ともに同様です。 差異があるのはOracleのバージョンとなります。 基本的なご質問かもしれませんが ご教示頂けると大変助かります。 宜しくお願い申し上げます。
[注文表] 注文番号　注文商品　注文金額 ======================= 111　　　あああ　　5500 222　　　いいい　　3000 [注文オプション表] 注文番号　オプション ================ 111　　　P1 111　　　P2 222　　　D1 上記のようなテーブルがあります。 これを下記のようにSQLでまとめたいですが可能でしょうか。 もしありましたら、サンプルSQLをご教示いただけませんでしょうか。 [注文一覧] 注文番号　注文商品　注文金額　オプション1　オプション2 ====================================================== 111　　　 あああ　　5500　　　P1　　　　　 P2 222　　　 いいい　　3000　　　D1 お手数をお掛けしますが、なにとぞよろしくお願いいたします。
Windows2003上のOracle Clientの10.2.0.4のSQLPLUSで、別Ｏｒａｃｌｅ10.2.0.3サーバー上のテーブルの中身を表示しようとすると、CPU使用率が１００％になってしまい困っています。SQLPLUS自体のプロセスが１００％消費しています。 別のクライアントからは、特に問題なく表示されます。このWIndows2003マシンの何が悪いのか、なにか考えられる原因はありますでしょうか？
SQLを実際に使用して試験勉強したいのですがオラクルが動かし方がいまいちわからずできません。 そこでPostgresなら会社のパソコンで使えますので使いたいのですがPostgresとオラクルのSQLは同じでしょうか？全く別々のモノでしたら無意味になるので悩んでいます。またMicrosoft SQL Server 2008でもSQLの勉強は可能でしょうか？教えてください。
「１．固定値を含む結合」と「２．複数テーブルの結合」について教えて下さい。 最近oracleを使い始めてSQLで表の結合を書く場面があるんですが LEFT（RIGHT) JOIN を使うのか、(+)を使って書くのかで迷っています。 LEFT(RIGHT) JOINだと固定値を含めて外部結合しようとするとエラーになってしまいます。 それが嫌で(+)を使っていたんですが 今度は複数のテーブルを(+)で結合しようとするとエラーになってしまいます。 （ＡテーブルとＢテーブル、ＡテーブルとＣテーブルなど？） こういう場合はどうすれば良いのでしょうか？ とりあえず副参照をFROMに指定して対処してるんですが 何かきちんとした書き方があるのでしょうか？誰か教えて下さい。
インサートした日付データについて お世話になります。 Oracle１１ｇと.NET C#にて開発をしております初心者です。 .NET C#側で日付型（yyMMdd）にした変数を引数にして ストアドプロシージャでOracleのテーブルにインサートした 後、テーブルで結果を見てみると、 下記の様になってしまいます。 頭の２０が余計に思います。 考えられる原因としてはどの様な事がありますでしょうか。 テーブルの受けるフィールドの型も日付型です。 ご教授下さいます様、宜しくお願い致します。 　　　　　　　　記 インサート前（Ｃ＃側変数の値確認時）　　　　　インサート後（Oracleテーブル確認） （例）　２０１０１１０５　　　　　　　　　　　　　　　２０２０１０１１　０５：００：００ 　　　
DBの移行について 担当しているシステムのデータベースが、 DB2のV8.1からOracle11gに移行する予定です。 色々と調査してますが、 移行にはSQL関数の違いがネックになるかと考えています。 DB2にはある関数がOracleにはないとか、 同じ関数でも結果が違うとか・・・。 その辺をうまく一覧表に纏めたマッピング表みたいなのって、 ネットにあれば教えて頂ければと思います。 当然、自分でも探してますが、なかなかいいのがありません。 また、Oracleのサイトを覗いてみましたが、 結局問い合わせてくれって事になってます。 （まだまだ調査の段階なので、問い合わせるほどではないんで） よろしくお願いします。
トリガに排他制御をかけたいのですが Oracleのトリガで、 トリガ内の処理に対して排他制御をおこないたいのですが、 どのように設定すればよいのでしょうか？ トリガの内容は以下となります。 CREATE OR REPLACE TRIGGER TRI_TEST after update of （トリガの実行条件その1） on ORG_TBL FOR EACH ROW begin if (トリガの実行条件その２) THEN begin insert（実行される処理その１） EXCEPTION update（実行される処理その２） end; end if; end; / 上記の条件において、 「実行される処理その１」 「実行される処理その２」 を行っている最中に他からのアクセスをブロックをさせたく思っております。 本件の理由は 他からのアクセスで行われる処理が 「select(トリガによってデータが投入されてるテーブル)」 「truncate(トリガによってデータが投入されてるテーブル)」 を連続して行う処理のため、 排他を実行しなかった場合、 他からのアクセスの「select」と「truncate」の処理間に トリガによってレコードがinsertされた際に、 そのレコードがselectされなくなることを危惧しているためです。
グループ化による集計 お世話になります。 下記の様にＳＱＬで集計しようと考えています。 品番で小計額を出そうとしているのですが、 下記記述ですと、小計行が何か２行位ダブって表示されてしまっている様です。 どの様に記述したらダブらないで表示されるでしょうか。 私には少し高度な気がします。 どなたかご親切な方、ご教授下さいます様、宜しくお願いします。 　　　　　　　　　　　記 select a.計画ID,a.品番,sum(a.合格本数) as 合格本数,sum(a.不良本数) as 不良本数, grouping(a.品番),TO_CHAR(a.受信日,'YYYY/MM/DD')as 受信日 from 伝票LOG a group by rollup(a.計画ID, a.品番, TO_CHAR(a.受信日,'YYYY/MM/DD')) order by a.計画ID 現在の表示 ID　　　　　　品番　　　合格本数　　　不良本数 　　 grouping(a.品番) 1030-2　　　　yyy 　　　　20　　　　　　　　　　0　　　　　　0 1030-2 　 　　yyy 　　　　　30　　　　　　　　　　0　　　　　　0　　 1030-2 　 　　yyy 　　　　　50　　　　　　　　　　0　　　　　　0　　←この行は余計 1030-2 　 　　yyy 　　 　 　50　　　　　　　　　　0　　　　　　0　　←この行は余計 1030-2 　 　　(null) 　 　　 　50　　　　　　　　　　0　　　　　　1
日付表示について お世話になります。 Ｏｒａｃｌｅ（１１ｇ）と．ＮＥＴ Ｃ＃で開発して いる初心者です。 テーブルをｓｅｌｅｃｔ文で表示する時に、 日付が入っている列があるのですが、表示形式は、 年月日、時間、分までが表示されているのですが、 これを、年月日までの表示や、年月までの表示形式 に変えるにはどの様にすれば宜しいのでしょうか。 ご教授お願い致します。
PLSQLについて 時間がきたら動くようなバッチファイルを作成したいのですが、 ソースコードを書く上でわからないあります。 下記は作成したソースコードですが 変数curA_recのデータ型はcurAのROWTYPEになります。 【質問1】dbms_outputの箇所を変更して抜き出したレコードをTAB区切りのtxt形式で出力する際の具体的なステートメントがわかりません。 【質問2】このファイルを任意のディレクトリにおいて時間がきたらファイルを実行するようにしたいのですがデータベース接続のためのConnect文を記述する箇所は一番上のset serveroutputの下に記述していいのでしょうか? どなたか詳しい方お願いします。 <ソース> set serveroutput on declare cursor curA is <SQL文> curA_rec curA%ROWTYPE; BEGIN open curA; LOOP fetch curA INTO curA_rec; exit when curA%NOTFOUND; dbms_output.put_line(curA_rec.伝票番号||' '||curA_rec.伝票日付||' '||curA_rec.出荷先店番||' '||curA_rec.ブランド品番||' '||curA_rec.JANコード||' '||curA_rec.出荷数量||' '||curA_rec.商品単価||' '||curA_rec.商品名||' '||curA_rec.カラー名||' '||curA_rec.サイズ名||' '||curA_rec.ブランド||' '||curA_rec.サブブランド||' '||curA_rec.大分類||' '||curA_rec.中分類||' '||curA_rec.小分類||' '||curA_rec.カラー||' '||curA_rec.サイズ); END LOOP; CLOSE curA; END;
Oracle 10.2 SE RACにおいて、２つの違うネットワークセグメントをリスニングさせたいのですが、パブリックのセグメントは複数設定できませんでしょうか？
なぜ、WHERE句とHAVING句があるのか？（質問文修正版） SQLを学んでいる時に、疑問に思ったことがあります。 それは、「なぜ、WHERE句とHAVING句があるのか？」ということです。 この２つは、 ・WHERE句 → 表から取り出す行の条件を指定 ・HAVING句 → グループ化した結果から取り出す行の条件を指定 という違いがあることは分かっています。 ですが、おなじ「行のかたまりに対する抽出条件」を指定しているのに、 なぜ、わざわざ２つに分ける必要があったのでしょうか？ 分けないと不都合が生じるのでしょうか。 もし、明瞭簡潔に説明できる方がいらっしゃいましたら、教えていただけないでしょうか。 ※本質問は、質問内容に質問の主旨が変わってしまう大きな誤りがあったため、いったん締め切り後、再掲載させていただきました。
なぜ、WHERE句とHAVING句があるのか？ SQLを学んでいる時に、疑問に思ったことがあります。 それは、「なぜ、WHERE句とHAVING句があるのか？」ということです。 この２つは、 ・WHERE句 → 表から取り出す行の条件を指定 ・GROUP BY句 → グループ化した結果から取り出す行の条件を指定 という違いがあることは分かっています。 ですが、おなじ「行のかたまりに対する抽出条件」を指定しているのに、 なぜ、わざわざ２つに分ける必要があったのでしょうか？ 分けないと不都合が生じるのでしょうか。 もし、明瞭簡潔に説明できる方がいらっしゃいましたら、教えていただけないでしょうか。
変数が選択リストにありません 下記のコードを実行すると「変数が選択リストにありません」というエラーが出てしまいます。 SELECT文とFETCHのINTOの変数の個数が一致していない場合にこのエラーは出るということらしいのですが、問題ないように思うのです。 下記コードで何が問題になっているのか教えてください。 よろしくお願いします。 set serveroutput on; declare -- 各テーブルの全カラムを取得 cursor curcol (p_tblname user_tables.table_name%type) is select COLUMN_NAME,DATA_TYPE from user_tab_columns where table_name = p_tblname ; v_sql varchar2(1000); -- SQL文 v_col varchar2(1000); -- カラム名 v_val varchar2(1000); -- 取得データ v_tblname varchar2(20); -- テーブル名 v_RstExec integer; v_CursorID integer; begin v_col := ''; v_tblname := 'sample'; -- 取得テーブルのカラムを取得 for rowcol in curcol(v_tblname) loop -- 取得カラムをCSV形式に変換 if v_col is null then v_col := rowcol.COLUMN_NAME; else v_col := v_col||'||'',''||'||rowcol.COLUMN_NAME; end if; end loop; dbms_output.put_line(v_col); -- SQL作成 v_sql := 'select '||v_col||' from '||v_tblname; v_CursorID := DBMS_SQL.OPEN_CURSOR; DBMS_SQL.PARSE(v_CursorID, v_sql, DBMS_SQL.NATIVE); v_RstExec := DBMS_SQL.EXECUTE(v_CursorID); LOOP IF DBMS_SQL.FETCH_ROWS(v_CursorID) = 0 THEN EXIT; END IF; DBMS_SQL.COLUMN_VALUE(v_CursorID, 1, v_val); DBMS_OUTPUT.PUT_LINE(v_val); END LOOP; DBMS_SQL.CLOSE_CURSOR(v_CursorID); end; /
オラクルのデータベースは大変よく使われていますが、フリーのソフトでそれに代わるものはないのでしょうか?
ASP.NETでのオラクルAL16UTF16について OS WindowsXP VisualStudio .NET 2003 + Oracle 10g にてASP.NET 2.0　の 開発を行っています。 オラクルではキャラクタセットでAL16UTF16を指定しています。 ASP.NETでは、web.configで <?xml version="1.0" encoding="utf-8" ?> と <globalization requestEncoding="UTF-8" responseEncoding="UTF-8" /> を指定しています。 このように設定して、特に今のところ不具合があるわけではないのですが オラクルではUTF-16、ASP.NETではUTF-8となっていて 違うものを指定していても不具合等はないのでしょうか。 または、不具合がまだ見つかっていないだけでしょうか。 以上、ご教授をお願いします。
動的SQLのfetch やりたいこととしては、下記の(1)のような動的SQLをfetchなりforなりで　まわしたいのですがどうしたらいいのでしょうか？ よろしくお願いします。 for c_rec in (select table_name from user_tables) loop 　　v_sql := 'select * from '||rowtbl.table_name; ・・・(1) 　　～　省略　～ end loop;
文字列の連結 select * from test where testcolum=変数名 といった感じで、文字列と変数を連結したいのですがやり方がわかりません。 declare cdata varchar2(20); begin cdata:='sample'; 'select * from test where testcolum=' || cdata; end; 上のように、select文を動的に変更して実行したいのです。 よろしくお願いします。 /
ファイルへの書き込みができない 実行時エラーは表示されないのですが、ファイルへ出力されません。 コードは以下のようにしています。 よろしくお願いします。 declare FILE_HANDLE utl_file.file_type; STR varchar2(1023); begin -- 書き込みモードでファイルオープン FILE_HANDLE := UTL_FILE.FOPEN('c:\tmp','test.txt','W'); STR := 'test'; -- ファイルへ出力 UTL_FILE.PUT(FILE_HANDLE,STR); -- ファイルのクローズ -- UTL_FILE.FCLOSE(FILE_HANDLE); exception when others then dbms_output.put_line('その他エラー'); end; /
デッドロック（ORA-00060）とメモリの関係 以前、 OS：WindowsServer2003 R2 x64 SP2 DB：Oracle 10.2.0.2.0 の環境でデッドロックが発生したのですが、その際にメモリ使用量も全体の85%以上 使用していた状態でした。（メモリサイズは約6.3GB） （※デッドロックは、索引の処理を行うにあたり前処理が不足していたことが原因） そのため、デッドロックと空きメモリの関係を確認したいのですが、 ・空きメモリ不足によりデッドロックが発生する可能性があると考えられるでしょうか。 もしくは、 ・デッドロックが発生したことにより、空きメモリが消費されてしまうと考えられる でしょうか。 ご存知の方がおりましたらお教えいただけないでしょうか。 よろしくお願いいたします。
selectの内容によって、登録するカラムを変えたい selectであるテーブルからある値Aをとってきます。 値Aが1の時は別テーブルの金額1に登録、2の時は金額2に登録、3の時は金額3に登録 という処理を行いたいです。 同一レコードに対して複数の金額がある事があります。 テーブル1（取得テーブル） ------------------ キー　値A　金額 1　　　1　　500 1　　　3　　300 2　　　3　　200 ------------------ テーブル2（登録テーブル） ------------------ キー 金額1 金額2 金額3 1　　　500　　0　　300 2　　　　0　　0　　200 ------------------ いま、 insert into テーブル2 SELECT 項目 from テーブル1 というように１つのSQLで、登録、削除をしようとしていますが 可能でしょうか？。方法がよく分かりません。
他の処理でselectさせないようにしたい。 ある処理AがテーブルXを利用し動作していたとします。 この時、別の処理Bが,テーブルXを検索しただけでエラーにしたいです。 FOR UPDATEは、更新はできないですが、検索は出来そうなのですが、 検索しただけでエラーにする方法はあるでしょうか？ よろしくお願いします。
SQLでSUMなどの関数でデータが無い時に0を返したい。 （例） SELECT SUM(項目) FROM テーブル WHERE 条件 ここで、条件に一致するデータが1件も無かった時ですが、 何かNULLのような物が1件返ってきているようです。 この条件に一致する物が無かった時に、 0を返したいのですが、可能でしょうか？ よろしくお願いします。
DBサーバの構築でマスタをOracle、スレーブをMySQLにて構築することはできるのでしょうか。
データベースの使い方についてご意見ください。 社内のイントラなどをメインにASP(VBScript)-OracleでWEBアプリを開発しています。 近年、これまで紙で行われていたものがシステム化されるという動きが活発化し、開発案件が非常に増えてきています。そのため、自分なりに開発効率を高めるためいろいろな試みを行っています。 例えば、JQUERYを用いることによりかなり開発効率が上がりました。 その他の試みとして、長ったらしいSQLを書く時間を省くために、前もってOracleに全テーブルを連結したVIEWを作っておいて、SQLはWHERE句だけを書き換えてそのVIEWを見にいくようにしました。 このやり方は一般的なものなのでしょうか？ デメリットはなんでしょうか？ 私的にはコードもかなりすっきりしてかなり気にいっています。
Nullを含む条件の検索 Oracle10g利用して勉強中の初心者です。 Hinテーブル NO Hin Flg 1 卵　1 2 鯉 null 3 糸 0 SELECT * from Hin Where not Flg = 1 としてFlgが1以外のレコードを取得したいのですが Nullは判断しなくて困っています、 良い方法は無いでしょうか？ よろしくお願いします。
現在、VBAにてUNICODEのCSVを出力し、SQL*Loaderでテーブルへ取り込む処理を作成しています。 そこで、文字コードについて質問があります。 作成したCSVで、IBMフォーマットの全角マイナスとWindowsの全角マイナスが あります。これをSql*Loaderにてテーブルへ取り込むと、Windowsの全角マイナスが IBMの全角マイナスへ変換されてしまいます。 これはSql*Loaderの仕様でしょうか？ IBMの文字コードは、E28892(＆H2212)、Windowsの文字コードは、EFBC8D(&HFF0D)です。 Sql*LoaderのCONTROLファイルでCHARACTERSETをUTF16にしています。 宜しくお願いします。
PL/SQLでREPRACE INTO構文と同様の処理を作成 別のテーブルにレコードを投入する処理を実行するトリガを作成したのですが、 プライマリ・キーが重複するレコードの投入時に、一意制約でエラーになってしまいます。 トリガの作為としましては、プライマリキーが重複する際には上書きさせたいのですが、この場合、PLSQLではどのようなコマンドがあるのでしょうか？ （mySQLのREPLACE INTO と同様の処理を行うコマンドを想定しています） ↓下記のINSERT INO の箇所をREPLACE INTOと同様の処理を行うコマンドにしたいと思っております CREATE OR REPLACE TRIGGER TRI_TEST after update of TRI_NAME ,TRI_CALLED on cp_MV_TABLE FOR EACH ROW begin if (:old.TRI_NAME != :new.TRI_NAME or :old.TRI_CALLED != :new.TRI_CALLED ) THEN INSERT INTO TR_RUS_TABLE ( TRI_NO , TRI_DATE , TRI_NAME , TRI_CALLED ) values ( :new.TRI_NO , :new.TRI_DATE , :new.TRI_NAME , :new.TRI_CALLED ); end if; end; /
SQLで集計について分からないことがあります。 まず、次のようなテーブルがあったとして 日付　 店舗コード　ブランドコード　金額 ---------------------------------------- 09-01 | 401101 | 01 | 10000 09-02 | 401101 | 01 | 20000 09-03 | 401101 | 01 | 30000 09-04 | 401101 | 01 | 40000 09-01 | 401101 | 02 | 10000 09-02 | 401101 | 02 | 20000 09-03 | 401101 | 02 | 30000 09-04 | 401101 | 02 | 40000 09-01 | 401101 | | 11111 09-02 | 401101 | | 22222 09-03 | 401101 | | 33333 09-04 | 401101 | | 44444 ブランドコードが'Null'の金額をブランドコードが'01'の金額に 日付をキーにして集計したいんですが、 可能でしょうか？ なにか、良い方法があればお願いします。
Oracle Enterprise Manager 管理画面にアクセスできない Oracle 11gR2 ですが、https://localhost:1158/em/ にアクセスできません。インストールは無事終わり、インストール直後は上記サイトにアクセスでき、sys でログインできていました。 localhost のところはホスト名に変更してもアクセスできないです。 「正常に接続できませんでした。localhost:1158 のサーバへの接続を確立できませんでした」というエラーが Firefox 上に表示されます。 週末にサーバーを落として、今週に至るのですが、Web ページにアクセスできなくなっています。 listener を起動して、sqlplus にログインし、alter database open; コマンドまで成功しているので リスナーとデータベースの起動はできてると思うのですが、他に何が足りないのでしょうか？ ご教授よろしくお願い致します。
ORACLEへ、ODBC経由でCHAR属性のフィールドへNULL文字(x'0')を INSERTできたのですが、そのフィールドをUPDATEできません。 ODBCのエラーとなります。原因は何でしょうか？ 宜しくお願いします。
Oracle DBの欠点、その他のDBの利点 Oracle DBの欠点とその他のDBの利点を教えて下さい。 できれば、たくさんお願いします 参考サイトでも良いです。
Oracle10.2.0.4のPatch38について RAC環境において、ローリングアップデート可能かを調べてまして、英語のリリースノートでは、 This is a Rolling-RAC patch only if the system has Patch 37(9683600) or higher applied. Stop the Oracle services only in the home where the patch is being applied と記述があります。 これは可能だという解釈でいいのかどうか知りたいです。
------------------------------ 　テーブル：TABLE1 ------------------------------ USER_ID TYPE COUNTRY ------------------------------ 001 A JAPAN 002 A UK 003 A USA 004 Z UK ------------------------------ ------------------------------ 　テーブル：TABLE2 ------------------------------ COUNTRY STATUS ------------------------------ JAPAN 001 CHINA 001 UK 002 USA 002 ------------------------------ --------------------------------- 　テーブル：TABLE3 --------------------------------- USER_ID TYPE COUNTRY STATUS --------------------------------- 001 A JAPAN 001 002 A UK 002 003 A USA 002 004 Z UK 999 ←　※１）002から999に変更したい --------------------------------- TABLE1とTABLE2を結合してTABLE3を作成したいと思います。 =========================================================== SELECT a.USER_ID, a.TYPE, a COUNTRY, b STATUS FROM TABLE1 a LEFT JOIN TABLE2 b ON a.COUNTRY=b.COUNTRY =========================================================== そこで、上記のSQL文を作成しましたが、そこに追加で条件を加えたいと考えています。 ※１）のSTATUSの値は、本来は"002"になりますが、TYPEが"Z"の場合は、STATUSの値を強制的に"999"に変更したいです。 SQL文で「TYPEが"Z"の場合は、STATUSの値を強制的に"999"に変更したい」という条件を追加したいのですが、どのような式を書けばよろしいでしょうか？ よろしくお願いいたします。
バックアップの容量と時間の見積り サーバのバックアップの容量と、バックアップ時間にかかる見積りを行なおうとしております。 Oracleで、総容量2.6TBのフルバックアップを週次で取りたいのですが、 どの程度の時間がかかるのかを机上でのみしか計算できないため、 （netvaultを使用して、800GB×8のテープへする予定なのですが、まだ準備されていません） 悩んでいます。 机上計算ができるようなサイトか、どの程度の時間がかかるかお解かりになられる方はおりますでしょうか。 ※必要情報がありましたら、随時載せてゆきます
ＰＬ／ＳＱＬのカーソルについて お世話になります。 Oracle１１gで開発しています。 初心者です。 下記ストアドプロシージャの「zokuseisyutoku」で取得した 値（入数、重量、才数、ロケーション）を受けて、別のストアドプロシージャ 「Hyouji」の変数（irisuu、jyuryou、saisuu、lokesyon）に代入して得られた 内容をGridviewに表示させたいと思っています。 現在は、別々のストアドプロシージャなのですが、 一つに出来るものなら一つのストアドプロシージャにまとめたいの ですが、どなたかご親切な方、ご教授頂きたく宜しくお願い致します。 　　　　　　　記 (1)ストアドプロシージャ１つ目 create or replace procedure zokuseisyutoku ( sItemClassinコード表.品番%type, out_valoutpls_integer, out_cursoroutsys_refcursor ) as begin if sItemClass is null then open out_cursor for select入数, 重量, 才数, ロケーション fromコード表 ; else open out_cursor for select入数, 重量, 才数, ロケーション fromコード表 where品番 = sItemClass ; end if; out_val := 1; (2)ストアドプロシージャ２つ目 create or replace procedure Hyouji ( irisuu in部材表.入数%type, jyuryou in部材表.重量%type, saisuu in部材表.才数%type, lokesyon in部材表.ロケーション%type, out_valoutpls_integer, out_cursoroutsys_refcursor ) as begin open out_cursor for select b.資材名,b.色,b.種類,b.サイズ,b.棚番号 FROM 部材表 a,資材項目 b WHERE a.ID = b.資材ID AND a.入数 = irisuu AND a.重量 = jyuryou AND a.才数 = saisuu AND ロケーション = lokesyon ; out_val := 1; end; end;
バッチ処理を使用して、Oracle10gのデータのバックアップを取ろうとしています。 10gでバックアップする上で先ほどの質問で、アーカイブログモードか ノンアーカイブログモードかの情報を提示していただきました。 http://okwave.jp/qa/q6173983.html もしも、アーカイブログモードを選択した場合は、「バッチ処理によるバックアップ」は 必要ないのではないでしょうか？ 調べた限りでは、「アーカイブログモード」でバックアップを取る場合は、常にREDログ ファイルにバックアップを取り続けるという趣旨の説明が出てきました。 つまり、バッチ処理によるバックアップが必要になるのは「ノンアーカイブモード」の時 だけなのでしょうか？ 以上、よろしくお願いします。
Oracle10gのバックアップについて Oracle10gのバックアップをバッチ処理にて自動化したいのですが、バッチ処理のサンプルなど何か参考になるサイトはないでしょうか？ 以上、よろしくお願いします。
ORACLEの表の列データをチェックするような フリーソフトはありますか？
Oracle SQLIの難易度について お世話になっております。この質問は、 http://okwave.jp/qa/q6168299.html からの派生でございます。 Oracle Bronz取得の為に、 1Z0-051-JPN 11g SQLI　と 1Z0-017-JPN Bronze SQL I　 どちらがよいか（10月からの値上がり前に取得するのに）相談させてください。 「９月末までまだ２０日あるんだから毎日３時間勉強すれば取れない訳がない」 と、思われるかもしれませんが１度落として 「学習の空振り感」を感じて居るの相談致します。 学習方法としては、まず黒本と呼ばれる参考書を読み進めながら学習をしました。 （↓使用書） テーブル作ったり、参考書に書かれているSQLを実行したり。 http://www.amazon.co.jp/Bronze-Oracle-Database-SQL%E5%9F%BA%E7%A4%8EI%E7%B7%A8-%E8%A9%A6%E9%A8%93%E7%95%AA%E5%8F%B7/dp/4798116610/ref=pd_sim_b_2 その後、参考書だけじゃ不十分というのは散々言われていたので別途問題集で学習。 （↓使用書） http://www.amazon.co.jp/%E5%BE%B9%E5%BA%95%E6%94%BB%E7%95%A5ORACLE-MASTER-Bronze-1Z0-051J-IT%E3%82%A8%E3%83%B3%E3%82%B8%E3%83%8B%E3%82%A2%E3%81%AE%E3%81%9F%E3%82%81%E3%81%AE%E5%BE%B9%E5%BA%95%E6%94%BB%E7%95%A5/dp/4844326392/ref=pd_cp_b_1 問題集を大体９割取れる用になったところで、 ５５番の試験（５５問、２時間、６割の方）を受験しましたが 出題された問題の内容は、問題集のそれとは大きく違うものでした。 Oracleの受験が初であった事を差し引いても、 問題集の問題で問われているレベルの内容一つ一つをもっと掘り下げて 細かい違いまで正確に理解していなければ 確信を持って回答できない問題ばかりだったように思えます。 選んだ問題集がはずれだったのか？ そう思い後日何冊かの問題集を立ち読みしてみましたが どれも似たり寄ったりな感触しか受けませんでした。 例として、受験直後の日の時点で http://park14.wakwak.com/~ky1999/ORA/ こちらのサイトのBronze SQL 基礎Iの問題（1-50）をといてみた所 ８割以上をとる事が出来ました。 特別、私の記憶力や理解力が乏しいというわけではない（ハズ…）です。 15000円スッた悔しさから半ば負け惜しみでもありますが、私は 1Z0-051 と 1Z0-017 で、 難易度や出題傾向が大きく違うのでないか？ 自分が今までやってきた学習は1Z0-017向けで、 1Z0-017を受ければすんなり合格できるのではないか？　などと考えています。 それともその認識は間違いで、 1Z0-017も 9iや10gの頃より大きく傾向も難易度も変わり、 問題集を100%理解して当日の試験ではスレスレを辛うじてとる… というのが精一杯の時期になっているのでしょうか？ 最近の（2009年以降の）1Z0-017 を受験してBronzを取得された方など、 もしおられましたら、 http://park14.wakwak.com/~ky1999/ORA/ こちらの問題を見ていただいた上でアドバイスを頂きたく思います。 長文になりましたが、よろしくお願いします。
ＰＬ／ＳＱＬについて お世話になります。 現在Ｏｒａｃｌｅ １１ｇと.Ｎｅｔ Ｃ＃で開発をしている物です。 正直どちらも初心者で悪戦苦闘している日々ですが、 ＰＬ／ＳＱＬのカーソルについて知りたい事があります。 ＰＬ／ＳＱＬでカーソルを作成しました。 そしてその同一ストアドプロシージャ文の中で、 先のカーソルの結果で得られた値から別の新たなカーソル でまた新たな結果を返すと言う様な、二重カーソルの様な 事は可能でしょうか。 どなたかご親切な方、ご教授頂きたく宜しくお願い致します。 出来れば、サンプルや、ＨＰ等ご紹介頂ければありがたく 思います。
バッチファイルを使用したsql@plusの実行及びログ出力について Windows Server 2003上で動作しているOracle10gのDBに対して Windows XP上に配置したバッチファイルをタスクで起動させ、 sql@plusを使用してデータを削除する処理を行いたいと考えています。 ---data_delete.bat--- @echo %date% %time% データ削除開始 >> log.txt sqlplus -S USER/PASS@TNSNAME @data_delete.sql >> log.txt @echo %date% %time% データ削除終了 >> log.txt ---data_delete.sql--- DELETE FROM TABLE WHERE FLG = 1; EXIT; data_delete.batを実行するとlog.txtが出力されます。 ---log.txt--- yyyy/mm/dd hh:nn:ss.xx データ削除開始 XXX行が削除されました。 yyyy/mm/dd hh:nn:ss.xx データ削除終了 この時、log.txtの内容を下記のように変更したいのですが、 その方法が分りません。 ---log.txt--- yyyy/mm/dd hh:nn:ss.xx データ削除開始 yyyy/mm/dd hh:nn:ss.xx データ削除終了 XXX行が削除されました。 できれば[削除件数 XXX 件]と表示させたかったのですが、 自分の調べた限りではできそうにないので、 フィードバックされる文字列をそのまま使う方向で進めています。 上記ログの出力方法ができるようでしたら、 その方法を教えて頂けると嬉しいです。 宜しくお願いします。
特定のカラムが更新されたときのみ、そのレコードを別テーブルへ格納するトリガの作成方法を教えてください・ トリガ名：TEST_UPDATE テーブル名：MV_ORACLE_MV_TEST カラム名：ORAPRIME ORACHANGE ORANAME CHANGENAME 対象カラム：CHANGENAME 格納先テーブル：TRITEST_ORACLE_MV_TEST 作成トリガ： CREATE OR REPLACE TRIGGER TEST_UPDATE after update of CHANGENAME on MV_ORACLE_MV_TEST FOR EACH ROW begin INSERT INTO TRITEST_ORACLE_MV_TEST SELECT MV_ORACLE_MV_TEST.ORAPRIME , MV_ORACLE_MV_TEST.ORACHANGe , MV_ORACLE_MV_TEST.ORANAME , MV_ORACLE_MV_TEST.CHANGENAME FROM MV_ORACLE_MV_TEST where MV_ORACLE_MV_TEST.CHANGENAME = :new.CHANGENAME -- commit; commit; end / テーブルMV_ORACLE_MV_TESTのうち、CHANGENAMEカラムが変更（更新）されたレコードのみを、 TRITEST_ORACLE_MV_TESTテーブルに格納したいと思っております。 この時、他のカラムも一緒に格納することが必要でして、 （もしカラムに変更があった場合、そのカラムも変更する。変更されていない場合は元の値を格納する） そのトリガを上記のように書いたのですが、 コンパイルエラーが発生しました。 どの部分が誤っているのか、ご教授願えませんでしょうか
ora-09925の対処方法 ユーザーを新規作成し、権限付与をするため、 sysアカウントでsqlplusに接続しようとするのですが、 ora-09925：監査証跡ファイルを作成できません。 というエラーが発生します。 対応方法をいろいろ調べてみたのですが、よくわからず。 2日ほど前まではとくに問題なく接続できておりました。 対応方法を教えていただけますでしょうか。
Oracle Bronz 11g 取得に必要な試験は？ Oracleの資格を取得しようと、学習中です。 OracleのBronz取得にはSQL基礎Iと、 DBA11g（どうせ取るなら最新の11gがよいと思ってます）の 2種の試験に合格する必要があると言うのは判るのですが 前者の「SQL基礎I」に該当する試験は 1Z0-051-JPN 11g SQLI　なのか、 1Z0-017-JPN Bronze SQL I なのか判りません。 黒本の序章などを読みますと 1Z0-017-JPN BronzSQL基礎I 1Z0-018-JPN Bronze DBA11g が並んで書かれているので、 いかにもこの２つを受験すればよいように思えるのですが、 それでは 1Z0-051-JPN 11g SQLI　は何の試験なのでしょうか？ 試験費用も高いので間違えたくありません。 どうかご教授くださいませ。 よろしくお願いします。
oracle ダンプファイルのサイズとインポート先の表領域の使用サイズの関係 あるダンプファイル（2.5GB）をオラクルDBへimportしたら、 そのDBの表領域が10GBほど使用されました。 2.5GBのものをimportしたのに、なぜここまで表領域を消費するのでしょうか？ （これまでこのようなことはありませんでした。） 表領域の使用サイズをもっと少なくするにはどうすればよいのでしょうか？ エクスポート時のコマンド exp aaaa/aaaa file=bbbb.dmp log=exp_cccc.log consistent=y インポート時のコマンド imp aaaa/aaaa file=bbbb.dmp log=imp_cccc.log エクスポート時に「compress=n」をつけたり、 インポート時に「ignore=y」をつけたりしたのですが、 とくに変化はありませんでした。
RDBのテーブル種類の違い ～トランと～ワークの違いってなんでしょうか? 同じようなテーブル構成なのにテーブルの名前が違う気がするんですが。 調べたのですが腑に落ちる内容ではなかったので わかる方がいれば教えていただけるとありがたいです。
バッチでINSRT文実行すると一制約エラー、会話型で実行するとエラーにならない。 すみませんが、教えて頂けませんか。 １．oracle10gです。 ２．バッチの内容は以下の通りです。 sqlplus USER/PASS@DB @COPY_テーブル名.sql > COPY_テーブル名.log pause exit ３．COPY_テーブル名.sqlの内容は以下の通りです。 INSERT INTO コピー先テーブル名 ( AA, BB, CC, DD, EE ) SELECT コピー元テーブル名.AA, コピー元テーブル名.BB, コピー元テーブル名.CC, コピー元テーブル名.DD, コピー元テーブル名.EE FROM コピー元テーブル名; / exit ４．エラーメッセージは以下の通りです。 57行が作成されました。 INSERT INTO コピー先テーブル名 ( * 行1でエラーが発生しました。: ORA-00001: 一意制約(コピー先テーブル名_PK)に反しています ５．コピー元のデータに一意制約違反になるようなデータはありません。 　データも正しく入ってます。上記、エラーメッセージがお客様より指摘を受け、 　説明できなくて困っています。 すみませんが、よろしくお願い致します。
ORACLEのＤＢへODBC経由でデータアクセスしています。 実行環境はWindows XP,開発言語はCOBOLです。 コンパイルは問題ないのですが、実行しますと、 動的SQLの使い方が間違っていますというようなメッセージが 出力されて異常終了します。（ちなみにカーソルオープンのところで終了） 下記のような動的SQLのコーディングですが、どこが問題なのでしょうか？ 宜しくお願いします。 01 SQL-CSR0-DB21. 03 FILLER PIC X(35) VALUE 'SELECT M.*,ROWIDTOCHAR(M.ROWID) '. 03 FILLER PIC X(35) VALUE ' FROM DB21 M '. 03 FILLER PIC X(35) VALUE ' WHERE M.BCODE = ? 　 '. 78 SQL-CSR0-LEN VALUE 105. 　　　　　　　　　　（中略）　　 INITIALIZE DYNSTMT. MOVE SQL-CSR0-DB21 TO DYNSTMT-ARR. MOVE SQL-CSR0-LEN TO DYNSTMT-LEN. EXEC SQL PREPARE STMT1 FROM :DYNSTMT END-EXEC. EXEC SQL DECLARE CSR0_TN_DB21 CURSOR FOR STMT1 END-EXEC. EXEC SQL OPEN CSR0_TN_DB21 USING :BCODE_HST END-EXEC.
Oracle Database の最適な学習方法、技術が身につく方法とは？ 現在は、Oracle Database 11g　試験の勉強中です。 Bronze⇒Silverと目指してます。Goldは費用の関係で受けないかもしれません。 資格目的は、会社の評価UPと報奨金目的ですが。 勉強中ですが、試験勉強＝役立つ知識、作業で使えるか。 というと、けっしてそうではないと思います。 状況としては、今は11gが無料でインストールできて、問題集にとりくんでます。 ゆくゆくは、現場で使える知識・技術を身につけたいのですが、 どんな方法があるのでしょうか？ 現場で覚えるのが最適ですが、現在の世の中では求人も難しい。 そんななかで、Oracleデータベースの技術を身につけるという意味で、 何か最適な方法はありますか？ まはた、私の勘違いで、 問題集を完璧といえるまで理解しすることが、技術習得への道につながるのでしょうか？ 独自に考えて、EMやSQLPLUSをひたすら操作するしかないですか？ また、このような内容に参考になる書籍やサイトがあればご紹介ください。 よろしくお願いします。
oracle 10g サーバ機のＩＰアドレス変更について oracle 10g サーバ機（ＤＢの入っているＰＣ）のＩＰアドレスを変更した所　サービスの起動時にエラーが発生し 正常に動作しなくなりました。 バージョン８などで「コンピュータ名」を変えるとＮＧとなる認識はありましたが 何かご存知な方　教えてください。 よろしくお願いいたします
SQLでデータを1件だけ取得したいのですが。 以下のようなテーブルが２つあるとします。 ------------------------------------ テーブルA 　　　 テーブルB 　 値X　　　　　　　　 　 値X　　　　値Y 　　１　　　　　　　　　　　１　　　　２０ 　　２　　　　　　　　　　　２　　　　NULL 　　３　　　　　　　　　　　２　　　　６０ 　　４　　　　　　　　　　　２　　　　７０ 　　　　　　　　　　　　　　４　　　　NULL 　　　　　　　　　　　　　　４　　　　NULL ------------------------------------ ここで、テーブルAの値Xと、テーブルBの値Xをリンクさせます。 テーブルAにデータがあれば、テーブルBに無くても出力します（外部結合イメージ） テーブルAの値Xに対して、テーブルBの値Xは2件以上リンクされる可能性があります。 この場合は1件のみ出力します。 その1件の決め方は、テーブルBの値YがNULLでは無く最大の物です。 但し値Yは全てNULLの可能性もあるので、その場合NULLとして1件出力します。 上記の出力イメージ ------------------------------------ 　値X　　　　値Y 　１　　　　２０　　（１件の場合そのまま出力。1件がNULLでもそのまま出力） 　２　　　　７０　　（NULLではない最大の1件を出力） 　３　　　　NULL　　（テーブルBになくても出力） 　４　　　　NULL　　（値が全てNULLの場合、NULLとして1件出力） ------------------------------------ どのようなSQLを記載すれば実現可能でしょうか？
オラクル10ｇで開発を行っています。文字コードはJA16SJISTILDEです。 現在、テーブルの中には条件なしで様々な文字種類のデータが入っているとします。 全角ひらがな・カタカナ、半角数字・カタカナ、全半角英字・記号等です。 例えば”アイウエオ”を含む文字列を検索するselect文を実行したとき、 以下のようなものがヒットします。 ”アイウエオ” ”アイウエオ” ←半角カタカナ ”あいうえお”　←ヒットしてもしなくてもよい。 例えば”ガギグゲゴ”を含む文字列を検索するselect文を実行したとき、 以下のようなものがヒットします。 ”ガギグゲゴ” ”ガギグゲゴ” ←半角カタカナ ”がぎぐげご”　←ヒットしてもしなくてもよい。 例えば”＆”を含む文字列を検索するselect文を実行したとき、 以下のようなものがヒットします。 ”＆” ”&”←半角記号 要は、何が言いたいのかいいますと、全角文字の文字列で検索を行ったとき、 全角・半角の区別をしないで検索結果を得るＳＱＬ文を考えています。 どのようなＳＱＬにすればよいのかアドバイスをお願いします。 もし、ＳＱＬ文のみでは実現不可能であれば、●●●といった形で検索結果を 得てそのうち△△△に該当するデータを抽出するといった複数ステップを踏む 方式でも構いません。
SQLで<>を使用するとき、 Where ブランドコード <> '01'という感じで'01'以外のレコードを抽出するときに 複数の否定条件を指定するにはどうしたらいいのでしょうか？ 初歩的な質問ですみません。 Where ブランドコード <> '01' And　 ブランドコード <> '05'を一文で書きたい時の方法です。 よろしくお願いします。
ORACLE DBへ初期化していない領域のレコードを INSERTで追加した場合、どのような値のデータ（文字コード）が 格納されるのでしょうか？
nullなどの不正なデータが存在しないかどうかを、 表の全レコード（行）に対して、チェックしたいのですが、 何か簡単で良い方法はありますか？
SQLで取得可能でしょうか 今２つのテーブルがあるとします。 ---------------------- テーブル1 　KEY　　　　項目 　　1　　　テスト１ 　　2　　　テスト２ 　　3　　　テスト３ ----------------------- ---------------------- テーブル２ 　 CD　　名称　 　　1　　　か 　　1　　　き 　　2　　　さ 　　2　　　し 　　2　　　す 　　3　　　た ----------------------- テーブル1のKEYはキーで重複しません。 テーブル2のCDは重複しますが、内容はテーブル1のKEYとリンクします。 今、テーブル1のKEY1件につき、データを1件取得したいのですが、 テーブル2の名称も取得したいです。 データは1件しか取得しない為、名称は、特定文字(例として/）で 区切って取得したいです。 期待したい結果 ---------------------- 　KEY　　名称 　　1　　か/き 　　2　　さ/し/す 　　3　　た ---------------------- このような取得は可能でしょうか？ 尚、SQLの発行は1回のみで行いたいです。 よろしくお願いします。
異常？なカラムのデータについて教えて下さい。 あるテーブルを全件出してみたところ、あぁNULLデータが入っているレコードがあるなーと気づきました。 抽出データには不要だったので“カラム IS NOT NULL”をしてみたのですがNULLデータを持ったレコードが排除できません。 別の方法で “カラム = ''” とか “カラム like '%%'” なんてやってみたのですがデータがNULLになっているものが排除できません。 これは不具合なのでしょうか？
P/L SQLで値が更新されない。 次のようなプログラムを作成しましたが、ORDER_INFテーブルのKANRYO_DAYの値が更新されません。どこが間違っているのでしょうか。 BEGIN DECLARE CURSOR r_search IS SELECT * FROM ord_search_pattern; BEGIN FOR r IN r_search LOOP UPDATE ORDER_INF t1 SET t1.KANRYO_DAY = r.KANRYO_DAY WHERE t1.ORDER_NO = r.ORDER_NO; COMMIT; END LOOP; END;
SQLの作成について 以下のようなDBがあるとします。 ---------------------- DB1（マスタ） 　区分　　　フラグ　　名称 　　A　　　　1　　　　男 　　A　　　　2　　　　女 　　B　　　　1　　　　車 　　B　　　　2　　　　飛行機 　　B　　　　3　　　　電車 　　C　　　　1　　　　コンビニ 　　C　　　　2　　　　スーパー 　　C　　　　3　　　　百貨店 　　D　　　　1　　　　デスクトップ 　　D　　　　2　　　　ノート ---------------------- ----------------------- DB2 　区分1　フラグ1　名称1　・・・　区分4　フラグ4　名称4 　　A　　　2　　　　　　　　　　　D　　　　1 ----------------------- DB2の区分とフラグから、DB1を参照して 取ってきたDB1の名称をDB2に書き込みたいです。 名称の1つ毎に、SQLを発行し、それぞれ名称を取得するなら where DB1.区分=DB2.区分 and DB1.フラグ = DB2.フラグ みたいな感じでそのまま出来ると思いますが、 今は、１つのSQLでDB2の複数の名称を一気に取得したいと考えてます。 どのようなSQLが良いのでしょうか
Oracle 10g 他スキーマの参照権限をはずす方法 ユーザを２個作成したら、ユーザ名と同一のスキーマが２個できました。 デフォルトで他スキーマの参照権限がついているようです。 この権限をはずす事はできますでしょうか。 以下のSQLでははずせませんでした。 REVOKE ALL ON YAMADA.* TO TANALA;
DBMS_STATS.GATHER_DATABASE_STATSの使い方がわかりません。 PLSQLで下記のように入力して実行しましたが、１時間経っても結果が返ってきません。 　BEGIN 　　DBMS_STATS.GATHER_DATABASE_STATS ( 　　　 OPTIONS => 'GATHER' 　　　,CASCADE => TRUE 　　) ; 　END; 記述が間違っているのでしょうか？ DBMS_STATSの使い方がわかっていないのですが、プロシージャに埋め込まないとダメなものなのでしょうか？
SQLで違うテーブルの値を比較して値に差があるレコードを抽出したいのですがヒントをいただけないでしょうか。 下に例を作ってみました。（テキストに貼りなおしてもらうと見易くなると思います） ＜Aテーブル＞ A1A2A3A4A5 ------- ------- ------- ------- ---------- XXXXXXX XX1ABC32009/05/08 WWCWWCW WW2CCB12008/03/21 DDDDDDD DD1JPN52007/08/08 GGGGGGG GX9SOX21977/01/04 FFFFFFF USJNPB32001/09/11 ＜Bテーブル＞ B1B2B3B4B5 ------- ------- ------- ------- ---------- XXXXXXX XX1ibichaoshimu2002/07/05 XXXXXXX XX1takeshiokada2005/07/15 XXXXXXX XX1kamoshu1857/09/25 WWCWWCW WW2waowao2008/10/22 DDDDDDD DD1uihhh2006/06/30 DDDDDDD DD1jojoj x5xx1999/09/09 DDDDDDD DD1momohara2005/03/07 DDDDDDD DD1itaiu-2003/12/22 DDDDDDD DD1komanogoal2007/04/26 GGGGGGG GX9 damerecord2009/11/14 FFFFFFF USJ ikitai1995/08/15 FFFFFFF USJ sstebuspi2004/01/05 FFFFFFF USJ bbpp2009/08/23 A1とB1は主キー、A2とB2は副キーです。 Aテーブルの「A4」カラムにはBテーブルのレコード数を持っています。（主キー、副キーが同じものの） しかし、よくよく見るとAテーブルの「GGGGGGG」のA4には「2」のはずなのにBテーブルには実際にレコードは１つしかありません。 こういう状態になってしまっているのを割り出したいのですがどのようにA4とBテーブルで数があってないものを抽出できるでしょうか。 よろしくお願いいたします。
PLSQLで添え字を使用してフィールドの内容を取得したい。 http://okwave.jp/qa/q1862026.html 上記のページを確認しましたが、どうも回答が私が求めている内容とは 違いますのでご質問させていただきます。 PLSQLで下記のような動作を行いたいです。 下記のようなテーブル構造のテーブルがデータベースにあります。 キー、フィールド１、フィールド２・・・・フィールド５０ 特定の内容をフィールド１からフィールド５０までの値を確認する、 と言う簡単な内容なんですがVBなどで用いる フィールド名 & 添え字 などで内容を確認しようと思ったのですが、PLSQLでやるのが上手く出来ず どのようにやれば上記の内容もしくは上記に近い内容を実装できるのでしょうか・・・ 些細な事でも構いませんのでご助言頂けましたら幸いです。 Oracleのバージョンは8.1.6.0.0です。
Oracle10.2.0.4 のDATE型へのインサートについて 例えば INSERT INTO テーブル名(DATE型の項目) values(TO_DATE('20100819','YYYYMMDD')) で追加した場合、時刻は何時で入るのですか？ ご存知の方、教えて下さい！ 宜しくお願い致します
重複するレコードを調べるSQL 初歩的な質問ですみません！ 重複するレコードを調べるために以下のようなSQLを作ったのですが、 遅くて困っています。 もっと速くする方法があれば教えてください！ 異なるカテゴリーでも商品コードが重複しているものがないかを探すSQLです。 SELECT A.商品コード, A.X, B.カテゴリー FROM (SELECT COUNT(商品コード) X, 商品コード FROM テーブルA WHERE 追加年月 = 201008 GROUP BY 商品コード) A, (SELECT 商品コード, カテゴリー FROM テーブルA WHERE 追加年月 = 201008 ) B " WHERE A.X >= 2 AND B.商品コード = A.商品コード
グループ関数でソート処理は発生しないのでしょうか？ GROUP BY句でグルーピングした後にMIN関数やMAX関数などを使えばソート処理が走るような気がしますが、実行計画を確認したところソート処理が走らずに適切な値が取得できました。 データは300万件あり、インデックスは貼ってないです。 GROUP BYでソート処理は走らないものなのでしょうか？
SQLの作り方についてご教授下さい。 以下のようなDB及び条件があるとします。 ・DB ---------------------- 　No　　　フラグ　　　金額 　　1　　　　1　　　　　100 　　2　　　　0　　　　　200 　　3　　　　0　　　　　700 　　3　　　　1　　　　　500 　　3　　　　1　　　　　400 ---------------------- ・抽出条件 　フラグが1である物のみ抽出対象とします。 　同一Noについては、1件しか出力しません。その1件の決め方は 　フラグが1である事が前提で、金額が大きい物を取得します。 上記の抽出したい結果 ------------------ 　No　　　フラグ　　　金額 　　1　　　　1　　　　　100 　　3　　　　1　　　　　500 ------------------ これを取得するSQLの作成方法が分かりません。 どのように作成すれば良いでしょうか？
実行計画の「COST」と「BYTE」について教えていただきたいです。 書籍には COST・・・・CBOによって見積もられた操作コスト。 BYTE・・・・アクセスされるバイト数のCBOのアプローチによる見積もり。 と書かれていますが、いまいちピンときません。 私は、 COSTは、検索するテーブルのデータ量が多いほうがコスト値が大きくなる。 BYTEは、検索条件に合致して取得できるデータが多いほうがバイト値が大きくなる。 と思っているのですが、正しいでしょうか？
別レコードと比較条件文 下記のテーブルがあります。 ・番号1から始まり番号が2に採番されると、履歴番号に番号1が入ります。 ・履歴番号はひとつ前の番号を持ちます。 ・Aテーブルのレコード数は100以上あります。 Aテーブル ID 番号　履歴番号 A 1　NULL A 2 1 A 3 2 B 1　NULL B 2 1 B 3 2 結果として出力させたいのは、変更回数です。 ・履歴番号は実際のデータですと10桁の複雑な文字列です。 ほしい出力結果 ID 番号　履歴番号 変更回数 A 1　NULL 0 A 2 1 1 A 3 2 2 B 1　NULL 0 B 2 1 1 B 3 2 2 行いたい条件式とは、 一行目：履歴番号がNULLのときは変更回数0とする。 二行目：履歴番号が他レコードの番号と一致する場合、1を持つ。そのレコードの履歴回数がNULLなら判定終わり。 三行目：履歴番号が他レコードの番号と一致する場合、1を持つ。そのレコードの履歴番号が更に他レコードと一致する場合、2を持つ。そのレコードの履歴回数がNULLなら判定終わり。 このようにして変更回数を設定したいのですが、思いつきませんのでご教示お願いできますでしょうか。 試してみたのは、DECODE(履歴番号,'','0',番号,1) とまでためしに作りましたが、同じレコード同士の比較になってしまうため、比較できません。
